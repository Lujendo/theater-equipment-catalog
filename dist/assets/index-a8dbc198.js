var SA=Object.defineProperty;var _A=(e,t,n)=>t in e?SA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var He=(e,t,n)=>(_A(e,typeof t!="symbol"?t+"":t,n),n);function S3(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _3={exports:{}},Th={},j3={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=Symbol.for("react.element"),jA=Symbol.for("react.portal"),AA=Symbol.for("react.fragment"),kA=Symbol.for("react.strict_mode"),TA=Symbol.for("react.profiler"),DA=Symbol.for("react.provider"),IA=Symbol.for("react.context"),RA=Symbol.for("react.forward_ref"),MA=Symbol.for("react.suspense"),OA=Symbol.for("react.memo"),LA=Symbol.for("react.lazy"),Cy=Symbol.iterator;function PA(e){return e===null||typeof e!="object"?null:(e=Cy&&e[Cy]||e["@@iterator"],typeof e=="function"?e:null)}var A3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k3=Object.assign,T3={};function Ac(e,t,n){this.props=e,this.context=t,this.refs=T3,this.updater=n||A3}Ac.prototype.isReactComponent={};Ac.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ac.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function D3(){}D3.prototype=Ac.prototype;function Qx(e,t,n){this.props=e,this.context=t,this.refs=T3,this.updater=n||A3}var Xx=Qx.prototype=new D3;Xx.constructor=Qx;k3(Xx,Ac.prototype);Xx.isPureReactComponent=!0;var Ey=Array.isArray,I3=Object.prototype.hasOwnProperty,Kx={current:null},R3={key:!0,ref:!0,__self:!0,__source:!0};function M3(e,t,n){var r,a={},o=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(o=""+t.key),t)I3.call(t,r)&&!R3.hasOwnProperty(r)&&(a[r]=t[r]);var m=arguments.length-2;if(m===1)a.children=n;else if(1<m){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];a.children=v}if(e&&e.defaultProps)for(r in m=e.defaultProps,m)a[r]===void 0&&(a[r]=m[r]);return{$$typeof:yd,type:e,key:o,ref:d,props:a,_owner:Kx.current}}function FA(e,t){return{$$typeof:yd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zx(e){return typeof e=="object"&&e!==null&&e.$$typeof===yd}function BA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sy=/\/+/g;function S1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BA(""+e.key):t.toString(36)}function sf(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(o){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case yd:case jA:d=!0}}if(d)return d=e,a=a(d),e=r===""?"."+S1(d,0):r,Ey(a)?(n="",e!=null&&(n=e.replace(Sy,"$&/")+"/"),sf(a,t,n,"",function(g){return g})):a!=null&&(Zx(a)&&(a=FA(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(Sy,"$&/")+"/")+e)),t.push(a)),1;if(d=0,r=r===""?".":r+":",Ey(e))for(var m=0;m<e.length;m++){o=e[m];var v=r+S1(o,m);d+=sf(o,t,n,v,a)}else if(v=PA(e),typeof v=="function")for(e=v.call(e),m=0;!(o=e.next()).done;)o=o.value,v=r+S1(o,m++),d+=sf(o,t,n,v,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function D0(e,t,n){if(e==null)return e;var r=[],a=0;return sf(e,r,"","",function(o){return t.call(n,o,a++)}),r}function UA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yr={current:null},af={transition:null},qA={ReactCurrentDispatcher:Yr,ReactCurrentBatchConfig:af,ReactCurrentOwner:Kx};function O3(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:D0,forEach:function(e,t,n){D0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return D0(e,function(){t++}),t},toArray:function(e){return D0(e,function(t){return t})||[]},only:function(e){if(!Zx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dt.Component=Ac;Dt.Fragment=AA;Dt.Profiler=TA;Dt.PureComponent=Qx;Dt.StrictMode=kA;Dt.Suspense=MA;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA;Dt.act=O3;Dt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=k3({},e.props),a=e.key,o=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,d=Kx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(v in t)I3.call(t,v)&&!R3.hasOwnProperty(v)&&(r[v]=t[v]===void 0&&m!==void 0?m[v]:t[v])}var v=arguments.length-2;if(v===1)r.children=n;else if(1<v){m=Array(v);for(var g=0;g<v;g++)m[g]=arguments[g+2];r.children=m}return{$$typeof:yd,type:e.type,key:a,ref:o,props:r,_owner:d}};Dt.createContext=function(e){return e={$$typeof:IA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DA,_context:e},e.Consumer=e};Dt.createElement=M3;Dt.createFactory=function(e){var t=M3.bind(null,e);return t.type=e,t};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(e){return{$$typeof:RA,render:e}};Dt.isValidElement=Zx;Dt.lazy=function(e){return{$$typeof:LA,_payload:{_status:-1,_result:e},_init:UA}};Dt.memo=function(e,t){return{$$typeof:OA,type:e,compare:t===void 0?null:t}};Dt.startTransition=function(e){var t=af.transition;af.transition={};try{e()}finally{af.transition=t}};Dt.unstable_act=O3;Dt.useCallback=function(e,t){return Yr.current.useCallback(e,t)};Dt.useContext=function(e){return Yr.current.useContext(e)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(e){return Yr.current.useDeferredValue(e)};Dt.useEffect=function(e,t){return Yr.current.useEffect(e,t)};Dt.useId=function(){return Yr.current.useId()};Dt.useImperativeHandle=function(e,t,n){return Yr.current.useImperativeHandle(e,t,n)};Dt.useInsertionEffect=function(e,t){return Yr.current.useInsertionEffect(e,t)};Dt.useLayoutEffect=function(e,t){return Yr.current.useLayoutEffect(e,t)};Dt.useMemo=function(e,t){return Yr.current.useMemo(e,t)};Dt.useReducer=function(e,t,n){return Yr.current.useReducer(e,t,n)};Dt.useRef=function(e){return Yr.current.useRef(e)};Dt.useState=function(e){return Yr.current.useState(e)};Dt.useSyncExternalStore=function(e,t,n){return Yr.current.useSyncExternalStore(e,t,n)};Dt.useTransition=function(){return Yr.current.useTransition()};Dt.version="18.3.1";j3.exports=Dt;var L=j3.exports;const he=kh(L),Jx=S3({__proto__:null,default:he},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA=L,WA=Symbol.for("react.element"),HA=Symbol.for("react.fragment"),VA=Object.prototype.hasOwnProperty,YA=zA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$A={key:!0,ref:!0,__self:!0,__source:!0};function L3(e,t,n){var r,a={},o=null,d=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)VA.call(t,r)&&!$A.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:WA,type:e,key:o,ref:d,props:a,_owner:YA.current}}Th.Fragment=HA;Th.jsx=L3;Th.jsxs=L3;_3.exports=Th;var s=_3.exports,xm={},P3={exports:{}},_s={},F3={exports:{}},B3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(de,fe){var Be=de.length;de.push(fe);e:for(;0<Be;){var Ye=Be-1>>>1,Je=de[Ye];if(0<a(Je,fe))de[Ye]=fe,de[Be]=Je,Be=Ye;else break e}}function n(de){return de.length===0?null:de[0]}function r(de){if(de.length===0)return null;var fe=de[0],Be=de.pop();if(Be!==fe){de[0]=Be;e:for(var Ye=0,Je=de.length,Te=Je>>>1;Ye<Te;){var $e=2*(Ye+1)-1,nt=de[$e],De=$e+1,Oe=de[De];if(0>a(nt,Be))De<Je&&0>a(Oe,nt)?(de[Ye]=Oe,de[De]=Be,Ye=De):(de[Ye]=nt,de[$e]=Be,Ye=$e);else if(De<Je&&0>a(Oe,Be))de[Ye]=Oe,de[De]=Be,Ye=De;else break e}}return fe}function a(de,fe){var Be=de.sortIndex-fe.sortIndex;return Be!==0?Be:de.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var v=[],g=[],w=1,N=null,S=3,j=!1,k=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(de){for(var fe=n(g);fe!==null;){if(fe.callback===null)r(g);else if(fe.startTime<=de)r(g),fe.sortIndex=fe.expirationTime,t(v,fe);else break;fe=n(g)}}function B(de){if(R=!1,M(de),!k)if(n(v)!==null)k=!0,Ae(G);else{var fe=n(g);fe!==null&&me(B,fe.startTime-de)}}function G(de,fe){k=!1,R&&(R=!1,I(V),V=-1),j=!0;var Be=S;try{for(M(fe),N=n(v);N!==null&&(!(N.expirationTime>fe)||de&&!ce());){var Ye=N.callback;if(typeof Ye=="function"){N.callback=null,S=N.priorityLevel;var Je=Ye(N.expirationTime<=fe);fe=e.unstable_now(),typeof Je=="function"?N.callback=Je:N===n(v)&&r(v),M(fe)}else r(v);N=n(v)}if(N!==null)var Te=!0;else{var $e=n(g);$e!==null&&me(B,$e.startTime-fe),Te=!1}return Te}finally{N=null,S=Be,j=!1}}var P=!1,O=null,V=-1,W=5,ee=-1;function ce(){return!(e.unstable_now()-ee<W)}function ne(){if(O!==null){var de=e.unstable_now();ee=de;var fe=!0;try{fe=O(!0,de)}finally{fe?te():(P=!1,O=null)}}else P=!1}var te;if(typeof A=="function")te=function(){A(ne)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,ae=Ne.port2;Ne.port1.onmessage=ne,te=function(){ae.postMessage(null)}}else te=function(){T(ne,0)};function Ae(de){O=de,P||(P=!0,te())}function me(de,fe){V=T(function(){de(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(de){de.callback=null},e.unstable_continueExecution=function(){k||j||(k=!0,Ae(G))},e.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<de?Math.floor(1e3/de):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(de){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var Be=S;S=fe;try{return de()}finally{S=Be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(de,fe){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Be=S;S=de;try{return fe()}finally{S=Be}},e.unstable_scheduleCallback=function(de,fe,Be){var Ye=e.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?Ye+Be:Ye):Be=Ye,de){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=Be+Je,de={id:w++,callback:fe,priorityLevel:de,startTime:Be,expirationTime:Je,sortIndex:-1},Be>Ye?(de.sortIndex=Be,t(g,de),n(v)===null&&de===n(g)&&(R?(I(V),V=-1):R=!0,me(B,Be-Ye))):(de.sortIndex=Je,t(v,de),k||j||(k=!0,Ae(G))),de},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(de){var fe=S;return function(){var Be=S;S=fe;try{return de.apply(this,arguments)}finally{S=Be}}}})(B3);F3.exports=B3;var GA=F3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA=L,Ss=GA;function Le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U3=new Set,Vu={};function xl(e,t){dc(e,t),dc(e+"Capture",t)}function dc(e,t){for(Vu[e]=t,e=0;e<t.length;e++)U3.add(t[e])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gm=Object.prototype.hasOwnProperty,XA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_y={},jy={};function KA(e){return gm.call(jy,e)?!0:gm.call(_y,e)?!1:XA.test(e)?jy[e]=!0:(_y[e]=!0,!1)}function ZA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JA(e,t,n,r){if(t===null||typeof t>"u"||ZA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $r(e,t,n,r,a,o,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=d}var br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){br[e]=new $r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];br[t]=new $r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){br[e]=new $r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){br[e]=new $r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){br[e]=new $r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){br[e]=new $r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){br[e]=new $r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){br[e]=new $r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){br[e]=new $r(e,5,!1,e.toLowerCase(),null,!1,!1)});var eg=/[\-:]([a-z])/g;function tg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eg,tg);br[t]=new $r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eg,tg);br[t]=new $r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eg,tg);br[t]=new $r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){br[e]=new $r(e,1,!1,e.toLowerCase(),null,!1,!1)});br.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){br[e]=new $r(e,1,!1,e.toLowerCase(),null,!0,!0)});function ng(e,t,n,r){var a=br.hasOwnProperty(t)?br[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JA(t,n,a,r)&&(n=null),r||a===null?KA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ei=QA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I0=Symbol.for("react.element"),zl=Symbol.for("react.portal"),Wl=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),q3=Symbol.for("react.provider"),z3=Symbol.for("react.context"),sg=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),wm=Symbol.for("react.suspense_list"),ag=Symbol.for("react.memo"),Wi=Symbol.for("react.lazy"),W3=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function xu(e){return e===null||typeof e!="object"?null:(e=Ay&&e[Ay]||e["@@iterator"],typeof e=="function"?e:null)}var Mn=Object.assign,_1;function ku(e){if(_1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_1=t&&t[1]||""}return`
`+_1+e}var j1=!1;function A1(e,t){if(!e||j1)return"";j1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var r=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){r=g}e.call(t.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var a=g.stack.split(`
`),o=r.stack.split(`
`),d=a.length-1,m=o.length-1;1<=d&&0<=m&&a[d]!==o[m];)m--;for(;1<=d&&0<=m;d--,m--)if(a[d]!==o[m]){if(d!==1||m!==1)do if(d--,m--,0>m||a[d]!==o[m]){var v=`
`+a[d].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=d&&0<=m);break}}}finally{j1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ku(e):""}function ek(e){switch(e.tag){case 5:return ku(e.type);case 16:return ku("Lazy");case 13:return ku("Suspense");case 19:return ku("SuspenseList");case 0:case 2:case 15:return e=A1(e.type,!1),e;case 11:return e=A1(e.type.render,!1),e;case 1:return e=A1(e.type,!0),e;default:return""}}function bm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wl:return"Fragment";case zl:return"Portal";case vm:return"Profiler";case rg:return"StrictMode";case ym:return"Suspense";case wm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z3:return(e.displayName||"Context")+".Consumer";case q3:return(e._context.displayName||"Context")+".Provider";case sg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ag:return t=e.displayName||null,t!==null?t:bm(e.type)||"Memo";case Wi:t=e._payload,e=e._init;try{return bm(e(t))}catch{}}return null}function tk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bm(t);case 8:return t===rg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function uo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function H3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nk(e){var t=H3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){r=""+d,o.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function R0(e){e._valueTracker||(e._valueTracker=nk(e))}function V3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function kf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Nm(e,t){var n=t.checked;return Mn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ky(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=uo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Y3(e,t){t=t.checked,t!=null&&ng(e,"checked",t,!1)}function Cm(e,t){Y3(e,t);var n=uo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Em(e,t.type,n):t.hasOwnProperty("defaultValue")&&Em(e,t.type,uo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ty(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Em(e,t,n){(t!=="number"||kf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Tu=Array.isArray;function rc(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+uo(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Sm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Mn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Le(92));if(Tu(n)){if(1<n.length)throw Error(Le(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:uo(n)}}function $3(e,t){var n=uo(t.value),r=uo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Iy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function G3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _m(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?G3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var M0,Q3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(M0=M0||document.createElement("div"),M0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=M0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rk=["Webkit","ms","Moz","O"];Object.keys(Ou).forEach(function(e){rk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ou[t]=Ou[e]})});function X3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ou.hasOwnProperty(e)&&Ou[e]?(""+t).trim():t+"px"}function K3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=X3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var sk=Mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jm(e,t){if(t){if(sk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Le(62))}}function Am(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var km=null;function ig(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tm=null,sc=null,ac=null;function Ry(e){if(e=Nd(e)){if(typeof Tm!="function")throw Error(Le(280));var t=e.stateNode;t&&(t=Oh(t),Tm(e.stateNode,e.type,t))}}function Z3(e){sc?ac?ac.push(e):ac=[e]:sc=e}function J3(){if(sc){var e=sc,t=ac;if(ac=sc=null,Ry(e),t)for(e=0;e<t.length;e++)Ry(t[e])}}function e4(e,t){return e(t)}function t4(){}var k1=!1;function n4(e,t,n){if(k1)return e(t,n);k1=!0;try{return e4(e,t,n)}finally{k1=!1,(sc!==null||ac!==null)&&(t4(),J3())}}function $u(e,t){var n=e.stateNode;if(n===null)return null;var r=Oh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Le(231,t,typeof n));return n}var Dm=!1;if(xi)try{var gu={};Object.defineProperty(gu,"passive",{get:function(){Dm=!0}}),window.addEventListener("test",gu,gu),window.removeEventListener("test",gu,gu)}catch{Dm=!1}function ak(e,t,n,r,a,o,d,m,v){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(w){this.onError(w)}}var Lu=!1,Tf=null,Df=!1,Im=null,ik={onError:function(e){Lu=!0,Tf=e}};function ok(e,t,n,r,a,o,d,m,v){Lu=!1,Tf=null,ak.apply(ik,arguments)}function lk(e,t,n,r,a,o,d,m,v){if(ok.apply(this,arguments),Lu){if(Lu){var g=Tf;Lu=!1,Tf=null}else throw Error(Le(198));Df||(Df=!0,Im=g)}}function gl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function r4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function My(e){if(gl(e)!==e)throw Error(Le(188))}function ck(e){var t=e.alternate;if(!t){if(t=gl(e),t===null)throw Error(Le(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return My(a),e;if(o===r)return My(a),t;o=o.sibling}throw Error(Le(188))}if(n.return!==r.return)n=a,r=o;else{for(var d=!1,m=a.child;m;){if(m===n){d=!0,n=a,r=o;break}if(m===r){d=!0,r=a,n=o;break}m=m.sibling}if(!d){for(m=o.child;m;){if(m===n){d=!0,n=o,r=a;break}if(m===r){d=!0,r=o,n=a;break}m=m.sibling}if(!d)throw Error(Le(189))}}if(n.alternate!==r)throw Error(Le(190))}if(n.tag!==3)throw Error(Le(188));return n.stateNode.current===n?e:t}function s4(e){return e=ck(e),e!==null?a4(e):null}function a4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=a4(e);if(t!==null)return t;e=e.sibling}return null}var i4=Ss.unstable_scheduleCallback,Oy=Ss.unstable_cancelCallback,uk=Ss.unstable_shouldYield,dk=Ss.unstable_requestPaint,$n=Ss.unstable_now,fk=Ss.unstable_getCurrentPriorityLevel,og=Ss.unstable_ImmediatePriority,o4=Ss.unstable_UserBlockingPriority,If=Ss.unstable_NormalPriority,hk=Ss.unstable_LowPriority,l4=Ss.unstable_IdlePriority,Dh=null,Ma=null;function pk(e){if(Ma&&typeof Ma.onCommitFiberRoot=="function")try{Ma.onCommitFiberRoot(Dh,e,void 0,(e.current.flags&128)===128)}catch{}}var ca=Math.clz32?Math.clz32:gk,mk=Math.log,xk=Math.LN2;function gk(e){return e>>>=0,e===0?32:31-(mk(e)/xk|0)|0}var O0=64,L0=4194304;function Du(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,d=n&268435455;if(d!==0){var m=d&~a;m!==0?r=Du(m):(o&=d,o!==0&&(r=Du(o)))}else d=n&~a,d!==0?r=Du(d):o!==0&&(r=Du(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ca(t),a=1<<n,r|=e[n],t&=~a;return r}function vk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var d=31-ca(o),m=1<<d,v=a[d];v===-1?(!(m&n)||m&r)&&(a[d]=vk(m,t)):v<=t&&(e.expiredLanes|=m),o&=~m}}function Rm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function c4(){var e=O0;return O0<<=1,!(O0&4194240)&&(O0=64),e}function T1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wd(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ca(t),e[t]=n}function wk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ca(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function lg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ca(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var on=0;function u4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var d4,cg,f4,h4,p4,Mm=!1,P0=[],Ji=null,eo=null,to=null,Gu=new Map,Qu=new Map,Yi=[],bk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ly(e,t){switch(e){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Gu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(t.pointerId)}}function vu(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Nd(t),t!==null&&cg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Nk(e,t,n,r,a){switch(t){case"focusin":return Ji=vu(Ji,e,t,n,r,a),!0;case"dragenter":return eo=vu(eo,e,t,n,r,a),!0;case"mouseover":return to=vu(to,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Gu.set(o,vu(Gu.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Qu.set(o,vu(Qu.get(o)||null,e,t,n,r,a)),!0}return!1}function m4(e){var t=Go(e.target);if(t!==null){var n=gl(t);if(n!==null){if(t=n.tag,t===13){if(t=r4(n),t!==null){e.blockedOn=t,p4(e.priority,function(){f4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function of(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Om(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);km=r,n.target.dispatchEvent(r),km=null}else return t=Nd(n),t!==null&&cg(t),e.blockedOn=n,!1;t.shift()}return!0}function Py(e,t,n){of(e)&&n.delete(t)}function Ck(){Mm=!1,Ji!==null&&of(Ji)&&(Ji=null),eo!==null&&of(eo)&&(eo=null),to!==null&&of(to)&&(to=null),Gu.forEach(Py),Qu.forEach(Py)}function yu(e,t){e.blockedOn===t&&(e.blockedOn=null,Mm||(Mm=!0,Ss.unstable_scheduleCallback(Ss.unstable_NormalPriority,Ck)))}function Xu(e){function t(a){return yu(a,e)}if(0<P0.length){yu(P0[0],e);for(var n=1;n<P0.length;n++){var r=P0[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ji!==null&&yu(Ji,e),eo!==null&&yu(eo,e),to!==null&&yu(to,e),Gu.forEach(t),Qu.forEach(t),n=0;n<Yi.length;n++)r=Yi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)m4(n),n.blockedOn===null&&Yi.shift()}var ic=Ei.ReactCurrentBatchConfig,Mf=!0;function Ek(e,t,n,r){var a=on,o=ic.transition;ic.transition=null;try{on=1,ug(e,t,n,r)}finally{on=a,ic.transition=o}}function Sk(e,t,n,r){var a=on,o=ic.transition;ic.transition=null;try{on=4,ug(e,t,n,r)}finally{on=a,ic.transition=o}}function ug(e,t,n,r){if(Mf){var a=Om(e,t,n,r);if(a===null)U1(e,t,r,Of,n),Ly(e,r);else if(Nk(a,e,t,n,r))r.stopPropagation();else if(Ly(e,r),t&4&&-1<bk.indexOf(e)){for(;a!==null;){var o=Nd(a);if(o!==null&&d4(o),o=Om(e,t,n,r),o===null&&U1(e,t,r,Of,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else U1(e,t,r,null,n)}}var Of=null;function Om(e,t,n,r){if(Of=null,e=ig(r),e=Go(e),e!==null)if(t=gl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=r4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Of=e,null}function x4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fk()){case og:return 1;case o4:return 4;case If:case hk:return 16;case l4:return 536870912;default:return 16}default:return 16}}var Qi=null,dg=null,lf=null;function g4(){if(lf)return lf;var e,t=dg,n=t.length,r,a="value"in Qi?Qi.value:Qi.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===a[o-r];r++);return lf=a.slice(e,1<r?1-r:void 0)}function cf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function F0(){return!0}function Fy(){return!1}function js(e){function t(n,r,a,o,d){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(n=e[m],this[m]=n?n(o):o[m]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?F0:Fy,this.isPropagationStopped=Fy,this}return Mn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=F0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=F0)},persist:function(){},isPersistent:F0}),t}var kc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=js(kc),bd=Mn({},kc,{view:0,detail:0}),_k=js(bd),D1,I1,wu,Ih=Mn({},bd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wu&&(wu&&e.type==="mousemove"?(D1=e.screenX-wu.screenX,I1=e.screenY-wu.screenY):I1=D1=0,wu=e),D1)},movementY:function(e){return"movementY"in e?e.movementY:I1}}),By=js(Ih),jk=Mn({},Ih,{dataTransfer:0}),Ak=js(jk),kk=Mn({},bd,{relatedTarget:0}),R1=js(kk),Tk=Mn({},kc,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=js(Tk),Ik=Mn({},kc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rk=js(Ik),Mk=Mn({},kc,{data:0}),Uy=js(Mk),Ok={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pk[e])?!!t[e]:!1}function hg(){return Fk}var Bk=Mn({},bd,{key:function(e){if(e.key){var t=Ok[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hg,charCode:function(e){return e.type==="keypress"?cf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Uk=js(Bk),qk=Mn({},Ih,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=js(qk),zk=Mn({},bd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hg}),Wk=js(zk),Hk=Mn({},kc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vk=js(Hk),Yk=Mn({},Ih,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$k=js(Yk),Gk=[9,13,27,32],pg=xi&&"CompositionEvent"in window,Pu=null;xi&&"documentMode"in document&&(Pu=document.documentMode);var Qk=xi&&"TextEvent"in window&&!Pu,v4=xi&&(!pg||Pu&&8<Pu&&11>=Pu),zy=String.fromCharCode(32),Wy=!1;function y4(e,t){switch(e){case"keyup":return Gk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hl=!1;function Xk(e,t){switch(e){case"compositionend":return w4(t);case"keypress":return t.which!==32?null:(Wy=!0,zy);case"textInput":return e=t.data,e===zy&&Wy?null:e;default:return null}}function Kk(e,t){if(Hl)return e==="compositionend"||!pg&&y4(e,t)?(e=g4(),lf=dg=Qi=null,Hl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return v4&&t.locale!=="ko"?null:t.data;default:return null}}var Zk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zk[e.type]:t==="textarea"}function b4(e,t,n,r){Z3(r),t=Lf(t,"onChange"),0<t.length&&(n=new fg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fu=null,Ku=null;function Jk(e){I4(e,0)}function Rh(e){var t=$l(e);if(V3(t))return e}function eT(e,t){if(e==="change")return t}var N4=!1;if(xi){var M1;if(xi){var O1="oninput"in document;if(!O1){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),O1=typeof Vy.oninput=="function"}M1=O1}else M1=!1;N4=M1&&(!document.documentMode||9<document.documentMode)}function Yy(){Fu&&(Fu.detachEvent("onpropertychange",C4),Ku=Fu=null)}function C4(e){if(e.propertyName==="value"&&Rh(Ku)){var t=[];b4(t,Ku,e,ig(e)),n4(Jk,t)}}function tT(e,t,n){e==="focusin"?(Yy(),Fu=t,Ku=n,Fu.attachEvent("onpropertychange",C4)):e==="focusout"&&Yy()}function nT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rh(Ku)}function rT(e,t){if(e==="click")return Rh(t)}function sT(e,t){if(e==="input"||e==="change")return Rh(t)}function aT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ha=typeof Object.is=="function"?Object.is:aT;function Zu(e,t){if(ha(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!gm.call(t,a)||!ha(e[a],t[a]))return!1}return!0}function $y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gy(e,t){var n=$y(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$y(n)}}function E4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?E4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function S4(){for(var e=window,t=kf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=kf(e.document)}return t}function mg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iT(e){var t=S4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&E4(n.ownerDocument.documentElement,n)){if(r!==null&&mg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=Gy(n,o);var d=Gy(n,r);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oT=xi&&"documentMode"in document&&11>=document.documentMode,Vl=null,Lm=null,Bu=null,Pm=!1;function Qy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pm||Vl==null||Vl!==kf(r)||(r=Vl,"selectionStart"in r&&mg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bu&&Zu(Bu,r)||(Bu=r,r=Lf(Lm,"onSelect"),0<r.length&&(t=new fg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vl)))}function B0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yl={animationend:B0("Animation","AnimationEnd"),animationiteration:B0("Animation","AnimationIteration"),animationstart:B0("Animation","AnimationStart"),transitionend:B0("Transition","TransitionEnd")},L1={},_4={};xi&&(_4=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function Mh(e){if(L1[e])return L1[e];if(!Yl[e])return e;var t=Yl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _4)return L1[e]=t[n];return e}var j4=Mh("animationend"),A4=Mh("animationiteration"),k4=Mh("animationstart"),T4=Mh("transitionend"),D4=new Map,Xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mo(e,t){D4.set(e,t),xl(t,[e])}for(var P1=0;P1<Xy.length;P1++){var F1=Xy[P1],lT=F1.toLowerCase(),cT=F1[0].toUpperCase()+F1.slice(1);mo(lT,"on"+cT)}mo(j4,"onAnimationEnd");mo(A4,"onAnimationIteration");mo(k4,"onAnimationStart");mo("dblclick","onDoubleClick");mo("focusin","onFocus");mo("focusout","onBlur");mo(T4,"onTransitionEnd");dc("onMouseEnter",["mouseout","mouseover"]);dc("onMouseLeave",["mouseout","mouseover"]);dc("onPointerEnter",["pointerout","pointerover"]);dc("onPointerLeave",["pointerout","pointerover"]);xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Iu));function Ky(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lk(r,t,void 0,e),e.currentTarget=null}function I4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var d=r.length-1;0<=d;d--){var m=r[d],v=m.instance,g=m.currentTarget;if(m=m.listener,v!==o&&a.isPropagationStopped())break e;Ky(a,m,g),o=v}else for(d=0;d<r.length;d++){if(m=r[d],v=m.instance,g=m.currentTarget,m=m.listener,v!==o&&a.isPropagationStopped())break e;Ky(a,m,g),o=v}}}if(Df)throw e=Im,Df=!1,Im=null,e}function yn(e,t){var n=t[zm];n===void 0&&(n=t[zm]=new Set);var r=e+"__bubble";n.has(r)||(R4(t,e,2,!1),n.add(r))}function B1(e,t,n){var r=0;t&&(r|=4),R4(n,e,r,t)}var U0="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[U0]){e[U0]=!0,U3.forEach(function(n){n!=="selectionchange"&&(uT.has(n)||B1(n,!1,e),B1(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[U0]||(t[U0]=!0,B1("selectionchange",!1,t))}}function R4(e,t,n,r){switch(x4(t)){case 1:var a=Ek;break;case 4:a=Sk;break;default:a=ug}n=a.bind(null,t,n,e),a=void 0,!Dm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function U1(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var m=r.stateNode.containerInfo;if(m===a||m.nodeType===8&&m.parentNode===a)break;if(d===4)for(d=r.return;d!==null;){var v=d.tag;if((v===3||v===4)&&(v=d.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;d=d.return}for(;m!==null;){if(d=Go(m),d===null)return;if(v=d.tag,v===5||v===6){r=o=d;continue e}m=m.parentNode}}r=r.return}n4(function(){var g=o,w=ig(n),N=[];e:{var S=D4.get(e);if(S!==void 0){var j=fg,k=e;switch(e){case"keypress":if(cf(n)===0)break e;case"keydown":case"keyup":j=Uk;break;case"focusin":k="focus",j=R1;break;case"focusout":k="blur",j=R1;break;case"beforeblur":case"afterblur":j=R1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=By;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Wk;break;case j4:case A4:case k4:j=Dk;break;case T4:j=Vk;break;case"scroll":j=_k;break;case"wheel":j=$k;break;case"copy":case"cut":case"paste":j=Rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=qy}var R=(t&4)!==0,T=!R&&e==="scroll",I=R?S!==null?S+"Capture":null:S;R=[];for(var A=g,M;A!==null;){M=A;var B=M.stateNode;if(M.tag===5&&B!==null&&(M=B,I!==null&&(B=$u(A,I),B!=null&&R.push(ed(A,B,M)))),T)break;A=A.return}0<R.length&&(S=new j(S,k,null,n,w),N.push({event:S,listeners:R}))}}if(!(t&7)){e:{if(S=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",S&&n!==km&&(k=n.relatedTarget||n.fromElement)&&(Go(k)||k[gi]))break e;if((j||S)&&(S=w.window===w?w:(S=w.ownerDocument)?S.defaultView||S.parentWindow:window,j?(k=n.relatedTarget||n.toElement,j=g,k=k?Go(k):null,k!==null&&(T=gl(k),k!==T||k.tag!==5&&k.tag!==6)&&(k=null)):(j=null,k=g),j!==k)){if(R=By,B="onMouseLeave",I="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(R=qy,B="onPointerLeave",I="onPointerEnter",A="pointer"),T=j==null?S:$l(j),M=k==null?S:$l(k),S=new R(B,A+"leave",j,n,w),S.target=T,S.relatedTarget=M,B=null,Go(w)===g&&(R=new R(I,A+"enter",k,n,w),R.target=M,R.relatedTarget=T,B=R),T=B,j&&k)t:{for(R=j,I=k,A=0,M=R;M;M=Bl(M))A++;for(M=0,B=I;B;B=Bl(B))M++;for(;0<A-M;)R=Bl(R),A--;for(;0<M-A;)I=Bl(I),M--;for(;A--;){if(R===I||I!==null&&R===I.alternate)break t;R=Bl(R),I=Bl(I)}R=null}else R=null;j!==null&&Zy(N,S,j,R,!1),k!==null&&T!==null&&Zy(N,T,k,R,!0)}}e:{if(S=g?$l(g):window,j=S.nodeName&&S.nodeName.toLowerCase(),j==="select"||j==="input"&&S.type==="file")var G=eT;else if(Hy(S))if(N4)G=sT;else{G=nT;var P=tT}else(j=S.nodeName)&&j.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(G=rT);if(G&&(G=G(e,g))){b4(N,G,n,w);break e}P&&P(e,S,g),e==="focusout"&&(P=S._wrapperState)&&P.controlled&&S.type==="number"&&Em(S,"number",S.value)}switch(P=g?$l(g):window,e){case"focusin":(Hy(P)||P.contentEditable==="true")&&(Vl=P,Lm=g,Bu=null);break;case"focusout":Bu=Lm=Vl=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,Qy(N,n,w);break;case"selectionchange":if(oT)break;case"keydown":case"keyup":Qy(N,n,w)}var O;if(pg)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Hl?y4(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(v4&&n.locale!=="ko"&&(Hl||V!=="onCompositionStart"?V==="onCompositionEnd"&&Hl&&(O=g4()):(Qi=w,dg="value"in Qi?Qi.value:Qi.textContent,Hl=!0)),P=Lf(g,V),0<P.length&&(V=new Uy(V,e,null,n,w),N.push({event:V,listeners:P}),O?V.data=O:(O=w4(n),O!==null&&(V.data=O)))),(O=Qk?Xk(e,n):Kk(e,n))&&(g=Lf(g,"onBeforeInput"),0<g.length&&(w=new Uy("onBeforeInput","beforeinput",null,n,w),N.push({event:w,listeners:g}),w.data=O))}I4(N,t)})}function ed(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lf(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=$u(e,n),o!=null&&r.unshift(ed(e,o,a)),o=$u(e,t),o!=null&&r.push(ed(e,o,a))),e=e.return}return r}function Bl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zy(e,t,n,r,a){for(var o=t._reactName,d=[];n!==null&&n!==r;){var m=n,v=m.alternate,g=m.stateNode;if(v!==null&&v===r)break;m.tag===5&&g!==null&&(m=g,a?(v=$u(n,o),v!=null&&d.unshift(ed(n,v,m))):a||(v=$u(n,o),v!=null&&d.push(ed(n,v,m)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var dT=/\r\n?/g,fT=/\u0000|\uFFFD/g;function Jy(e){return(typeof e=="string"?e:""+e).replace(dT,`
`).replace(fT,"")}function q0(e,t,n){if(t=Jy(t),Jy(e)!==t&&n)throw Error(Le(425))}function Pf(){}var Fm=null,Bm=null;function Um(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qm=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,ew=typeof Promise=="function"?Promise:void 0,pT=typeof queueMicrotask=="function"?queueMicrotask:typeof ew<"u"?function(e){return ew.resolve(null).then(e).catch(mT)}:qm;function mT(e){setTimeout(function(){throw e})}function q1(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Xu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Xu(t)}function no(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Tc=Math.random().toString(36).slice(2),ka="__reactFiber$"+Tc,td="__reactProps$"+Tc,gi="__reactContainer$"+Tc,zm="__reactEvents$"+Tc,xT="__reactListeners$"+Tc,gT="__reactHandles$"+Tc;function Go(e){var t=e[ka];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[ka]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tw(e);e!==null;){if(n=e[ka])return n;e=tw(e)}return t}e=n,n=e.parentNode}return null}function Nd(e){return e=e[ka]||e[gi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $l(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Le(33))}function Oh(e){return e[td]||null}var Wm=[],Gl=-1;function xo(e){return{current:e}}function bn(e){0>Gl||(e.current=Wm[Gl],Wm[Gl]=null,Gl--)}function xn(e,t){Gl++,Wm[Gl]=e.current,e.current=t}var fo={},Or=xo(fo),rs=xo(!1),il=fo;function fc(e,t){var n=e.type.contextTypes;if(!n)return fo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ss(e){return e=e.childContextTypes,e!=null}function Ff(){bn(rs),bn(Or)}function nw(e,t,n){if(Or.current!==fo)throw Error(Le(168));xn(Or,t),xn(rs,n)}function M4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Le(108,tk(e)||"Unknown",a));return Mn({},n,r)}function Bf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fo,il=Or.current,xn(Or,e),xn(rs,rs.current),!0}function rw(e,t,n){var r=e.stateNode;if(!r)throw Error(Le(169));n?(e=M4(e,t,il),r.__reactInternalMemoizedMergedChildContext=e,bn(rs),bn(Or),xn(Or,e)):bn(rs),xn(rs,n)}var oi=null,Lh=!1,z1=!1;function O4(e){oi===null?oi=[e]:oi.push(e)}function vT(e){Lh=!0,O4(e)}function go(){if(!z1&&oi!==null){z1=!0;var e=0,t=on;try{var n=oi;for(on=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}oi=null,Lh=!1}catch(a){throw oi!==null&&(oi=oi.slice(e+1)),i4(og,go),a}finally{on=t,z1=!1}}return null}var Ql=[],Xl=0,Uf=null,qf=0,Ws=[],Hs=0,ol=null,li=1,ci="";function Ho(e,t){Ql[Xl++]=qf,Ql[Xl++]=Uf,Uf=e,qf=t}function L4(e,t,n){Ws[Hs++]=li,Ws[Hs++]=ci,Ws[Hs++]=ol,ol=e;var r=li;e=ci;var a=32-ca(r)-1;r&=~(1<<a),n+=1;var o=32-ca(t)+a;if(30<o){var d=a-a%5;o=(r&(1<<d)-1).toString(32),r>>=d,a-=d,li=1<<32-ca(t)+a|n<<a|r,ci=o+e}else li=1<<o|n<<a|r,ci=e}function xg(e){e.return!==null&&(Ho(e,1),L4(e,1,0))}function gg(e){for(;e===Uf;)Uf=Ql[--Xl],Ql[Xl]=null,qf=Ql[--Xl],Ql[Xl]=null;for(;e===ol;)ol=Ws[--Hs],Ws[Hs]=null,ci=Ws[--Hs],Ws[Hs]=null,li=Ws[--Hs],Ws[Hs]=null}var Cs=null,bs=null,_n=!1,la=null;function P4(e,t){var n=Ys(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cs=e,bs=no(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cs=e,bs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ol!==null?{id:li,overflow:ci}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ys(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Cs=e,bs=null,!0):!1;default:return!1}}function Hm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vm(e){if(_n){var t=bs;if(t){var n=t;if(!sw(e,t)){if(Hm(e))throw Error(Le(418));t=no(n.nextSibling);var r=Cs;t&&sw(e,t)?P4(r,n):(e.flags=e.flags&-4097|2,_n=!1,Cs=e)}}else{if(Hm(e))throw Error(Le(418));e.flags=e.flags&-4097|2,_n=!1,Cs=e}}}function aw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cs=e}function z0(e){if(e!==Cs)return!1;if(!_n)return aw(e),_n=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Um(e.type,e.memoizedProps)),t&&(t=bs)){if(Hm(e))throw F4(),Error(Le(418));for(;t;)P4(e,t),t=no(t.nextSibling)}if(aw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bs=no(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bs=null}}else bs=Cs?no(e.stateNode.nextSibling):null;return!0}function F4(){for(var e=bs;e;)e=no(e.nextSibling)}function hc(){bs=Cs=null,_n=!1}function vg(e){la===null?la=[e]:la.push(e)}var yT=Ei.ReactCurrentBatchConfig;function bu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Le(309));var r=n.stateNode}if(!r)throw Error(Le(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(d){var m=a.refs;d===null?delete m[o]:m[o]=d},t._stringRef=o,t)}if(typeof e!="string")throw Error(Le(284));if(!n._owner)throw Error(Le(290,e))}return e}function W0(e,t){throw e=Object.prototype.toString.call(t),Error(Le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function iw(e){var t=e._init;return t(e._payload)}function B4(e){function t(I,A){if(e){var M=I.deletions;M===null?(I.deletions=[A],I.flags|=16):M.push(A)}}function n(I,A){if(!e)return null;for(;A!==null;)t(I,A),A=A.sibling;return null}function r(I,A){for(I=new Map;A!==null;)A.key!==null?I.set(A.key,A):I.set(A.index,A),A=A.sibling;return I}function a(I,A){return I=io(I,A),I.index=0,I.sibling=null,I}function o(I,A,M){return I.index=M,e?(M=I.alternate,M!==null?(M=M.index,M<A?(I.flags|=2,A):M):(I.flags|=2,A)):(I.flags|=1048576,A)}function d(I){return e&&I.alternate===null&&(I.flags|=2),I}function m(I,A,M,B){return A===null||A.tag!==6?(A=Q1(M,I.mode,B),A.return=I,A):(A=a(A,M),A.return=I,A)}function v(I,A,M,B){var G=M.type;return G===Wl?w(I,A,M.props.children,B,M.key):A!==null&&(A.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Wi&&iw(G)===A.type)?(B=a(A,M.props),B.ref=bu(I,A,M),B.return=I,B):(B=xf(M.type,M.key,M.props,null,I.mode,B),B.ref=bu(I,A,M),B.return=I,B)}function g(I,A,M,B){return A===null||A.tag!==4||A.stateNode.containerInfo!==M.containerInfo||A.stateNode.implementation!==M.implementation?(A=X1(M,I.mode,B),A.return=I,A):(A=a(A,M.children||[]),A.return=I,A)}function w(I,A,M,B,G){return A===null||A.tag!==7?(A=nl(M,I.mode,B,G),A.return=I,A):(A=a(A,M),A.return=I,A)}function N(I,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Q1(""+A,I.mode,M),A.return=I,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case I0:return M=xf(A.type,A.key,A.props,null,I.mode,M),M.ref=bu(I,null,A),M.return=I,M;case zl:return A=X1(A,I.mode,M),A.return=I,A;case Wi:var B=A._init;return N(I,B(A._payload),M)}if(Tu(A)||xu(A))return A=nl(A,I.mode,M,null),A.return=I,A;W0(I,A)}return null}function S(I,A,M,B){var G=A!==null?A.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return G!==null?null:m(I,A,""+M,B);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case I0:return M.key===G?v(I,A,M,B):null;case zl:return M.key===G?g(I,A,M,B):null;case Wi:return G=M._init,S(I,A,G(M._payload),B)}if(Tu(M)||xu(M))return G!==null?null:w(I,A,M,B,null);W0(I,M)}return null}function j(I,A,M,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return I=I.get(M)||null,m(A,I,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I0:return I=I.get(B.key===null?M:B.key)||null,v(A,I,B,G);case zl:return I=I.get(B.key===null?M:B.key)||null,g(A,I,B,G);case Wi:var P=B._init;return j(I,A,M,P(B._payload),G)}if(Tu(B)||xu(B))return I=I.get(M)||null,w(A,I,B,G,null);W0(A,B)}return null}function k(I,A,M,B){for(var G=null,P=null,O=A,V=A=0,W=null;O!==null&&V<M.length;V++){O.index>V?(W=O,O=null):W=O.sibling;var ee=S(I,O,M[V],B);if(ee===null){O===null&&(O=W);break}e&&O&&ee.alternate===null&&t(I,O),A=o(ee,A,V),P===null?G=ee:P.sibling=ee,P=ee,O=W}if(V===M.length)return n(I,O),_n&&Ho(I,V),G;if(O===null){for(;V<M.length;V++)O=N(I,M[V],B),O!==null&&(A=o(O,A,V),P===null?G=O:P.sibling=O,P=O);return _n&&Ho(I,V),G}for(O=r(I,O);V<M.length;V++)W=j(O,I,V,M[V],B),W!==null&&(e&&W.alternate!==null&&O.delete(W.key===null?V:W.key),A=o(W,A,V),P===null?G=W:P.sibling=W,P=W);return e&&O.forEach(function(ce){return t(I,ce)}),_n&&Ho(I,V),G}function R(I,A,M,B){var G=xu(M);if(typeof G!="function")throw Error(Le(150));if(M=G.call(M),M==null)throw Error(Le(151));for(var P=G=null,O=A,V=A=0,W=null,ee=M.next();O!==null&&!ee.done;V++,ee=M.next()){O.index>V?(W=O,O=null):W=O.sibling;var ce=S(I,O,ee.value,B);if(ce===null){O===null&&(O=W);break}e&&O&&ce.alternate===null&&t(I,O),A=o(ce,A,V),P===null?G=ce:P.sibling=ce,P=ce,O=W}if(ee.done)return n(I,O),_n&&Ho(I,V),G;if(O===null){for(;!ee.done;V++,ee=M.next())ee=N(I,ee.value,B),ee!==null&&(A=o(ee,A,V),P===null?G=ee:P.sibling=ee,P=ee);return _n&&Ho(I,V),G}for(O=r(I,O);!ee.done;V++,ee=M.next())ee=j(O,I,V,ee.value,B),ee!==null&&(e&&ee.alternate!==null&&O.delete(ee.key===null?V:ee.key),A=o(ee,A,V),P===null?G=ee:P.sibling=ee,P=ee);return e&&O.forEach(function(ne){return t(I,ne)}),_n&&Ho(I,V),G}function T(I,A,M,B){if(typeof M=="object"&&M!==null&&M.type===Wl&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case I0:e:{for(var G=M.key,P=A;P!==null;){if(P.key===G){if(G=M.type,G===Wl){if(P.tag===7){n(I,P.sibling),A=a(P,M.props.children),A.return=I,I=A;break e}}else if(P.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Wi&&iw(G)===P.type){n(I,P.sibling),A=a(P,M.props),A.ref=bu(I,P,M),A.return=I,I=A;break e}n(I,P);break}else t(I,P);P=P.sibling}M.type===Wl?(A=nl(M.props.children,I.mode,B,M.key),A.return=I,I=A):(B=xf(M.type,M.key,M.props,null,I.mode,B),B.ref=bu(I,A,M),B.return=I,I=B)}return d(I);case zl:e:{for(P=M.key;A!==null;){if(A.key===P)if(A.tag===4&&A.stateNode.containerInfo===M.containerInfo&&A.stateNode.implementation===M.implementation){n(I,A.sibling),A=a(A,M.children||[]),A.return=I,I=A;break e}else{n(I,A);break}else t(I,A);A=A.sibling}A=X1(M,I.mode,B),A.return=I,I=A}return d(I);case Wi:return P=M._init,T(I,A,P(M._payload),B)}if(Tu(M))return k(I,A,M,B);if(xu(M))return R(I,A,M,B);W0(I,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,A!==null&&A.tag===6?(n(I,A.sibling),A=a(A,M),A.return=I,I=A):(n(I,A),A=Q1(M,I.mode,B),A.return=I,I=A),d(I)):n(I,A)}return T}var pc=B4(!0),U4=B4(!1),zf=xo(null),Wf=null,Kl=null,yg=null;function wg(){yg=Kl=Wf=null}function bg(e){var t=zf.current;bn(zf),e._currentValue=t}function Ym(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function oc(e,t){Wf=e,yg=Kl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ns=!0),e.firstContext=null)}function Gs(e){var t=e._currentValue;if(yg!==e)if(e={context:e,memoizedValue:t,next:null},Kl===null){if(Wf===null)throw Error(Le(308));Kl=e,Wf.dependencies={lanes:0,firstContext:e}}else Kl=Kl.next=e;return t}var Qo=null;function Ng(e){Qo===null?Qo=[e]:Qo.push(e)}function q4(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Ng(t)):(n.next=a.next,a.next=n),t.interleaved=n,vi(e,r)}function vi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hi=!1;function Cg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ro(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Wt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,vi(e,n)}return a=r.interleaved,a===null?(t.next=t,Ng(r)):(t.next=a.next,a.next=t),r.interleaved=t,vi(e,n)}function uf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lg(e,n)}}function ow(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=d:o=o.next=d,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hf(e,t,n,r){var a=e.updateQueue;Hi=!1;var o=a.firstBaseUpdate,d=a.lastBaseUpdate,m=a.shared.pending;if(m!==null){a.shared.pending=null;var v=m,g=v.next;v.next=null,d===null?o=g:d.next=g,d=v;var w=e.alternate;w!==null&&(w=w.updateQueue,m=w.lastBaseUpdate,m!==d&&(m===null?w.firstBaseUpdate=g:m.next=g,w.lastBaseUpdate=v))}if(o!==null){var N=a.baseState;d=0,w=g=v=null,m=o;do{var S=m.lane,j=m.eventTime;if((r&S)===S){w!==null&&(w=w.next={eventTime:j,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var k=e,R=m;switch(S=t,j=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){N=k.call(j,N,S);break e}N=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,S=typeof k=="function"?k.call(j,N,S):k,S==null)break e;N=Mn({},N,S);break e;case 2:Hi=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,S=a.effects,S===null?a.effects=[m]:S.push(m))}else j={eventTime:j,lane:S,tag:m.tag,payload:m.payload,callback:m.callback,next:null},w===null?(g=w=j,v=N):w=w.next=j,d|=S;if(m=m.next,m===null){if(m=a.shared.pending,m===null)break;S=m,m=S.next,S.next=null,a.lastBaseUpdate=S,a.shared.pending=null}}while(1);if(w===null&&(v=N),a.baseState=v,a.firstBaseUpdate=g,a.lastBaseUpdate=w,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);cl|=d,e.lanes=d,e.memoizedState=N}}function lw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Le(191,a));a.call(r)}}}var Cd={},Oa=xo(Cd),nd=xo(Cd),rd=xo(Cd);function Xo(e){if(e===Cd)throw Error(Le(174));return e}function Eg(e,t){switch(xn(rd,t),xn(nd,e),xn(Oa,Cd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_m(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_m(t,e)}bn(Oa),xn(Oa,t)}function mc(){bn(Oa),bn(nd),bn(rd)}function W4(e){Xo(rd.current);var t=Xo(Oa.current),n=_m(t,e.type);t!==n&&(xn(nd,e),xn(Oa,n))}function Sg(e){nd.current===e&&(bn(Oa),bn(nd))}var Dn=xo(0);function Vf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var W1=[];function _g(){for(var e=0;e<W1.length;e++)W1[e]._workInProgressVersionPrimary=null;W1.length=0}var df=Ei.ReactCurrentDispatcher,H1=Ei.ReactCurrentBatchConfig,ll=0,Rn=null,ir=null,hr=null,Yf=!1,Uu=!1,sd=0,wT=0;function kr(){throw Error(Le(321))}function jg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ha(e[n],t[n]))return!1;return!0}function Ag(e,t,n,r,a,o){if(ll=o,Rn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,df.current=e===null||e.memoizedState===null?ET:ST,e=n(r,a),Uu){o=0;do{if(Uu=!1,sd=0,25<=o)throw Error(Le(301));o+=1,hr=ir=null,t.updateQueue=null,df.current=_T,e=n(r,a)}while(Uu)}if(df.current=$f,t=ir!==null&&ir.next!==null,ll=0,hr=ir=Rn=null,Yf=!1,t)throw Error(Le(300));return e}function kg(){var e=sd!==0;return sd=0,e}function Sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?Rn.memoizedState=hr=e:hr=hr.next=e,hr}function Qs(){if(ir===null){var e=Rn.alternate;e=e!==null?e.memoizedState:null}else e=ir.next;var t=hr===null?Rn.memoizedState:hr.next;if(t!==null)hr=t,ir=e;else{if(e===null)throw Error(Le(310));ir=e,e={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},hr===null?Rn.memoizedState=hr=e:hr=hr.next=e}return hr}function ad(e,t){return typeof t=="function"?t(e):t}function V1(e){var t=Qs(),n=t.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=e;var r=ir,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var d=a.next;a.next=o.next,o.next=d}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var m=d=null,v=null,g=o;do{var w=g.lane;if((ll&w)===w)v!==null&&(v=v.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var N={lane:w,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};v===null?(m=v=N,d=r):v=v.next=N,Rn.lanes|=w,cl|=w}g=g.next}while(g!==null&&g!==o);v===null?d=r:v.next=m,ha(r,t.memoizedState)||(ns=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=v,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Rn.lanes|=o,cl|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Y1(e){var t=Qs(),n=t.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do o=e(o,d.action),d=d.next;while(d!==a);ha(o,t.memoizedState)||(ns=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function H4(){}function V4(e,t){var n=Rn,r=Qs(),a=t(),o=!ha(r.memoizedState,a);if(o&&(r.memoizedState=a,ns=!0),r=r.queue,Tg(G4.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||hr!==null&&hr.memoizedState.tag&1){if(n.flags|=2048,id(9,$4.bind(null,n,r,a,t),void 0,null),pr===null)throw Error(Le(349));ll&30||Y4(n,t,a)}return a}function Y4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rn.updateQueue,t===null?(t={lastEffect:null,stores:null},Rn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $4(e,t,n,r){t.value=n,t.getSnapshot=r,Q4(t)&&X4(e)}function G4(e,t,n){return n(function(){Q4(t)&&X4(e)})}function Q4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ha(e,n)}catch{return!0}}function X4(e){var t=vi(e,1);t!==null&&ua(t,e,1,-1)}function cw(e){var t=Sa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ad,lastRenderedState:e},t.queue=e,e=e.dispatch=CT.bind(null,Rn,e),[t.memoizedState,e]}function id(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Rn.updateQueue,t===null?(t={lastEffect:null,stores:null},Rn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function K4(){return Qs().memoizedState}function ff(e,t,n,r){var a=Sa();Rn.flags|=e,a.memoizedState=id(1|t,n,void 0,r===void 0?null:r)}function Ph(e,t,n,r){var a=Qs();r=r===void 0?null:r;var o=void 0;if(ir!==null){var d=ir.memoizedState;if(o=d.destroy,r!==null&&jg(r,d.deps)){a.memoizedState=id(t,n,o,r);return}}Rn.flags|=e,a.memoizedState=id(1|t,n,o,r)}function uw(e,t){return ff(8390656,8,e,t)}function Tg(e,t){return Ph(2048,8,e,t)}function Z4(e,t){return Ph(4,2,e,t)}function J4(e,t){return Ph(4,4,e,t)}function eN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tN(e,t,n){return n=n!=null?n.concat([e]):null,Ph(4,4,eN.bind(null,t,e),n)}function Dg(){}function nN(e,t){var n=Qs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rN(e,t){var n=Qs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sN(e,t,n){return ll&21?(ha(n,t)||(n=c4(),Rn.lanes|=n,cl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ns=!0),e.memoizedState=n)}function bT(e,t){var n=on;on=n!==0&&4>n?n:4,e(!0);var r=H1.transition;H1.transition={};try{e(!1),t()}finally{on=n,H1.transition=r}}function aN(){return Qs().memoizedState}function NT(e,t,n){var r=ao(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iN(e))oN(t,n);else if(n=q4(e,t,n,r),n!==null){var a=Vr();ua(n,e,r,a),lN(n,t,r)}}function CT(e,t,n){var r=ao(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iN(e))oN(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var d=t.lastRenderedState,m=o(d,n);if(a.hasEagerState=!0,a.eagerState=m,ha(m,d)){var v=t.interleaved;v===null?(a.next=a,Ng(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}finally{}n=q4(e,t,a,r),n!==null&&(a=Vr(),ua(n,e,r,a),lN(n,t,r))}}function iN(e){var t=e.alternate;return e===Rn||t!==null&&t===Rn}function oN(e,t){Uu=Yf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lg(e,n)}}var $f={readContext:Gs,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},ET={readContext:Gs,useCallback:function(e,t){return Sa().memoizedState=[e,t===void 0?null:t],e},useContext:Gs,useEffect:uw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ff(4194308,4,eN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ff(4194308,4,e,t)},useInsertionEffect:function(e,t){return ff(4,2,e,t)},useMemo:function(e,t){var n=Sa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Sa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=NT.bind(null,Rn,e),[r.memoizedState,e]},useRef:function(e){var t=Sa();return e={current:e},t.memoizedState=e},useState:cw,useDebugValue:Dg,useDeferredValue:function(e){return Sa().memoizedState=e},useTransition:function(){var e=cw(!1),t=e[0];return e=bT.bind(null,e[1]),Sa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Rn,a=Sa();if(_n){if(n===void 0)throw Error(Le(407));n=n()}else{if(n=t(),pr===null)throw Error(Le(349));ll&30||Y4(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,uw(G4.bind(null,r,o,e),[e]),r.flags|=2048,id(9,$4.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Sa(),t=pr.identifierPrefix;if(_n){var n=ci,r=li;n=(r&~(1<<32-ca(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ST={readContext:Gs,useCallback:nN,useContext:Gs,useEffect:Tg,useImperativeHandle:tN,useInsertionEffect:Z4,useLayoutEffect:J4,useMemo:rN,useReducer:V1,useRef:K4,useState:function(){return V1(ad)},useDebugValue:Dg,useDeferredValue:function(e){var t=Qs();return sN(t,ir.memoizedState,e)},useTransition:function(){var e=V1(ad)[0],t=Qs().memoizedState;return[e,t]},useMutableSource:H4,useSyncExternalStore:V4,useId:aN,unstable_isNewReconciler:!1},_T={readContext:Gs,useCallback:nN,useContext:Gs,useEffect:Tg,useImperativeHandle:tN,useInsertionEffect:Z4,useLayoutEffect:J4,useMemo:rN,useReducer:Y1,useRef:K4,useState:function(){return Y1(ad)},useDebugValue:Dg,useDeferredValue:function(e){var t=Qs();return ir===null?t.memoizedState=e:sN(t,ir.memoizedState,e)},useTransition:function(){var e=Y1(ad)[0],t=Qs().memoizedState;return[e,t]},useMutableSource:H4,useSyncExternalStore:V4,useId:aN,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){t=Mn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function $m(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Mn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fh={isMounted:function(e){return(e=e._reactInternals)?gl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Vr(),a=ao(e),o=ui(r,a);o.payload=t,n!=null&&(o.callback=n),t=ro(e,o,a),t!==null&&(ua(t,e,a,r),uf(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Vr(),a=ao(e),o=ui(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ro(e,o,a),t!==null&&(ua(t,e,a,r),uf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vr(),r=ao(e),a=ui(n,r);a.tag=2,t!=null&&(a.callback=t),t=ro(e,a,r),t!==null&&(ua(t,e,r,n),uf(t,e,r))}};function dw(e,t,n,r,a,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,d):t.prototype&&t.prototype.isPureReactComponent?!Zu(n,r)||!Zu(a,o):!0}function cN(e,t,n){var r=!1,a=fo,o=t.contextType;return typeof o=="object"&&o!==null?o=Gs(o):(a=ss(t)?il:Or.current,r=t.contextTypes,o=(r=r!=null)?fc(e,a):fo),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function fw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fh.enqueueReplaceState(t,t.state,null)}function Gm(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Cg(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Gs(o):(o=ss(t)?il:Or.current,a.context=fc(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&($m(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Fh.enqueueReplaceState(a,a.state,null),Hf(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function xc(e,t){try{var n="",r=t;do n+=ek(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function $1(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jT=typeof WeakMap=="function"?WeakMap:Map;function uN(e,t,n){n=ui(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qf||(Qf=!0,ax=r),Qm(e,t)},n}function dN(e,t,n){n=ui(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Qm(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Qm(e,t),typeof r!="function"&&(so===null?so=new Set([this]):so.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function hw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jT;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=qT.bind(null,e,t,n),t.then(e,e))}function pw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mw(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ui(-1,1),t.tag=2,ro(n,t,1))),n.lanes|=1),e)}var AT=Ei.ReactCurrentOwner,ns=!1;function qr(e,t,n,r){t.child=e===null?U4(t,null,n,r):pc(t,e.child,n,r)}function xw(e,t,n,r,a){n=n.render;var o=t.ref;return oc(t,a),r=Ag(e,t,n,r,o,a),n=kg(),e!==null&&!ns?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,yi(e,t,a)):(_n&&n&&xg(t),t.flags|=1,qr(e,t,r,a),t.child)}function gw(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!Bg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,fN(e,t,o,r,a)):(e=xf(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var d=o.memoizedProps;if(n=n.compare,n=n!==null?n:Zu,n(d,r)&&e.ref===t.ref)return yi(e,t,a)}return t.flags|=1,e=io(o,r),e.ref=t.ref,e.return=t,t.child=e}function fN(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(Zu(o,r)&&e.ref===t.ref)if(ns=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(ns=!0);else return t.lanes=e.lanes,yi(e,t,a)}return Xm(e,t,n,r,a)}function hN(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(Jl,ys),ys|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xn(Jl,ys),ys|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,xn(Jl,ys),ys|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,xn(Jl,ys),ys|=r;return qr(e,t,a,n),t.child}function pN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Xm(e,t,n,r,a){var o=ss(n)?il:Or.current;return o=fc(t,o),oc(t,a),n=Ag(e,t,n,r,o,a),r=kg(),e!==null&&!ns?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,yi(e,t,a)):(_n&&r&&xg(t),t.flags|=1,qr(e,t,n,a),t.child)}function vw(e,t,n,r,a){if(ss(n)){var o=!0;Bf(t)}else o=!1;if(oc(t,a),t.stateNode===null)hf(e,t),cN(t,n,r),Gm(t,n,r,a),r=!0;else if(e===null){var d=t.stateNode,m=t.memoizedProps;d.props=m;var v=d.context,g=n.contextType;typeof g=="object"&&g!==null?g=Gs(g):(g=ss(n)?il:Or.current,g=fc(t,g));var w=n.getDerivedStateFromProps,N=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function";N||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==r||v!==g)&&fw(t,d,r,g),Hi=!1;var S=t.memoizedState;d.state=S,Hf(t,r,d,a),v=t.memoizedState,m!==r||S!==v||rs.current||Hi?(typeof w=="function"&&($m(t,n,w,r),v=t.memoizedState),(m=Hi||dw(t,n,m,r,S,v,g))?(N||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=v),d.props=r,d.state=v,d.context=g,r=m):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,z4(e,t),m=t.memoizedProps,g=t.type===t.elementType?m:ia(t.type,m),d.props=g,N=t.pendingProps,S=d.context,v=n.contextType,typeof v=="object"&&v!==null?v=Gs(v):(v=ss(n)?il:Or.current,v=fc(t,v));var j=n.getDerivedStateFromProps;(w=typeof j=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==N||S!==v)&&fw(t,d,r,v),Hi=!1,S=t.memoizedState,d.state=S,Hf(t,r,d,a);var k=t.memoizedState;m!==N||S!==k||rs.current||Hi?(typeof j=="function"&&($m(t,n,j,r),k=t.memoizedState),(g=Hi||dw(t,n,g,r,S,k,v)||!1)?(w||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,k,v),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,k,v)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),d.props=r,d.state=k,d.context=v,r=g):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),r=!1)}return Km(e,t,n,r,o,a)}function Km(e,t,n,r,a,o){pN(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return a&&rw(t,n,!1),yi(e,t,o);r=t.stateNode,AT.current=t;var m=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=pc(t,e.child,null,o),t.child=pc(t,null,m,o)):qr(e,t,m,o),t.memoizedState=r.state,a&&rw(t,n,!0),t.child}function mN(e){var t=e.stateNode;t.pendingContext?nw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nw(e,t.context,!1),Eg(e,t.containerInfo)}function yw(e,t,n,r,a){return hc(),vg(a),t.flags|=256,qr(e,t,n,r),t.child}var Zm={dehydrated:null,treeContext:null,retryLane:0};function Jm(e){return{baseLanes:e,cachePool:null,transitions:null}}function xN(e,t,n){var r=t.pendingProps,a=Dn.current,o=!1,d=(t.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(a&2)!==0),m?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),xn(Dn,a&1),e===null)return Vm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=r.children,e=r.fallback,o?(r=t.mode,o=t.child,d={mode:"hidden",children:d},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=d):o=qh(d,r,0,null),e=nl(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Jm(n),t.memoizedState=Zm,e):Ig(t,d));if(a=e.memoizedState,a!==null&&(m=a.dehydrated,m!==null))return kT(e,t,d,r,m,a,n);if(o){o=r.fallback,d=t.mode,a=e.child,m=a.sibling;var v={mode:"hidden",children:r.children};return!(d&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=v,t.deletions=null):(r=io(a,v),r.subtreeFlags=a.subtreeFlags&14680064),m!==null?o=io(m,o):(o=nl(o,d,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,d=e.child.memoizedState,d=d===null?Jm(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},o.memoizedState=d,o.childLanes=e.childLanes&~n,t.memoizedState=Zm,r}return o=e.child,e=o.sibling,r=io(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ig(e,t){return t=qh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function H0(e,t,n,r){return r!==null&&vg(r),pc(t,e.child,null,n),e=Ig(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kT(e,t,n,r,a,o,d){if(n)return t.flags&256?(t.flags&=-257,r=$1(Error(Le(422))),H0(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=qh({mode:"visible",children:r.children},a,0,null),o=nl(o,a,d,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&pc(t,e.child,null,d),t.child.memoizedState=Jm(d),t.memoizedState=Zm,o);if(!(t.mode&1))return H0(e,t,d,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var m=r.dgst;return r=m,o=Error(Le(419)),r=$1(o,r,void 0),H0(e,t,d,r)}if(m=(d&e.childLanes)!==0,ns||m){if(r=pr,r!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|d)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,vi(e,a),ua(r,e,a,-1))}return Fg(),r=$1(Error(Le(421))),H0(e,t,d,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=zT.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,bs=no(a.nextSibling),Cs=t,_n=!0,la=null,e!==null&&(Ws[Hs++]=li,Ws[Hs++]=ci,Ws[Hs++]=ol,li=e.id,ci=e.overflow,ol=t),t=Ig(t,r.children),t.flags|=4096,t)}function ww(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ym(e.return,t,n)}function G1(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function gN(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(qr(e,t,r.children,n),r=Dn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ww(e,n,t);else if(e.tag===19)ww(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xn(Dn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Vf(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),G1(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Vf(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}G1(t,!0,n,null,o);break;case"together":G1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Le(153));if(t.child!==null){for(e=t.child,n=io(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=io(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function TT(e,t,n){switch(t.tag){case 3:mN(t),hc();break;case 5:W4(t);break;case 1:ss(t.type)&&Bf(t);break;case 4:Eg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;xn(zf,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xn(Dn,Dn.current&1),t.flags|=128,null):n&t.child.childLanes?xN(e,t,n):(xn(Dn,Dn.current&1),e=yi(e,t,n),e!==null?e.sibling:null);xn(Dn,Dn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return gN(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),xn(Dn,Dn.current),r)break;return null;case 22:case 23:return t.lanes=0,hN(e,t,n)}return yi(e,t,n)}var vN,ex,yN,wN;vN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ex=function(){};yN=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Xo(Oa.current);var o=null;switch(n){case"input":a=Nm(e,a),r=Nm(e,r),o=[];break;case"select":a=Mn({},a,{value:void 0}),r=Mn({},r,{value:void 0}),o=[];break;case"textarea":a=Sm(e,a),r=Sm(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Pf)}jm(n,r);var d;n=null;for(g in a)if(!r.hasOwnProperty(g)&&a.hasOwnProperty(g)&&a[g]!=null)if(g==="style"){var m=a[g];for(d in m)m.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Vu.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in r){var v=r[g];if(m=a!=null?a[g]:void 0,r.hasOwnProperty(g)&&v!==m&&(v!=null||m!=null))if(g==="style")if(m){for(d in m)!m.hasOwnProperty(d)||v&&v.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in v)v.hasOwnProperty(d)&&m[d]!==v[d]&&(n||(n={}),n[d]=v[d])}else n||(o||(o=[]),o.push(g,n)),n=v;else g==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,m=m?m.__html:void 0,v!=null&&m!==v&&(o=o||[]).push(g,v)):g==="children"?typeof v!="string"&&typeof v!="number"||(o=o||[]).push(g,""+v):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Vu.hasOwnProperty(g)?(v!=null&&g==="onScroll"&&yn("scroll",e),o||m===v||(o=[])):(o=o||[]).push(g,v))}n&&(o=o||[]).push("style",n);var g=o;(t.updateQueue=g)&&(t.flags|=4)}};wN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Nu(e,t){if(!_n)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Tr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function DT(e,t,n){var r=t.pendingProps;switch(gg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(t),null;case 1:return ss(t.type)&&Ff(),Tr(t),null;case 3:return r=t.stateNode,mc(),bn(rs),bn(Or),_g(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(z0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,la!==null&&(lx(la),la=null))),ex(e,t),Tr(t),null;case 5:Sg(t);var a=Xo(rd.current);if(n=t.type,e!==null&&t.stateNode!=null)yN(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Le(166));return Tr(t),null}if(e=Xo(Oa.current),z0(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ka]=t,r[td]=o,e=(t.mode&1)!==0,n){case"dialog":yn("cancel",r),yn("close",r);break;case"iframe":case"object":case"embed":yn("load",r);break;case"video":case"audio":for(a=0;a<Iu.length;a++)yn(Iu[a],r);break;case"source":yn("error",r);break;case"img":case"image":case"link":yn("error",r),yn("load",r);break;case"details":yn("toggle",r);break;case"input":ky(r,o),yn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},yn("invalid",r);break;case"textarea":Dy(r,o),yn("invalid",r)}jm(n,o),a=null;for(var d in o)if(o.hasOwnProperty(d)){var m=o[d];d==="children"?typeof m=="string"?r.textContent!==m&&(o.suppressHydrationWarning!==!0&&q0(r.textContent,m,e),a=["children",m]):typeof m=="number"&&r.textContent!==""+m&&(o.suppressHydrationWarning!==!0&&q0(r.textContent,m,e),a=["children",""+m]):Vu.hasOwnProperty(d)&&m!=null&&d==="onScroll"&&yn("scroll",r)}switch(n){case"input":R0(r),Ty(r,o,!0);break;case"textarea":R0(r),Iy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Pf)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=G3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[ka]=t,e[td]=r,vN(e,t,!1,!1),t.stateNode=e;e:{switch(d=Am(n,r),n){case"dialog":yn("cancel",e),yn("close",e),a=r;break;case"iframe":case"object":case"embed":yn("load",e),a=r;break;case"video":case"audio":for(a=0;a<Iu.length;a++)yn(Iu[a],e);a=r;break;case"source":yn("error",e),a=r;break;case"img":case"image":case"link":yn("error",e),yn("load",e),a=r;break;case"details":yn("toggle",e),a=r;break;case"input":ky(e,r),a=Nm(e,r),yn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Mn({},r,{value:void 0}),yn("invalid",e);break;case"textarea":Dy(e,r),a=Sm(e,r),yn("invalid",e);break;default:a=r}jm(n,a),m=a;for(o in m)if(m.hasOwnProperty(o)){var v=m[o];o==="style"?K3(e,v):o==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&Q3(e,v)):o==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&Yu(e,v):typeof v=="number"&&Yu(e,""+v):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vu.hasOwnProperty(o)?v!=null&&o==="onScroll"&&yn("scroll",e):v!=null&&ng(e,o,v,d))}switch(n){case"input":R0(e),Ty(e,r,!1);break;case"textarea":R0(e),Iy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+uo(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?rc(e,!!r.multiple,o,!1):r.defaultValue!=null&&rc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Pf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Tr(t),null;case 6:if(e&&t.stateNode!=null)wN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Le(166));if(n=Xo(rd.current),Xo(Oa.current),z0(t)){if(r=t.stateNode,n=t.memoizedProps,r[ka]=t,(o=r.nodeValue!==n)&&(e=Cs,e!==null))switch(e.tag){case 3:q0(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&q0(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ka]=t,t.stateNode=r}return Tr(t),null;case 13:if(bn(Dn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_n&&bs!==null&&t.mode&1&&!(t.flags&128))F4(),hc(),t.flags|=98560,o=!1;else if(o=z0(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Le(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Le(317));o[ka]=t}else hc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Tr(t),o=!1}else la!==null&&(lx(la),la=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Dn.current&1?or===0&&(or=3):Fg())),t.updateQueue!==null&&(t.flags|=4),Tr(t),null);case 4:return mc(),ex(e,t),e===null&&Ju(t.stateNode.containerInfo),Tr(t),null;case 10:return bg(t.type._context),Tr(t),null;case 17:return ss(t.type)&&Ff(),Tr(t),null;case 19:if(bn(Dn),o=t.memoizedState,o===null)return Tr(t),null;if(r=(t.flags&128)!==0,d=o.rendering,d===null)if(r)Nu(o,!1);else{if(or!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Vf(e),d!==null){for(t.flags|=128,Nu(o,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,d=o.alternate,d===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,e=d.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xn(Dn,Dn.current&1|2),t.child}e=e.sibling}o.tail!==null&&$n()>gc&&(t.flags|=128,r=!0,Nu(o,!1),t.lanes=4194304)}else{if(!r)if(e=Vf(d),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Nu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!_n)return Tr(t),null}else 2*$n()-o.renderingStartTime>gc&&n!==1073741824&&(t.flags|=128,r=!0,Nu(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(n=o.last,n!==null?n.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$n(),t.sibling=null,n=Dn.current,xn(Dn,r?n&1|2:n&1),t):(Tr(t),null);case 22:case 23:return Pg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ys&1073741824&&(Tr(t),t.subtreeFlags&6&&(t.flags|=8192)):Tr(t),null;case 24:return null;case 25:return null}throw Error(Le(156,t.tag))}function IT(e,t){switch(gg(t),t.tag){case 1:return ss(t.type)&&Ff(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mc(),bn(rs),bn(Or),_g(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sg(t),null;case 13:if(bn(Dn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Le(340));hc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bn(Dn),null;case 4:return mc(),null;case 10:return bg(t.type._context),null;case 22:case 23:return Pg(),null;case 24:return null;default:return null}}var V0=!1,Ir=!1,RT=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Zl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Un(e,t,r)}else n.current=null}function tx(e,t,n){try{n()}catch(r){Un(e,t,r)}}var bw=!1;function MT(e,t){if(Fm=Mf,e=S4(),mg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var d=0,m=-1,v=-1,g=0,w=0,N=e,S=null;t:for(;;){for(var j;N!==n||a!==0&&N.nodeType!==3||(m=d+a),N!==o||r!==0&&N.nodeType!==3||(v=d+r),N.nodeType===3&&(d+=N.nodeValue.length),(j=N.firstChild)!==null;)S=N,N=j;for(;;){if(N===e)break t;if(S===n&&++g===a&&(m=d),S===o&&++w===r&&(v=d),(j=N.nextSibling)!==null)break;N=S,S=N.parentNode}N=j}n=m===-1||v===-1?null:{start:m,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bm={focusedElem:e,selectionRange:n},Mf=!1,Ge=t;Ge!==null;)if(t=Ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ge=e;else for(;Ge!==null;){t=Ge;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,T=k.memoizedState,I=t.stateNode,A=I.getSnapshotBeforeUpdate(t.elementType===t.type?R:ia(t.type,R),T);I.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var M=t.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(B){Un(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,Ge=e;break}Ge=t.return}return k=bw,bw=!1,k}function qu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&tx(t,n,o)}a=a.next}while(a!==r)}}function Bh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nx(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bN(e){var t=e.alternate;t!==null&&(e.alternate=null,bN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ka],delete t[td],delete t[zm],delete t[xT],delete t[gT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NN(e){return e.tag===5||e.tag===3||e.tag===4}function Nw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rx(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Pf));else if(r!==4&&(e=e.child,e!==null))for(rx(e,t,n),e=e.sibling;e!==null;)rx(e,t,n),e=e.sibling}function sx(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sx(e,t,n),e=e.sibling;e!==null;)sx(e,t,n),e=e.sibling}var yr=null,oa=!1;function Ui(e,t,n){for(n=n.child;n!==null;)CN(e,t,n),n=n.sibling}function CN(e,t,n){if(Ma&&typeof Ma.onCommitFiberUnmount=="function")try{Ma.onCommitFiberUnmount(Dh,n)}catch{}switch(n.tag){case 5:Ir||Zl(n,t);case 6:var r=yr,a=oa;yr=null,Ui(e,t,n),yr=r,oa=a,yr!==null&&(oa?(e=yr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):yr.removeChild(n.stateNode));break;case 18:yr!==null&&(oa?(e=yr,n=n.stateNode,e.nodeType===8?q1(e.parentNode,n):e.nodeType===1&&q1(e,n),Xu(e)):q1(yr,n.stateNode));break;case 4:r=yr,a=oa,yr=n.stateNode.containerInfo,oa=!0,Ui(e,t,n),yr=r,oa=a;break;case 0:case 11:case 14:case 15:if(!Ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,d=o.destroy;o=o.tag,d!==void 0&&(o&2||o&4)&&tx(n,t,d),a=a.next}while(a!==r)}Ui(e,t,n);break;case 1:if(!Ir&&(Zl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(m){Un(n,t,m)}Ui(e,t,n);break;case 21:Ui(e,t,n);break;case 22:n.mode&1?(Ir=(r=Ir)||n.memoizedState!==null,Ui(e,t,n),Ir=r):Ui(e,t,n);break;default:Ui(e,t,n)}}function Cw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new RT),t.forEach(function(r){var a=WT.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function sa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,d=t,m=d;e:for(;m!==null;){switch(m.tag){case 5:yr=m.stateNode,oa=!1;break e;case 3:yr=m.stateNode.containerInfo,oa=!0;break e;case 4:yr=m.stateNode.containerInfo,oa=!0;break e}m=m.return}if(yr===null)throw Error(Le(160));CN(o,d,a),yr=null,oa=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(g){Un(a,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EN(t,e),t=t.sibling}function EN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sa(t,e),Na(e),r&4){try{qu(3,e,e.return),Bh(3,e)}catch(R){Un(e,e.return,R)}try{qu(5,e,e.return)}catch(R){Un(e,e.return,R)}}break;case 1:sa(t,e),Na(e),r&512&&n!==null&&Zl(n,n.return);break;case 5:if(sa(t,e),Na(e),r&512&&n!==null&&Zl(n,n.return),e.flags&32){var a=e.stateNode;try{Yu(a,"")}catch(R){Un(e,e.return,R)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,d=n!==null?n.memoizedProps:o,m=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{m==="input"&&o.type==="radio"&&o.name!=null&&Y3(a,o),Am(m,d);var g=Am(m,o);for(d=0;d<v.length;d+=2){var w=v[d],N=v[d+1];w==="style"?K3(a,N):w==="dangerouslySetInnerHTML"?Q3(a,N):w==="children"?Yu(a,N):ng(a,w,N,g)}switch(m){case"input":Cm(a,o);break;case"textarea":$3(a,o);break;case"select":var S=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?rc(a,!!o.multiple,j,!1):S!==!!o.multiple&&(o.defaultValue!=null?rc(a,!!o.multiple,o.defaultValue,!0):rc(a,!!o.multiple,o.multiple?[]:"",!1))}a[td]=o}catch(R){Un(e,e.return,R)}}break;case 6:if(sa(t,e),Na(e),r&4){if(e.stateNode===null)throw Error(Le(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(R){Un(e,e.return,R)}}break;case 3:if(sa(t,e),Na(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xu(t.containerInfo)}catch(R){Un(e,e.return,R)}break;case 4:sa(t,e),Na(e);break;case 13:sa(t,e),Na(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Og=$n())),r&4&&Cw(e);break;case 22:if(w=n!==null&&n.memoizedState!==null,e.mode&1?(Ir=(g=Ir)||w,sa(t,e),Ir=g):sa(t,e),Na(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!w&&e.mode&1)for(Ge=e,w=e.child;w!==null;){for(N=Ge=w;Ge!==null;){switch(S=Ge,j=S.child,S.tag){case 0:case 11:case 14:case 15:qu(4,S,S.return);break;case 1:Zl(S,S.return);var k=S.stateNode;if(typeof k.componentWillUnmount=="function"){r=S,n=S.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(R){Un(r,n,R)}}break;case 5:Zl(S,S.return);break;case 22:if(S.memoizedState!==null){Sw(N);continue}}j!==null?(j.return=S,Ge=j):Sw(N)}w=w.sibling}e:for(w=null,N=e;;){if(N.tag===5){if(w===null){w=N;try{a=N.stateNode,g?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(m=N.stateNode,v=N.memoizedProps.style,d=v!=null&&v.hasOwnProperty("display")?v.display:null,m.style.display=X3("display",d))}catch(R){Un(e,e.return,R)}}}else if(N.tag===6){if(w===null)try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(R){Un(e,e.return,R)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;w===N&&(w=null),N=N.return}w===N&&(w=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:sa(t,e),Na(e),r&4&&Cw(e);break;case 21:break;default:sa(t,e),Na(e)}}function Na(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(NN(n)){var r=n;break e}n=n.return}throw Error(Le(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Yu(a,""),r.flags&=-33);var o=Nw(e);sx(e,o,a);break;case 3:case 4:var d=r.stateNode.containerInfo,m=Nw(e);rx(e,m,d);break;default:throw Error(Le(161))}}catch(v){Un(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function OT(e,t,n){Ge=e,SN(e)}function SN(e,t,n){for(var r=(e.mode&1)!==0;Ge!==null;){var a=Ge,o=a.child;if(a.tag===22&&r){var d=a.memoizedState!==null||V0;if(!d){var m=a.alternate,v=m!==null&&m.memoizedState!==null||Ir;m=V0;var g=Ir;if(V0=d,(Ir=v)&&!g)for(Ge=a;Ge!==null;)d=Ge,v=d.child,d.tag===22&&d.memoizedState!==null?_w(a):v!==null?(v.return=d,Ge=v):_w(a);for(;o!==null;)Ge=o,SN(o),o=o.sibling;Ge=a,V0=m,Ir=g}Ew(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Ge=o):Ew(e)}}function Ew(e){for(;Ge!==null;){var t=Ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ir||Bh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ir)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ia(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&lw(t,o,r);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lw(t,d,n)}break;case 5:var m=t.stateNode;if(n===null&&t.flags&4){n=m;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var w=g.memoizedState;if(w!==null){var N=w.dehydrated;N!==null&&Xu(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}Ir||t.flags&512&&nx(t)}catch(S){Un(t,t.return,S)}}if(t===e){Ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ge=n;break}Ge=t.return}}function Sw(e){for(;Ge!==null;){var t=Ge;if(t===e){Ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ge=n;break}Ge=t.return}}function _w(e){for(;Ge!==null;){var t=Ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Bh(4,t)}catch(v){Un(t,n,v)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(v){Un(t,a,v)}}var o=t.return;try{nx(t)}catch(v){Un(t,o,v)}break;case 5:var d=t.return;try{nx(t)}catch(v){Un(t,d,v)}}}catch(v){Un(t,t.return,v)}if(t===e){Ge=null;break}var m=t.sibling;if(m!==null){m.return=t.return,Ge=m;break}Ge=t.return}}var LT=Math.ceil,Gf=Ei.ReactCurrentDispatcher,Rg=Ei.ReactCurrentOwner,$s=Ei.ReactCurrentBatchConfig,Wt=0,pr=null,Jn=null,wr=0,ys=0,Jl=xo(0),or=0,od=null,cl=0,Uh=0,Mg=0,zu=null,ts=null,Og=0,gc=1/0,ii=null,Qf=!1,ax=null,so=null,Y0=!1,Xi=null,Xf=0,Wu=0,ix=null,pf=-1,mf=0;function Vr(){return Wt&6?$n():pf!==-1?pf:pf=$n()}function ao(e){return e.mode&1?Wt&2&&wr!==0?wr&-wr:yT.transition!==null?(mf===0&&(mf=c4()),mf):(e=on,e!==0||(e=window.event,e=e===void 0?16:x4(e.type)),e):1}function ua(e,t,n,r){if(50<Wu)throw Wu=0,ix=null,Error(Le(185));wd(e,n,r),(!(Wt&2)||e!==pr)&&(e===pr&&(!(Wt&2)&&(Uh|=n),or===4&&$i(e,wr)),as(e,r),n===1&&Wt===0&&!(t.mode&1)&&(gc=$n()+500,Lh&&go()))}function as(e,t){var n=e.callbackNode;yk(e,t);var r=Rf(e,e===pr?wr:0);if(r===0)n!==null&&Oy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Oy(n),t===1)e.tag===0?vT(jw.bind(null,e)):O4(jw.bind(null,e)),pT(function(){!(Wt&6)&&go()}),n=null;else{switch(u4(r)){case 1:n=og;break;case 4:n=o4;break;case 16:n=If;break;case 536870912:n=l4;break;default:n=If}n=RN(n,_N.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _N(e,t){if(pf=-1,mf=0,Wt&6)throw Error(Le(327));var n=e.callbackNode;if(lc()&&e.callbackNode!==n)return null;var r=Rf(e,e===pr?wr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Kf(e,r);else{t=r;var a=Wt;Wt|=2;var o=AN();(pr!==e||wr!==t)&&(ii=null,gc=$n()+500,tl(e,t));do try{BT();break}catch(m){jN(e,m)}while(1);wg(),Gf.current=o,Wt=a,Jn!==null?t=0:(pr=null,wr=0,t=or)}if(t!==0){if(t===2&&(a=Rm(e),a!==0&&(r=a,t=ox(e,a))),t===1)throw n=od,tl(e,0),$i(e,r),as(e,$n()),n;if(t===6)$i(e,r);else{if(a=e.current.alternate,!(r&30)&&!PT(a)&&(t=Kf(e,r),t===2&&(o=Rm(e),o!==0&&(r=o,t=ox(e,o))),t===1))throw n=od,tl(e,0),$i(e,r),as(e,$n()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Le(345));case 2:Vo(e,ts,ii);break;case 3:if($i(e,r),(r&130023424)===r&&(t=Og+500-$n(),10<t)){if(Rf(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Vr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=qm(Vo.bind(null,e,ts,ii),t);break}Vo(e,ts,ii);break;case 4:if($i(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var d=31-ca(r);o=1<<d,d=t[d],d>a&&(a=d),r&=~o}if(r=a,r=$n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LT(r/1960))-r,10<r){e.timeoutHandle=qm(Vo.bind(null,e,ts,ii),r);break}Vo(e,ts,ii);break;case 5:Vo(e,ts,ii);break;default:throw Error(Le(329))}}}return as(e,$n()),e.callbackNode===n?_N.bind(null,e):null}function ox(e,t){var n=zu;return e.current.memoizedState.isDehydrated&&(tl(e,t).flags|=256),e=Kf(e,t),e!==2&&(t=ts,ts=n,t!==null&&lx(t)),e}function lx(e){ts===null?ts=e:ts.push.apply(ts,e)}function PT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!ha(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $i(e,t){for(t&=~Mg,t&=~Uh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ca(t),r=1<<n;e[n]=-1,t&=~r}}function jw(e){if(Wt&6)throw Error(Le(327));lc();var t=Rf(e,0);if(!(t&1))return as(e,$n()),null;var n=Kf(e,t);if(e.tag!==0&&n===2){var r=Rm(e);r!==0&&(t=r,n=ox(e,r))}if(n===1)throw n=od,tl(e,0),$i(e,t),as(e,$n()),n;if(n===6)throw Error(Le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vo(e,ts,ii),as(e,$n()),null}function Lg(e,t){var n=Wt;Wt|=1;try{return e(t)}finally{Wt=n,Wt===0&&(gc=$n()+500,Lh&&go())}}function ul(e){Xi!==null&&Xi.tag===0&&!(Wt&6)&&lc();var t=Wt;Wt|=1;var n=$s.transition,r=on;try{if($s.transition=null,on=1,e)return e()}finally{on=r,$s.transition=n,Wt=t,!(Wt&6)&&go()}}function Pg(){ys=Jl.current,bn(Jl)}function tl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hT(n)),Jn!==null)for(n=Jn.return;n!==null;){var r=n;switch(gg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ff();break;case 3:mc(),bn(rs),bn(Or),_g();break;case 5:Sg(r);break;case 4:mc();break;case 13:bn(Dn);break;case 19:bn(Dn);break;case 10:bg(r.type._context);break;case 22:case 23:Pg()}n=n.return}if(pr=e,Jn=e=io(e.current,null),wr=ys=t,or=0,od=null,Mg=Uh=cl=0,ts=zu=null,Qo!==null){for(t=0;t<Qo.length;t++)if(n=Qo[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var d=o.next;o.next=a,r.next=d}n.pending=r}Qo=null}return e}function jN(e,t){do{var n=Jn;try{if(wg(),df.current=$f,Yf){for(var r=Rn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Yf=!1}if(ll=0,hr=ir=Rn=null,Uu=!1,sd=0,Rg.current=null,n===null||n.return===null){or=1,od=t,Jn=null;break}e:{var o=e,d=n.return,m=n,v=t;if(t=wr,m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var g=v,w=m,N=w.tag;if(!(w.mode&1)&&(N===0||N===11||N===15)){var S=w.alternate;S?(w.updateQueue=S.updateQueue,w.memoizedState=S.memoizedState,w.lanes=S.lanes):(w.updateQueue=null,w.memoizedState=null)}var j=pw(d);if(j!==null){j.flags&=-257,mw(j,d,m,o,t),j.mode&1&&hw(o,g,t),t=j,v=g;var k=t.updateQueue;if(k===null){var R=new Set;R.add(v),t.updateQueue=R}else k.add(v);break e}else{if(!(t&1)){hw(o,g,t),Fg();break e}v=Error(Le(426))}}else if(_n&&m.mode&1){var T=pw(d);if(T!==null){!(T.flags&65536)&&(T.flags|=256),mw(T,d,m,o,t),vg(xc(v,m));break e}}o=v=xc(v,m),or!==4&&(or=2),zu===null?zu=[o]:zu.push(o),o=d;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var I=uN(o,v,t);ow(o,I);break e;case 1:m=v;var A=o.type,M=o.stateNode;if(!(o.flags&128)&&(typeof A.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(so===null||!so.has(M)))){o.flags|=65536,t&=-t,o.lanes|=t;var B=dN(o,m,t);ow(o,B);break e}}o=o.return}while(o!==null)}TN(n)}catch(G){t=G,Jn===n&&n!==null&&(Jn=n=n.return);continue}break}while(1)}function AN(){var e=Gf.current;return Gf.current=$f,e===null?$f:e}function Fg(){(or===0||or===3||or===2)&&(or=4),pr===null||!(cl&268435455)&&!(Uh&268435455)||$i(pr,wr)}function Kf(e,t){var n=Wt;Wt|=2;var r=AN();(pr!==e||wr!==t)&&(ii=null,tl(e,t));do try{FT();break}catch(a){jN(e,a)}while(1);if(wg(),Wt=n,Gf.current=r,Jn!==null)throw Error(Le(261));return pr=null,wr=0,or}function FT(){for(;Jn!==null;)kN(Jn)}function BT(){for(;Jn!==null&&!uk();)kN(Jn)}function kN(e){var t=IN(e.alternate,e,ys);e.memoizedProps=e.pendingProps,t===null?TN(e):Jn=t,Rg.current=null}function TN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=IT(n,t),n!==null){n.flags&=32767,Jn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{or=6,Jn=null;return}}else if(n=DT(n,t,ys),n!==null){Jn=n;return}if(t=t.sibling,t!==null){Jn=t;return}Jn=t=e}while(t!==null);or===0&&(or=5)}function Vo(e,t,n){var r=on,a=$s.transition;try{$s.transition=null,on=1,UT(e,t,n,r)}finally{$s.transition=a,on=r}return null}function UT(e,t,n,r){do lc();while(Xi!==null);if(Wt&6)throw Error(Le(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Le(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(wk(e,o),e===pr&&(Jn=pr=null,wr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Y0||(Y0=!0,RN(If,function(){return lc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$s.transition,$s.transition=null;var d=on;on=1;var m=Wt;Wt|=4,Rg.current=null,MT(e,n),EN(n,e),iT(Bm),Mf=!!Fm,Bm=Fm=null,e.current=n,OT(n),dk(),Wt=m,on=d,$s.transition=o}else e.current=n;if(Y0&&(Y0=!1,Xi=e,Xf=a),o=e.pendingLanes,o===0&&(so=null),pk(n.stateNode),as(e,$n()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Qf)throw Qf=!1,e=ax,ax=null,e;return Xf&1&&e.tag!==0&&lc(),o=e.pendingLanes,o&1?e===ix?Wu++:(Wu=0,ix=e):Wu=0,go(),null}function lc(){if(Xi!==null){var e=u4(Xf),t=$s.transition,n=on;try{if($s.transition=null,on=16>e?16:e,Xi===null)var r=!1;else{if(e=Xi,Xi=null,Xf=0,Wt&6)throw Error(Le(331));var a=Wt;for(Wt|=4,Ge=e.current;Ge!==null;){var o=Ge,d=o.child;if(Ge.flags&16){var m=o.deletions;if(m!==null){for(var v=0;v<m.length;v++){var g=m[v];for(Ge=g;Ge!==null;){var w=Ge;switch(w.tag){case 0:case 11:case 15:qu(8,w,o)}var N=w.child;if(N!==null)N.return=w,Ge=N;else for(;Ge!==null;){w=Ge;var S=w.sibling,j=w.return;if(bN(w),w===g){Ge=null;break}if(S!==null){S.return=j,Ge=S;break}Ge=j}}}var k=o.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var T=R.sibling;R.sibling=null,R=T}while(R!==null)}}Ge=o}}if(o.subtreeFlags&2064&&d!==null)d.return=o,Ge=d;else e:for(;Ge!==null;){if(o=Ge,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qu(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,Ge=I;break e}Ge=o.return}}var A=e.current;for(Ge=A;Ge!==null;){d=Ge;var M=d.child;if(d.subtreeFlags&2064&&M!==null)M.return=d,Ge=M;else e:for(d=A;Ge!==null;){if(m=Ge,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Bh(9,m)}}catch(G){Un(m,m.return,G)}if(m===d){Ge=null;break e}var B=m.sibling;if(B!==null){B.return=m.return,Ge=B;break e}Ge=m.return}}if(Wt=a,go(),Ma&&typeof Ma.onPostCommitFiberRoot=="function")try{Ma.onPostCommitFiberRoot(Dh,e)}catch{}r=!0}return r}finally{on=n,$s.transition=t}}return!1}function Aw(e,t,n){t=xc(n,t),t=uN(e,t,1),e=ro(e,t,1),t=Vr(),e!==null&&(wd(e,1,t),as(e,t))}function Un(e,t,n){if(e.tag===3)Aw(e,e,n);else for(;t!==null;){if(t.tag===3){Aw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(so===null||!so.has(r))){e=xc(n,e),e=dN(t,e,1),t=ro(t,e,1),e=Vr(),t!==null&&(wd(t,1,e),as(t,e));break}}t=t.return}}function qT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Vr(),e.pingedLanes|=e.suspendedLanes&n,pr===e&&(wr&n)===n&&(or===4||or===3&&(wr&130023424)===wr&&500>$n()-Og?tl(e,0):Mg|=n),as(e,t)}function DN(e,t){t===0&&(e.mode&1?(t=L0,L0<<=1,!(L0&130023424)&&(L0=4194304)):t=1);var n=Vr();e=vi(e,t),e!==null&&(wd(e,t,n),as(e,n))}function zT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),DN(e,n)}function WT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(t),DN(e,n)}var IN;IN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rs.current)ns=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ns=!1,TT(e,t,n);ns=!!(e.flags&131072)}else ns=!1,_n&&t.flags&1048576&&L4(t,qf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;hf(e,t),e=t.pendingProps;var a=fc(t,Or.current);oc(t,n),a=Ag(null,t,r,e,a,n);var o=kg();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ss(r)?(o=!0,Bf(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Cg(t),a.updater=Fh,t.stateNode=a,a._reactInternals=t,Gm(t,r,e,n),t=Km(null,t,r,!0,o,n)):(t.tag=0,_n&&o&&xg(t),qr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(hf(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=VT(r),e=ia(r,e),a){case 0:t=Xm(null,t,r,e,n);break e;case 1:t=vw(null,t,r,e,n);break e;case 11:t=xw(null,t,r,e,n);break e;case 14:t=gw(null,t,r,ia(r.type,e),n);break e}throw Error(Le(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ia(r,a),Xm(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ia(r,a),vw(e,t,r,a,n);case 3:e:{if(mN(t),e===null)throw Error(Le(387));r=t.pendingProps,o=t.memoizedState,a=o.element,z4(e,t),Hf(t,r,null,n);var d=t.memoizedState;if(r=d.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=xc(Error(Le(423)),t),t=yw(e,t,r,n,a);break e}else if(r!==a){a=xc(Error(Le(424)),t),t=yw(e,t,r,n,a);break e}else for(bs=no(t.stateNode.containerInfo.firstChild),Cs=t,_n=!0,la=null,n=U4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hc(),r===a){t=yi(e,t,n);break e}qr(e,t,r,n)}t=t.child}return t;case 5:return W4(t),e===null&&Vm(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,d=a.children,Um(r,a)?d=null:o!==null&&Um(r,o)&&(t.flags|=32),pN(e,t),qr(e,t,d,n),t.child;case 6:return e===null&&Vm(t),null;case 13:return xN(e,t,n);case 4:return Eg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pc(t,null,r,n):qr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ia(r,a),xw(e,t,r,a,n);case 7:return qr(e,t,t.pendingProps,n),t.child;case 8:return qr(e,t,t.pendingProps.children,n),t.child;case 12:return qr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,d=a.value,xn(zf,r._currentValue),r._currentValue=d,o!==null)if(ha(o.value,d)){if(o.children===a.children&&!rs.current){t=yi(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var m=o.dependencies;if(m!==null){d=o.child;for(var v=m.firstContext;v!==null;){if(v.context===r){if(o.tag===1){v=ui(-1,n&-n),v.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var w=g.pending;w===null?v.next=v:(v.next=w.next,w.next=v),g.pending=v}}o.lanes|=n,v=o.alternate,v!==null&&(v.lanes|=n),Ym(o.return,n,t),m.lanes|=n;break}v=v.next}}else if(o.tag===10)d=o.type===t.type?null:o.child;else if(o.tag===18){if(d=o.return,d===null)throw Error(Le(341));d.lanes|=n,m=d.alternate,m!==null&&(m.lanes|=n),Ym(d,n,t),d=o.sibling}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}qr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,oc(t,n),a=Gs(a),r=r(a),t.flags|=1,qr(e,t,r,n),t.child;case 14:return r=t.type,a=ia(r,t.pendingProps),a=ia(r.type,a),gw(e,t,r,a,n);case 15:return fN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ia(r,a),hf(e,t),t.tag=1,ss(r)?(e=!0,Bf(t)):e=!1,oc(t,n),cN(t,r,a),Gm(t,r,a,n),Km(null,t,r,!0,e,n);case 19:return gN(e,t,n);case 22:return hN(e,t,n)}throw Error(Le(156,t.tag))};function RN(e,t){return i4(e,t)}function HT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(e,t,n,r){return new HT(e,t,n,r)}function Bg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function VT(e){if(typeof e=="function")return Bg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sg)return 11;if(e===ag)return 14}return 2}function io(e,t){var n=e.alternate;return n===null?(n=Ys(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xf(e,t,n,r,a,o){var d=2;if(r=e,typeof e=="function")Bg(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Wl:return nl(n.children,a,o,t);case rg:d=8,a|=8;break;case vm:return e=Ys(12,n,t,a|2),e.elementType=vm,e.lanes=o,e;case ym:return e=Ys(13,n,t,a),e.elementType=ym,e.lanes=o,e;case wm:return e=Ys(19,n,t,a),e.elementType=wm,e.lanes=o,e;case W3:return qh(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q3:d=10;break e;case z3:d=9;break e;case sg:d=11;break e;case ag:d=14;break e;case Wi:d=16,r=null;break e}throw Error(Le(130,e==null?e:typeof e,""))}return t=Ys(d,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function nl(e,t,n,r){return e=Ys(7,e,r,t),e.lanes=n,e}function qh(e,t,n,r){return e=Ys(22,e,r,t),e.elementType=W3,e.lanes=n,e.stateNode={isHidden:!1},e}function Q1(e,t,n){return e=Ys(6,e,null,t),e.lanes=n,e}function X1(e,t,n){return t=Ys(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function YT(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T1(0),this.expirationTimes=T1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T1(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ug(e,t,n,r,a,o,d,m,v){return e=new YT(e,t,n,m,v),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ys(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cg(o),e}function $T(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function MN(e){if(!e)return fo;e=e._reactInternals;e:{if(gl(e)!==e||e.tag!==1)throw Error(Le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ss(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Le(171))}if(e.tag===1){var n=e.type;if(ss(n))return M4(e,n,t)}return t}function ON(e,t,n,r,a,o,d,m,v){return e=Ug(n,r,!0,e,a,o,d,m,v),e.context=MN(null),n=e.current,r=Vr(),a=ao(n),o=ui(r,a),o.callback=t??null,ro(n,o,a),e.current.lanes=a,wd(e,a,r),as(e,r),e}function zh(e,t,n,r){var a=t.current,o=Vr(),d=ao(a);return n=MN(n),t.context===null?t.context=n:t.pendingContext=n,t=ui(o,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ro(a,t,d),e!==null&&(ua(e,a,d,o),uf(e,a,d)),d}function Zf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qg(e,t){kw(e,t),(e=e.alternate)&&kw(e,t)}function GT(){return null}var LN=typeof reportError=="function"?reportError:function(e){console.error(e)};function zg(e){this._internalRoot=e}Wh.prototype.render=zg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Le(409));zh(e,t,null,null)};Wh.prototype.unmount=zg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ul(function(){zh(null,e,null,null)}),t[gi]=null}};function Wh(e){this._internalRoot=e}Wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=h4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yi.length&&t!==0&&t<Yi[n].priority;n++);Yi.splice(n,0,e),n===0&&m4(e)}};function Wg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tw(){}function QT(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var g=Zf(d);o.call(g)}}var d=ON(t,r,e,0,null,!1,!1,"",Tw);return e._reactRootContainer=d,e[gi]=d.current,Ju(e.nodeType===8?e.parentNode:e),ul(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var m=r;r=function(){var g=Zf(v);m.call(g)}}var v=Ug(e,0,!1,null,null,!1,!1,"",Tw);return e._reactRootContainer=v,e[gi]=v.current,Ju(e.nodeType===8?e.parentNode:e),ul(function(){zh(t,v,n,r)}),v}function Vh(e,t,n,r,a){var o=n._reactRootContainer;if(o){var d=o;if(typeof a=="function"){var m=a;a=function(){var v=Zf(d);m.call(v)}}zh(t,d,e,a)}else d=QT(n,t,e,a,r);return Zf(d)}d4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Du(t.pendingLanes);n!==0&&(lg(t,n|1),as(t,$n()),!(Wt&6)&&(gc=$n()+500,go()))}break;case 13:ul(function(){var r=vi(e,1);if(r!==null){var a=Vr();ua(r,e,1,a)}}),qg(e,1)}};cg=function(e){if(e.tag===13){var t=vi(e,134217728);if(t!==null){var n=Vr();ua(t,e,134217728,n)}qg(e,134217728)}};f4=function(e){if(e.tag===13){var t=ao(e),n=vi(e,t);if(n!==null){var r=Vr();ua(n,e,t,r)}qg(e,t)}};h4=function(){return on};p4=function(e,t){var n=on;try{return on=e,t()}finally{on=n}};Tm=function(e,t,n){switch(t){case"input":if(Cm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Oh(r);if(!a)throw Error(Le(90));V3(r),Cm(r,a)}}}break;case"textarea":$3(e,n);break;case"select":t=n.value,t!=null&&rc(e,!!n.multiple,t,!1)}};e4=Lg;t4=ul;var XT={usingClientEntryPoint:!1,Events:[Nd,$l,Oh,Z3,J3,Lg]},Cu={findFiberByHostInstance:Go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KT={bundleType:Cu.bundleType,version:Cu.version,rendererPackageName:Cu.rendererPackageName,rendererConfig:Cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=s4(e),e===null?null:e.stateNode},findFiberByHostInstance:Cu.findFiberByHostInstance||GT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$0.isDisabled&&$0.supportsFiber)try{Dh=$0.inject(KT),Ma=$0}catch{}}_s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XT;_s.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wg(t))throw Error(Le(200));return $T(e,t,null,n)};_s.createRoot=function(e,t){if(!Wg(e))throw Error(Le(299));var n=!1,r="",a=LN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ug(e,1,!1,null,null,n,!1,r,a),e[gi]=t.current,Ju(e.nodeType===8?e.parentNode:e),new zg(t)};_s.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Le(188)):(e=Object.keys(e).join(","),Error(Le(268,e)));return e=s4(t),e=e===null?null:e.stateNode,e};_s.flushSync=function(e){return ul(e)};_s.hydrate=function(e,t,n){if(!Hh(t))throw Error(Le(200));return Vh(null,e,t,!0,n)};_s.hydrateRoot=function(e,t,n){if(!Wg(e))throw Error(Le(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",d=LN;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=ON(t,null,e,1,n??null,a,!1,o,d),e[gi]=t.current,Ju(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Wh(t)};_s.render=function(e,t,n){if(!Hh(t))throw Error(Le(200));return Vh(null,e,t,!1,n)};_s.unmountComponentAtNode=function(e){if(!Hh(e))throw Error(Le(40));return e._reactRootContainer?(ul(function(){Vh(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0):!1};_s.unstable_batchedUpdates=Lg;_s.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Hh(n))throw Error(Le(200));if(e==null||e._reactInternals===void 0)throw Error(Le(38));return Vh(e,t,n,!1,r)};_s.version="18.3.1-next-f1338f8080-20240426";function PN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PN)}catch(e){console.error(e)}}PN(),P3.exports=_s;var Hg=P3.exports;const ZT=kh(Hg);var Dw=Hg;xm.createRoot=Dw.createRoot,xm.hydrateRoot=Dw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ld(){return ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ld.apply(this,arguments)}var Ki;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ki||(Ki={}));const Iw="popstate";function JT(e){e===void 0&&(e={});function t(r,a){let{pathname:o,search:d,hash:m}=r.location;return cx("",{pathname:o,search:d,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Jf(a)}return t7(t,n,null,e)}function Xn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function FN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function e7(){return Math.random().toString(36).substr(2,8)}function Rw(e,t){return{usr:e.state,key:e.key,idx:t}}function cx(e,t,n,r){return n===void 0&&(n=null),ld({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Dc(t):t,{state:n,key:t&&t.key||r||e7()})}function Jf(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Dc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function t7(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,d=a.history,m=Ki.Pop,v=null,g=w();g==null&&(g=0,d.replaceState(ld({},d.state,{idx:g}),""));function w(){return(d.state||{idx:null}).idx}function N(){m=Ki.Pop;let T=w(),I=T==null?null:T-g;g=T,v&&v({action:m,location:R.location,delta:I})}function S(T,I){m=Ki.Push;let A=cx(R.location,T,I);n&&n(A,T),g=w()+1;let M=Rw(A,g),B=R.createHref(A);try{d.pushState(M,"",B)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;a.location.assign(B)}o&&v&&v({action:m,location:R.location,delta:1})}function j(T,I){m=Ki.Replace;let A=cx(R.location,T,I);n&&n(A,T),g=w();let M=Rw(A,g),B=R.createHref(A);d.replaceState(M,"",B),o&&v&&v({action:m,location:R.location,delta:0})}function k(T){let I=a.location.origin!=="null"?a.location.origin:a.location.href,A=typeof T=="string"?T:Jf(T);return A=A.replace(/ $/,"%20"),Xn(I,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,I)}let R={get action(){return m},get location(){return e(a,d)},listen(T){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(Iw,N),v=T,()=>{a.removeEventListener(Iw,N),v=null}},createHref(T){return t(a,T)},createURL:k,encodeLocation(T){let I=k(T);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:S,replace:j,go(T){return d.go(T)}};return R}var Mw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Mw||(Mw={}));function n7(e,t,n){return n===void 0&&(n="/"),r7(e,t,n,!1)}function r7(e,t,n,r){let a=typeof t=="string"?Dc(t):t,o=Vg(a.pathname||"/",n);if(o==null)return null;let d=BN(e);s7(d);let m=null;for(let v=0;m==null&&v<d.length;++v){let g=m7(o);m=h7(d[v],g,r)}return m}function BN(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(o,d,m)=>{let v={relativePath:m===void 0?o.path||"":m,caseSensitive:o.caseSensitive===!0,childrenIndex:d,route:o};v.relativePath.startsWith("/")&&(Xn(v.relativePath.startsWith(r),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(r.length));let g=oo([r,v.relativePath]),w=n.concat(v);o.children&&o.children.length>0&&(Xn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),BN(o.children,t,w,g)),!(o.path==null&&!o.index)&&t.push({path:g,score:d7(g,o.index),routesMeta:w})};return e.forEach((o,d)=>{var m;if(o.path===""||!((m=o.path)!=null&&m.includes("?")))a(o,d);else for(let v of UN(o.path))a(o,d,v)}),t}function UN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let d=UN(r.join("/")),m=[];return m.push(...d.map(v=>v===""?o:[o,v].join("/"))),a&&m.push(...d),m.map(v=>e.startsWith("/")&&v===""?"/":v)}function s7(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:f7(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const a7=/^:[\w-]+$/,i7=3,o7=2,l7=1,c7=10,u7=-2,Ow=e=>e==="*";function d7(e,t){let n=e.split("/"),r=n.length;return n.some(Ow)&&(r+=u7),t&&(r+=o7),n.filter(a=>!Ow(a)).reduce((a,o)=>a+(a7.test(o)?i7:o===""?l7:c7),r)}function f7(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function h7(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,a={},o="/",d=[];for(let m=0;m<r.length;++m){let v=r[m],g=m===r.length-1,w=o==="/"?t:t.slice(o.length)||"/",N=Lw({path:v.relativePath,caseSensitive:v.caseSensitive,end:g},w),S=v.route;if(!N&&g&&n&&!r[r.length-1].route.index&&(N=Lw({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},w)),!N)return null;Object.assign(a,N.params),d.push({params:a,pathname:oo([o,N.pathname]),pathnameBase:y7(oo([o,N.pathnameBase])),route:S}),N.pathnameBase!=="/"&&(o=oo([o,N.pathnameBase]))}return d}function Lw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=p7(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],d=o.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:r.reduce((g,w,N)=>{let{paramName:S,isOptional:j}=w;if(S==="*"){let R=m[N]||"";d=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const k=m[N];return j&&!k?g[S]=void 0:g[S]=(k||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:d,pattern:e}}function p7(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),FN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,v)=>(r.push({paramName:m,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function m7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return FN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function x7(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Dc(e):e;return{pathname:n?n.startsWith("/")?n:g7(n,t):t,search:w7(r),hash:b7(a)}}function g7(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function K1(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function v7(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Yg(e,t){let n=v7(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $g(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Dc(e):(a=ld({},e),Xn(!a.pathname||!a.pathname.includes("?"),K1("?","pathname","search",a)),Xn(!a.pathname||!a.pathname.includes("#"),K1("#","pathname","hash",a)),Xn(!a.search||!a.search.includes("#"),K1("#","search","hash",a)));let o=e===""||a.pathname==="",d=o?"/":a.pathname,m;if(d==null)m=n;else{let N=t.length-1;if(!r&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),N-=1;a.pathname=S.join("/")}m=N>=0?t[N]:"/"}let v=x7(a,m),g=d&&d!=="/"&&d.endsWith("/"),w=(o||d===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(g||w)&&(v.pathname+="/"),v}const oo=e=>e.join("/").replace(/\/\/+/g,"/"),y7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),w7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,b7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function N7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qN=["post","put","patch","delete"];new Set(qN);const C7=["get",...qN];new Set(C7);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(this,arguments)}const Gg=L.createContext(null),E7=L.createContext(null),vo=L.createContext(null),Yh=L.createContext(null),Si=L.createContext({outlet:null,matches:[],isDataRoute:!1}),zN=L.createContext(null);function S7(e,t){let{relative:n}=t===void 0?{}:t;Ic()||Xn(!1);let{basename:r,navigator:a}=L.useContext(vo),{hash:o,pathname:d,search:m}=HN(e,{relative:n}),v=d;return r!=="/"&&(v=d==="/"?r:oo([r,d])),a.createHref({pathname:v,search:m,hash:o})}function Ic(){return L.useContext(Yh)!=null}function Rc(){return Ic()||Xn(!1),L.useContext(Yh).location}function WN(e){L.useContext(vo).static||L.useLayoutEffect(e)}function Gr(){let{isDataRoute:e}=L.useContext(Si);return e?F7():_7()}function _7(){Ic()||Xn(!1);let e=L.useContext(Gg),{basename:t,future:n,navigator:r}=L.useContext(vo),{matches:a}=L.useContext(Si),{pathname:o}=Rc(),d=JSON.stringify(Yg(a,n.v7_relativeSplatPath)),m=L.useRef(!1);return WN(()=>{m.current=!0}),L.useCallback(function(g,w){if(w===void 0&&(w={}),!m.current)return;if(typeof g=="number"){r.go(g);return}let N=$g(g,JSON.parse(d),o,w.relative==="path");e==null&&t!=="/"&&(N.pathname=N.pathname==="/"?t:oo([t,N.pathname])),(w.replace?r.replace:r.push)(N,w.state,w)},[t,r,d,o,e])}function $h(){let{matches:e}=L.useContext(Si),t=e[e.length-1];return t?t.params:{}}function HN(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=L.useContext(vo),{matches:a}=L.useContext(Si),{pathname:o}=Rc(),d=JSON.stringify(Yg(a,r.v7_relativeSplatPath));return L.useMemo(()=>$g(e,JSON.parse(d),o,n==="path"),[e,d,o,n])}function j7(e,t){return A7(e,t)}function A7(e,t,n,r){Ic()||Xn(!1);let{navigator:a}=L.useContext(vo),{matches:o}=L.useContext(Si),d=o[o.length-1],m=d?d.params:{};d&&d.pathname;let v=d?d.pathnameBase:"/";d&&d.route;let g=Rc(),w;if(t){var N;let T=typeof t=="string"?Dc(t):t;v==="/"||(N=T.pathname)!=null&&N.startsWith(v)||Xn(!1),w=T}else w=g;let S=w.pathname||"/",j=S;if(v!=="/"){let T=v.replace(/^\//,"").split("/");j="/"+S.replace(/^\//,"").split("/").slice(T.length).join("/")}let k=n7(e,{pathname:j}),R=R7(k&&k.map(T=>Object.assign({},T,{params:Object.assign({},m,T.params),pathname:oo([v,a.encodeLocation?a.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?v:oo([v,a.encodeLocation?a.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,r);return t&&R?L.createElement(Yh.Provider,{value:{location:cd({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ki.Pop}},R):R}function k7(){let e=P7(),t=N7(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),n?L.createElement("pre",{style:a},n):null,o)}const T7=L.createElement(k7,null);class D7 extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?L.createElement(Si.Provider,{value:this.props.routeContext},L.createElement(zN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I7(e){let{routeContext:t,match:n,children:r}=e,a=L.useContext(Gg);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Si.Provider,{value:t},r)}function R7(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let d=e,m=(a=n)==null?void 0:a.errors;if(m!=null){let w=d.findIndex(N=>N.route.id&&(m==null?void 0:m[N.route.id])!==void 0);w>=0||Xn(!1),d=d.slice(0,Math.min(d.length,w+1))}let v=!1,g=-1;if(n&&r&&r.v7_partialHydration)for(let w=0;w<d.length;w++){let N=d[w];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(g=w),N.route.id){let{loaderData:S,errors:j}=n,k=N.route.loader&&S[N.route.id]===void 0&&(!j||j[N.route.id]===void 0);if(N.route.lazy||k){v=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((w,N,S)=>{let j,k=!1,R=null,T=null;n&&(j=m&&N.route.id?m[N.route.id]:void 0,R=N.route.errorElement||T7,v&&(g<0&&S===0?(B7("route-fallback",!1),k=!0,T=null):g===S&&(k=!0,T=N.route.hydrateFallbackElement||null)));let I=t.concat(d.slice(0,S+1)),A=()=>{let M;return j?M=R:k?M=T:N.route.Component?M=L.createElement(N.route.Component,null):N.route.element?M=N.route.element:M=w,L.createElement(I7,{match:N,routeContext:{outlet:w,matches:I,isDataRoute:n!=null},children:M})};return n&&(N.route.ErrorBoundary||N.route.errorElement||S===0)?L.createElement(D7,{location:n.location,revalidation:n.revalidation,component:R,error:j,children:A(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):A()},null)}var VN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(VN||{}),eh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(eh||{});function M7(e){let t=L.useContext(Gg);return t||Xn(!1),t}function O7(e){let t=L.useContext(E7);return t||Xn(!1),t}function L7(e){let t=L.useContext(Si);return t||Xn(!1),t}function YN(e){let t=L7(),n=t.matches[t.matches.length-1];return n.route.id||Xn(!1),n.route.id}function P7(){var e;let t=L.useContext(zN),n=O7(eh.UseRouteError),r=YN(eh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function F7(){let{router:e}=M7(VN.UseNavigateStable),t=YN(eh.UseNavigateStable),n=L.useRef(!1);return WN(()=>{n.current=!0}),L.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,cd({fromRouteId:t},o)))},[e,t])}const Pw={};function B7(e,t,n){!t&&!Pw[e]&&(Pw[e]=!0)}function U7(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function th(e){let{to:t,replace:n,state:r,relative:a}=e;Ic()||Xn(!1);let{future:o,static:d}=L.useContext(vo),{matches:m}=L.useContext(Si),{pathname:v}=Rc(),g=Gr(),w=$g(t,Yg(m,o.v7_relativeSplatPath),v,a==="path"),N=JSON.stringify(w);return L.useEffect(()=>g(JSON.parse(N),{replace:n,state:r,relative:a}),[g,N,a,n,r]),null}function Dr(e){Xn(!1)}function q7(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Ki.Pop,navigator:o,static:d=!1,future:m}=e;Ic()&&Xn(!1);let v=t.replace(/^\/*/,"/"),g=L.useMemo(()=>({basename:v,navigator:o,static:d,future:cd({v7_relativeSplatPath:!1},m)}),[v,m,o,d]);typeof r=="string"&&(r=Dc(r));let{pathname:w="/",search:N="",hash:S="",state:j=null,key:k="default"}=r,R=L.useMemo(()=>{let T=Vg(w,v);return T==null?null:{location:{pathname:T,search:N,hash:S,state:j,key:k},navigationType:a}},[v,w,N,S,j,k,a]);return R==null?null:L.createElement(vo.Provider,{value:g},L.createElement(Yh.Provider,{children:n,value:R}))}function z7(e){let{children:t,location:n}=e;return j7(ux(t),n)}new Promise(()=>{});function ux(e,t){t===void 0&&(t=[]);let n=[];return L.Children.forEach(e,(r,a)=>{if(!L.isValidElement(r))return;let o=[...t,a];if(r.type===L.Fragment){n.push.apply(n,ux(r.props.children,o));return}r.type!==Dr&&Xn(!1),!r.props.index||!r.props.children||Xn(!1);let d={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=ux(r.props.children,o)),n.push(d)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dx(){return dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dx.apply(this,arguments)}function W7(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function H7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function V7(e,t){return e.button===0&&(!t||t==="_self")&&!H7(e)}const Y7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$7="6";try{window.__reactRouterVersion=$7}catch{}const G7="startTransition",Fw=Jx[G7];function Q7(e){let{basename:t,children:n,future:r,window:a}=e,o=L.useRef();o.current==null&&(o.current=JT({window:a,v5Compat:!0}));let d=o.current,[m,v]=L.useState({action:d.action,location:d.location}),{v7_startTransition:g}=r||{},w=L.useCallback(N=>{g&&Fw?Fw(()=>v(N)):v(N)},[v,g]);return L.useLayoutEffect(()=>d.listen(w),[d,w]),L.useEffect(()=>U7(r),[r]),L.createElement(q7,{basename:t,children:n,location:m.location,navigationType:m.action,navigator:d,future:r})}const X7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qn=L.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:o,replace:d,state:m,target:v,to:g,preventScrollReset:w,viewTransition:N}=t,S=W7(t,Y7),{basename:j}=L.useContext(vo),k,R=!1;if(typeof g=="string"&&K7.test(g)&&(k=g,X7))try{let M=new URL(window.location.href),B=g.startsWith("//")?new URL(M.protocol+g):new URL(g),G=Vg(B.pathname,j);B.origin===M.origin&&G!=null?g=G+B.search+B.hash:R=!0}catch{}let T=S7(g,{relative:a}),I=Z7(g,{replace:d,state:m,target:v,preventScrollReset:w,relative:a,viewTransition:N});function A(M){r&&r(M),M.defaultPrevented||I(M)}return L.createElement("a",dx({},S,{href:k||T,onClick:R||o?r:A,ref:n,target:v}))});var Bw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bw||(Bw={}));var Uw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Uw||(Uw={}));function Z7(e,t){let{target:n,replace:r,state:a,preventScrollReset:o,relative:d,viewTransition:m}=t===void 0?{}:t,v=Gr(),g=Rc(),w=HN(e,{relative:d});return L.useCallback(N=>{if(V7(N,n)){N.preventDefault();let S=r!==void 0?r:Jf(g)===Jf(w);v(e,{replace:S,state:a,preventScrollReset:o,relative:d,viewTransition:m})}},[g,v,w,r,a,n,e,o,d,m])}class Mc{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const n={listener:t};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const ud=typeof window>"u"||"Deno"in window;function Us(){}function J7(e,t){return typeof e=="function"?e(t):e}function fx(e){return typeof e=="number"&&e>=0&&e!==1/0}function $N(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ec(e,t,n){return Ed(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function eD(e,t,n){return Ed(e)?typeof t=="function"?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:typeof e=="function"?{...t,mutationFn:e}:{...e}}function Vi(e,t,n){return Ed(e)?[{...t,queryKey:e},n]:[e||{},t]}function qw(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:o,queryKey:d,stale:m}=e;if(Ed(d)){if(r){if(t.queryHash!==Qg(d,t.options))return!1}else if(!nh(t.queryKey,d))return!1}if(n!=="all"){const v=t.isActive();if(n==="active"&&!v||n==="inactive"&&v)return!1}return!(typeof m=="boolean"&&t.isStale()!==m||typeof a<"u"&&a!==t.state.fetchStatus||o&&!o(t))}function zw(e,t){const{exact:n,fetching:r,predicate:a,mutationKey:o}=e;if(Ed(o)){if(!t.options.mutationKey)return!1;if(n){if(Ko(t.options.mutationKey)!==Ko(o))return!1}else if(!nh(t.options.mutationKey,o))return!1}return!(typeof r=="boolean"&&t.state.status==="loading"!==r||a&&!a(t))}function Qg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ko)(e)}function Ko(e){return JSON.stringify(e,(t,n)=>hx(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function nh(e,t){return GN(e,t)}function GN(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!GN(e[n],t[n])):!1}function QN(e,t){if(e===t)return e;const n=Ww(e)&&Ww(t);if(n||hx(e)&&hx(t)){const r=n?e.length:Object.keys(e).length,a=n?t:Object.keys(t),o=a.length,d=n?[]:{};let m=0;for(let v=0;v<o;v++){const g=n?v:a[v];d[g]=QN(e[g],t[g]),d[g]===e[g]&&m++}return r===o&&m===r?e:d}return t}function rh(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ww(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function hx(e){if(!Hw(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!Hw(n)||!n.hasOwnProperty("isPrototypeOf"))}function Hw(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ed(e){return Array.isArray(e)}function XN(e){return new Promise(t=>{setTimeout(t,e)})}function Vw(e){XN(0).then(e)}function tD(){if(typeof AbortController=="function")return new AbortController}function px(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?QN(e,t):t}class nD extends Mc{constructor(){super(),this.setup=t=>{if(!ud&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const sh=new nD,Yw=["online","offline"];class rD extends Mc{constructor(){super(),this.setup=t=>{if(!ud&&window.addEventListener){const n=()=>t();return Yw.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{Yw.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const ah=new rD;function sD(e){return Math.min(1e3*2**e,3e4)}function Gh(e){return(e??"online")==="online"?ah.isOnline():!0}class KN{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function gf(e){return e instanceof KN}function ZN(e){let t=!1,n=0,r=!1,a,o,d;const m=new Promise((T,I)=>{o=T,d=I}),v=T=>{r||(j(new KN(T)),e.abort==null||e.abort())},g=()=>{t=!0},w=()=>{t=!1},N=()=>!sh.isFocused()||e.networkMode!=="always"&&!ah.isOnline(),S=T=>{r||(r=!0,e.onSuccess==null||e.onSuccess(T),a==null||a(),o(T))},j=T=>{r||(r=!0,e.onError==null||e.onError(T),a==null||a(),d(T))},k=()=>new Promise(T=>{a=I=>{const A=r||!N();return A&&T(I),A},e.onPause==null||e.onPause()}).then(()=>{a=void 0,r||e.onContinue==null||e.onContinue()}),R=()=>{if(r)return;let T;try{T=e.fn()}catch(I){T=Promise.reject(I)}Promise.resolve(T).then(S).catch(I=>{var A,M;if(r)return;const B=(A=e.retry)!=null?A:3,G=(M=e.retryDelay)!=null?M:sD,P=typeof G=="function"?G(n,I):G,O=B===!0||typeof B=="number"&&n<B||typeof B=="function"&&B(n,I);if(t||!O){j(I);return}n++,e.onFail==null||e.onFail(n,I),XN(P).then(()=>{if(N())return k()}).then(()=>{t?j(I):R()})})};return Gh(e.networkMode)?R():k().then(R),{promise:m,cancel:v,continue:()=>(a==null?void 0:a())?m:Promise.resolve(),cancelRetry:g,continueRetry:w}}const Xg=console;function aD(){let e=[],t=0,n=w=>{w()},r=w=>{w()};const a=w=>{let N;t++;try{N=w()}finally{t--,t||m()}return N},o=w=>{t?e.push(w):Vw(()=>{n(w)})},d=w=>(...N)=>{o(()=>{w(...N)})},m=()=>{const w=e;e=[],w.length&&Vw(()=>{r(()=>{w.forEach(N=>{n(N)})})})};return{batch:a,batchCalls:d,schedule:o,setNotifyFunction:w=>{n=w},setBatchNotifyFunction:w=>{r=w}}}const zn=aD();class JN{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fx(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,t??(ud?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class iD extends JN{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||Xg,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||oD(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(t,n){const r=px(this.state.data,t,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){this.dispatch({type:"setState",state:t,setStateOptions:n})}cancel(t){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(t),r?r.then(Us).catch(Us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(t=>t.getCurrentResult().isStale)}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!$N(this.state.dataUpdatedAt,t)}onFocus(){var t;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}onOnline(){var t;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,n){var r,a;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const d=tD(),m={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},v=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>{if(d)return this.abortSignalConsumed=!0,d.signal}})};v(m);const g=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(m)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),w={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:g};if(v(w),(r=this.options.behavior)==null||r.onFetch(w),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((a=w.fetchOptions)==null?void 0:a.meta)){var N;this.dispatch({type:"fetch",meta:(N=w.fetchOptions)==null?void 0:N.meta})}const S=j=>{if(gf(j)&&j.silent||this.dispatch({type:"error",error:j}),!gf(j)){var k,R,T,I;(k=(R=this.cache.config).onError)==null||k.call(R,j,this),(T=(I=this.cache.config).onSettled)==null||T.call(I,this.state.data,j,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=ZN({fn:w.fetchFn,abort:d==null?void 0:d.abort.bind(d),onSuccess:j=>{var k,R,T,I;if(typeof j>"u"){S(new Error(this.queryHash+" data is undefined"));return}this.setData(j),(k=(R=this.cache.config).onSuccess)==null||k.call(R,j,this),(T=(I=this.cache.config).onSettled)==null||T.call(I,j,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:S,onFail:(j,k)=>{this.dispatch({type:"failed",failureCount:j,error:k})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:w.options.retry,retryDelay:w.options.retryDelay,networkMode:w.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){const n=r=>{var a,o;switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(a=t.meta)!=null?a:null,fetchStatus:Gh(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=t.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const d=t.error;return gf(d)&&d.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:d,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),zn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(t)}),this.cache.notify({query:this,type:"updated",action:t})})}}function oD(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=typeof t<"u",r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class lD extends Mc{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,n,r){var a;const o=n.queryKey,d=(a=n.queryHash)!=null?a:Qg(o,n);let m=this.get(d);return m||(m=new iD({cache:this,logger:t.getLogger(),queryKey:o,queryHash:d,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(o)}),this.add(m)),m}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const n=this.queriesMap[t.queryHash];n&&(t.destroy(),this.queries=this.queries.filter(r=>r!==t),n===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){zn.batch(()=>{this.queries.forEach(t=>{this.remove(t)})})}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,n){const[r]=Vi(t,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(a=>qw(r,a))}findAll(t,n){const[r]=Vi(t,n);return Object.keys(r).length>0?this.queries.filter(a=>qw(r,a)):this.queries}notify(t){zn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}onFocus(){zn.batch(()=>{this.queries.forEach(t=>{t.onFocus()})})}onOnline(){zn.batch(()=>{this.queries.forEach(t=>{t.onOnline()})})}}class cD extends JN{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||Xg,this.observers=[],this.state=t.state||eC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(n=>n!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,n;return(t=(n=this.retryer)==null?void 0:n.continue())!=null?t:this.execute()}async execute(){const t=()=>{var O;return this.retryer=ZN({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(V,W)=>{this.dispatch({type:"failed",failureCount:V,error:W})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(O=this.options.retry)!=null?O:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,a,o,d,m,v,g,w;if(!n){var N,S,j,k;this.dispatch({type:"loading",variables:this.options.variables}),await((N=(S=this.mutationCache.config).onMutate)==null?void 0:N.call(S,this.state.variables,this));const V=await((j=(k=this.options).onMutate)==null?void 0:j.call(k,this.state.variables));V!==this.state.context&&this.dispatch({type:"loading",context:V,variables:this.state.variables})}const O=await t();return await((r=(a=this.mutationCache.config).onSuccess)==null?void 0:r.call(a,O,this.state.variables,this.state.context,this)),await((o=(d=this.options).onSuccess)==null?void 0:o.call(d,O,this.state.variables,this.state.context)),await((m=(v=this.mutationCache.config).onSettled)==null?void 0:m.call(v,O,null,this.state.variables,this.state.context,this)),await((g=(w=this.options).onSettled)==null?void 0:g.call(w,O,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:O}),O}catch(O){try{var R,T,I,A,M,B,G,P;throw await((R=(T=this.mutationCache.config).onError)==null?void 0:R.call(T,O,this.state.variables,this.state.context,this)),await((I=(A=this.options).onError)==null?void 0:I.call(A,O,this.state.variables,this.state.context)),await((M=(B=this.mutationCache.config).onSettled)==null?void 0:M.call(B,void 0,O,this.state.variables,this.state.context,this)),await((G=(P=this.options).onSettled)==null?void 0:G.call(P,void 0,O,this.state.variables,this.state.context)),O}finally{this.dispatch({type:"error",error:O})}}}dispatch(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Gh(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...r,...t.state}}};this.state=n(this.state),zn.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function eC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class uD extends Mc{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,n,r){const a=new cD({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?t.getMutationDefaults(n.mutationKey):void 0});return this.add(a),a}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter(n=>n!==t),this.notify({type:"removed",mutation:t})}clear(){zn.batch(()=>{this.mutations.forEach(t=>{this.remove(t)})})}getAll(){return this.mutations}find(t){return typeof t.exact>"u"&&(t.exact=!0),this.mutations.find(n=>zw(t,n))}findAll(t){return this.mutations.filter(n=>zw(t,n))}notify(t){zn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}resumePausedMutations(){var t;return this.resuming=((t=this.resuming)!=null?t:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return zn.batch(()=>n.reduce((r,a)=>r.then(()=>a.continue().catch(Us)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function mx(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,r,a,o,d;const m=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,v=(r=e.fetchOptions)==null||(a=r.meta)==null?void 0:a.fetchMore,g=v==null?void 0:v.pageParam,w=(v==null?void 0:v.direction)==="forward",N=(v==null?void 0:v.direction)==="backward",S=((o=e.state.data)==null?void 0:o.pages)||[],j=((d=e.state.data)==null?void 0:d.pageParams)||[];let k=j,R=!1;const T=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>{var O;if((O=e.signal)!=null&&O.aborted)R=!0;else{var V;(V=e.signal)==null||V.addEventListener("abort",()=>{R=!0})}return e.signal}})},I=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),A=(P,O,V,W)=>(k=W?[O,...k]:[...k,O],W?[V,...P]:[...P,V]),M=(P,O,V,W)=>{if(R)return Promise.reject("Cancelled");if(typeof V>"u"&&!O&&P.length)return Promise.resolve(P);const ee={queryKey:e.queryKey,pageParam:V,meta:e.options.meta};T(ee);const ce=I(ee);return Promise.resolve(ce).then(te=>A(P,V,te,W))};let B;if(!S.length)B=M([]);else if(w){const P=typeof g<"u",O=P?g:xx(e.options,S);B=M(S,P,O)}else if(N){const P=typeof g<"u",O=P?g:tC(e.options,S);B=M(S,P,O,!0)}else{k=[];const P=typeof e.options.getNextPageParam>"u";B=(m&&S[0]?m(S[0],0,S):!0)?M([],P,j[0]):Promise.resolve(A([],j[0],S[0]));for(let V=1;V<S.length;V++)B=B.then(W=>{if(m&&S[V]?m(S[V],V,S):!0){const ce=P?j[V]:xx(e.options,W);return M(W,P,ce)}return Promise.resolve(A(W,j[V],S[V]))})}return B.then(P=>({pages:P,pageParams:k}))}}}}function xx(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function tC(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}function dD(e,t){if(e.getNextPageParam&&Array.isArray(t)){const n=xx(e,t);return typeof n<"u"&&n!==null&&n!==!1}}function fD(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const n=tC(e,t);return typeof n<"u"&&n!==null&&n!==!1}}class hD{constructor(t={}){this.queryCache=t.queryCache||new lD,this.mutationCache=t.mutationCache||new uD,this.logger=t.logger||Xg,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=sh.subscribe(()=>{sh.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=ah.subscribe(()=>{ah.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var t,n;this.mountCount--,this.mountCount===0&&((t=this.unsubscribeFocus)==null||t.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(t,n){const[r]=Vi(t,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,n){var r;return(r=this.queryCache.find(t,n))==null?void 0:r.state.data}ensureQueryData(t,n,r){const a=ec(t,n,r),o=this.getQueryData(a.queryKey);return o?Promise.resolve(o):this.fetchQuery(a)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:n,state:r})=>{const a=r.data;return[n,a]})}setQueryData(t,n,r){const a=this.queryCache.find(t),o=a==null?void 0:a.state.data,d=J7(n,o);if(typeof d>"u")return;const m=ec(t),v=this.defaultQueryOptions(m);return this.queryCache.build(this,v).setData(d,{...r,manual:!0})}setQueriesData(t,n,r){return zn.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,n,r)]))}getQueryState(t,n){var r;return(r=this.queryCache.find(t,n))==null?void 0:r.state}removeQueries(t,n){const[r]=Vi(t,n),a=this.queryCache;zn.batch(()=>{a.findAll(r).forEach(o=>{a.remove(o)})})}resetQueries(t,n,r){const[a,o]=Vi(t,n,r),d=this.queryCache,m={type:"active",...a};return zn.batch(()=>(d.findAll(a).forEach(v=>{v.reset()}),this.refetchQueries(m,o)))}cancelQueries(t,n,r){const[a,o={}]=Vi(t,n,r);typeof o.revert>"u"&&(o.revert=!0);const d=zn.batch(()=>this.queryCache.findAll(a).map(m=>m.cancel(o)));return Promise.all(d).then(Us).catch(Us)}invalidateQueries(t,n,r){const[a,o]=Vi(t,n,r);return zn.batch(()=>{var d,m;if(this.queryCache.findAll(a).forEach(g=>{g.invalidate()}),a.refetchType==="none")return Promise.resolve();const v={...a,type:(d=(m=a.refetchType)!=null?m:a.type)!=null?d:"active"};return this.refetchQueries(v,o)})}refetchQueries(t,n,r){const[a,o]=Vi(t,n,r),d=zn.batch(()=>this.queryCache.findAll(a).filter(v=>!v.isDisabled()).map(v=>{var g;return v.fetch(void 0,{...o,cancelRefetch:(g=o==null?void 0:o.cancelRefetch)!=null?g:!0,meta:{refetchPage:a.refetchPage}})}));let m=Promise.all(d).then(Us);return o!=null&&o.throwOnError||(m=m.catch(Us)),m}fetchQuery(t,n,r){const a=ec(t,n,r),o=this.defaultQueryOptions(a);typeof o.retry>"u"&&(o.retry=!1);const d=this.queryCache.build(this,o);return d.isStaleByTime(o.staleTime)?d.fetch(o):Promise.resolve(d.state.data)}prefetchQuery(t,n,r){return this.fetchQuery(t,n,r).then(Us).catch(Us)}fetchInfiniteQuery(t,n,r){const a=ec(t,n,r);return a.behavior=mx(),this.fetchQuery(a)}prefetchInfiniteQuery(t,n,r){return this.fetchInfiniteQuery(t,n,r).then(Us).catch(Us)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,n){const r=this.queryDefaults.find(a=>Ko(t)===Ko(a.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:t,defaultOptions:n})}getQueryDefaults(t){if(!t)return;const n=this.queryDefaults.find(r=>nh(t,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(t,n){const r=this.mutationDefaults.find(a=>Ko(t)===Ko(a.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:t,defaultOptions:n})}getMutationDefaults(t){if(!t)return;const n=this.mutationDefaults.find(r=>nh(t,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const n={...this.defaultOptions.queries,...this.getQueryDefaults(t==null?void 0:t.queryKey),...t,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=Qg(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(t==null?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class nC extends Mc{constructor(t,n){super(),this.client=t,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),$w(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gx(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gx(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,n){const r=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),rh(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const o=this.hasListeners();o&&Gw(this.currentQuery,a,this.options,r)&&this.executeFetch(),this.updateResult(n),o&&(this.currentQuery!==a||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const d=this.computeRefetchInterval();o&&(this.currentQuery!==a||this.options.enabled!==r.enabled||d!==this.currentRefetchInterval)&&this.updateRefetchInterval(d)}getOptimisticResult(t){const n=this.client.getQueryCache().build(this.client,t),r=this.createResult(n,t);return mD(this,r,t)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(t){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),t[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...n}={}){return this.fetch({...n,meta:{refetchPage:t}})}fetchOptimistic(t){const n=this.client.defaultQueryOptions(t),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){var n;return this.executeFetch({...t,cancelRefetch:(n=t.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(t){this.updateQuery();let n=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Us)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),ud||this.currentResult.isStale||!fx(this.options.staleTime))return;const n=$N(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!(ud||this.options.enabled===!1||!fx(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||sh.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,n){const r=this.currentQuery,a=this.options,o=this.currentResult,d=this.currentResultState,m=this.currentResultOptions,v=t!==r,g=v?t.state:this.currentQueryInitialState,w=v?this.currentResult:this.previousQueryResult,{state:N}=t;let{dataUpdatedAt:S,error:j,errorUpdatedAt:k,fetchStatus:R,status:T}=N,I=!1,A=!1,M;if(n._optimisticResults){const V=this.hasListeners(),W=!V&&$w(t,n),ee=V&&Gw(t,r,n,a);(W||ee)&&(R=Gh(t.options.networkMode)?"fetching":"paused",S||(T="loading")),n._optimisticResults==="isRestoring"&&(R="idle")}if(n.keepPreviousData&&!N.dataUpdatedAt&&w!=null&&w.isSuccess&&T!=="error")M=w.data,S=w.dataUpdatedAt,T=w.status,I=!0;else if(n.select&&typeof N.data<"u")if(o&&N.data===(d==null?void 0:d.data)&&n.select===this.selectFn)M=this.selectResult;else try{this.selectFn=n.select,M=n.select(N.data),M=px(o==null?void 0:o.data,M,n),this.selectResult=M,this.selectError=null}catch(V){this.selectError=V}else M=N.data;if(typeof n.placeholderData<"u"&&typeof M>"u"&&T==="loading"){let V;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(m==null?void 0:m.placeholderData))V=o.data;else if(V=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof V<"u")try{V=n.select(V),this.selectError=null}catch(W){this.selectError=W}typeof V<"u"&&(T="success",M=px(o==null?void 0:o.data,V,n),A=!0)}this.selectError&&(j=this.selectError,M=this.selectResult,k=Date.now(),T="error");const B=R==="fetching",G=T==="loading",P=T==="error";return{status:T,fetchStatus:R,isLoading:G,isSuccess:T==="success",isError:P,isInitialLoading:G&&B,data:M,dataUpdatedAt:S,error:j,errorUpdatedAt:k,failureCount:N.fetchFailureCount,failureReason:N.fetchFailureReason,errorUpdateCount:N.errorUpdateCount,isFetched:N.dataUpdateCount>0||N.errorUpdateCount>0,isFetchedAfterMount:N.dataUpdateCount>g.dataUpdateCount||N.errorUpdateCount>g.errorUpdateCount,isFetching:B,isRefetching:B&&!G,isLoadingError:P&&N.dataUpdatedAt===0,isPaused:R==="paused",isPlaceholderData:A,isPreviousData:I,isRefetchError:P&&N.dataUpdatedAt!==0,isStale:Kg(t,n),refetch:this.refetch,remove:this.remove}}updateResult(t){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,rh(r,n))return;this.currentResult=r;const a={cache:!0},o=()=>{if(!n)return!0;const{notifyOnChangeProps:d}=this.options,m=typeof d=="function"?d():d;if(m==="all"||!m&&!this.trackedProps.size)return!0;const v=new Set(m??this.trackedProps);return this.options.useErrorBoundary&&v.add("error"),Object.keys(this.currentResult).some(g=>{const w=g;return this.currentResult[w]!==n[w]&&v.has(w)})};(t==null?void 0:t.listeners)!==!1&&o()&&(a.listeners=!0),this.notify({...a,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const n={};t.type==="success"?n.onSuccess=!t.manual:t.type==="error"&&!gf(t.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(t){zn.batch(()=>{if(t.onSuccess){var n,r,a,o;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(a=(o=this.options).onSettled)==null||a.call(o,this.currentResult.data,null)}else if(t.onError){var d,m,v,g;(d=(m=this.options).onError)==null||d.call(m,this.currentResult.error),(v=(g=this.options).onSettled)==null||v.call(g,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach(({listener:w})=>{w(this.currentResult)}),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function pD(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function $w(e,t){return pD(e,t)||e.state.dataUpdatedAt>0&&gx(e,t,t.refetchOnMount)}function gx(e,t,n){if(t.enabled!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Kg(e,t)}return!1}function Gw(e,t,n,r){return n.enabled!==!1&&(e!==t||r.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&Kg(e,n)}function Kg(e,t){return e.isStaleByTime(t.staleTime)}function mD(e,t,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?t.isPlaceholderData:!rh(e.getCurrentResult(),t)}class xD extends nC{constructor(t,n){super(t,n)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t,n){super.setOptions({...t,behavior:mx()},n)}getOptimisticResult(t){return t.behavior=mx(),super.getOptimisticResult(t)}fetchNextPage({pageParam:t,...n}={}){return this.fetch({...n,meta:{fetchMore:{direction:"forward",pageParam:t}}})}fetchPreviousPage({pageParam:t,...n}={}){return this.fetch({...n,meta:{fetchMore:{direction:"backward",pageParam:t}}})}createResult(t,n){var r,a,o,d,m,v;const{state:g}=t,w=super.createResult(t,n),{isFetching:N,isRefetching:S}=w,j=N&&((r=g.fetchMeta)==null||(a=r.fetchMore)==null?void 0:a.direction)==="forward",k=N&&((o=g.fetchMeta)==null||(d=o.fetchMore)==null?void 0:d.direction)==="backward";return{...w,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:dD(n,(m=g.data)==null?void 0:m.pages),hasPreviousPage:fD(n,(v=g.data)==null?void 0:v.pages),isFetchingNextPage:j,isFetchingPreviousPage:k,isRefetching:S&&!j&&!k}}}let gD=class extends Mc{constructor(t,n){super(),this.client=t,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const r=this.options;this.options=this.client.defaultMutationOptions(t),rh(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const n={listeners:!0};t.type==="success"?n.onSuccess=!0:t.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t<"u"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:eC(),n=t.status==="loading",r={...t,isLoading:n,isPending:n,isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=r}notify(t){zn.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var n,r,a,o;(n=(r=this.mutateOptions).onSuccess)==null||n.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(a=(o=this.mutateOptions).onSettled)==null||a.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var d,m,v,g;(d=(m=this.mutateOptions).onError)==null||d.call(m,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(v=(g=this.mutateOptions).onSettled)==null||v.call(g,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:w})=>{w(this.currentResult)})})}};var rC={exports:{}},sC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vc=L;function vD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yD=typeof Object.is=="function"?Object.is:vD,wD=vc.useState,bD=vc.useEffect,ND=vc.useLayoutEffect,CD=vc.useDebugValue;function ED(e,t){var n=t(),r=wD({inst:{value:n,getSnapshot:t}}),a=r[0].inst,o=r[1];return ND(function(){a.value=n,a.getSnapshot=t,Z1(a)&&o({inst:a})},[e,n,t]),bD(function(){return Z1(a)&&o({inst:a}),e(function(){Z1(a)&&o({inst:a})})},[e]),CD(n),n}function Z1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yD(e,n)}catch{return!0}}function SD(e,t){return t()}var _D=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?SD:ED;sC.useSyncExternalStore=vc.useSyncExternalStore!==void 0?vc.useSyncExternalStore:_D;rC.exports=sC;var jD=rC.exports;const aC=jD.useSyncExternalStore,Qw=L.createContext(void 0),iC=L.createContext(!1);function oC(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Qw),window.ReactQueryClientContext):Qw)}const cn=({context:e}={})=>{const t=L.useContext(oC(e,L.useContext(iC)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},AD=({client:e,children:t,context:n,contextSharing:r=!1})=>{L.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const a=oC(n,r);return L.createElement(iC.Provider,{value:!n&&r},L.createElement(a.Provider,{value:e},t))},lC=L.createContext(!1),kD=()=>L.useContext(lC);lC.Provider;function TD(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const DD=L.createContext(TD()),ID=()=>L.useContext(DD);function cC(e,t){return typeof e=="function"?e(...t):!!e}const RD=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},MD=e=>{L.useEffect(()=>{e.clearReset()},[e])},OD=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&cC(n,[e.error,r]),LD=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},PD=(e,t)=>e.isLoading&&e.isFetching&&!t,FD=(e,t,n)=>(e==null?void 0:e.suspense)&&PD(t,n),BD=(e,t,n)=>t.fetchOptimistic(e).then(({data:r})=>{e.onSuccess==null||e.onSuccess(r),e.onSettled==null||e.onSettled(r,null)}).catch(r=>{n.clearReset(),e.onError==null||e.onError(r),e.onSettled==null||e.onSettled(void 0,r)});function uC(e,t){const n=cn({context:e.context}),r=kD(),a=ID(),o=n.defaultQueryOptions(e);o._optimisticResults=r?"isRestoring":"optimistic",o.onError&&(o.onError=zn.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=zn.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=zn.batchCalls(o.onSettled)),LD(o),RD(o,a),MD(a);const[d]=L.useState(()=>new t(n,o)),m=d.getOptimisticResult(o);if(aC(L.useCallback(v=>{const g=r?()=>{}:d.subscribe(zn.batchCalls(v));return d.updateResult(),g},[d,r]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),L.useEffect(()=>{d.setOptions(o,{listeners:!1})},[o,d]),FD(o,m,r))throw BD(o,d,a);if(OD({result:m,errorResetBoundary:a,useErrorBoundary:o.useErrorBoundary,query:d.getCurrentQuery()}))throw m.error;return o.notifyOnChangeProps?m:d.trackResult(m)}function ct(e,t,n){const r=ec(e,t,n);return uC(r,nC)}function Tt(e,t,n){const r=eD(e,t,n),a=cn({context:r.context}),[o]=L.useState(()=>new gD(a,r));L.useEffect(()=>{o.setOptions(r)},[o,r]);const d=aC(L.useCallback(v=>o.subscribe(zn.batchCalls(v)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),m=L.useCallback((v,g)=>{o.mutate(v,g).catch(UD)},[o]);if(d.error&&cC(o.options.useErrorBoundary,[d.error]))throw d.error;return{...d,mutate:m,mutateAsync:d.mutate}}function UD(){}function Zg(e,t,n){const r=ec(e,t,n);return uC(r,xD)}function dC(e,t){return function(){return e.apply(t,arguments)}}const{toString:qD}=Object.prototype,{getPrototypeOf:Jg}=Object,{iterator:Qh,toStringTag:fC}=Symbol,Xh=(e=>t=>{const n=qD.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ma=e=>(e=e.toLowerCase(),t=>Xh(t)===e),Kh=e=>t=>typeof t===e,{isArray:Oc}=Array,dd=Kh("undefined");function zD(e){return e!==null&&!dd(e)&&e.constructor!==null&&!dd(e.constructor)&&is(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const hC=ma("ArrayBuffer");function WD(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&hC(e.buffer),t}const HD=Kh("string"),is=Kh("function"),pC=Kh("number"),Zh=e=>e!==null&&typeof e=="object",VD=e=>e===!0||e===!1,vf=e=>{if(Xh(e)!=="object")return!1;const t=Jg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(fC in e)&&!(Qh in e)},YD=ma("Date"),$D=ma("File"),GD=ma("Blob"),QD=ma("FileList"),XD=e=>Zh(e)&&is(e.pipe),KD=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||is(e.append)&&((t=Xh(e))==="formdata"||t==="object"&&is(e.toString)&&e.toString()==="[object FormData]"))},ZD=ma("URLSearchParams"),[JD,eI,tI,nI]=["ReadableStream","Request","Response","Headers"].map(ma),rI=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sd(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),Oc(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),d=o.length;let m;for(r=0;r<d;r++)m=o[r],t.call(null,e[m],m,e)}}function mC(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const Zo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),xC=e=>!dd(e)&&e!==Zo;function vx(){const{caseless:e}=xC(this)&&this||{},t={},n=(r,a)=>{const o=e&&mC(t,a)||a;vf(t[o])&&vf(r)?t[o]=vx(t[o],r):vf(r)?t[o]=vx({},r):Oc(r)?t[o]=r.slice():t[o]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Sd(arguments[r],n);return t}const sI=(e,t,n,{allOwnKeys:r}={})=>(Sd(t,(a,o)=>{n&&is(a)?e[o]=dC(a,n):e[o]=a},{allOwnKeys:r}),e),aI=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),iI=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},oI=(e,t,n,r)=>{let a,o,d;const m={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)d=a[o],(!r||r(d,e,t))&&!m[d]&&(t[d]=e[d],m[d]=!0);e=n!==!1&&Jg(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},lI=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},cI=e=>{if(!e)return null;if(Oc(e))return e;let t=e.length;if(!pC(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},uI=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Jg(Uint8Array)),dI=(e,t)=>{const r=(e&&e[Qh]).call(e);let a;for(;(a=r.next())&&!a.done;){const o=a.value;t.call(e,o[0],o[1])}},fI=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},hI=ma("HTMLFormElement"),pI=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),Xw=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),mI=ma("RegExp"),gC=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Sd(n,(a,o)=>{let d;(d=t(a,o,e))!==!1&&(r[o]=d||a)}),Object.defineProperties(e,r)},xI=e=>{gC(e,(t,n)=>{if(is(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(is(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},gI=(e,t)=>{const n={},r=a=>{a.forEach(o=>{n[o]=!0})};return Oc(e)?r(e):r(String(e).split(t)),n},vI=()=>{},yI=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function wI(e){return!!(e&&is(e.append)&&e[fC]==="FormData"&&e[Qh])}const bI=e=>{const t=new Array(10),n=(r,a)=>{if(Zh(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[a]=r;const o=Oc(r)?[]:{};return Sd(r,(d,m)=>{const v=n(d,a+1);!dd(v)&&(o[m]=v)}),t[a]=void 0,o}}return r};return n(e,0)},NI=ma("AsyncFunction"),CI=e=>e&&(Zh(e)||is(e))&&is(e.then)&&is(e.catch),vC=((e,t)=>e?setImmediate:t?((n,r)=>(Zo.addEventListener("message",({source:a,data:o})=>{a===Zo&&o===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Zo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",is(Zo.postMessage)),EI=typeof queueMicrotask<"u"?queueMicrotask.bind(Zo):typeof process<"u"&&process.nextTick||vC,SI=e=>e!=null&&is(e[Qh]),ge={isArray:Oc,isArrayBuffer:hC,isBuffer:zD,isFormData:KD,isArrayBufferView:WD,isString:HD,isNumber:pC,isBoolean:VD,isObject:Zh,isPlainObject:vf,isReadableStream:JD,isRequest:eI,isResponse:tI,isHeaders:nI,isUndefined:dd,isDate:YD,isFile:$D,isBlob:GD,isRegExp:mI,isFunction:is,isStream:XD,isURLSearchParams:ZD,isTypedArray:uI,isFileList:QD,forEach:Sd,merge:vx,extend:sI,trim:rI,stripBOM:aI,inherits:iI,toFlatObject:oI,kindOf:Xh,kindOfTest:ma,endsWith:lI,toArray:cI,forEachEntry:dI,matchAll:fI,isHTMLForm:hI,hasOwnProperty:Xw,hasOwnProp:Xw,reduceDescriptors:gC,freezeMethods:xI,toObjectSet:gI,toCamelCase:pI,noop:vI,toFiniteNumber:yI,findKey:mC,global:Zo,isContextDefined:xC,isSpecCompliantForm:wI,toJSONObject:bI,isAsyncFn:NI,isThenable:CI,setImmediate:vC,asap:EI,isIterable:SI};function bt(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}ge.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const yC=bt.prototype,wC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wC[e]={value:e}});Object.defineProperties(bt,wC);Object.defineProperty(yC,"isAxiosError",{value:!0});bt.from=(e,t,n,r,a,o)=>{const d=Object.create(yC);return ge.toFlatObject(e,d,function(v){return v!==Error.prototype},m=>m!=="isAxiosError"),bt.call(d,e.message,t,n,r,a),d.cause=e,d.name=e.name,o&&Object.assign(d,o),d};const _I=null;function yx(e){return ge.isPlainObject(e)||ge.isArray(e)}function bC(e){return ge.endsWith(e,"[]")?e.slice(0,-2):e}function Kw(e,t,n){return e?e.concat(t).map(function(a,o){return a=bC(a),!n&&o?"["+a+"]":a}).join(n?".":""):t}function jI(e){return ge.isArray(e)&&!e.some(yx)}const AI=ge.toFlatObject(ge,{},null,function(t){return/^is[A-Z]/.test(t)});function Jh(e,t,n){if(!ge.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ge.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,T){return!ge.isUndefined(T[R])});const r=n.metaTokens,a=n.visitor||w,o=n.dots,d=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(t);if(!ge.isFunction(a))throw new TypeError("visitor must be a function");function g(k){if(k===null)return"";if(ge.isDate(k))return k.toISOString();if(!v&&ge.isBlob(k))throw new bt("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(k)||ge.isTypedArray(k)?v&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function w(k,R,T){let I=k;if(k&&!T&&typeof k=="object"){if(ge.endsWith(R,"{}"))R=r?R:R.slice(0,-2),k=JSON.stringify(k);else if(ge.isArray(k)&&jI(k)||(ge.isFileList(k)||ge.endsWith(R,"[]"))&&(I=ge.toArray(k)))return R=bC(R),I.forEach(function(M,B){!(ge.isUndefined(M)||M===null)&&t.append(d===!0?Kw([R],B,o):d===null?R:R+"[]",g(M))}),!1}return yx(k)?!0:(t.append(Kw(T,R,o),g(k)),!1)}const N=[],S=Object.assign(AI,{defaultVisitor:w,convertValue:g,isVisitable:yx});function j(k,R){if(!ge.isUndefined(k)){if(N.indexOf(k)!==-1)throw Error("Circular reference detected in "+R.join("."));N.push(k),ge.forEach(k,function(I,A){(!(ge.isUndefined(I)||I===null)&&a.call(t,I,ge.isString(A)?A.trim():A,R,S))===!0&&j(I,R?R.concat(A):[A])}),N.pop()}}if(!ge.isObject(e))throw new TypeError("data must be an object");return j(e),t}function Zw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function e2(e,t){this._pairs=[],e&&Jh(e,this,t)}const NC=e2.prototype;NC.append=function(t,n){this._pairs.push([t,n])};NC.toString=function(t){const n=t?function(r){return t.call(this,r,Zw)}:Zw;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function kI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function CC(e,t,n){if(!t)return e;const r=n&&n.encode||kI;ge.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(a?o=a(t,n):o=ge.isURLSearchParams(t)?t.toString():new e2(t,n).toString(r),o){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class TI{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ge.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Jw=TI,EC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},DI=typeof URLSearchParams<"u"?URLSearchParams:e2,II=typeof FormData<"u"?FormData:null,RI=typeof Blob<"u"?Blob:null,MI={isBrowser:!0,classes:{URLSearchParams:DI,FormData:II,Blob:RI},protocols:["http","https","file","blob","url","data"]},t2=typeof window<"u"&&typeof document<"u",wx=typeof navigator=="object"&&navigator||void 0,OI=t2&&(!wx||["ReactNative","NativeScript","NS"].indexOf(wx.product)<0),LI=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),PI=t2&&window.location.href||"http://localhost",FI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:t2,hasStandardBrowserEnv:OI,hasStandardBrowserWebWorkerEnv:LI,navigator:wx,origin:PI},Symbol.toStringTag,{value:"Module"})),Rr={...FI,...MI};function BI(e,t){return Jh(e,new Rr.classes.URLSearchParams,Object.assign({visitor:function(n,r,a,o){return Rr.isNode&&ge.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function UI(e){return ge.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function qI(e){const t={},n=Object.keys(e);let r;const a=n.length;let o;for(r=0;r<a;r++)o=n[r],t[o]=e[o];return t}function SC(e){function t(n,r,a,o){let d=n[o++];if(d==="__proto__")return!0;const m=Number.isFinite(+d),v=o>=n.length;return d=!d&&ge.isArray(a)?a.length:d,v?(ge.hasOwnProp(a,d)?a[d]=[a[d],r]:a[d]=r,!m):((!a[d]||!ge.isObject(a[d]))&&(a[d]=[]),t(n,r,a[d],o)&&ge.isArray(a[d])&&(a[d]=qI(a[d])),!m)}if(ge.isFormData(e)&&ge.isFunction(e.entries)){const n={};return ge.forEachEntry(e,(r,a)=>{t(UI(r),a,n,0)}),n}return null}function zI(e,t,n){if(ge.isString(e))try{return(t||JSON.parse)(e),ge.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const n2={transitional:EC,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,o=ge.isObject(t);if(o&&ge.isHTMLForm(t)&&(t=new FormData(t)),ge.isFormData(t))return a?JSON.stringify(SC(t)):t;if(ge.isArrayBuffer(t)||ge.isBuffer(t)||ge.isStream(t)||ge.isFile(t)||ge.isBlob(t)||ge.isReadableStream(t))return t;if(ge.isArrayBufferView(t))return t.buffer;if(ge.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let m;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return BI(t,this.formSerializer).toString();if((m=ge.isFileList(t))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Jh(m?{"files[]":t}:t,v&&new v,this.formSerializer)}}return o||a?(n.setContentType("application/json",!1),zI(t)):t}],transformResponse:[function(t){const n=this.transitional||n2.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(ge.isResponse(t)||ge.isReadableStream(t))return t;if(t&&ge.isString(t)&&(r&&!this.responseType||a)){const d=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(m){if(d)throw m.name==="SyntaxError"?bt.from(m,bt.ERR_BAD_RESPONSE,this,null,this.response):m}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rr.classes.FormData,Blob:Rr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],e=>{n2.headers[e]={}});const r2=n2,WI=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HI=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(d){a=d.indexOf(":"),n=d.substring(0,a).trim().toLowerCase(),r=d.substring(a+1).trim(),!(!n||t[n]&&WI[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},eb=Symbol("internals");function Eu(e){return e&&String(e).trim().toLowerCase()}function yf(e){return e===!1||e==null?e:ge.isArray(e)?e.map(yf):String(e)}function VI(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const YI=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function J1(e,t,n,r,a){if(ge.isFunction(r))return r.call(this,t,n);if(a&&(t=n),!!ge.isString(t)){if(ge.isString(r))return t.indexOf(r)!==-1;if(ge.isRegExp(r))return r.test(t)}}function $I(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function GI(e,t){const n=ge.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,o,d){return this[r].call(this,t,a,o,d)},configurable:!0})})}class ep{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function o(m,v,g){const w=Eu(v);if(!w)throw new Error("header name must be a non-empty string");const N=ge.findKey(a,w);(!N||a[N]===void 0||g===!0||g===void 0&&a[N]!==!1)&&(a[N||v]=yf(m))}const d=(m,v)=>ge.forEach(m,(g,w)=>o(g,w,v));if(ge.isPlainObject(t)||t instanceof this.constructor)d(t,n);else if(ge.isString(t)&&(t=t.trim())&&!YI(t))d(HI(t),n);else if(ge.isObject(t)&&ge.isIterable(t)){let m={},v,g;for(const w of t){if(!ge.isArray(w))throw TypeError("Object iterator must return a key-value pair");m[g=w[0]]=(v=m[g])?ge.isArray(v)?[...v,w[1]]:[v,w[1]]:w[1]}d(m,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Eu(t),t){const r=ge.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return VI(a);if(ge.isFunction(n))return n.call(this,a,r);if(ge.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Eu(t),t){const r=ge.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||J1(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function o(d){if(d=Eu(d),d){const m=ge.findKey(r,d);m&&(!n||J1(r,r[m],m,n))&&(delete r[m],a=!0)}}return ge.isArray(t)?t.forEach(o):o(t),a}clear(t){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const o=n[r];(!t||J1(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const n=this,r={};return ge.forEach(this,(a,o)=>{const d=ge.findKey(r,o);if(d){n[d]=yf(a),delete n[o];return}const m=t?$I(o):String(o).trim();m!==o&&delete n[o],n[m]=yf(a),r[m]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ge.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&ge.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[eb]=this[eb]={accessors:{}}).accessors,a=this.prototype;function o(d){const m=Eu(d);r[m]||(GI(a,d),r[m]=!0)}return ge.isArray(t)?t.forEach(o):o(t),this}}ep.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(ep.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ge.freezeMethods(ep);const da=ep;function em(e,t){const n=this||r2,r=t||n,a=da.from(r.headers);let o=r.data;return ge.forEach(e,function(m){o=m.call(n,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function _C(e){return!!(e&&e.__CANCEL__)}function Lc(e,t,n){bt.call(this,e??"canceled",bt.ERR_CANCELED,t,n),this.name="CanceledError"}ge.inherits(Lc,bt,{__CANCEL__:!0});function jC(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new bt("Request failed with status code "+n.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function QI(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function XI(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,o=0,d;return t=t!==void 0?t:1e3,function(v){const g=Date.now(),w=r[o];d||(d=g),n[a]=v,r[a]=g;let N=o,S=0;for(;N!==a;)S+=n[N++],N=N%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),g-d<t)return;const j=w&&g-w;return j?Math.round(S*1e3/j):void 0}}function KI(e,t){let n=0,r=1e3/t,a,o;const d=(g,w=Date.now())=>{n=w,a=null,o&&(clearTimeout(o),o=null),e.apply(null,g)};return[(...g)=>{const w=Date.now(),N=w-n;N>=r?d(g,w):(a=g,o||(o=setTimeout(()=>{o=null,d(a)},r-N)))},()=>a&&d(a)]}const ih=(e,t,n=3)=>{let r=0;const a=XI(50,250);return KI(o=>{const d=o.loaded,m=o.lengthComputable?o.total:void 0,v=d-r,g=a(v),w=d<=m;r=d;const N={loaded:d,total:m,progress:m?d/m:void 0,bytes:v,rate:g||void 0,estimated:g&&m&&w?(m-d)/g:void 0,event:o,lengthComputable:m!=null,[t?"download":"upload"]:!0};e(N)},n)},tb=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},nb=e=>(...t)=>ge.asap(()=>e(...t)),ZI=Rr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Rr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Rr.origin),Rr.navigator&&/(msie|trident)/i.test(Rr.navigator.userAgent)):()=>!0,JI=Rr.hasStandardBrowserEnv?{write(e,t,n,r,a,o){const d=[e+"="+encodeURIComponent(t)];ge.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),ge.isString(r)&&d.push("path="+r),ge.isString(a)&&d.push("domain="+a),o===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function eR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function tR(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function AC(e,t,n){let r=!eR(t);return e&&(r||n==!1)?tR(e,t):t}const rb=e=>e instanceof da?{...e}:e;function dl(e,t){t=t||{};const n={};function r(g,w,N,S){return ge.isPlainObject(g)&&ge.isPlainObject(w)?ge.merge.call({caseless:S},g,w):ge.isPlainObject(w)?ge.merge({},w):ge.isArray(w)?w.slice():w}function a(g,w,N,S){if(ge.isUndefined(w)){if(!ge.isUndefined(g))return r(void 0,g,N,S)}else return r(g,w,N,S)}function o(g,w){if(!ge.isUndefined(w))return r(void 0,w)}function d(g,w){if(ge.isUndefined(w)){if(!ge.isUndefined(g))return r(void 0,g)}else return r(void 0,w)}function m(g,w,N){if(N in t)return r(g,w);if(N in e)return r(void 0,g)}const v={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:m,headers:(g,w,N)=>a(rb(g),rb(w),N,!0)};return ge.forEach(Object.keys(Object.assign({},e,t)),function(w){const N=v[w]||a,S=N(e[w],t[w],w);ge.isUndefined(S)&&N!==m||(n[w]=S)}),n}const kC=e=>{const t=dl({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:d,auth:m}=t;t.headers=d=da.from(d),t.url=CC(AC(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),m&&d.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):"")));let v;if(ge.isFormData(n)){if(Rr.hasStandardBrowserEnv||Rr.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((v=d.getContentType())!==!1){const[g,...w]=v?v.split(";").map(N=>N.trim()).filter(Boolean):[];d.setContentType([g||"multipart/form-data",...w].join("; "))}}if(Rr.hasStandardBrowserEnv&&(r&&ge.isFunction(r)&&(r=r(t)),r||r!==!1&&ZI(t.url))){const g=a&&o&&JI.read(o);g&&d.set(a,g)}return t},nR=typeof XMLHttpRequest<"u",rR=nR&&function(e){return new Promise(function(n,r){const a=kC(e);let o=a.data;const d=da.from(a.headers).normalize();let{responseType:m,onUploadProgress:v,onDownloadProgress:g}=a,w,N,S,j,k;function R(){j&&j(),k&&k(),a.cancelToken&&a.cancelToken.unsubscribe(w),a.signal&&a.signal.removeEventListener("abort",w)}let T=new XMLHttpRequest;T.open(a.method.toUpperCase(),a.url,!0),T.timeout=a.timeout;function I(){if(!T)return;const M=da.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),G={data:!m||m==="text"||m==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:M,config:e,request:T};jC(function(O){n(O),R()},function(O){r(O),R()},G),T=null}"onloadend"in T?T.onloadend=I:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(I)},T.onabort=function(){T&&(r(new bt("Request aborted",bt.ECONNABORTED,e,T)),T=null)},T.onerror=function(){r(new bt("Network Error",bt.ERR_NETWORK,e,T)),T=null},T.ontimeout=function(){let B=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const G=a.transitional||EC;a.timeoutErrorMessage&&(B=a.timeoutErrorMessage),r(new bt(B,G.clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,e,T)),T=null},o===void 0&&d.setContentType(null),"setRequestHeader"in T&&ge.forEach(d.toJSON(),function(B,G){T.setRequestHeader(G,B)}),ge.isUndefined(a.withCredentials)||(T.withCredentials=!!a.withCredentials),m&&m!=="json"&&(T.responseType=a.responseType),g&&([S,k]=ih(g,!0),T.addEventListener("progress",S)),v&&T.upload&&([N,j]=ih(v),T.upload.addEventListener("progress",N),T.upload.addEventListener("loadend",j)),(a.cancelToken||a.signal)&&(w=M=>{T&&(r(!M||M.type?new Lc(null,e,T):M),T.abort(),T=null)},a.cancelToken&&a.cancelToken.subscribe(w),a.signal&&(a.signal.aborted?w():a.signal.addEventListener("abort",w)));const A=QI(a.url);if(A&&Rr.protocols.indexOf(A)===-1){r(new bt("Unsupported protocol "+A+":",bt.ERR_BAD_REQUEST,e));return}T.send(o||null)})},sR=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,a;const o=function(g){if(!a){a=!0,m();const w=g instanceof Error?g:this.reason;r.abort(w instanceof bt?w:new Lc(w instanceof Error?w.message:w))}};let d=t&&setTimeout(()=>{d=null,o(new bt(`timeout ${t} of ms exceeded`,bt.ETIMEDOUT))},t);const m=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(o):g.removeEventListener("abort",o)}),e=null)};e.forEach(g=>g.addEventListener("abort",o));const{signal:v}=r;return v.unsubscribe=()=>ge.asap(m),v}},aR=sR,iR=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,a;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},oR=async function*(e,t){for await(const n of lR(e))yield*iR(n,t)},lR=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},sb=(e,t,n,r)=>{const a=oR(e,t);let o=0,d,m=v=>{d||(d=!0,r&&r(v))};return new ReadableStream({async pull(v){try{const{done:g,value:w}=await a.next();if(g){m(),v.close();return}let N=w.byteLength;if(n){let S=o+=N;n(S)}v.enqueue(new Uint8Array(w))}catch(g){throw m(g),g}},cancel(v){return m(v),a.return()}},{highWaterMark:2})},tp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",TC=tp&&typeof ReadableStream=="function",cR=tp&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),DC=(e,...t)=>{try{return!!e(...t)}catch{return!1}},uR=TC&&DC(()=>{let e=!1;const t=new Request(Rr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ab=64*1024,bx=TC&&DC(()=>ge.isReadableStream(new Response("").body)),oh={stream:bx&&(e=>e.body)};tp&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!oh[t]&&(oh[t]=ge.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new bt(`Response type '${t}' is not supported`,bt.ERR_NOT_SUPPORT,r)})})})(new Response);const dR=async e=>{if(e==null)return 0;if(ge.isBlob(e))return e.size;if(ge.isSpecCompliantForm(e))return(await new Request(Rr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(e)||ge.isArrayBuffer(e))return e.byteLength;if(ge.isURLSearchParams(e)&&(e=e+""),ge.isString(e))return(await cR(e)).byteLength},fR=async(e,t)=>{const n=ge.toFiniteNumber(e.getContentLength());return n??dR(t)},hR=tp&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:o,timeout:d,onDownloadProgress:m,onUploadProgress:v,responseType:g,headers:w,withCredentials:N="same-origin",fetchOptions:S}=kC(e);g=g?(g+"").toLowerCase():"text";let j=aR([a,o&&o.toAbortSignal()],d),k;const R=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let T;try{if(v&&uR&&n!=="get"&&n!=="head"&&(T=await fR(w,r))!==0){let G=new Request(t,{method:"POST",body:r,duplex:"half"}),P;if(ge.isFormData(r)&&(P=G.headers.get("content-type"))&&w.setContentType(P),G.body){const[O,V]=tb(T,ih(nb(v)));r=sb(G.body,ab,O,V)}}ge.isString(N)||(N=N?"include":"omit");const I="credentials"in Request.prototype;k=new Request(t,{...S,signal:j,method:n.toUpperCase(),headers:w.normalize().toJSON(),body:r,duplex:"half",credentials:I?N:void 0});let A=await fetch(k);const M=bx&&(g==="stream"||g==="response");if(bx&&(m||M&&R)){const G={};["status","statusText","headers"].forEach(W=>{G[W]=A[W]});const P=ge.toFiniteNumber(A.headers.get("content-length")),[O,V]=m&&tb(P,ih(nb(m),!0))||[];A=new Response(sb(A.body,ab,O,()=>{V&&V(),R&&R()}),G)}g=g||"text";let B=await oh[ge.findKey(oh,g)||"text"](A,e);return!M&&R&&R(),await new Promise((G,P)=>{jC(G,P,{data:B,headers:da.from(A.headers),status:A.status,statusText:A.statusText,config:e,request:k})})}catch(I){throw R&&R(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new bt("Network Error",bt.ERR_NETWORK,e,k),{cause:I.cause||I}):bt.from(I,I&&I.code,e,k)}}),Nx={http:_I,xhr:rR,fetch:hR};ge.forEach(Nx,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ib=e=>`- ${e}`,pR=e=>ge.isFunction(e)||e===null||e===!1,IC={getAdapter:e=>{e=ge.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let o=0;o<t;o++){n=e[o];let d;if(r=n,!pR(n)&&(r=Nx[(d=String(n)).toLowerCase()],r===void 0))throw new bt(`Unknown adapter '${d}'`);if(r)break;a[d||"#"+o]=r}if(!r){const o=Object.entries(a).map(([m,v])=>`adapter ${m} `+(v===!1?"is not supported by the environment":"is not available in the build"));let d=t?o.length>1?`since :
`+o.map(ib).join(`
`):" "+ib(o[0]):"as no adapter specified";throw new bt("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return r},adapters:Nx};function tm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lc(null,e)}function ob(e){return tm(e),e.headers=da.from(e.headers),e.data=em.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),IC.getAdapter(e.adapter||r2.adapter)(e).then(function(r){return tm(e),r.data=em.call(e,e.transformResponse,r),r.headers=da.from(r.headers),r},function(r){return _C(r)||(tm(e),r&&r.response&&(r.response.data=em.call(e,e.transformResponse,r.response),r.response.headers=da.from(r.response.headers))),Promise.reject(r)})}const RC="1.9.0",np={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{np[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const lb={};np.transitional=function(t,n,r){function a(o,d){return"[Axios v"+RC+"] Transitional option '"+o+"'"+d+(r?". "+r:"")}return(o,d,m)=>{if(t===!1)throw new bt(a(d," has been removed"+(n?" in "+n:"")),bt.ERR_DEPRECATED);return n&&!lb[d]&&(lb[d]=!0,console.warn(a(d," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,d,m):!0}};np.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function mR(e,t,n){if(typeof e!="object")throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],d=t[o];if(d){const m=e[o],v=m===void 0||d(m,o,e);if(v!==!0)throw new bt("option "+o+" must be "+v,bt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bt("Unknown option "+o,bt.ERR_BAD_OPTION)}}const wf={assertOptions:mR,validators:np},Ca=wf.validators;class lh{constructor(t){this.defaults=t||{},this.interceptors={request:new Jw,response:new Jw}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=dl(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:o}=n;r!==void 0&&wf.assertOptions(r,{silentJSONParsing:Ca.transitional(Ca.boolean),forcedJSONParsing:Ca.transitional(Ca.boolean),clarifyTimeoutError:Ca.transitional(Ca.boolean)},!1),a!=null&&(ge.isFunction(a)?n.paramsSerializer={serialize:a}:wf.assertOptions(a,{encode:Ca.function,serialize:Ca.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),wf.assertOptions(n,{baseUrl:Ca.spelling("baseURL"),withXsrfToken:Ca.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=o&&ge.merge(o.common,o[n.method]);o&&ge.forEach(["delete","get","head","post","put","patch","common"],k=>{delete o[k]}),n.headers=da.concat(d,o);const m=[];let v=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(n)===!1||(v=v&&R.synchronous,m.unshift(R.fulfilled,R.rejected))});const g=[];this.interceptors.response.forEach(function(R){g.push(R.fulfilled,R.rejected)});let w,N=0,S;if(!v){const k=[ob.bind(this),void 0];for(k.unshift.apply(k,m),k.push.apply(k,g),S=k.length,w=Promise.resolve(n);N<S;)w=w.then(k[N++],k[N++]);return w}S=m.length;let j=n;for(N=0;N<S;){const k=m[N++],R=m[N++];try{j=k(j)}catch(T){R.call(this,T);break}}try{w=ob.call(this,j)}catch(k){return Promise.reject(k)}for(N=0,S=g.length;N<S;)w=w.then(g[N++],g[N++]);return w}getUri(t){t=dl(this.defaults,t);const n=AC(t.baseURL,t.url,t.allowAbsoluteUrls);return CC(n,t.params,t.paramsSerializer)}}ge.forEach(["delete","get","head","options"],function(t){lh.prototype[t]=function(n,r){return this.request(dl(r||{},{method:t,url:n,data:(r||{}).data}))}});ge.forEach(["post","put","patch"],function(t){function n(r){return function(o,d,m){return this.request(dl(m||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:d}))}}lh.prototype[t]=n(),lh.prototype[t+"Form"]=n(!0)});const bf=lh;class s2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(a=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](a);r._listeners=null}),this.promise.then=a=>{let o;const d=new Promise(m=>{r.subscribe(m),o=m}).then(a);return d.cancel=function(){r.unsubscribe(o)},d},t(function(o,d,m){r.reason||(r.reason=new Lc(o,d,m),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new s2(function(a){t=a}),cancel:t}}}const xR=s2;function gR(e){return function(n){return e.apply(null,n)}}function vR(e){return ge.isObject(e)&&e.isAxiosError===!0}const Cx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cx).forEach(([e,t])=>{Cx[t]=e});const yR=Cx;function MC(e){const t=new bf(e),n=dC(bf.prototype.request,t);return ge.extend(n,bf.prototype,t,{allOwnKeys:!0}),ge.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return MC(dl(e,a))},n}const er=MC(r2);er.Axios=bf;er.CanceledError=Lc;er.CancelToken=xR;er.isCancel=_C;er.VERSION=RC;er.toFormData=Jh;er.AxiosError=bt;er.Cancel=er.CanceledError;er.all=function(t){return Promise.all(t)};er.spread=gR;er.isAxiosError=vR;er.mergeConfig=dl;er.AxiosHeaders=da;er.formToJSON=e=>SC(ge.isHTMLForm(e)?new FormData(e):e);er.getAdapter=IC.getAdapter;er.HttpStatusCode=yR;er.default=er;const Qe=er,OC=L.createContext(),lr=()=>L.useContext(OC),wR=({children:e})=>{const[t,n]=L.useState(null),[r,a]=L.useState(localStorage.getItem("token")),[o,d]=L.useState(!0),[m,v]=L.useState(null);L.useEffect(()=>{r?Qe.defaults.headers.common.Authorization=`Bearer ${r}`:delete Qe.defaults.headers.common.Authorization},[r]),L.useEffect(()=>{const B=async()=>{if(!r){d(!1);return}try{const P=await Qe.get("/api/auth/me");n(P.data.user),v(null)}catch(P){console.error("Token verification failed:",P),P.response&&P.response.status===401?(w(),v("Session expired. Please log in again.")):v("Error verifying session. Please try again.")}finally{d(!1)}};B();const G=setInterval(()=>{r&&B()},60*60*1e3);return()=>{clearInterval(G)}},[r]);const g=async(B,G)=>{var P,O;try{d(!0);const V=await Qe.post("/api/auth/login",{username:B,password:G}),{token:W,user:ee}=V.data;return localStorage.setItem("token",W),Qe.defaults.headers.common.Authorization=`Bearer ${W}`,a(W),n(ee),v(null),ee}catch(V){throw console.error("Login error:",V),v(((O=(P=V.response)==null?void 0:P.data)==null?void 0:O.message)||"Login failed"),V}finally{d(!1)}},w=()=>{localStorage.removeItem("token"),a(null),n(null),delete Qe.defaults.headers.common.Authorization},M={user:t,token:r,loading:o,error:m,login:g,logout:w,register:async B=>{var G,P;try{return d(!0),(await Qe.post("/api/auth/register",B)).data}catch(O){throw console.error("Register error:",O),v(((P=(G=O.response)==null?void 0:G.data)==null?void 0:P.message)||"Registration failed"),O}finally{d(!1)}},isAdmin:()=>(t==null?void 0:t.role)==="admin",isAdvanced:()=>(t==null?void 0:t.role)==="advanced",isBasic:()=>(t==null?void 0:t.role)==="basic",canEditEquipment:()=>(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="advanced",isImpersonating:()=>!!(t!=null&&t.impersonated),impersonateUser:async B=>{var G,P;try{d(!0);const O=await Qe.post(`/api/auth/impersonate/${B}`),{token:V,user:W}=O.data;return localStorage.setItem("token",V),a(V),n(W),v(null),W}catch(O){throw console.error("Impersonation error:",O),v(((P=(G=O.response)==null?void 0:G.data)==null?void 0:P.message)||"Impersonation failed"),O}finally{d(!1)}},getUsers:async()=>{var B,G;try{return(await Qe.get("/api/auth/users")).data.users}catch(P){throw console.error("Get users error:",P),v(((G=(B=P.response)==null?void 0:B.data)==null?void 0:G.message)||"Failed to get users"),P}}};return s.jsx(OC.Provider,{value:M,children:e})};function LC(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=LC(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function jn(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=LC(e))&&(r&&(r+=" "),r+=t);return r}function bR(e){if(!e||typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}bR(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var _d=e=>typeof e=="number"&&!isNaN(e),fl=e=>typeof e=="string",wi=e=>typeof e=="function",NR=e=>fl(e)||_d(e),Ex=e=>fl(e)||wi(e)?e:null,CR=(e,t)=>e===!1||_d(e)&&e>0?e:t,Sx=e=>L.isValidElement(e)||fl(e)||wi(e)||_d(e);function ER(e,t,n=300){let{scrollHeight:r,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=r+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)})})}function SR({enter:e,exit:t,appendPosition:n=!1,collapse:r=!0,collapseDuration:a=300}){return function({children:o,position:d,preventExitTransition:m,done:v,nodeRef:g,isIn:w,playToast:N}){let S=n?`${e}--${d}`:e,j=n?`${t}--${d}`:t,k=L.useRef(0);return L.useLayoutEffect(()=>{let R=g.current,T=S.split(" "),I=A=>{A.target===g.current&&(N(),R.removeEventListener("animationend",I),R.removeEventListener("animationcancel",I),k.current===0&&A.type!=="animationcancel"&&R.classList.remove(...T))};R.classList.add(...T),R.addEventListener("animationend",I),R.addEventListener("animationcancel",I)},[]),L.useEffect(()=>{let R=g.current,T=()=>{R.removeEventListener("animationend",T),r?ER(R,v,a):v()};w||(m?T():(k.current=1,R.className+=` ${j}`,R.addEventListener("animationend",T)))},[w]),he.createElement(he.Fragment,null,o)}}function cb(e,t){return{content:PC(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function PC(e,t,n=!1){return L.isValidElement(e)&&!fl(e.type)?L.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):wi(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function _R({closeToast:e,theme:t,ariaLabel:n="close"}){return he.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:r=>{r.stopPropagation(),e(!0)},"aria-label":n},he.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},he.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function jR({delay:e,isRunning:t,closeToast:n,type:r="default",hide:a,className:o,controlledProgress:d,progress:m,rtl:v,isIn:g,theme:w}){let N=a||d&&m===0,S={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};d&&(S.transform=`scaleX(${m})`);let j=jn("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${w}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":v}),k=wi(o)?o({rtl:v,type:r,defaultClassName:j}):jn(j,o),R={[d&&m>=1?"onTransitionEnd":"onAnimationEnd"]:d&&m<1?null:()=>{g&&n()}};return he.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":N},he.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${w} Toastify__progress-bar--${r}`}),he.createElement("div",{role:"progressbar","aria-hidden":N?"true":"false","aria-label":"notification timer",className:k,style:S,...R}))}var AR=1,FC=()=>`${AR++}`;function kR(e,t,n){let r=1,a=0,o=[],d=[],m=t,v=new Map,g=new Set,w=A=>(g.add(A),()=>g.delete(A)),N=()=>{d=Array.from(v.values()),g.forEach(A=>A())},S=({containerId:A,toastId:M,updateId:B})=>{let G=A?A!==e:e!==1,P=v.has(M)&&B==null;return G||P},j=(A,M)=>{v.forEach(B=>{var G;(M==null||M===B.props.toastId)&&((G=B.toggle)==null||G.call(B,A))})},k=A=>{var M,B;(B=(M=A.props)==null?void 0:M.onClose)==null||B.call(M,A.removalReason),A.isActive=!1},R=A=>{if(A==null)v.forEach(k);else{let M=v.get(A);M&&k(M)}N()},T=()=>{a-=o.length,o=[]},I=A=>{var M,B;let{toastId:G,updateId:P}=A.props,O=P==null;A.staleId&&v.delete(A.staleId),A.isActive=!0,v.set(G,A),N(),n(cb(A,O?"added":"updated")),O&&((B=(M=A.props).onOpen)==null||B.call(M))};return{id:e,props:m,observe:w,toggle:j,removeToast:R,toasts:v,clearQueue:T,buildToast:(A,M)=>{if(S(M))return;let{toastId:B,updateId:G,data:P,staleId:O,delay:V}=M,W=G==null;W&&a++;let ee={...m,style:m.toastStyle,key:r++,...Object.fromEntries(Object.entries(M).filter(([ne,te])=>te!=null)),toastId:B,updateId:G,data:P,isIn:!1,className:Ex(M.className||m.toastClassName),progressClassName:Ex(M.progressClassName||m.progressClassName),autoClose:M.isLoading?!1:CR(M.autoClose,m.autoClose),closeToast(ne){v.get(B).removalReason=ne,R(B)},deleteToast(){let ne=v.get(B);if(ne!=null){if(n(cb(ne,"removed")),v.delete(B),a--,a<0&&(a=0),o.length>0){I(o.shift());return}N()}}};ee.closeButton=m.closeButton,M.closeButton===!1||Sx(M.closeButton)?ee.closeButton=M.closeButton:M.closeButton===!0&&(ee.closeButton=Sx(m.closeButton)?m.closeButton:!0);let ce={content:A,props:ee,staleId:O};m.limit&&m.limit>0&&a>m.limit&&W?o.push(ce):_d(V)?setTimeout(()=>{I(ce)},V):I(ce)},setProps(A){m=A},setToggle:(A,M)=>{let B=v.get(A);B&&(B.toggle=M)},isToastActive:A=>{var M;return(M=v.get(A))==null?void 0:M.isActive},getSnapshot:()=>d}}var Wr=new Map,fd=[],_x=new Set,TR=e=>_x.forEach(t=>t(e)),BC=()=>Wr.size>0;function DR(){fd.forEach(e=>qC(e.content,e.options)),fd=[]}var IR=(e,{containerId:t})=>{var n;return(n=Wr.get(t||1))==null?void 0:n.toasts.get(e)};function UC(e,t){var n;if(t)return!!((n=Wr.get(t))!=null&&n.isToastActive(e));let r=!1;return Wr.forEach(a=>{a.isToastActive(e)&&(r=!0)}),r}function RR(e){if(!BC()){fd=fd.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||NR(e))Wr.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Wr.get(e.containerId);t?t.removeToast(e.id):Wr.forEach(n=>{n.removeToast(e.id)})}}var MR=(e={})=>{Wr.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function qC(e,t){Sx(e)&&(BC()||fd.push({content:e,options:t}),Wr.forEach(n=>{n.buildToast(e,t)}))}function OR(e){var t;(t=Wr.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function zC(e,t){Wr.forEach(n=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===n.id)&&n.toggle(e,t==null?void 0:t.id)})}function LR(e){let t=e.containerId||1;return{subscribe(n){let r=kR(t,e,TR);Wr.set(t,r);let a=r.observe(n);return DR(),()=>{a(),Wr.delete(t)}},setProps(n){var r;(r=Wr.get(t))==null||r.setProps(n)},getSnapshot(){var n;return(n=Wr.get(t))==null?void 0:n.getSnapshot()}}}function PR(e){return _x.add(e),()=>{_x.delete(e)}}function FR(e){return e&&(fl(e.toastId)||_d(e.toastId))?e.toastId:FC()}function jd(e,t){return qC(e,t),t.toastId}function rp(e,t){return{...t,type:t&&t.type||e,toastId:FR(t)}}function sp(e){return(t,n)=>jd(t,rp(e,n))}function st(e,t){return jd(e,rp("default",t))}st.loading=(e,t)=>jd(e,rp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function BR(e,{pending:t,error:n,success:r},a){let o;t&&(o=fl(t)?st.loading(t,a):st.loading(t.render,{...a,...t}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(g,w,N)=>{if(w==null){st.dismiss(o);return}let S={type:g,...d,...a,data:N},j=fl(w)?{render:w}:w;return o?st.update(o,{...S,...j}):st(j.render,{...S,...j}),N},v=wi(e)?e():e;return v.then(g=>m("success",r,g)).catch(g=>m("error",n,g)),v}st.promise=BR;st.success=sp("success");st.info=sp("info");st.error=sp("error");st.warning=sp("warning");st.warn=st.warning;st.dark=(e,t)=>jd(e,rp("default",{theme:"dark",...t}));function UR(e){RR(e)}st.dismiss=UR;st.clearWaitingQueue=MR;st.isActive=UC;st.update=(e,t={})=>{let n=IR(e,t);if(n){let{props:r,content:a}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:FC()};o.toastId!==e&&(o.staleId=e);let d=o.render||a;delete o.render,jd(d,o)}};st.done=e=>{st.update(e,{progress:1})};st.onChange=PR;st.play=e=>zC(!0,e);st.pause=e=>zC(!1,e);function qR(e){var t;let{subscribe:n,getSnapshot:r,setProps:a}=L.useRef(LR(e)).current;a(e);let o=(t=L.useSyncExternalStore(n,r,r))==null?void 0:t.slice();function d(m){if(!o)return[];let v=new Map;return e.newestOnTop&&o.reverse(),o.forEach(g=>{let{position:w}=g.props;v.has(w)||v.set(w,[]),v.get(w).push(g)}),Array.from(v,g=>m(g[0],g[1]))}return{getToastToRender:d,isToastActive:UC,count:o==null?void 0:o.length}}function zR(e){let[t,n]=L.useState(!1),[r,a]=L.useState(!1),o=L.useRef(null),d=L.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:m,pauseOnHover:v,closeToast:g,onClick:w,closeOnClick:N}=e;OR({id:e.toastId,containerId:e.containerId,fn:n}),L.useEffect(()=>{if(e.pauseOnFocusLoss)return S(),()=>{j()}},[e.pauseOnFocusLoss]);function S(){document.hasFocus()||I(),window.addEventListener("focus",T),window.addEventListener("blur",I)}function j(){window.removeEventListener("focus",T),window.removeEventListener("blur",I)}function k(O){if(e.draggable===!0||e.draggable===O.pointerType){A();let V=o.current;d.canCloseOnClick=!0,d.canDrag=!0,V.style.transition="none",e.draggableDirection==="x"?(d.start=O.clientX,d.removalDistance=V.offsetWidth*(e.draggablePercent/100)):(d.start=O.clientY,d.removalDistance=V.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function R(O){let{top:V,bottom:W,left:ee,right:ce}=o.current.getBoundingClientRect();O.nativeEvent.type!=="touchend"&&e.pauseOnHover&&O.clientX>=ee&&O.clientX<=ce&&O.clientY>=V&&O.clientY<=W?I():T()}function T(){n(!0)}function I(){n(!1)}function A(){d.didMove=!1,document.addEventListener("pointermove",B),document.addEventListener("pointerup",G)}function M(){document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",G)}function B(O){let V=o.current;if(d.canDrag&&V){d.didMove=!0,t&&I(),e.draggableDirection==="x"?d.delta=O.clientX-d.start:d.delta=O.clientY-d.start,d.start!==O.clientX&&(d.canCloseOnClick=!1);let W=e.draggableDirection==="x"?`${d.delta}px, var(--y)`:`0, calc(${d.delta}px + var(--y))`;V.style.transform=`translate3d(${W},0)`,V.style.opacity=`${1-Math.abs(d.delta/d.removalDistance)}`}}function G(){M();let O=o.current;if(d.canDrag&&d.didMove&&O){if(d.canDrag=!1,Math.abs(d.delta)>d.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}O.style.transition="transform 0.2s, opacity 0.2s",O.style.removeProperty("transform"),O.style.removeProperty("opacity")}}let P={onPointerDown:k,onPointerUp:R};return m&&v&&(P.onMouseEnter=I,e.stacked||(P.onMouseLeave=T)),N&&(P.onClick=O=>{w&&w(O),d.canCloseOnClick&&g(!0)}),{playToast:T,pauseToast:I,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:P}}var WR=typeof window<"u"?L.useLayoutEffect:L.useEffect,ap=({theme:e,type:t,isLoading:n,...r})=>he.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...r});function HR(e){return he.createElement(ap,{...e},he.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function VR(e){return he.createElement(ap,{...e},he.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function YR(e){return he.createElement(ap,{...e},he.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function $R(e){return he.createElement(ap,{...e},he.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function GR(){return he.createElement("div",{className:"Toastify__spinner"})}var jx={info:VR,warning:HR,success:YR,error:$R,spinner:GR},QR=e=>e in jx;function XR({theme:e,type:t,isLoading:n,icon:r}){let a=null,o={theme:e,type:t};return r===!1||(wi(r)?a=r({...o,isLoading:n}):L.isValidElement(r)?a=L.cloneElement(r,o):n?a=jx.spinner():QR(t)&&(a=jx[t](o))),a}var KR=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:a,playToast:o}=zR(e),{closeButton:d,children:m,autoClose:v,onClick:g,type:w,hideProgressBar:N,closeToast:S,transition:j,position:k,className:R,style:T,progressClassName:I,updateId:A,role:M,progress:B,rtl:G,toastId:P,deleteToast:O,isIn:V,isLoading:W,closeOnClick:ee,theme:ce,ariaLabel:ne}=e,te=jn("Toastify__toast",`Toastify__toast-theme--${ce}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":G},{"Toastify__toast--close-on-click":ee}),Ne=wi(R)?R({rtl:G,position:k,type:w,defaultClassName:te}):jn(te,R),ae=XR(e),Ae=!!B||!v,me={closeToast:S,type:w,theme:ce},de=null;return d===!1||(wi(d)?de=d(me):L.isValidElement(d)?de=L.cloneElement(d,me):de=_R(me)),he.createElement(j,{isIn:V,done:O,position:k,preventExitTransition:n,nodeRef:r,playToast:o},he.createElement("div",{id:P,tabIndex:0,onClick:g,"data-in":V,className:Ne,...a,style:T,ref:r,...V&&{role:M,"aria-label":ne}},ae!=null&&he.createElement("div",{className:jn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!W})},ae),PC(m,e,!t),de,!e.customProgressBar&&he.createElement(jR,{...A&&!Ae?{key:`p-${A}`}:{},rtl:G,theme:ce,delay:v,isRunning:t,isIn:V,closeToast:S,hide:N,type:w,className:I,controlledProgress:Ae,progress:B||0})))},ZR=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),JR=SR(ZR("bounce",!0)),eM={position:"top-right",transition:JR,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function ip(e){let t={...eM,...e},n=e.stacked,[r,a]=L.useState(!0),o=L.useRef(null),{getToastToRender:d,isToastActive:m,count:v}=qR(t),{className:g,style:w,rtl:N,containerId:S,hotKeys:j}=t;function k(T){let I=jn("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":N});return wi(g)?g({position:T,rtl:N,defaultClassName:I}):jn(I,Ex(g))}function R(){n&&(a(!0),st.play())}return WR(()=>{var T;if(n){let I=o.current.querySelectorAll('[data-in="true"]'),A=12,M=(T=t.position)==null?void 0:T.includes("top"),B=0,G=0;Array.from(I).reverse().forEach((P,O)=>{let V=P;V.classList.add("Toastify__toast--stacked"),O>0&&(V.dataset.collapsed=`${r}`),V.dataset.pos||(V.dataset.pos=M?"top":"bot");let W=B*(r?.2:1)+(r?0:A*O);V.style.setProperty("--y",`${M?W:W*-1}px`),V.style.setProperty("--g",`${A}`),V.style.setProperty("--s",`${1-(r?G:0)}`),B+=V.offsetHeight,G+=.025})}},[r,v,n]),L.useEffect(()=>{function T(I){var A;let M=o.current;j(I)&&((A=M.querySelector('[tabIndex="0"]'))==null||A.focus(),a(!1),st.pause()),I.key==="Escape"&&(document.activeElement===M||M!=null&&M.contains(document.activeElement))&&(a(!0),st.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[j]),he.createElement("section",{ref:o,className:"Toastify",id:S,onMouseEnter:()=>{n&&(a(!1),st.pause())},onMouseLeave:R,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},d((T,I)=>{let A=I.length?{...w}:{...w,pointerEvents:"none"};return he.createElement("div",{tabIndex:-1,className:k(T),"data-stacked":n,style:A,key:`c-${T}`},I.map(({content:M,props:B})=>he.createElement(KR,{...B,stacked:n,collapseAll:R,isIn:m(B.toastId,B.containerId),key:`t-${B.key}`},M)))}))}var WC={exports:{}},tM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nM=tM,rM=nM;function HC(){}function VC(){}VC.resetWarningCache=HC;var sM=function(){function e(r,a,o,d,m,v){if(v!==rM){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:VC,resetWarningCache:HC};return n.PropTypes=n,n};WC.exports=sM();var aM=WC.exports;const ie=kh(aM),Ia=async({page:e=1,limit:t=10,type:n,brand:r,status:a,location_id:o,search:d,sortBy:m="updated_at",sortOrder:v="desc",startDate:g,endDate:w})=>{const N={page:e,limit:t};return n&&(N.type=n),r&&(N.brand=r),a&&(N.status=a),o&&(N.location_id=o),d&&(N.search=d),m&&(N.sortBy=m),v&&(N.sortOrder=v),g&&(N.startDate=g),w&&(N.endDate=w),(await Qe.get("/api/equipment",{params:N})).data},op=async e=>(await Qe.get(`/api/equipment/${e}`)).data,a2=async(e,t=[],n=null)=>{const r=new FormData;if(!e.type_id)throw console.error("Missing required field: type_id"),new Error("Equipment type is required");if(!e.brand)throw console.error("Missing required field: brand"),new Error("Brand is required");if(!e.model)throw console.error("Missing required field: model"),new Error("Model is required");if(!e.serial_number)throw console.error("Missing required field: serial_number"),new Error("Serial number is required");const a=Object.fromEntries(Object.entries(e).filter(([o,d])=>d!==void 0));console.log("Creating equipment with data:",a),Object.keys(a).forEach(o=>{o==="type_id"&&typeof a[o]=="string"?r.append(o,parseInt(a[o],10)):r.append(o,a[o])}),n&&r.append("referenceImage",n),t&&t.length>0&&t.forEach(o=>{r.append("files",o)});try{return(await Qe.post("/api/equipment",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){throw console.error("Error in createEquipment:",o),o}},YC=async(e,t,n=[],r=[],a=null,o=!1)=>{try{const d=new FormData,m=Object.fromEntries(Object.entries(t).filter(([w,N])=>N!==void 0));console.log("Full equipment data:",t);const v=["location_id","type_id"];return Object.keys(m).forEach(w=>{w!=="reference_image_id"&&(v.includes(w)&&(m[w]===""||m[w]==="0")?(d.append(w,""),d.append(`${w}_is_null`,"true")):d.append(w,m[w]))}),a&&d.append("referenceImage",a),o&&d.append("removeReferenceImage","true"),n&&n.length>0&&n.forEach(w=>{d.append("files",w)}),r&&r.length>0&&d.append("filesToDelete",JSON.stringify(r)),console.log("Updating equipment with data:",m),console.log("Files to delete:",r),console.log("Reference image file:",a?a.name:"None"),console.log("Remove reference image:",o),(await Qe.put(`/api/equipment/${e}`,d,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(d){throw console.error("Error in updateEquipment:",d),d}},iM=async e=>(await Qe.delete(`/api/equipment/${e}`)).data,ch=(e,t=!1,n=!0)=>{if(!e)return null;const r=`/api/files/${e}`;let a=t?`${r}?thumbnail=true`:r;return n&&(a+=(a.includes("?")?"&":"?")+`t=${new Date().getTime()}`),a},oM=async(e,t)=>{try{return console.log(`Updating equipment ${e} status to ${t}`),(await Qe.patch(`/api/equipment/${e}/status`,{status:t})).data}catch(n){throw console.error("Error updating equipment status:",n),n}},lM=async(e,t)=>{try{return console.log(`Updating equipment ${e} location:`,t),(await Qe.patch(`/api/equipment/${e}/location`,t)).data}catch(n){throw console.error("Error updating equipment location:",n),n}},cM=async(e,t)=>{try{return console.log(`Updating equipment ${e} type to ${t}`),(await Qe.patch(`/api/equipment/${e}/type`,{type_id:t})).data}catch(n){throw console.error("Error updating equipment type:",n),n}},uM=async(e,t)=>{try{return console.log(`Updating equipment ${e} category to ${t}`),(await Qe.patch(`/api/equipment/${e}/category`,{category_id:t})).data}catch(n){throw console.error("Error updating equipment category:",n),n}},dM=async(e,t)=>{try{return console.log(`Updating equipment ${e} brand/model:`,t),(await Qe.patch(`/api/equipment/${e}/brand-model`,t)).data}catch(n){throw console.error("Error updating equipment brand/model:",n),n}},Ba=async()=>{try{return(await Qe.get("/api/equipment-types")).data}catch(e){throw console.error("Error fetching equipment types:",e),e}},fM=async e=>(await Qe.post("/api/equipment-types",{name:e})).data,hM=async(e,t)=>(await Qe.put(`/api/equipment-types/${e}`,{name:t})).data,pM=async e=>(await Qe.delete(`/api/equipment-types/${e}`)).data,$C=L.createContext(),mM=3,GC=({children:e})=>{const[t,n]=L.useState([]),{user:r}=lr(),a=(r==null?void 0:r.role)==="admin",{data:o}=ct(["equipment",{limit:1e3}],()=>Ia({limit:1e3}),{enabled:a,refetchInterval:5*60*1e3,staleTime:4*60*1e3}),{data:d}=ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5,enabled:a});L.useEffect(()=>{if(!a||!(o!=null&&o.equipment)||!(d!=null&&d.types))return;const k=o.equipment,R=d.types,T={};k.forEach(A=>{A.type&&(T[A.type]||(T[A.type]=[]),T[A.type].push(A))});const I=[];Object.entries(T).forEach(([A,M])=>{const B=M.filter(G=>G.status==="available");if(B.length<=mM){const G=R.find(P=>P.name.toLowerCase()===A.toLowerCase());I.push({id:`low-stock-${A}`,type:"warning",title:"Low Stock Alert",message:`Only ${B.length} ${A} ${B.length===1?"item is":"items are"} available.`,timestamp:new Date,read:!1,typeId:G==null?void 0:G.id})}}),I.length>0&&n(A=>[...A.filter(B=>!B.id.startsWith("low-stock-")),...I])},[o,d,a]);const m=k=>{n(R=>[...R,{id:k.id||`notification-${Date.now()}`,timestamp:new Date,read:!1,...k}])},v=k=>{n(R=>R.map(T=>T.id===k?{...T,read:!0}:T))},g=()=>{n(k=>k.map(R=>({...R,read:!0})))},w=k=>{n(R=>R.filter(T=>T.id!==k))},N=()=>{n([])},S=t.filter(k=>!k.read).length,j={notifications:t,unreadCount:S,addNotification:m,markAsRead:v,markAllAsRead:g,removeNotification:w,clearNotifications:N};return s.jsx($C.Provider,{value:j,children:e})};GC.propTypes={children:ie.node.isRequired};const xM=()=>{const e=L.useContext($C);if(e===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return e},gM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),vM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})}),yM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})}),lp=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),wM=({className:e="w-5 h-5"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),ub=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})}),tc=({className:e="w-5 h-5"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),La=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})}),i2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),o2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})}),bM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),QC=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),Pc=({className:e="w-4 h-4"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Fc=({className:e="w-4 h-4"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),l2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),db=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),NM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})}),CM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75a2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),hd=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),XC=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})}),EM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),SM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Ax=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),_M=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})}),c2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),KC=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),kx=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),jM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),AM=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),ZC=6048e5,kM=864e5,cp=6e4,up=36e5,TM=1e3,G0=43200,fb=1440,hb=Symbol.for("constructDateFrom");function Jt(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&hb in e?e[hb](t):e instanceof Date?new e.constructor(t):new Date(t)}function Xe(e,t){return Jt(t||e,e)}function fa(e,t,n){const r=Xe(e,n==null?void 0:n.in);return isNaN(t)?Jt((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function pa(e,t,n){const r=Xe(e,n==null?void 0:n.in);if(isNaN(t))return Jt((n==null?void 0:n.in)||e,NaN);if(!t)return r;const a=r.getDate(),o=Jt((n==null?void 0:n.in)||e,r.getTime());o.setMonth(r.getMonth()+t+1,0);const d=o.getDate();return a>=d?o:(r.setFullYear(o.getFullYear(),o.getMonth(),a),r)}function JC(e,t,n){return Jt((n==null?void 0:n.in)||e,+Xe(e)+t)}function DM(e,t,n){return JC(e,t*up,n)}let IM={};function yo(){return IM}function bi(e,t){var m,v,g,w;const n=yo(),r=(t==null?void 0:t.weekStartsOn)??((v=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((w=(g=n.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,a=Xe(e,t==null?void 0:t.in),o=a.getDay(),d=(o<r?7:0)+o-r;return a.setDate(a.getDate()-d),a.setHours(0,0,0,0),a}function yc(e,t){return bi(e,{...t,weekStartsOn:1})}function eE(e,t){const n=Xe(e,t==null?void 0:t.in),r=n.getFullYear(),a=Jt(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const o=yc(a),d=Jt(n,0);d.setFullYear(r,0,4),d.setHours(0,0,0,0);const m=yc(d);return n.getTime()>=o.getTime()?r+1:n.getTime()>=m.getTime()?r:r-1}function wc(e){const t=Xe(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xa(e,...t){const n=Jt.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function hl(e,t){const n=Xe(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function bc(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t),o=hl(r),d=hl(a),m=+o-wc(o),v=+d-wc(d);return Math.round((m-v)/kM)}function RM(e,t){const n=eE(e,t),r=Jt((t==null?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),yc(r)}function Tx(e,t,n){const r=Xe(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*cp),r}function u2(e,t,n){return pa(e,t*3,n)}function MM(e,t,n){return JC(e,t*1e3,n)}function uh(e,t,n){return fa(e,t*7,n)}function di(e,t,n){return pa(e,t*12,n)}function pb(e,t){let n,r=t==null?void 0:t.in;return e.forEach(a=>{!r&&typeof a=="object"&&(r=Jt.bind(null,a));const o=Xe(a,r);(!n||n<o||isNaN(+o))&&(n=o)}),Jt(r,n||NaN)}function mb(e,t){let n,r=t==null?void 0:t.in;return e.forEach(a=>{!r&&typeof a=="object"&&(r=Jt.bind(null,a));const o=Xe(a,r);(!n||n>o||isNaN(+o))&&(n=o)}),Jt(r,n||NaN)}function Nf(e,t){const n=+Xe(e)-+Xe(t);return n<0?-1:n>0?1:n}function OM(e){return Jt(e,Date.now())}function LM(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t);return+hl(r)==+hl(a)}function fi(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dh(e){return!(!fi(e)&&typeof e!="number"||isNaN(+Xe(e)))}function pd(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t),o=r.getFullYear()-a.getFullYear(),d=r.getMonth()-a.getMonth();return o*12+d}function rl(e,t){const n=Xe(e,t==null?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function fh(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t),o=r.getFullYear()-a.getFullYear(),d=rl(r)-rl(a);return o*4+d}function hh(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t);return r.getFullYear()-a.getFullYear()}function PM(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t),o=xb(r,a),d=Math.abs(bc(r,a));r.setDate(r.getDate()-o*d);const m=+(xb(r,a)===-o),v=o*(d-m);return v===0?0:v}function xb(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function FM(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function BM(e,t){return+Xe(e)-+Xe(t)}function d2(e,t){const n=Xe(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function f2(e,t){const n=Xe(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function UM(e,t){const n=Xe(e,t==null?void 0:t.in);return+d2(n,t)==+f2(n,t)}function qM(e,t,n){const[r,a,o]=xa(n==null?void 0:n.in,e,e,t),d=Nf(a,o),m=Math.abs(pd(a,o));if(m<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-d*m);let v=Nf(a,o)===-d;UM(r)&&m===1&&Nf(r,o)===1&&(v=!1);const g=d*(m-+v);return g===0?0:g}function zM(e,t,n){const r=BM(e,t)/1e3;return FM(n==null?void 0:n.roundingMethod)(r)}function Dx(e,t){const n=Xe(e,t==null?void 0:t.in),r=n.getMonth(),a=r-r%3;return n.setMonth(a,1),n.setHours(0,0,0,0),n}function tE(e,t){const n=Xe(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function nE(e,t){const n=Xe(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function dp(e,t){const n=Xe(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function WM(e,t){var m,v,g,w;const n=yo(),r=(t==null?void 0:t.weekStartsOn)??((v=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((w=(g=n.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,a=Xe(e,t==null?void 0:t.in),o=a.getDay(),d=(o<r?-7:0)+6-(o-r);return a.setDate(a.getDate()+d),a.setHours(23,59,59,999),a}const HM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VM=(e,t,n)=>{let r;const a=HM[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function nm(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const YM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$M={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},GM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QM={date:nm({formats:YM,defaultWidth:"full"}),time:nm({formats:$M,defaultWidth:"full"}),dateTime:nm({formats:GM,defaultWidth:"full"})},XM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},KM=(e,t,n,r)=>XM[e];function Su(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,m=n!=null&&n.width?String(n.width):d;a=e.formattingValues[m]||e.formattingValues[d]}else{const d=e.defaultWidth,m=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[m]||e.values[d]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const ZM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},JM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sO=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},aO={ordinalNumber:sO,era:Su({values:ZM,defaultWidth:"wide"}),quarter:Su({values:JM,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Su({values:eO,defaultWidth:"wide"}),day:Su({values:tO,defaultWidth:"wide"}),dayPeriod:Su({values:nO,defaultWidth:"wide",formattingValues:rO,defaultFormattingWidth:"wide"})};function _u(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const d=o[0],m=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(m)?oO(m,N=>N.test(d)):iO(m,N=>N.test(d));let g;g=e.valueCallback?e.valueCallback(v):v,g=n.valueCallback?n.valueCallback(g):g;const w=t.slice(d.length);return{value:g,rest:w}}}function iO(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function oO(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function lO(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],o=t.match(e.parsePattern);if(!o)return null;let d=e.valueCallback?e.valueCallback(o[0]):o[0];d=n.valueCallback?n.valueCallback(d):d;const m=t.slice(a.length);return{value:d,rest:m}}}const cO=/^(\d+)(th|st|nd|rd)?/i,uO=/\d+/i,dO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fO={any:[/^b/i,/^(a|c)/i]},hO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pO={any:[/1/i,/2/i,/3/i,/4/i]},mO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bO={ordinalNumber:lO({matchPattern:cO,parsePattern:uO,valueCallback:e=>parseInt(e,10)}),era:_u({matchPatterns:dO,defaultMatchWidth:"wide",parsePatterns:fO,defaultParseWidth:"any"}),quarter:_u({matchPatterns:hO,defaultMatchWidth:"wide",parsePatterns:pO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_u({matchPatterns:mO,defaultMatchWidth:"wide",parsePatterns:xO,defaultParseWidth:"any"}),day:_u({matchPatterns:gO,defaultMatchWidth:"wide",parsePatterns:vO,defaultParseWidth:"any"}),dayPeriod:_u({matchPatterns:yO,defaultMatchWidth:"any",parsePatterns:wO,defaultParseWidth:"any"})},h2={code:"en-US",formatDistance:VM,formatLong:QM,formatRelative:KM,localize:aO,match:bO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function NO(e,t){const n=Xe(e,t==null?void 0:t.in);return bc(n,dp(n))+1}function p2(e,t){const n=Xe(e,t==null?void 0:t.in),r=+yc(n)-+RM(n);return Math.round(r/ZC)+1}function m2(e,t){var w,N,S,j;const n=Xe(e,t==null?void 0:t.in),r=n.getFullYear(),a=yo(),o=(t==null?void 0:t.firstWeekContainsDate)??((N=(w=t==null?void 0:t.locale)==null?void 0:w.options)==null?void 0:N.firstWeekContainsDate)??a.firstWeekContainsDate??((j=(S=a.locale)==null?void 0:S.options)==null?void 0:j.firstWeekContainsDate)??1,d=Jt((t==null?void 0:t.in)||e,0);d.setFullYear(r+1,0,o),d.setHours(0,0,0,0);const m=bi(d,t),v=Jt((t==null?void 0:t.in)||e,0);v.setFullYear(r,0,o),v.setHours(0,0,0,0);const g=bi(v,t);return+n>=+m?r+1:+n>=+g?r:r-1}function CO(e,t){var m,v,g,w;const n=yo(),r=(t==null?void 0:t.firstWeekContainsDate)??((v=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??n.firstWeekContainsDate??((w=(g=n.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,a=m2(e,t),o=Jt((t==null?void 0:t.in)||e,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),bi(o,t)}function rE(e,t){const n=Xe(e,t==null?void 0:t.in),r=+bi(n,t)-+CO(n,t);return Math.round(r/ZC)+1}function an(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const qi={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return an(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):an(n+1,2)},d(e,t){return an(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return an(e.getHours()%12||12,t.length)},H(e,t){return an(e.getHours(),t.length)},m(e,t){return an(e.getMinutes(),t.length)},s(e,t){return an(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return an(a,t.length)}},Ul={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gb={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return qi.y(e,t)},Y:function(e,t,n,r){const a=m2(e,r),o=a>0?a:1-a;if(t==="YY"){const d=o%100;return an(d,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):an(o,t.length)},R:function(e,t){const n=eE(e);return an(n,t.length)},u:function(e,t){const n=e.getFullYear();return an(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return an(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return an(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return qi.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return an(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=rE(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):an(a,t.length)},I:function(e,t,n){const r=p2(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):an(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):qi.d(e,t)},D:function(e,t,n){const r=NO(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):an(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return an(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return an(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return an(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Ul.noon:r===0?a=Ul.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Ul.evening:r>=12?a=Ul.afternoon:r>=4?a=Ul.morning:a=Ul.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return qi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):qi.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):an(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):an(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):qi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):qi.s(e,t)},S:function(e,t){return qi.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return yb(r);case"XXXX":case"XX":return Yo(r);case"XXXXX":case"XXX":default:return Yo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return yb(r);case"xxxx":case"xx":return Yo(r);case"xxxxx":case"xxx":default:return Yo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vb(r,":");case"OOOO":default:return"GMT"+Yo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vb(r,":");case"zzzz":default:return"GMT"+Yo(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return an(r,t.length)},T:function(e,t,n){return an(+e,t.length)}};function vb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),o=r%60;return o===0?n+String(a):n+String(a)+t+an(o,2)}function yb(e,t){return e%60===0?(e>0?"-":"+")+an(Math.abs(e)/60,2):Yo(e,t)}function Yo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=an(Math.trunc(r/60),2),o=an(r%60,2);return n+a+t+o}const wb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},sE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},EO=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return wb(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",wb(r,t)).replace("{{time}}",sE(a,t))},Ix={p:sE,P:EO},SO=/^D+$/,_O=/^Y+$/,jO=["D","DD","YY","YYYY"];function aE(e){return SO.test(e)}function iE(e){return _O.test(e)}function Rx(e,t,n){const r=AO(e,t,n);if(console.warn(r),jO.includes(e))throw new RangeError(r)}function AO(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DO=/^'([^]*?)'?$/,IO=/''/g,RO=/[a-zA-Z]/;function md(e,t,n){var w,N,S,j,k,R,T,I;const r=yo(),a=(n==null?void 0:n.locale)??r.locale??h2,o=(n==null?void 0:n.firstWeekContainsDate)??((N=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:N.firstWeekContainsDate)??r.firstWeekContainsDate??((j=(S=r.locale)==null?void 0:S.options)==null?void 0:j.firstWeekContainsDate)??1,d=(n==null?void 0:n.weekStartsOn)??((R=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:R.weekStartsOn)??r.weekStartsOn??((I=(T=r.locale)==null?void 0:T.options)==null?void 0:I.weekStartsOn)??0,m=Xe(e,n==null?void 0:n.in);if(!dh(m))throw new RangeError("Invalid time value");let v=t.match(TO).map(A=>{const M=A[0];if(M==="p"||M==="P"){const B=Ix[M];return B(A,a.formatLong)}return A}).join("").match(kO).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const M=A[0];if(M==="'")return{isToken:!1,value:MO(A)};if(gb[M])return{isToken:!0,value:A};if(M.match(RO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:A}});a.localize.preprocessor&&(v=a.localize.preprocessor(m,v));const g={firstWeekContainsDate:o,weekStartsOn:d,locale:a};return v.map(A=>{if(!A.isToken)return A.value;const M=A.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&iE(M)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&aE(M))&&Rx(M,t,String(e));const B=gb[M[0]];return B(m,M,a.localize,g)}).join("")}function MO(e){const t=e.match(DO);return t?t[1].replace(IO,"'"):e}function OO(e,t,n){const r=yo(),a=(n==null?void 0:n.locale)??r.locale??h2,o=2520,d=Nf(e,t);if(isNaN(d))throw new RangeError("Invalid time value");const m=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:d}),[v,g]=xa(n==null?void 0:n.in,...d>0?[t,e]:[e,t]),w=zM(g,v),N=(wc(g)-wc(v))/1e3,S=Math.round((w-N)/60);let j;if(S<2)return n!=null&&n.includeSeconds?w<5?a.formatDistance("lessThanXSeconds",5,m):w<10?a.formatDistance("lessThanXSeconds",10,m):w<20?a.formatDistance("lessThanXSeconds",20,m):w<40?a.formatDistance("halfAMinute",0,m):w<60?a.formatDistance("lessThanXMinutes",1,m):a.formatDistance("xMinutes",1,m):S===0?a.formatDistance("lessThanXMinutes",1,m):a.formatDistance("xMinutes",S,m);if(S<45)return a.formatDistance("xMinutes",S,m);if(S<90)return a.formatDistance("aboutXHours",1,m);if(S<fb){const k=Math.round(S/60);return a.formatDistance("aboutXHours",k,m)}else{if(S<o)return a.formatDistance("xDays",1,m);if(S<G0){const k=Math.round(S/fb);return a.formatDistance("xDays",k,m)}else if(S<G0*2)return j=Math.round(S/G0),a.formatDistance("aboutXMonths",j,m)}if(j=qM(g,v),j<12){const k=Math.round(S/G0);return a.formatDistance("xMonths",k,m)}else{const k=j%12,R=Math.trunc(j/12);return k<3?a.formatDistance("aboutXYears",R,m):k<9?a.formatDistance("overXYears",R,m):a.formatDistance("almostXYears",R+1,m)}}function LO(e,t){return OO(e,OM(e),t)}function bb(e,t){return Xe(e,t==null?void 0:t.in).getDate()}function PO(e,t){return Xe(e,t==null?void 0:t.in).getDay()}function FO(e,t){const n=Xe(e,t==null?void 0:t.in),r=n.getFullYear(),a=n.getMonth(),o=Jt(n,0);return o.setFullYear(r,a+1,0),o.setHours(0,0,0,0),o.getDate()}function BO(){return Object.assign({},yo())}function hi(e,t){return Xe(e,t==null?void 0:t.in).getHours()}function UO(e,t){const n=Xe(e,t==null?void 0:t.in).getDay();return n===0?7:n}function pi(e,t){return Xe(e,t==null?void 0:t.in).getMinutes()}function Mr(e,t){return Xe(e,t==null?void 0:t.in).getMonth()}function lo(e){return Xe(e).getSeconds()}function Mx(e){return+Xe(e)}function _t(e,t){return Xe(e,t==null?void 0:t.in).getFullYear()}function ho(e,t){return+Xe(e)>+Xe(t)}function pl(e,t){return+Xe(e)<+Xe(t)}function qO(e,t){return+Xe(e)==+Xe(t)}function zO(e,t){const n=WO(t)?new t(0):Jt(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function WO(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const HO=10;class oE{constructor(){He(this,"subPriority",0)}validate(t,n){return!0}}class VO extends oE{constructor(t,n,r,a,o){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=a,o&&(this.subPriority=o)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class YO extends oE{constructor(n,r){super();He(this,"priority",HO);He(this,"subPriority",-1);this.context=n||(a=>Jt(r,a))}set(n,r){return r.timestampIsSet?n:Jt(n,zO(n,this.context))}}class Qt{run(t,n,r,a){const o=this.parse(t,n,r,a);return o?{setter:new VO(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,n,r){return!0}}class $O extends Qt{constructor(){super(...arguments);He(this,"priority",140);He(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"})||a.era(n,{width:"narrow"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})||a.era(n,{width:"abbreviated"})||a.era(n,{width:"narrow"})}}set(n,r,a){return r.era=a,n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}const Gn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ta={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Qn(e,t){return e&&{value:t(e.value),rest:e.rest}}function In(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Da(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,d=n[5]?parseInt(n[5],10):0;return{value:r*(a*up+o*cp+d*TM),rest:t.slice(n[0].length)}}function lE(e){return In(Gn.anyDigitsSigned,e)}function Wn(e,t){switch(e){case 1:return In(Gn.singleDigit,t);case 2:return In(Gn.twoDigits,t);case 3:return In(Gn.threeDigits,t);case 4:return In(Gn.fourDigits,t);default:return In(new RegExp("^\\d{1,"+e+"}"),t)}}function ph(e,t){switch(e){case 1:return In(Gn.singleDigitSigned,t);case 2:return In(Gn.twoDigitsSigned,t);case 3:return In(Gn.threeDigitsSigned,t);case 4:return In(Gn.fourDigitsSigned,t);default:return In(new RegExp("^-?\\d{1,"+e+"}"),t)}}function x2(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function cE(e,t){const n=t>0,r=n?t:1-t;let a;if(r<=50)a=e||100;else{const o=r+50,d=Math.trunc(o/100)*100,m=e>=o%100;a=e+d-(m?100:0)}return n?a:1-a}function uE(e){return e%400===0||e%4===0&&e%100!==0}class GO extends Qt{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,a){const o=d=>({year:d,isTwoDigitYear:r==="yy"});switch(r){case"y":return Qn(Wn(4,n),o);case"yo":return Qn(a.ordinalNumber(n,{unit:"year"}),o);default:return Qn(Wn(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,a){const o=n.getFullYear();if(a.isTwoDigitYear){const m=cE(a.year,o);return n.setFullYear(m,0,1),n.setHours(0,0,0,0),n}const d=!("era"in r)||r.era===1?a.year:1-a.year;return n.setFullYear(d,0,1),n.setHours(0,0,0,0),n}}class QO extends Qt{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,a){const o=d=>({year:d,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Qn(Wn(4,n),o);case"Yo":return Qn(a.ordinalNumber(n,{unit:"year"}),o);default:return Qn(Wn(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,a,o){const d=m2(n,o);if(a.isTwoDigitYear){const v=cE(a.year,d);return n.setFullYear(v,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),bi(n,o)}const m=!("era"in r)||r.era===1?a.year:1-a.year;return n.setFullYear(m,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),bi(n,o)}}class XO extends Qt{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return ph(r==="R"?4:r.length,n)}set(n,r,a){const o=Jt(n,0);return o.setFullYear(a,0,4),o.setHours(0,0,0,0),yc(o)}}class KO extends Qt{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return ph(r==="u"?4:r.length,n)}set(n,r,a){return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}class ZO extends Qt{constructor(){super(...arguments);He(this,"priority",120);He(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"Q":case"QQ":return Wn(r.length,n);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"})||a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})||a.quarter(n,{width:"abbreviated",context:"formatting"})||a.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,a){return n.setMonth((a-1)*3,1),n.setHours(0,0,0,0),n}}class JO extends Qt{constructor(){super(...arguments);He(this,"priority",120);He(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"q":case"qq":return Wn(r.length,n);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"})||a.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})||a.quarter(n,{width:"abbreviated",context:"standalone"})||a.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,a){return n.setMonth((a-1)*3,1),n.setHours(0,0,0,0),n}}class e9 extends Qt{constructor(){super(...arguments);He(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);He(this,"priority",110)}parse(n,r,a){const o=d=>d-1;switch(r){case"M":return Qn(In(Gn.month,n),o);case"MM":return Qn(Wn(2,n),o);case"Mo":return Qn(a.ordinalNumber(n,{unit:"month"}),o);case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"})||a.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})||a.month(n,{width:"abbreviated",context:"formatting"})||a.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.setMonth(a,1),n.setHours(0,0,0,0),n}}class t9 extends Qt{constructor(){super(...arguments);He(this,"priority",110);He(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,a){const o=d=>d-1;switch(r){case"L":return Qn(In(Gn.month,n),o);case"LL":return Qn(Wn(2,n),o);case"Lo":return Qn(a.ordinalNumber(n,{unit:"month"}),o);case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"})||a.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})||a.month(n,{width:"abbreviated",context:"standalone"})||a.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.setMonth(a,1),n.setHours(0,0,0,0),n}}function n9(e,t,n){const r=Xe(e,n==null?void 0:n.in),a=rE(r,n)-t;return r.setDate(r.getDate()-a*7),Xe(r,n==null?void 0:n.in)}class r9 extends Qt{constructor(){super(...arguments);He(this,"priority",100);He(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,a){switch(r){case"w":return In(Gn.week,n);case"wo":return a.ordinalNumber(n,{unit:"week"});default:return Wn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,a,o){return bi(n9(n,a,o),o)}}function s9(e,t,n){const r=Xe(e,n==null?void 0:n.in),a=p2(r,n)-t;return r.setDate(r.getDate()-a*7),r}class a9 extends Qt{constructor(){super(...arguments);He(this,"priority",100);He(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,a){switch(r){case"I":return In(Gn.week,n);case"Io":return a.ordinalNumber(n,{unit:"week"});default:return Wn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,a){return yc(s9(n,a))}}const i9=[31,28,31,30,31,30,31,31,30,31,30,31],o9=[31,29,31,30,31,30,31,31,30,31,30,31];class l9 extends Qt{constructor(){super(...arguments);He(this,"priority",90);He(this,"subPriority",1);He(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"d":return In(Gn.date,n);case"do":return a.ordinalNumber(n,{unit:"date"});default:return Wn(r.length,n)}}validate(n,r){const a=n.getFullYear(),o=uE(a),d=n.getMonth();return o?r>=1&&r<=o9[d]:r>=1&&r<=i9[d]}set(n,r,a){return n.setDate(a),n.setHours(0,0,0,0),n}}class c9 extends Qt{constructor(){super(...arguments);He(this,"priority",90);He(this,"subpriority",1);He(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,a){switch(r){case"D":case"DD":return In(Gn.dayOfYear,n);case"Do":return a.ordinalNumber(n,{unit:"date"});default:return Wn(r.length,n)}}validate(n,r){const a=n.getFullYear();return uE(a)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,a){return n.setMonth(0,a),n.setHours(0,0,0,0),n}}function g2(e,t,n){var N,S,j,k;const r=yo(),a=(n==null?void 0:n.weekStartsOn)??((S=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((k=(j=r.locale)==null?void 0:j.options)==null?void 0:k.weekStartsOn)??0,o=Xe(e,n==null?void 0:n.in),d=o.getDay(),v=(t%7+7)%7,g=7-a,w=t<0||t>6?t-(d+g)%7:(v+g)%7-(d+g)%7;return fa(o,w,n)}class u9 extends Qt{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,o){return n=g2(n,a,o),n.setHours(0,0,0,0),n}}class d9 extends Qt{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,a,o){const d=m=>{const v=Math.floor((m-1)/7)*7;return(m+o.weekStartsOn+6)%7+v};switch(r){case"e":case"ee":return Qn(Wn(r.length,n),d);case"eo":return Qn(a.ordinalNumber(n,{unit:"day"}),d);case"eee":return a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,o){return n=g2(n,a,o),n.setHours(0,0,0,0),n}}class f9 extends Qt{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,a,o){const d=m=>{const v=Math.floor((m-1)/7)*7;return(m+o.weekStartsOn+6)%7+v};switch(r){case"c":case"cc":return Qn(Wn(r.length,n),d);case"co":return Qn(a.ordinalNumber(n,{unit:"day"}),d);case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"})||a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})||a.day(n,{width:"abbreviated",context:"standalone"})||a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,o){return n=g2(n,a,o),n.setHours(0,0,0,0),n}}function h9(e,t,n){const r=Xe(e,n==null?void 0:n.in),a=UO(r,n),o=t-a;return fa(r,o,n)}class p9 extends Qt{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,a){const o=d=>d===0?7:d;switch(r){case"i":case"ii":return Wn(r.length,n);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return Qn(a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),o);case"iiiii":return Qn(a.day(n,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Qn(a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Qn(a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),o)}}validate(n,r){return r>=1&&r<=7}set(n,r,a){return n=h9(n,a),n.setHours(0,0,0,0),n}}class m9 extends Qt{constructor(){super(...arguments);He(this,"priority",80);He(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(x2(a),0,0,0),n}}class x9 extends Qt{constructor(){super(...arguments);He(this,"priority",80);He(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(x2(a),0,0,0),n}}class g9 extends Qt{constructor(){super(...arguments);He(this,"priority",80);He(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(x2(a),0,0,0),n}}class v9 extends Qt{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,a){switch(r){case"h":return In(Gn.hour12h,n);case"ho":return a.ordinalNumber(n,{unit:"hour"});default:return Wn(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,a){const o=n.getHours()>=12;return o&&a<12?n.setHours(a+12,0,0,0):!o&&a===12?n.setHours(0,0,0,0):n.setHours(a,0,0,0),n}}class y9 extends Qt{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,a){switch(r){case"H":return In(Gn.hour23h,n);case"Ho":return a.ordinalNumber(n,{unit:"hour"});default:return Wn(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,a){return n.setHours(a,0,0,0),n}}class w9 extends Qt{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,a){switch(r){case"K":return In(Gn.hour11h,n);case"Ko":return a.ordinalNumber(n,{unit:"hour"});default:return Wn(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.getHours()>=12&&a<12?n.setHours(a+12,0,0,0):n.setHours(a,0,0,0),n}}class b9 extends Qt{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,a){switch(r){case"k":return In(Gn.hour24h,n);case"ko":return a.ordinalNumber(n,{unit:"hour"});default:return Wn(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,a){const o=a<=24?a%24:a;return n.setHours(o,0,0,0),n}}class N9 extends Qt{constructor(){super(...arguments);He(this,"priority",60);He(this,"incompatibleTokens",["t","T"])}parse(n,r,a){switch(r){case"m":return In(Gn.minute,n);case"mo":return a.ordinalNumber(n,{unit:"minute"});default:return Wn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,a){return n.setMinutes(a,0,0),n}}class C9 extends Qt{constructor(){super(...arguments);He(this,"priority",50);He(this,"incompatibleTokens",["t","T"])}parse(n,r,a){switch(r){case"s":return In(Gn.second,n);case"so":return a.ordinalNumber(n,{unit:"second"});default:return Wn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,a){return n.setSeconds(a,0),n}}class E9 extends Qt{constructor(){super(...arguments);He(this,"priority",30);He(this,"incompatibleTokens",["t","T"])}parse(n,r){const a=o=>Math.trunc(o*Math.pow(10,-r.length+3));return Qn(Wn(r.length,n),a)}set(n,r,a){return n.setMilliseconds(a),n}}class S9 extends Qt{constructor(){super(...arguments);He(this,"priority",10);He(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Da(Ta.basicOptionalMinutes,n);case"XX":return Da(Ta.basic,n);case"XXXX":return Da(Ta.basicOptionalSeconds,n);case"XXXXX":return Da(Ta.extendedOptionalSeconds,n);case"XXX":default:return Da(Ta.extended,n)}}set(n,r,a){return r.timestampIsSet?n:Jt(n,n.getTime()-wc(n)-a)}}class _9 extends Qt{constructor(){super(...arguments);He(this,"priority",10);He(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Da(Ta.basicOptionalMinutes,n);case"xx":return Da(Ta.basic,n);case"xxxx":return Da(Ta.basicOptionalSeconds,n);case"xxxxx":return Da(Ta.extendedOptionalSeconds,n);case"xxx":default:return Da(Ta.extended,n)}}set(n,r,a){return r.timestampIsSet?n:Jt(n,n.getTime()-wc(n)-a)}}class j9 extends Qt{constructor(){super(...arguments);He(this,"priority",40);He(this,"incompatibleTokens","*")}parse(n){return lE(n)}set(n,r,a){return[Jt(n,a*1e3),{timestampIsSet:!0}]}}class A9 extends Qt{constructor(){super(...arguments);He(this,"priority",20);He(this,"incompatibleTokens","*")}parse(n){return lE(n)}set(n,r,a){return[Jt(n,a),{timestampIsSet:!0}]}}const k9={G:new $O,y:new GO,Y:new QO,R:new XO,u:new KO,Q:new ZO,q:new JO,M:new e9,L:new t9,w:new r9,I:new a9,d:new l9,D:new c9,E:new u9,e:new d9,c:new f9,i:new p9,a:new m9,b:new x9,B:new g9,h:new v9,H:new y9,K:new w9,k:new b9,m:new N9,s:new C9,S:new E9,X:new S9,x:new _9,t:new j9,T:new A9},T9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I9=/^'([^]*?)'?$/,R9=/''/g,M9=/\S/,O9=/[a-zA-Z]/;function L9(e,t,n,r){var T,I,A,M,B,G,P,O;const a=()=>Jt((r==null?void 0:r.in)||n,NaN),o=BO(),d=(r==null?void 0:r.locale)??o.locale??h2,m=(r==null?void 0:r.firstWeekContainsDate)??((I=(T=r==null?void 0:r.locale)==null?void 0:T.options)==null?void 0:I.firstWeekContainsDate)??o.firstWeekContainsDate??((M=(A=o.locale)==null?void 0:A.options)==null?void 0:M.firstWeekContainsDate)??1,v=(r==null?void 0:r.weekStartsOn)??((G=(B=r==null?void 0:r.locale)==null?void 0:B.options)==null?void 0:G.weekStartsOn)??o.weekStartsOn??((O=(P=o.locale)==null?void 0:P.options)==null?void 0:O.weekStartsOn)??0;if(!t)return e?a():Xe(n,r==null?void 0:r.in);const g={firstWeekContainsDate:m,weekStartsOn:v,locale:d},w=[new YO(r==null?void 0:r.in,n)],N=t.match(D9).map(V=>{const W=V[0];if(W in Ix){const ee=Ix[W];return ee(V,d.formatLong)}return V}).join("").match(T9),S=[];for(let V of N){!(r!=null&&r.useAdditionalWeekYearTokens)&&iE(V)&&Rx(V,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&aE(V)&&Rx(V,t,e);const W=V[0],ee=k9[W];if(ee){const{incompatibleTokens:ce}=ee;if(Array.isArray(ce)){const te=S.find(Ne=>ce.includes(Ne.token)||Ne.token===W);if(te)throw new RangeError(`The format string mustn't contain \`${te.fullToken}\` and \`${V}\` at the same time`)}else if(ee.incompatibleTokens==="*"&&S.length>0)throw new RangeError(`The format string mustn't contain \`${V}\` and any other token at the same time`);S.push({token:W,fullToken:V});const ne=ee.run(e,V,d.match,g);if(!ne)return a();w.push(ne.setter),e=ne.rest}else{if(W.match(O9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");if(V==="''"?V="'":W==="'"&&(V=P9(V)),e.indexOf(V)===0)e=e.slice(V.length);else return a()}}if(e.length>0&&M9.test(e))return a();const j=w.map(V=>V.priority).sort((V,W)=>W-V).filter((V,W,ee)=>ee.indexOf(V)===W).map(V=>w.filter(W=>W.priority===V).sort((W,ee)=>ee.subPriority-W.subPriority)).map(V=>V[0]);let k=Xe(n,r==null?void 0:r.in);if(isNaN(+k))return a();const R={};for(const V of j){if(!V.validate(k,g))return a();const W=V.set(k,R,g);Array.isArray(W)?(k=W[0],Object.assign(R,W[1])):k=W}return k}function P9(e){return e.match(I9)[1].replace(R9,"'")}function F9(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function B9(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t);return+Dx(r)==+Dx(a)}function U9(e,t,n){const[r,a]=xa(n==null?void 0:n.in,e,t);return r.getFullYear()===a.getFullYear()}function xd(e,t,n){const r=+Xe(e,n==null?void 0:n.in),[a,o]=[+Xe(t.start,n==null?void 0:n.in),+Xe(t.end,n==null?void 0:n.in)].sort((d,m)=>d-m);return r>=a&&r<=o}function q9(e,t,n){return fa(e,-t,n)}function z9(e,t){const n=()=>Jt(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,a=Y9(e);let o;if(a.date){const g=$9(a.date,r);o=G9(g.restDateString,g.year)}if(!o||isNaN(+o))return n();const d=+o;let m=0,v;if(a.time&&(m=Q9(a.time),isNaN(m)))return n();if(a.timezone){if(v=X9(a.timezone),isNaN(v))return n()}else{const g=new Date(d+m),w=Xe(0,t==null?void 0:t.in);return w.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),w.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),w}return Xe(d+m+v,t==null?void 0:t.in)}const Q0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},W9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,H9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,V9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Y9(e){const t={},n=e.split(Q0.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Q0.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Q0.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const a=Q0.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function $9(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((r[1]||r[2]).length)}}function G9(e,t){if(t===null)return new Date(NaN);const n=e.match(W9);if(!n)return new Date(NaN);const r=!!n[4],a=ju(n[1]),o=ju(n[2])-1,d=ju(n[3]),m=ju(n[4]),v=ju(n[5])-1;if(r)return tL(t,m,v)?K9(t,m,v):new Date(NaN);{const g=new Date(0);return!J9(t,o,d)||!eL(t,a)?new Date(NaN):(g.setUTCFullYear(t,o,Math.max(a,d)),g)}}function ju(e){return e?parseInt(e):1}function Q9(e){const t=e.match(H9);if(!t)return NaN;const n=rm(t[1]),r=rm(t[2]),a=rm(t[3]);return nL(n,r,a)?n*up+r*cp+a*1e3:NaN}function rm(e){return e&&parseFloat(e.replace(",","."))||0}function X9(e){if(e==="Z")return 0;const t=e.match(V9);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return rL(r,a)?n*(r*up+a*cp):NaN}function K9(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,o=(t-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+o),r}const Z9=[31,null,31,30,31,30,31,31,30,31,30,31];function dE(e){return e%400===0||e%4===0&&e%100!==0}function J9(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Z9[t]||(dE(e)?29:28))}function eL(e,t){return t>=1&&t<=(dE(e)?366:365)}function tL(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function nL(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function rL(e,t){return t>=0&&t<=59}function zs(e,t,n){const r=Xe(e,n==null?void 0:n.in),a=r.getFullYear(),o=r.getDate(),d=Jt((n==null?void 0:n.in)||e,0);d.setFullYear(a,t,15),d.setHours(0,0,0,0);const m=FO(d);return r.setMonth(t,Math.min(o,m)),r}function Cf(e,t,n){const r=Xe(e,n==null?void 0:n.in);return r.setHours(t),r}function Ef(e,t,n){const r=Xe(e,n==null?void 0:n.in);return r.setMinutes(t),r}function ql(e,t,n){const r=Xe(e,n==null?void 0:n.in),a=Math.trunc(r.getMonth()/3)+1,o=t-a;return zs(r,r.getMonth()+o*3)}function Sf(e,t,n){const r=Xe(e,n==null?void 0:n.in);return r.setSeconds(t),r}function _a(e,t,n){const r=Xe(e,n==null?void 0:n.in);return isNaN(+r)?Jt((n==null?void 0:n.in)||e,NaN):(r.setFullYear(t),r)}function sl(e,t,n){return pa(e,-t,n)}function fE(e,t,n){return u2(e,-t,n)}function Nb(e,t,n){return uh(e,-t,n)}function Nc(e,t,n){return di(e,-t,n)}const sL=()=>{const[e,t]=L.useState(!1),n=L.useRef(null),{notifications:r,unreadCount:a,markAsRead:o,markAllAsRead:d,clearNotifications:m}=xM();L.useEffect(()=>{const N=S=>{n.current&&!n.current.contains(S.target)&&t(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);const v=()=>{t(!e)},g=N=>{o(N.id),t(!1)},w=N=>{switch(N){case"warning":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});case"success":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}};return s.jsxs("div",{className:"relative",ref:n,children:[s.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-800 focus:outline-none",onClick:v,"aria-label":`Notifications ${a>0?`(${a} unread)`:""}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),a>0&&s.jsx("span",{className:"absolute top-1 right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:a})]}),e&&s.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg overflow-hidden z-50",children:s.jsxs("div",{className:"py-2",children:[s.jsxs("div",{className:"px-4 py-2 bg-gray-100 flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Notifications"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:d,className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark all as read"}),s.jsx("button",{onClick:m,className:"text-xs text-red-600 hover:text-red-800",children:"Clear all"})]})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto",children:r.length===0?s.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No notifications"}):r.map(N=>s.jsx("div",{className:`px-4 py-3 border-b border-gray-100 ${N.read?"":"bg-blue-50"}`,onClick:()=>g(N),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:w(N.type)}),s.jsxs("div",{className:"ml-3 w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.title}),s.jsx("p",{className:"text-sm text-gray-600",children:N.message}),N.typeId&&s.jsx(qn,{to:`/equipment?type=${N.typeId}`,className:"text-xs text-blue-600 hover:text-blue-800 mt-1 inline-block",onClick:S=>S.stopPropagation(),children:"View equipment"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:LO(new Date(N.timestamp),{addSuffix:!0})})]})]})},N.id))})]})})]})},aL=({toggleSidebar:e})=>{const{user:t,logout:n,isImpersonating:r}=lr(),a=Gr(),o=()=>{n(),a("/login")};return s.jsx("nav",{className:"bg-white text-slate-800 shadow-soft sticky top-0 z-30 border-b border-slate-200 h-16",children:s.jsx("div",{className:"container-app py-0",children:s.jsxs("div",{className:"flex justify-between h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs(qn,{to:"/",className:"flex-shrink-0 flex items-center gap-2",children:[s.jsx("img",{src:"/bird-logo.svg",alt:"Theater Equipment Logo",className:"w-8 h-8"}),s.jsx("span",{className:"text-xl font-bold text-slate-800",children:"Ton Equipment Inventory"})]})}),t?s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[t.role==="admin"&&s.jsx(sL,{}),s.jsxs("div",{className:"px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-sm flex items-center",children:[s.jsx("span",{className:"font-medium",children:t.username}),s.jsx("span",{className:"ml-1 text-xs px-1.5 py-0.5 bg-primary-100 text-primary-700 rounded-full",children:t.role}),r()&&s.jsx("span",{className:"ml-1 text-xs bg-yellow-100 text-yellow-700 px-1.5 py-0.5 rounded-full border border-yellow-200",children:"Impersonating"})]}),s.jsxs("button",{onClick:o,className:"nav-link text-slate-600 hover:text-red-600","aria-label":"Logout",children:[s.jsx(ub,{}),s.jsx("span",{className:"hidden md:inline",children:r()?"End Impersonation":"Logout"})]})]})}):s.jsx("div",{className:"flex items-center",children:s.jsxs(qn,{to:"/login",className:"btn btn-primary",children:[s.jsx(ub,{className:"rotate-180"}),s.jsx("span",{children:"Login"})]})})]})})})},iL=({className:e})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:s.jsx("polyline",{points:"9 18 15 12 9 6"})}),oL=({isOpen:e,isCollapsed:t,toggleSidebar:n,toggleCollapse:r})=>{const{isAdmin:a,isAdvanced:o}=lr(),d=Rc();L.useEffect(()=>{const v=()=>{window.innerWidth<768&&e&&n(!1)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[e,n]);const m=v=>d.pathname===v;return s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"sidebar-overlay",onClick:()=>n(!1),style:{opacity:e?1:0}}),s.jsxs("aside",{className:`sidebar ${e?"":"sidebar-hidden"} ${t?"sidebar-collapsed":"sidebar-expanded"}`,children:[s.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[!t&&s.jsx("span",{className:"text-lg font-semibold text-slate-800",children:"Navigation"}),s.jsxs("div",{className:"flex",children:[s.jsx("button",{onClick:()=>r(!t),className:"sidebar-collapse-btn","aria-label":t?"Expand sidebar":"Collapse sidebar",children:t?s.jsx(iL,{className:"w-4 h-4"}):s.jsx(QC,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(!e),className:"sidebar-toggle-btn md:hidden","aria-label":e?"Hide sidebar":"Show sidebar",children:s.jsx(bM,{className:"w-4 h-4"})})]})]}),s.jsxs("nav",{className:"sidebar-nav",children:[s.jsxs(qn,{to:"/dashboard",className:`sidebar-nav-item ${m("/dashboard")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&n(!1),title:"Dashboard",children:[s.jsx(gM,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${t?"hidden":"block"}`,children:"Dashboard"})]}),s.jsxs(qn,{to:"/equipment",className:`sidebar-nav-item ${m("/equipment")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&n(!1),title:"Equipment",children:[s.jsx(vM,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${t?"hidden":"block"}`,children:"Equipment"})]}),s.jsxs(qn,{to:"/show-list",className:`sidebar-nav-item ${m("/show-list")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&n(!1),title:"Show List",children:[s.jsx(Ax,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${t?"hidden":"block"}`,children:"Show List"})]}),(a()||o())&&s.jsxs(qn,{to:"/equipment/new",className:`sidebar-nav-item ${m("/equipment/new")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&n(!1),title:"Add Equipment",children:[s.jsx(lp,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${t?"hidden":"block"}`,children:"Add Equipment"})]}),a()&&s.jsxs(qn,{to:"/equipment-logs",className:`sidebar-nav-item ${m("/equipment-logs")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&n(!1),title:"Equipment Logs",children:[s.jsx(CM,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${t?"hidden":"block"}`,children:"Equipment Logs"})]}),a()&&s.jsxs(qn,{to:"/admin",className:`sidebar-nav-item ${m("/admin")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&n(!1),title:"Admin",children:[s.jsx(yM,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${t?"hidden":"block"}`,children:"Admin"})]}),s.jsxs(qn,{to:"/settings",className:`sidebar-nav-item ${m("/settings")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&n(!1),title:"Settings",children:[s.jsx(wM,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${t?"hidden":"block"}`,children:"Settings"})]})]})]})]})},lL=()=>{const{user:e,isImpersonating:t,logout:n}=lr();return t()?s.jsx("div",{className:"bg-yellow-500 text-white py-2",children:s.jsxs("div",{className:"container-app py-0 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Impersonation Mode:"})," You are currently viewing the application as ",e.username," (",e.role,")"]}),s.jsx("button",{onClick:n,className:"bg-white text-yellow-700 px-3 py-1 rounded-md text-sm font-medium hover:bg-yellow-100",children:"End Impersonation"})]})}):null},cL=()=>{const[e,t]=L.useState(""),[n,r]=L.useState(""),[a,o]=L.useState(""),[d,m]=L.useState(!1),{login:v}=lr(),g=Gr(),w=async N=>{var S,j;if(N.preventDefault(),!e||!n){o("Username and password are required");return}try{m(!0),o(""),await v(e,n),g("/dashboard")}catch(k){o(((j=(S=k.response)==null?void 0:S.data)==null?void 0:j.message)||"Login failed")}finally{m(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Theater Equipment Catalog"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[a&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:s.jsx("p",{className:"text-red-700",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Username",value:e,onChange:N=>t(N.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:N=>r(N.target.value)})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:d,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 ${d?"opacity-70 cursor-not-allowed":""}`,children:d?"Signing in...":"Sign in"})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("p",{className:"text-gray-600",children:"Insert the credentials the admin provided to you"})})]})]})})},vl=async()=>{try{return{categories:(await Qe.get("/api/categories")).data}}catch(e){return console.error("Error fetching categories:",e),{categories:[]}}},uL=async(e,t="")=>(await Qe.post("/api/categories",{name:e,description:t})).data,dL=async(e,t,n="")=>(await Qe.put(`/api/categories/${e}`,{name:t,description:n})).data,fL=async e=>(await Qe.delete(`/api/categories/${e}`)).data,hE=async()=>{try{return{searches:(await Qe.get("/api/saved-searches")).data||[]}}catch(e){return console.error("Error fetching saved searches:",e),{searches:[]}}},pE=async e=>{try{return(await Qe.post("/api/saved-searches",e)).data}catch(t){throw console.error("Error saving search:",t),t}},mE=async e=>{try{return(await Qe.delete(`/api/saved-searches/${e}`)).data}catch(t){throw console.error("Error deleting saved search:",t),t}},be=({children:e,variant:t="primary",size:n="md",type:r="button",fullWidth:a=!1,disabled:o=!1,onClick:d,className:m="",as:v="button",...g})=>{const w="inline-flex items-center justify-center font-medium transition-all duration-200 rounded-md focus:outline-none focus:ring-1 focus:ring-offset-1",N={primary:"bg-white text-primary-600 hover:bg-primary-50 focus:ring-primary-500 border border-primary-500 hover:border-primary-600 hover:shadow-sm transition-all",secondary:"bg-white text-slate-600 hover:bg-slate-50 focus:ring-slate-500 border border-slate-300 hover:border-slate-400 hover:shadow-sm transition-all",outline:"bg-white hover:bg-slate-50 text-slate-700 focus:ring-primary-500 border border-slate-300 hover:border-slate-400 hover:shadow-sm transition-all",danger:"bg-white text-red-600 hover:bg-red-50 focus:ring-red-500 border border-red-500 hover:border-red-600 hover:shadow-sm transition-all",success:"bg-white text-green-600 hover:bg-green-50 focus:ring-green-500 border border-green-500 hover:border-green-600 hover:shadow-sm transition-all",ghost:"bg-transparent hover:bg-slate-100 text-slate-700 focus:ring-slate-500 border border-transparent hover:shadow-sm transition-all"},S={sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-sm"},j=o?"opacity-60 cursor-not-allowed":"cursor-pointer",k=a?"w-full":"",R=`
    ${w}
    ${N[t]||N.primary}
    ${S[n]||S.md}
    ${j}
    ${k}
    ${m}
  `,T=v==="button"?{type:r,...g}:g;return s.jsx(v,{className:R,disabled:o,onClick:d,...T,children:e})};be.propTypes={children:ie.node.isRequired,variant:ie.oneOf(["primary","secondary","outline","danger","success","ghost"]),size:ie.oneOf(["sm","md","lg"]),type:ie.oneOf(["button","submit","reset"]),fullWidth:ie.bool,disabled:ie.bool,onClick:ie.func,className:ie.string,as:ie.elementType};const lt=({id:e,name:t,type:n="text",label:r,placeholder:a,value:o,onChange:d,onBlur:m,error:v,icon:g,disabled:w=!1,required:N=!1,className:S="",...j})=>{const A=`
    w-full rounded-md shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
    ${v?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 text-slate-900 placeholder-slate-400"}
    ${w?"bg-slate-100 cursor-not-allowed opacity-75":"bg-white"}
    ${g?"pl-10":"pl-3"}
    py-2 pr-3 text-sm
    ${S}
  `;return s.jsxs("div",{className:"w-full",children:[r&&s.jsxs("label",{htmlFor:e,className:`block text-sm font-medium mb-1 ${v?"text-red-600":"text-slate-700"}`,children:[r,N&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[g&&s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-500",children:g}),s.jsx("input",{id:e,name:t,type:n,value:o,onChange:d,onBlur:m,placeholder:a,disabled:w,required:N,className:A,...j})]}),v&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v})]})};lt.propTypes={id:ie.string.isRequired,name:ie.string.isRequired,type:ie.string,label:ie.string,placeholder:ie.string,value:ie.oneOfType([ie.string,ie.number]),onChange:ie.func,onBlur:ie.func,error:ie.string,icon:ie.node,disabled:ie.bool,required:ie.bool,className:ie.string};var Ve;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ve||(Ve={}));var Cb=new Map([[Ve.QR_CODE,"QR_CODE"],[Ve.AZTEC,"AZTEC"],[Ve.CODABAR,"CODABAR"],[Ve.CODE_39,"CODE_39"],[Ve.CODE_93,"CODE_93"],[Ve.CODE_128,"CODE_128"],[Ve.DATA_MATRIX,"DATA_MATRIX"],[Ve.MAXICODE,"MAXICODE"],[Ve.ITF,"ITF"],[Ve.EAN_13,"EAN_13"],[Ve.EAN_8,"EAN_8"],[Ve.PDF_417,"PDF_417"],[Ve.RSS_14,"RSS_14"],[Ve.RSS_EXPANDED,"RSS_EXPANDED"],[Ve.UPC_A,"UPC_A"],[Ve.UPC_E,"UPC_E"],[Ve.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Eb;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Eb||(Eb={}));function hL(e){return Object.values(Ve).includes(e)}var mh;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(mh||(mh={}));var pL=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[mh.SCAN_TYPE_CAMERA,mh.SCAN_TYPE_FILE],e}(),xE=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Cb.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Cb.get(t))},e}(),Sb=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Ox;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ox||(Ox={}));var mL=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Ox.UNKWOWN_ERROR}},e}(),xL=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function ai(e){return typeof e>"u"||e===null}var nc=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),gE=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(a),d=Object.keys(t),m=0,v=d;m<v.length;m++){var g=v[m];if(o.has(g))return n.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},e}(),Lx={exports:{}};(function(e,t){(function(n,r){r(t)})(Aa,function(n){function r(F){return F==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,i){F.__proto__=i}||function(F,i){for(var l in i)i.hasOwnProperty(l)&&(F[l]=i[l])};function o(F,i){a(F,i);function l(){this.constructor=F}F.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}function d(F,i){var l=Object.setPrototypeOf;l?l(F,i):F.__proto__=i}function m(F,i){i===void 0&&(i=F.constructor);var l=Error.captureStackTrace;l&&l(F,i)}var v=function(F){o(i,F);function i(l){var c=this.constructor,f=F.call(this,l)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),d(f,c.prototype),m(f),f}return i}(Error);class g extends v{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class N extends g{}N.kind="IllegalArgumentException";class S{constructor(i){if(this.binarizer=i,i===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,l){return this.binarizer.getBlackRow(i,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,l,c,f){const h=this.binarizer.getLuminanceSource().crop(i,l,c,f);return new S(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends g{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class k{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class R{static arraycopy(i,l,c,f,h){for(;h--;)c[f++]=i[l++]}static currentTimeMillis(){return Date.now()}}class T extends g{}T.kind="IndexOutOfBoundsException";class I extends T{constructor(i=void 0,l=void 0){super(l),this.index=i,this.message=l}}I.kind="ArrayIndexOutOfBoundsException";class A{static fill(i,l){for(let c=0,f=i.length;c<f;c++)i[c]=l}static fillWithin(i,l,c,f){A.rangeCheck(i.length,l,c);for(let h=l;h<c;h++)i[h]=f}static rangeCheck(i,l,c){if(l>c)throw new N("fromIndex("+l+") > toIndex("+c+")");if(l<0)throw new I(l);if(c>i)throw new I(c)}static asList(...i){return i}static create(i,l,c){return Array.from({length:i}).map(h=>Array.from({length:l}).fill(c))}static createInt32Array(i,l,c){return Array.from({length:i}).map(h=>Int32Array.from({length:l}).fill(c))}static equals(i,l){if(!i||!l||!i.length||!l.length||i.length!==l.length)return!1;for(let c=0,f=i.length;c<f;c++)if(i[c]!==l[c])return!1;return!0}static hashCode(i){if(i===null)return 0;let l=1;for(const c of i)l=31*l+c;return l}static fillUint8Array(i,l){for(let c=0;c!==i.length;c++)i[c]=l}static copyOf(i,l){return i.slice(0,l)}static copyOfUint8Array(i,l){if(i.length<=l){const c=new Uint8Array(l);return c.set(i),c}return i.slice(0,l)}static copyOfRange(i,l,c){const f=c-l,h=new Int32Array(f);return R.arraycopy(i,l,h,0,f),h}static binarySearch(i,l,c){c===void 0&&(c=A.numberComparator);let f=0,h=i.length-1;for(;f<=h;){const x=h+f>>1,y=c(l,i[x]);if(y>0)f=x+1;else if(y<0)h=x-1;else return x}return-f-1}static numberComparator(i,l){return i-l}}class M{static numberOfTrailingZeros(i){let l;if(i===0)return 32;let c=31;return l=i<<16,l!==0&&(c-=16,i=l),l=i<<8,l!==0&&(c-=8,i=l),l=i<<4,l!==0&&(c-=4,i=l),l=i<<2,l!==0&&(c-=2,i=l),c-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let l=1;return i>>>16||(l+=16,i<<=16),i>>>24||(l+=8,i<<=8),i>>>28||(l+=4,i<<=4),i>>>30||(l+=2,i<<=2),l-=i>>>31,l}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,l){return Math.trunc(i/l)}static parseInt(i,l=void 0){return parseInt(i,l)}}M.MIN_VALUE_32_BITS=-2147483648,M.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(i,l){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,l==null?this.bits=B.makeArray(i):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const l=B.makeArray(i);R.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const l=this.size;if(i>=l)return l;const c=this.bits;let f=Math.floor(i/32),h=c[f];h&=~((1<<(i&31))-1);const x=c.length;for(;h===0;){if(++f===x)return l;h=c[f]}const y=f*32+M.numberOfTrailingZeros(h);return y>l?l:y}getNextUnset(i){const l=this.size;if(i>=l)return l;const c=this.bits;let f=Math.floor(i/32),h=~c[f];h&=~((1<<(i&31))-1);const x=c.length;for(;h===0;){if(++f===x)return l;h=~c[f]}const y=f*32+M.numberOfTrailingZeros(h);return y>l?l:y}setBulk(i,l){this.bits[Math.floor(i/32)]=l}setRange(i,l){if(l<i||i<0||l>this.size)throw new N;if(l===i)return;l--;const c=Math.floor(i/32),f=Math.floor(l/32),h=this.bits;for(let x=c;x<=f;x++){const y=x>c?0:i&31,E=(2<<(x<f?31:l&31))-(1<<y);h[x]|=E}}clear(){const i=this.bits.length,l=this.bits;for(let c=0;c<i;c++)l[c]=0}isRange(i,l,c){if(l<i||i<0||l>this.size)throw new N;if(l===i)return!0;l--;const f=Math.floor(i/32),h=Math.floor(l/32),x=this.bits;for(let y=f;y<=h;y++){const C=y>f?0:i&31,D=(2<<(y<h?31:l&31))-(1<<C)&4294967295;if((x[y]&D)!==(c?D:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,l){if(l<0||l>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let c=l;c>0;c--)this.appendBit((i>>c-1&1)===1)}appendBitArray(i){const l=i.size;this.ensureCapacity(this.size+l);for(let c=0;c<l;c++)this.appendBit(i.get(c))}xor(i){if(this.size!==i.size)throw new N("Sizes don't match");const l=this.bits;for(let c=0,f=l.length;c<f;c++)l[c]^=i.bits[c]}toBytes(i,l,c,f){for(let h=0;h<f;h++){let x=0;for(let y=0;y<8;y++)this.get(i)&&(x|=1<<7-y),i++;l[c+h]=x}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),c=l+1,f=this.bits;for(let h=0;h<c;h++){let x=f[h];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,i[l-h]=x}if(this.size!==c*32){const h=c*32-this.size;let x=i[0]>>>h;for(let y=1;y<c;y++){const C=i[y];x|=C<<32-h,i[y-1]=x,x=C>>>h}i[c-1]=x}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof B))return!1;const l=i;return this.size===l.size&&A.equals(this.bits,l.bits)}hashCode(){return 31*this.size+A.hashCode(this.bits)}toString(){let i="";for(let l=0,c=this.size;l<c;l++)l&7||(i+=" "),i+=this.get(l)?"X":".";return i}clone(){return new B(this.size,this.bits.slice())}}var G;(function(F){F[F.OTHER=0]="OTHER",F[F.PURE_BARCODE=1]="PURE_BARCODE",F[F.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",F[F.TRY_HARDER=3]="TRY_HARDER",F[F.CHARACTER_SET=4]="CHARACTER_SET",F[F.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",F[F.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",F[F.ASSUME_GS1=7]="ASSUME_GS1",F[F.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",F[F.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",F[F.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(G||(G={}));var P=G;class O extends g{static getFormatInstance(){return new O}}O.kind="FormatException";var V;(function(F){F[F.Cp437=0]="Cp437",F[F.ISO8859_1=1]="ISO8859_1",F[F.ISO8859_2=2]="ISO8859_2",F[F.ISO8859_3=3]="ISO8859_3",F[F.ISO8859_4=4]="ISO8859_4",F[F.ISO8859_5=5]="ISO8859_5",F[F.ISO8859_6=6]="ISO8859_6",F[F.ISO8859_7=7]="ISO8859_7",F[F.ISO8859_8=8]="ISO8859_8",F[F.ISO8859_9=9]="ISO8859_9",F[F.ISO8859_10=10]="ISO8859_10",F[F.ISO8859_11=11]="ISO8859_11",F[F.ISO8859_13=12]="ISO8859_13",F[F.ISO8859_14=13]="ISO8859_14",F[F.ISO8859_15=14]="ISO8859_15",F[F.ISO8859_16=15]="ISO8859_16",F[F.SJIS=16]="SJIS",F[F.Cp1250=17]="Cp1250",F[F.Cp1251=18]="Cp1251",F[F.Cp1252=19]="Cp1252",F[F.Cp1256=20]="Cp1256",F[F.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",F[F.UTF8=22]="UTF8",F[F.ASCII=23]="ASCII",F[F.Big5=24]="Big5",F[F.GB18030=25]="GB18030",F[F.EUC_KR=26]="EUC_KR"})(V||(V={}));class W{constructor(i,l,c,...f){this.valueIdentifier=i,this.name=c,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=f,W.VALUE_IDENTIFIER_TO_ECI.set(i,this),W.NAME_TO_ECI.set(c,this);const h=this.values;for(let x=0,y=h.length;x!==y;x++){const C=h[x];W.VALUES_TO_ECI.set(C,this)}for(const x of f)W.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new O("incorect value");const l=W.VALUES_TO_ECI.get(i);if(l===void 0)throw new O("incorect value");return l}static getCharacterSetECIByName(i){const l=W.NAME_TO_ECI.get(i);if(l===void 0)throw new O("incorect value");return l}equals(i){if(!(i instanceof W))return!1;const l=i;return this.getName()===l.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(V.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(V.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(V.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(V.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(V.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(V.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(V.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(V.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(V.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(V.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(V.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(V.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(V.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(V.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(V.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(V.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(V.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(V.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(V.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(V.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(V.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(V.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(V.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(V.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(V.Big5,28,"Big5"),W.GB18030=new W(V.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(V.EUC_KR,30,"EUC_KR","EUC-KR");class ee extends g{}ee.kind="UnsupportedOperationException";class ce{static decode(i,l){const c=this.encodingName(l);return this.customDecoder?this.customDecoder(i,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(i,c):new TextDecoder(c).decode(i)}static shouldDecodeOnFallback(i){return!ce.isBrowser()&&i==="ISO-8859-1"}static encode(i,l){const c=this.encodingName(l);return this.customEncoder?this.customEncoder(i,c):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof W?i:W.getCharacterSetECIByName(i)}static decodeFallback(i,l){const c=this.encodingCharacterSet(l);if(ce.isDecodeFallbackSupported(c)){let f="";for(let h=0,x=i.length;h<x;h++){let y=i[h].toString(16);y.length<2&&(y="0"+y),f+="%"+y}return decodeURIComponent(f)}if(c.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new ee(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(W.UTF8)||i.equals(W.ISO8859_1)||i.equals(W.ASCII)}static encodeFallback(i){const c=btoa(unescape(encodeURIComponent(i))).split(""),f=[];for(let h=0;h<c.length;h++)f.push(c[h].charCodeAt(0));return new Uint8Array(f)}}class ne{static castAsNonUtf8Char(i,l=null){const c=l?l.getName():this.ISO88591;return ce.decode(new Uint8Array([i]),c)}static guessEncoding(i,l){if(l!=null&&l.get(P.CHARACTER_SET)!==void 0)return l.get(P.CHARACTER_SET).toString();const c=i.length;let f=!0,h=!0,x=!0,y=0,C=0,E=0,D=0,U=0,H=0,Z=0,z=0,$=0,X=0,re=0;const xe=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let we=0;we<c&&(f||h||x);we++){const Ce=i[we]&255;x&&(y>0?Ce&128?y--:x=!1:Ce&128&&(Ce&64?(y++,Ce&32?(y++,Ce&16?(y++,Ce&8?x=!1:D++):E++):C++):x=!1)),f&&(Ce>127&&Ce<160?f=!1:Ce>159&&(Ce<192||Ce===215||Ce===247)&&re++),h&&(U>0?Ce<64||Ce===127||Ce>252?h=!1:U--:Ce===128||Ce===160||Ce>239?h=!1:Ce>160&&Ce<224?(H++,z=0,Z++,Z>$&&($=Z)):Ce>127?(U++,Z=0,z++,z>X&&(X=z)):(Z=0,z=0))}return x&&y>0&&(x=!1),h&&U>0&&(h=!1),x&&(xe||C+E+D>0)?ne.UTF8:h&&(ne.ASSUME_SHIFT_JIS||$>=3||X>=3)?ne.SHIFT_JIS:f&&h?$===2&&H===2||re*10>=c?ne.SHIFT_JIS:ne.ISO88591:f?ne.ISO88591:h?ne.SHIFT_JIS:x?ne.UTF8:ne.PLATFORM_DEFAULT_ENCODING}static format(i,...l){let c=-1;function f(x,y,C,E,D,U){if(x==="%%")return"%";if(l[++c]===void 0)return;x=E?parseInt(E.substr(1)):void 0;let H=D?parseInt(D.substr(1)):void 0,Z;switch(U){case"s":Z=l[c];break;case"c":Z=l[c][0];break;case"f":Z=parseFloat(l[c]).toFixed(x);break;case"p":Z=parseFloat(l[c]).toPrecision(x);break;case"e":Z=parseFloat(l[c]).toExponential(x);break;case"x":Z=parseInt(l[c]).toString(H||16);break;case"d":Z=parseFloat(parseInt(l[c],H||10).toPrecision(x)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(H);let z=parseInt(C),$=C&&C[0]+""=="0"?"0":" ";for(;Z.length<z;)Z=y!==void 0?Z+$:$+Z;return Z}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(h,f)}static getBytes(i,l){return ce.encode(i,l)}static getCharCode(i,l=0){return i.charCodeAt(l)}static getCharAt(i){return String.fromCharCode(i)}}ne.SHIFT_JIS=W.SJIS.getName(),ne.GB2312="GB2312",ne.ISO88591=W.ISO8859_1.getName(),ne.EUC_JP="EUC_JP",ne.UTF8=W.UTF8.getName(),ne.PLATFORM_DEFAULT_ENCODING=ne.UTF8,ne.ASSUME_SHIFT_JIS=!1;class te{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=ne.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,l,c){for(let f=l;l<l+c;f++)this.append(i[f]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+1)}substring(i,l){return this.value.substring(i,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+l.length)}}class Ne{constructor(i,l,c,f){if(this.width=i,this.height=l,this.rowSize=c,this.bits=f,l==null&&(l=i),this.height=l,i<1||l<1)throw new N("Both dimensions must be greater than 0");c==null&&(c=Math.floor((i+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const l=i.length,c=i[0].length,f=new Ne(c,l);for(let h=0;h<l;h++){const x=i[h];for(let y=0;y<c;y++)x[y]&&f.set(y,h)}return f}static parseFromString(i,l,c){if(i===null)throw new N("stringRepresentation cannot be null");const f=new Array(i.length);let h=0,x=0,y=-1,C=0,E=0;for(;E<i.length;)if(i.charAt(E)===`
`||i.charAt(E)==="\r"){if(h>x){if(y===-1)y=h-x;else if(h-x!==y)throw new N("row lengths do not match");x=h,C++}E++}else if(i.substring(E,E+l.length)===l)E+=l.length,f[h]=!0,h++;else if(i.substring(E,E+c.length)===c)E+=c.length,f[h]=!1,h++;else throw new N("illegal character encountered: "+i.substring(E));if(h>x){if(y===-1)y=h-x;else if(h-x!==y)throw new N("row lengths do not match");C++}const D=new Ne(y,C);for(let U=0;U<h;U++)f[U]&&D.set(Math.floor(U%y),Math.floor(U/y));return D}get(i,l){const c=l*this.rowSize+Math.floor(i/32);return(this.bits[c]>>>(i&31)&1)!==0}set(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]|=1<<(i&31)&4294967295}unset(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]&=~(1<<(i&31)&4294967295)}flip(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new N("input matrix dimensions do not match");const l=new B(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let h=0,x=this.height;h<x;h++){const y=h*c,C=i.getRow(h,l).getBitArray();for(let E=0;E<c;E++)f[y+E]^=C[E]}}clear(){const i=this.bits,l=i.length;for(let c=0;c<l;c++)i[c]=0}setRegion(i,l,c,f){if(l<0||i<0)throw new N("Left and top must be nonnegative");if(f<1||c<1)throw new N("Height and width must be at least 1");const h=i+c,x=l+f;if(x>this.height||h>this.width)throw new N("The region must fit inside the matrix");const y=this.rowSize,C=this.bits;for(let E=l;E<x;E++){const D=E*y;for(let U=i;U<h;U++)C[D+Math.floor(U/32)]|=1<<(U&31)&4294967295}}getRow(i,l){l==null||l.getSize()<this.width?l=new B(this.width):l.clear();const c=this.rowSize,f=this.bits,h=i*c;for(let x=0;x<c;x++)l.setBulk(x*32,f[h+x]);return l}setRow(i,l){R.arraycopy(l.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),l=this.getHeight();let c=new B(i),f=new B(i);for(let h=0,x=Math.floor((l+1)/2);h<x;h++)c=this.getRow(h,c),f=this.getRow(l-1-h,f),c.reverse(),f.reverse(),this.setRow(h,f),this.setRow(l-1-h,c)}getEnclosingRectangle(){const i=this.width,l=this.height,c=this.rowSize,f=this.bits;let h=i,x=l,y=-1,C=-1;for(let E=0;E<l;E++)for(let D=0;D<c;D++){const U=f[E*c+D];if(U!==0){if(E<x&&(x=E),E>C&&(C=E),D*32<h){let H=0;for(;!(U<<31-H&4294967295);)H++;D*32+H<h&&(h=D*32+H)}if(D*32+31>y){let H=31;for(;!(U>>>H);)H--;D*32+H>y&&(y=D*32+H)}}}return y<h||C<x?null:Int32Array.from([h,x,y-h+1,C-x+1])}getTopLeftOnBit(){const i=this.rowSize,l=this.bits;let c=0;for(;c<l.length&&l[c]===0;)c++;if(c===l.length)return null;const f=c/i;let h=c%i*32;const x=l[c];let y=0;for(;!(x<<31-y&4294967295);)y++;return h+=y,Int32Array.from([h,f])}getBottomRightOnBit(){const i=this.rowSize,l=this.bits;let c=l.length-1;for(;c>=0&&l[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/i);let h=Math.floor(c%i)*32;const x=l[c];let y=31;for(;!(x>>>y);)y--;return h+=y,Int32Array.from([h,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Ne))return!1;const l=i;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&A.equals(this.bits,l.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+A.hashCode(this.bits),i}toString(i="X ",l="  ",c=`
`){return this.buildToString(i,l,c)}buildToString(i,l,c){let f=new te;for(let h=0,x=this.height;h<x;h++){for(let y=0,C=this.width;y<C;y++)f.append(this.get(y,h)?i:l);f.append(c)}return f.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends g{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class Ae extends k{constructor(i){super(i),this.luminances=Ae.EMPTY,this.buckets=new Int32Array(Ae.LUMINANCE_BUCKETS)}getBlackRow(i,l){const c=this.getLuminanceSource(),f=c.getWidth();l==null||l.getSize()<f?l=new B(f):l.clear(),this.initArrays(f);const h=c.getRow(i,this.luminances),x=this.buckets;for(let C=0;C<f;C++)x[(h[C]&255)>>Ae.LUMINANCE_SHIFT]++;const y=Ae.estimateBlackPoint(x);if(f<3)for(let C=0;C<f;C++)(h[C]&255)<y&&l.set(C);else{let C=h[0]&255,E=h[1]&255;for(let D=1;D<f-1;D++){const U=h[D+1]&255;(E*4-C-U)/2<y&&l.set(D),C=E,E=U}}return l}getBlackMatrix(){const i=this.getLuminanceSource(),l=i.getWidth(),c=i.getHeight(),f=new Ne(l,c);this.initArrays(l);const h=this.buckets;for(let C=1;C<5;C++){const E=Math.floor(c*C/5),D=i.getRow(E,this.luminances),U=Math.floor(l*4/5);for(let H=Math.floor(l/5);H<U;H++){const Z=D[H]&255;h[Z>>Ae.LUMINANCE_SHIFT]++}}const x=Ae.estimateBlackPoint(h),y=i.getMatrix();for(let C=0;C<c;C++){const E=C*l;for(let D=0;D<l;D++)(y[E+D]&255)<x&&f.set(D,C)}return f}createBinarizer(i){return new Ae(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const l=this.buckets;for(let c=0;c<Ae.LUMINANCE_BUCKETS;c++)l[c]=0}static estimateBlackPoint(i){const l=i.length;let c=0,f=0,h=0;for(let D=0;D<l;D++)i[D]>h&&(f=D,h=i[D]),i[D]>c&&(c=i[D]);let x=0,y=0;for(let D=0;D<l;D++){const U=D-f,H=i[D]*U*U;H>y&&(x=D,y=H)}if(f>x){const D=f;f=x,x=D}if(x-f<=l/16)throw new ae;let C=x-1,E=-1;for(let D=x-1;D>f;D--){const U=D-f,H=U*U*(x-D)*(c-i[D]);H>E&&(C=D,E=H)}return C<<Ae.LUMINANCE_SHIFT}}Ae.LUMINANCE_BITS=5,Ae.LUMINANCE_SHIFT=8-Ae.LUMINANCE_BITS,Ae.LUMINANCE_BUCKETS=1<<Ae.LUMINANCE_BITS,Ae.EMPTY=Uint8ClampedArray.from([0]);class me extends Ae{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),l=i.getWidth(),c=i.getHeight();if(l>=me.MINIMUM_DIMENSION&&c>=me.MINIMUM_DIMENSION){const f=i.getMatrix();let h=l>>me.BLOCK_SIZE_POWER;l&me.BLOCK_SIZE_MASK&&h++;let x=c>>me.BLOCK_SIZE_POWER;c&me.BLOCK_SIZE_MASK&&x++;const y=me.calculateBlackPoints(f,h,x,l,c),C=new Ne(l,c);me.calculateThresholdForBlock(f,h,x,l,c,y,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new me(i)}static calculateThresholdForBlock(i,l,c,f,h,x,y){const C=h-me.BLOCK_SIZE,E=f-me.BLOCK_SIZE;for(let D=0;D<c;D++){let U=D<<me.BLOCK_SIZE_POWER;U>C&&(U=C);const H=me.cap(D,2,c-3);for(let Z=0;Z<l;Z++){let z=Z<<me.BLOCK_SIZE_POWER;z>E&&(z=E);const $=me.cap(Z,2,l-3);let X=0;for(let xe=-2;xe<=2;xe++){const we=x[H+xe];X+=we[$-2]+we[$-1]+we[$]+we[$+1]+we[$+2]}const re=X/25;me.thresholdBlock(i,z,U,re,f,y)}}}static cap(i,l,c){return i<l?l:i>c?c:i}static thresholdBlock(i,l,c,f,h,x){for(let y=0,C=c*h+l;y<me.BLOCK_SIZE;y++,C+=h)for(let E=0;E<me.BLOCK_SIZE;E++)(i[C+E]&255)<=f&&x.set(l+E,c+y)}static calculateBlackPoints(i,l,c,f,h){const x=h-me.BLOCK_SIZE,y=f-me.BLOCK_SIZE,C=new Array(c);for(let E=0;E<c;E++){C[E]=new Int32Array(l);let D=E<<me.BLOCK_SIZE_POWER;D>x&&(D=x);for(let U=0;U<l;U++){let H=U<<me.BLOCK_SIZE_POWER;H>y&&(H=y);let Z=0,z=255,$=0;for(let re=0,xe=D*f+H;re<me.BLOCK_SIZE;re++,xe+=f){for(let we=0;we<me.BLOCK_SIZE;we++){const Ce=i[xe+we]&255;Z+=Ce,Ce<z&&(z=Ce),Ce>$&&($=Ce)}if($-z>me.MIN_DYNAMIC_RANGE)for(re++,xe+=f;re<me.BLOCK_SIZE;re++,xe+=f)for(let we=0;we<me.BLOCK_SIZE;we++)Z+=i[xe+we]&255}let X=Z>>me.BLOCK_SIZE_POWER*2;if($-z<=me.MIN_DYNAMIC_RANGE&&(X=z/2,E>0&&U>0)){const re=(C[E-1][U]+2*C[E][U-1]+C[E-1][U-1])/4;z<re&&(X=re)}C[E][U]=X}}return C}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class de{constructor(i,l){this.width=i,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,l,c,f){throw new ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ee("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let l=new te;for(let c=0;c<this.height;c++){const f=this.getRow(c,i);for(let h=0;h<this.width;h++){const x=f[h]&255;let y;x<64?y="#":x<128?y="+":x<192?y=".":y=" ",l.append(y)}l.append(`
`)}return l.toString()}}class fe extends de{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,l){const c=this.delegate.getRow(i,l),f=this.getWidth();for(let h=0;h<f;h++)c[h]=255-(c[h]&255);return c}getMatrix(){const i=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(l);for(let f=0;f<l;f++)c[f]=255-(i[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(i,l,c,f){return new fe(this.delegate.crop(i,l,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new fe(this.delegate.rotateCounterClockwise45())}}class Be extends de{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Be.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const l=i.getContext("2d").getImageData(0,0,i.width,i.height);return Be.toGrayscaleBuffer(l.data,i.width,i.height)}static toGrayscaleBuffer(i,l,c){const f=new Uint8ClampedArray(l*c);for(let h=0,x=0,y=i.length;h<y;h+=4,x++){let C;if(i[h+3]===0)C=255;else{const D=i[h],U=i[h+1],H=i[h+2];C=306*D+601*U+117*H+512>>10}f[x]=C}return f}getRow(i,l){if(i<0||i>=this.getHeight())throw new N("Requested row is outside the image: "+i);const c=this.getWidth(),f=i*c;return l===null?l=this.buffer.slice(f,f+c):(l.length<c&&(l=new Uint8ClampedArray(c)),l.set(this.buffer.slice(f,f+c))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,l,c,f){return super.crop(i,l,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const l=this.getTempCanvasElement(),c=l.getContext("2d"),f=i*Be.DEGREE_TO_RADIANS,h=this.canvas.width,x=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(f))*h+Math.abs(Math.sin(f))*x),C=Math.ceil(Math.abs(Math.sin(f))*h+Math.abs(Math.cos(f))*x);return l.width=y,l.height=C,c.translate(y/2,C/2),c.rotate(f),c.drawImage(this.canvas,h/-2,x/-2),this.buffer=Be.makeBufferFromCanvasImageData(l),this}invert(){return new fe(this)}}Be.DEGREE_TO_RADIANS=Math.PI/180;class Ye{constructor(i,l,c){this.deviceId=i,this.label=l,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Je=(globalThis||Aa||self||window||void 0)&&(globalThis||Aa||self||window||void 0).__awaiter||function(F,i,l,c){function f(h){return h instanceof l?h:new l(function(x){x(h)})}return new(l||(l=Promise))(function(h,x){function y(D){try{E(c.next(D))}catch(U){x(U)}}function C(D){try{E(c.throw(D))}catch(U){x(U)}}function E(D){D.done?h(D.value):f(D.value).then(y,C)}E((c=c.apply(F,i||[])).next())})};class Te{constructor(i,l=500,c){this.reader=i,this.timeBetweenScansMillis=l,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Je(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const c of i){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const h=c.deviceId||c.id,x=c.label||`Video device ${l.length+1}`,y=c.groupId,C={deviceId:h,label:x,kind:f,groupId:y};l.push(C)}return l})}getVideoInputDevices(){return Je(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new Ye(l.deviceId,l.label))})}findDeviceById(i){return Je(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(c=>c.deviceId===i):null})}decodeFromInputVideoDevice(i,l){return Je(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,l)})}decodeOnceFromVideoDevice(i,l){return Je(this,void 0,void 0,function*(){this.reset();let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,l)})}decodeOnceFromConstraints(i,l){return Je(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(c,l)})}decodeOnceFromStream(i,l){return Je(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,l);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(i,l,c){return Je(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,l,c)})}decodeFromVideoDevice(i,l,c){return Je(this,void 0,void 0,function*(){let f;i?f={deviceId:{exact:i}}:f={facingMode:"environment"};const h={video:f};return yield this.decodeFromConstraints(h,l,c)})}decodeFromConstraints(i,l,c){return Je(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(f,l,c)})}decodeFromStream(i,l,c){return Je(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(i,l);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,l){return Je(this,void 0,void 0,function*(){const c=this.prepareVideoElement(l);return this.addVideoSource(c,i),this.videoElement=c,this.stream=i,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(i){return new Promise((l,c)=>this.playVideoOnLoad(i,()=>l()))}playVideoOnLoad(i,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",l),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Je(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,l){const c=document.getElementById(i);if(!c)throw new w(`element with id '${i}' not found`);if(c.nodeName.toLowerCase()!==l.toLowerCase())throw new w(`element with id '${i}' must be an ${l} element`);return c}decodeFromImage(i,l){if(!i&&!l)throw new w("either imageElement with a src set or an url must be provided");return l&&!i?this.decodeFromImageUrl(l):this.decodeFromImageElement(i)}decodeFromVideo(i,l){if(!i&&!l)throw new w("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,l,c){if(i===void 0&&l===void 0)throw new w("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrlContinuously(l,c):this.decodeFromVideoElementContinuously(i,c)}decodeFromImageElement(i){if(!i)throw new w("An image element must be provided.");this.reset();const l=this.prepareImageElement(i);this.imageElement=l;let c;return this.isImageLoaded(l)?c=this.decodeOnce(l,!1,!0):c=this._decodeOnLoadImage(l),c}decodeFromVideoElement(i){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(i,l){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(c,l)}_decodeFromVideoElementSetup(i){if(!i)throw new w("A video element must be provided.");this.reset();const l=this.prepareVideoElement(i);return this.videoElement=l,l}decodeFromImageUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const c=this._decodeOnLoadImage(l);return l.src=i,c}decodeFromVideoUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElement(l);return l.src=i,c}decodeFromVideoUrlContinuously(i,l){if(!i)throw new w("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,l);return c.src=i,f}_decodeOnLoadImage(i){return new Promise((l,c)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(l,c),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Je(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,l){return Je(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,l)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let l;return typeof i>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(l=i),l}prepareVideoElement(i){let l;return!i&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(l=i),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(i,l=!0,c=!0){this._stopAsyncDecode=!1;const f=(h,x)=>{if(this._stopAsyncDecode){x(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);h(y)}catch(y){const C=l&&y instanceof ae,D=(y instanceof j||y instanceof O)&&c;if(C||D)return setTimeout(f,this._timeBetweenDecodingAttempts,h,x);x(y)}};return new Promise((h,x)=>f(h,x))}decodeContinuously(i,l){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(i);l(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){l(null,f);const h=f instanceof j||f instanceof O,x=f instanceof ae;(h||x)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(i){const l=this.createBinaryBitmap(i);return this.decodeBitmap(l)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,l,c){l||(l={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(i,l,c=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const l=this.getCaptureCanvas(i),c=new Be(l),f=new me(c);return new S(f)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const l=this.createCaptureCanvas(i);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let c,f;return typeof i<"u"&&(i instanceof HTMLVideoElement?(c=i.videoWidth,f=i.videoHeight):i instanceof HTMLImageElement&&(c=i.naturalWidth||i.width,f=i.naturalHeight||i.height)),l.style.width=c+"px",l.style.height=f+"px",l.width=c,l.height=f,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,l){try{i.srcObject=l}catch{i.src=URL.createObjectURL(l)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class $e{constructor(i,l,c=l==null?0:8*l.length,f,h,x=R.currentTimeMillis()){this.text=i,this.rawBytes=l,this.numBits=c,this.resultPoints=f,this.format=h,this.timestamp=x,this.text=i,this.rawBytes=l,c==null?this.numBits=l==null?0:8*l.length:this.numBits=c,this.resultPoints=f,this.format=h,this.resultMetadata=null,x==null?this.timestamp=R.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,l)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const l=this.resultPoints;if(l===null)this.resultPoints=i;else if(i!==null&&i.length>0){const c=new Array(l.length+i.length);R.arraycopy(l,0,c,0,l.length),R.arraycopy(i,0,c,l.length,i.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var nt;(function(F){F[F.AZTEC=0]="AZTEC",F[F.CODABAR=1]="CODABAR",F[F.CODE_39=2]="CODE_39",F[F.CODE_93=3]="CODE_93",F[F.CODE_128=4]="CODE_128",F[F.DATA_MATRIX=5]="DATA_MATRIX",F[F.EAN_8=6]="EAN_8",F[F.EAN_13=7]="EAN_13",F[F.ITF=8]="ITF",F[F.MAXICODE=9]="MAXICODE",F[F.PDF_417=10]="PDF_417",F[F.QR_CODE=11]="QR_CODE",F[F.RSS_14=12]="RSS_14",F[F.RSS_EXPANDED=13]="RSS_EXPANDED",F[F.UPC_A=14]="UPC_A",F[F.UPC_E=15]="UPC_E",F[F.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var De=nt,Oe;(function(F){F[F.OTHER=0]="OTHER",F[F.ORIENTATION=1]="ORIENTATION",F[F.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",F[F.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",F[F.ISSUE_NUMBER=4]="ISSUE_NUMBER",F[F.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",F[F.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",F[F.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",F[F.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",F[F.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",F[F.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Oe||(Oe={}));var at=Oe;class Ht{constructor(i,l,c,f,h=-1,x=-1){this.rawBytes=i,this.text=l,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=x,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Vt{exp(i){return this.expTable[i]}log(i){if(i===0)throw new N;return this.logTable[i]}static addOrSubtract(i,l){return i^l}}class Bt{constructor(i,l){if(l.length===0)throw new N;this.field=i;const c=l.length;if(c>1&&l[0]===0){let f=1;for(;f<c&&l[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),R.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const l=this.coefficients;let c;if(i===1){c=0;for(let x=0,y=l.length;x!==y;x++){const C=l[x];c=Vt.addOrSubtract(c,C)}return c}c=l[0];const f=l.length,h=this.field;for(let x=1;x<f;x++)c=Vt.addOrSubtract(h.multiply(i,c),l[x]);return c}addOrSubtract(i){if(!this.field.equals(i.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,c=i.coefficients;if(l.length>c.length){const x=l;l=c,c=x}let f=new Int32Array(c.length);const h=c.length-l.length;R.arraycopy(c,0,f,0,h);for(let x=h;x<c.length;x++)f[x]=Vt.addOrSubtract(l[x-h],c[x]);return new Bt(this.field,f)}multiply(i){if(!this.field.equals(i.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const l=this.coefficients,c=l.length,f=i.coefficients,h=f.length,x=new Int32Array(c+h-1),y=this.field;for(let C=0;C<c;C++){const E=l[C];for(let D=0;D<h;D++)x[C+D]=Vt.addOrSubtract(x[C+D],y.multiply(E,f[D]))}return new Bt(y,x)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const l=this.coefficients.length,c=this.field,f=new Int32Array(l),h=this.coefficients;for(let x=0;x<l;x++)f[x]=c.multiply(h[x],i);return new Bt(c,f)}multiplyByMonomial(i,l){if(i<0)throw new N;if(l===0)return this.field.getZero();const c=this.coefficients,f=c.length,h=new Int32Array(f+i),x=this.field;for(let y=0;y<f;y++)h[y]=x.multiply(c[y],l);return new Bt(x,h)}divide(i){if(!this.field.equals(i.field))throw new N("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new N("Divide by 0");const l=this.field;let c=l.getZero(),f=this;const h=i.getCoefficient(i.getDegree()),x=l.inverse(h);for(;f.getDegree()>=i.getDegree()&&!f.isZero();){const y=f.getDegree()-i.getDegree(),C=l.multiply(f.getCoefficient(f.getDegree()),x),E=i.multiplyByMonomial(y,C),D=l.buildMonomial(y,C);c=c.addOrSubtract(D),f=f.addOrSubtract(E)}return[c,f]}toString(){let i="";for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);if(c!==0){if(c<0?(i+=" - ",c=-c):i.length>0&&(i+=" + "),l===0||c!==1){const f=this.field.log(c);f===0?i+="1":f===1?i+="a":(i+="a^",i+=f)}l!==0&&(l===1?i+="x":(i+="x^",i+=l))}}return i}}class Lt extends g{}Lt.kind="ArithmeticException";class _e extends Vt{constructor(i,l,c){super(),this.primitive=i,this.size=l,this.generatorBase=c;const f=new Int32Array(l);let h=1;for(let y=0;y<l;y++)f[y]=h,h*=2,h>=l&&(h^=i,h&=l-1);this.expTable=f;const x=new Int32Array(l);for(let y=0;y<l-1;y++)x[f[y]]=y;this.logTable=x,this.zero=new Bt(this,Int32Array.from([0])),this.one=new Bt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new N;if(l===0)return this.zero;const c=new Int32Array(i+1);return c[0]=l,new Bt(this,c)}inverse(i){if(i===0)throw new Lt;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+M.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}_e.AZTEC_DATA_12=new _e(4201,4096,1),_e.AZTEC_DATA_10=new _e(1033,1024,1),_e.AZTEC_DATA_6=new _e(67,64,1),_e.AZTEC_PARAM=new _e(19,16,1),_e.QR_CODE_FIELD_256=new _e(285,256,0),_e.DATA_MATRIX_FIELD_256=new _e(301,256,1),_e.AZTEC_DATA_8=_e.DATA_MATRIX_FIELD_256,_e.MAXICODE_FIELD_64=_e.AZTEC_DATA_6;class Ke extends g{}Ke.kind="ReedSolomonException";class Nt extends g{}Nt.kind="IllegalStateException";class ve{constructor(i){this.field=i}decode(i,l){const c=this.field,f=new Bt(c,i),h=new Int32Array(l);let x=!0;for(let Z=0;Z<l;Z++){const z=f.evaluateAt(c.exp(Z+c.getGeneratorBase()));h[h.length-1-Z]=z,z!==0&&(x=!1)}if(x)return;const y=new Bt(c,h),C=this.runEuclideanAlgorithm(c.buildMonomial(l,1),y,l),E=C[0],D=C[1],U=this.findErrorLocations(E),H=this.findErrorMagnitudes(D,U);for(let Z=0;Z<U.length;Z++){const z=i.length-1-c.log(U[Z]);if(z<0)throw new Ke("Bad error location");i[z]=_e.addOrSubtract(i[z],H[Z])}}runEuclideanAlgorithm(i,l,c){if(i.getDegree()<l.getDegree()){const Z=i;i=l,l=Z}const f=this.field;let h=i,x=l,y=f.getZero(),C=f.getOne();for(;x.getDegree()>=(c/2|0);){let Z=h,z=y;if(h=x,y=C,h.isZero())throw new Ke("r_{i-1} was zero");x=Z;let $=f.getZero();const X=h.getCoefficient(h.getDegree()),re=f.inverse(X);for(;x.getDegree()>=h.getDegree()&&!x.isZero();){const xe=x.getDegree()-h.getDegree(),we=f.multiply(x.getCoefficient(x.getDegree()),re);$=$.addOrSubtract(f.buildMonomial(xe,we)),x=x.addOrSubtract(h.multiplyByMonomial(xe,we))}if(C=$.multiply(y).addOrSubtract(z),x.getDegree()>=h.getDegree())throw new Nt("Division algorithm failed to reduce polynomial?")}const E=C.getCoefficient(0);if(E===0)throw new Ke("sigmaTilde(0) was zero");const D=f.inverse(E),U=C.multiplyScalar(D),H=x.multiplyScalar(D);return[U,H]}findErrorLocations(i){const l=i.getDegree();if(l===1)return Int32Array.from([i.getCoefficient(1)]);const c=new Int32Array(l);let f=0;const h=this.field;for(let x=1;x<h.getSize()&&f<l;x++)i.evaluateAt(x)===0&&(c[f]=h.inverse(x),f++);if(f!==l)throw new Ke("Error locator degree does not match number of roots");return c}findErrorMagnitudes(i,l){const c=l.length,f=new Int32Array(c),h=this.field;for(let x=0;x<c;x++){const y=h.inverse(l[x]);let C=1;for(let E=0;E<c;E++)if(x!==E){const D=h.multiply(l[E],y),U=D&1?D&-2:D|1;C=h.multiply(C,U)}f[x]=h.multiply(i.evaluateAt(y),h.inverse(C)),h.getGeneratorBase()!==0&&(f[x]=h.multiply(f[x],y))}return f}}var ke;(function(F){F[F.UPPER=0]="UPPER",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.DIGIT=3]="DIGIT",F[F.PUNCT=4]="PUNCT",F[F.BINARY=5]="BINARY"})(ke||(ke={}));class qe{decode(i){this.ddata=i;let l=i.getBits(),c=this.extractBits(l),f=this.correctBits(c),h=qe.convertBoolArrayToByteArray(f),x=qe.getEncodedData(f),y=new Ht(h,x,null,null);return y.setNumBits(f.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let l=i.length,c=ke.UPPER,f=ke.UPPER,h="",x=0;for(;x<l;)if(f===ke.BINARY){if(l-x<5)break;let y=qe.readCode(i,x,5);if(x+=5,y===0){if(l-x<11)break;y=qe.readCode(i,x,11)+31,x+=11}for(let C=0;C<y;C++){if(l-x<8){x=l;break}const E=qe.readCode(i,x,8);h+=ne.castAsNonUtf8Char(E),x+=8}f=c}else{let y=f===ke.DIGIT?4:5;if(l-x<y)break;let C=qe.readCode(i,x,y);x+=y;let E=qe.getCharacter(f,C);E.startsWith("CTRL_")?(c=f,f=qe.getTable(E.charAt(5)),E.charAt(6)==="L"&&(c=f)):(h+=E,f=c)}return h}static getTable(i){switch(i){case"L":return ke.LOWER;case"P":return ke.PUNCT;case"M":return ke.MIXED;case"D":return ke.DIGIT;case"B":return ke.BINARY;case"U":default:return ke.UPPER}}static getCharacter(i,l){switch(i){case ke.UPPER:return qe.UPPER_TABLE[l];case ke.LOWER:return qe.LOWER_TABLE[l];case ke.MIXED:return qe.MIXED_TABLE[l];case ke.PUNCT:return qe.PUNCT_TABLE[l];case ke.DIGIT:return qe.DIGIT_TABLE[l];default:throw new Nt("Bad table")}}correctBits(i){let l,c;this.ddata.getNbLayers()<=2?(c=6,l=_e.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,l=_e.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,l=_e.AZTEC_DATA_10):(c=12,l=_e.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),h=i.length/c;if(h<f)throw new O;let x=i.length%c,y=new Int32Array(h);for(let H=0;H<h;H++,x+=c)y[H]=qe.readCode(i,x,c);try{new ve(l).decode(y,h-f)}catch(H){throw new O(H)}let C=(1<<c)-1,E=0;for(let H=0;H<f;H++){let Z=y[H];if(Z===0||Z===C)throw new O;(Z===1||Z===C-1)&&E++}let D=new Array(f*c-E),U=0;for(let H=0;H<f;H++){let Z=y[H];if(Z===1||Z===C-1)D.fill(Z>1,U,U+c-1),U+=c-1;else for(let z=c-1;z>=0;--z)D[U++]=(Z&1<<z)!==0}return D}extractBits(i){let l=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(l?11:14)+c*4,h=new Int32Array(f),x=new Array(this.totalBitsInLayer(c,l));if(l)for(let y=0;y<h.length;y++)h[y]=y;else{let y=f+1+2*M.truncDivision(M.truncDivision(f,2)-1,15),C=f/2,E=M.truncDivision(y,2);for(let D=0;D<C;D++){let U=D+M.truncDivision(D,15);h[C-D-1]=E-U-1,h[C+D]=E+U+1}}for(let y=0,C=0;y<c;y++){let E=(c-y)*4+(l?9:12),D=y*2,U=f-1-D;for(let H=0;H<E;H++){let Z=H*2;for(let z=0;z<2;z++)x[C+Z+z]=i.get(h[D+z],h[D+H]),x[C+2*E+Z+z]=i.get(h[D+H],h[U-z]),x[C+4*E+Z+z]=i.get(h[U-z],h[U-H]),x[C+6*E+Z+z]=i.get(h[U-H],h[D+z])}C+=E*8}return x}static readCode(i,l,c){let f=0;for(let h=l;h<l+c;h++)f<<=1,i[h]&&(f|=1);return f}static readByte(i,l){let c=i.length-l;return c>=8?qe.readCode(i,l,8):qe.readCode(i,l,c)<<8-c}static convertBoolArrayToByteArray(i){let l=new Uint8Array((i.length+7)/8);for(let c=0;c<l.length;c++)l[c]=qe.readByte(i,8*c);return l}totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}qe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class oe{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,l,c,f){const h=i-c,x=l-f;return Math.sqrt(h*h+x*x)}static sum(i){let l=0;for(let c=0,f=i.length;c!==f;c++){const h=i[c];l+=h}return l}}class Ee{static floatToIntBits(i){return i}}Ee.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ye{constructor(i,l){this.x=i,this.y=l}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof ye){const l=i;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*Ee.floatToIntBits(this.x)+Ee.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const l=this.distance(i[0],i[1]),c=this.distance(i[1],i[2]),f=this.distance(i[0],i[2]);let h,x,y;if(c>=l&&c>=f?(x=i[0],h=i[1],y=i[2]):f>=c&&f>=l?(x=i[1],h=i[0],y=i[2]):(x=i[2],h=i[0],y=i[1]),this.crossProductZ(h,x,y)<0){const C=h;h=y,y=C}i[0]=h,i[1]=x,i[2]=y}static distance(i,l){return oe.distance(i.x,i.y,l.x,l.y)}static crossProductZ(i,l,c){const f=l.x,h=l.y;return(c.x-f)*(i.y-h)-(c.y-h)*(i.x-f)}}class gt{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class pn extends gt{constructor(i,l,c,f,h){super(i,l),this.compact=c,this.nbDatablocks=f,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Fe{constructor(i,l,c,f){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),l==null&&(l=Fe.INIT_SIZE),c==null&&(c=i.getWidth()/2|0),f==null&&(f=i.getHeight()/2|0);const h=l/2|0;if(this.leftInit=c-h,this.rightInit=c+h,this.upInit=f-h,this.downInit=f+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let i=this.leftInit,l=this.rightInit,c=this.upInit,f=this.downInit,h=!1,x=!0,y=!1,C=!1,E=!1,D=!1,U=!1;const H=this.width,Z=this.height;for(;x;){x=!1;let z=!0;for(;(z||!C)&&l<H;)z=this.containsBlackPoint(c,f,l,!1),z?(l++,x=!0,C=!0):C||l++;if(l>=H){h=!0;break}let $=!0;for(;($||!E)&&f<Z;)$=this.containsBlackPoint(i,l,f,!0),$?(f++,x=!0,E=!0):E||f++;if(f>=Z){h=!0;break}let X=!0;for(;(X||!D)&&i>=0;)X=this.containsBlackPoint(c,f,i,!1),X?(i--,x=!0,D=!0):D||i--;if(i<0){h=!0;break}let re=!0;for(;(re||!U)&&c>=0;)re=this.containsBlackPoint(i,l,c,!0),re?(c--,x=!0,U=!0):U||c--;if(c<0){h=!0;break}x&&(y=!0)}if(!h&&y){const z=l-i;let $=null;for(let we=1;$===null&&we<z;we++)$=this.getBlackPointOnSegment(i,f-we,i+we,f);if($==null)throw new ae;let X=null;for(let we=1;X===null&&we<z;we++)X=this.getBlackPointOnSegment(i,c+we,i+we,c);if(X==null)throw new ae;let re=null;for(let we=1;re===null&&we<z;we++)re=this.getBlackPointOnSegment(l,c+we,l-we,c);if(re==null)throw new ae;let xe=null;for(let we=1;xe===null&&we<z;we++)xe=this.getBlackPointOnSegment(l,f-we,l-we,f);if(xe==null)throw new ae;return this.centerEdges(xe,$,re,X)}else throw new ae}getBlackPointOnSegment(i,l,c,f){const h=oe.round(oe.distance(i,l,c,f)),x=(c-i)/h,y=(f-l)/h,C=this.image;for(let E=0;E<h;E++){const D=oe.round(i+E*x),U=oe.round(l+E*y);if(C.get(D,U))return new ye(D,U)}return null}centerEdges(i,l,c,f){const h=i.getX(),x=i.getY(),y=l.getX(),C=l.getY(),E=c.getX(),D=c.getY(),U=f.getX(),H=f.getY(),Z=Fe.CORR;return h<this.width/2?[new ye(U-Z,H+Z),new ye(y+Z,C+Z),new ye(E-Z,D-Z),new ye(h+Z,x-Z)]:[new ye(U+Z,H+Z),new ye(y+Z,C-Z),new ye(E-Z,D+Z),new ye(h-Z,x-Z)]}containsBlackPoint(i,l,c,f){const h=this.image;if(f){for(let x=i;x<=l;x++)if(h.get(x,c))return!0}else for(let x=i;x<=l;x++)if(h.get(c,x))return!0;return!1}}Fe.INIT_SIZE=10,Fe.CORR=1;class rt{static checkAndNudgePoints(i,l){const c=i.getWidth(),f=i.getHeight();let h=!0;for(let x=0;x<l.length&&h;x+=2){const y=Math.floor(l[x]),C=Math.floor(l[x+1]);if(y<-1||y>c||C<-1||C>f)throw new ae;h=!1,y===-1?(l[x]=0,h=!0):y===c&&(l[x]=c-1,h=!0),C===-1?(l[x+1]=0,h=!0):C===f&&(l[x+1]=f-1,h=!0)}h=!0;for(let x=l.length-2;x>=0&&h;x-=2){const y=Math.floor(l[x]),C=Math.floor(l[x+1]);if(y<-1||y>c||C<-1||C>f)throw new ae;h=!1,y===-1?(l[x]=0,h=!0):y===c&&(l[x]=c-1,h=!0),C===-1?(l[x+1]=0,h=!0):C===f&&(l[x+1]=f-1,h=!0)}}}class Pt{constructor(i,l,c,f,h,x,y,C,E){this.a11=i,this.a21=l,this.a31=c,this.a12=f,this.a22=h,this.a32=x,this.a13=y,this.a23=C,this.a33=E}static quadrilateralToQuadrilateral(i,l,c,f,h,x,y,C,E,D,U,H,Z,z,$,X){const re=Pt.quadrilateralToSquare(i,l,c,f,h,x,y,C);return Pt.squareToQuadrilateral(E,D,U,H,Z,z,$,X).times(re)}transformPoints(i){const l=i.length,c=this.a11,f=this.a12,h=this.a13,x=this.a21,y=this.a22,C=this.a23,E=this.a31,D=this.a32,U=this.a33;for(let H=0;H<l;H+=2){const Z=i[H],z=i[H+1],$=h*Z+C*z+U;i[H]=(c*Z+x*z+E)/$,i[H+1]=(f*Z+y*z+D)/$}}transformPointsWithValues(i,l){const c=this.a11,f=this.a12,h=this.a13,x=this.a21,y=this.a22,C=this.a23,E=this.a31,D=this.a32,U=this.a33,H=i.length;for(let Z=0;Z<H;Z++){const z=i[Z],$=l[Z],X=h*z+C*$+U;i[Z]=(c*z+x*$+E)/X,l[Z]=(f*z+y*$+D)/X}}static squareToQuadrilateral(i,l,c,f,h,x,y,C){const E=i-c+h-y,D=l-f+x-C;if(E===0&&D===0)return new Pt(c-i,h-c,i,f-l,x-f,l,0,0,1);{const U=c-h,H=y-h,Z=f-x,z=C-x,$=U*z-H*Z,X=(E*z-H*D)/$,re=(U*D-E*Z)/$;return new Pt(c-i+X*c,y-i+re*y,i,f-l+X*f,C-l+re*C,l,X,re,1)}}static quadrilateralToSquare(i,l,c,f,h,x,y,C){return Pt.squareToQuadrilateral(i,l,c,f,h,x,y,C).buildAdjoint()}buildAdjoint(){return new Pt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Pt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class un extends rt{sampleGrid(i,l,c,f,h,x,y,C,E,D,U,H,Z,z,$,X,re,xe,we){const Ce=Pt.quadrilateralToQuadrilateral(f,h,x,y,C,E,D,U,H,Z,z,$,X,re,xe,we);return this.sampleGridWithTransform(i,l,c,Ce)}sampleGridWithTransform(i,l,c,f){if(l<=0||c<=0)throw new ae;const h=new Ne(l,c),x=new Float32Array(2*l);for(let y=0;y<c;y++){const C=x.length,E=y+.5;for(let D=0;D<C;D+=2)x[D]=D/2+.5,x[D+1]=E;f.transformPoints(x),rt.checkAndNudgePoints(i,x);try{for(let D=0;D<C;D+=2)i.get(Math.floor(x[D]),Math.floor(x[D+1]))&&h.set(D/2,y)}catch{throw new ae}}return h}}class en{static setGridSampler(i){en.gridSampler=i}static getInstance(){return en.gridSampler}}en.gridSampler=new un;class gn{constructor(i,l){this.x=i,this.y=l}toResultPoint(){return new ye(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class os{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let l=this.getMatrixCenter(),c=this.getBullsEyeCorners(l);if(i){let x=c[0];c[0]=c[2],c[2]=x}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),h=this.getMatrixCornerPoints(c);return new pn(f,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ae;let l=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(i[0],i[1],l),this.sampleLine(i[1],i[2],l),this.sampleLine(i[2],i[3],l),this.sampleLine(i[3],i[0],l)]);this.shift=this.getRotation(c,l);let f=0;for(let x=0;x<4;x++){let y=c[(this.shift+x)%4];this.compact?(f<<=7,f+=y>>1&127):(f<<=10,f+=(y>>2&992)+(y>>1&31))}let h=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(i,l){let c=0;i.forEach((f,h,x)=>{let y=(f>>l-2<<1)+(f&1);c=(c<<3)+y}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(M.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new ae}getCorrectedParameterData(i,l){let c,f;l?(c=7,f=2):(c=10,f=4);let h=c-f,x=new Int32Array(c);for(let C=c-1;C>=0;--C)x[C]=i&15,i>>=4;try{new ve(_e.AZTEC_PARAM).decode(x,h)}catch{throw new ae}let y=0;for(let C=0;C<f;C++)y=(y<<4)+x[C];return y}getBullsEyeCorners(i){let l=i,c=i,f=i,h=i,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let U=this.getFirstDifferent(l,x,1,-1),H=this.getFirstDifferent(c,x,1,1),Z=this.getFirstDifferent(f,x,-1,1),z=this.getFirstDifferent(h,x,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(z,U)*this.nbCenterLayers/(this.distancePoint(h,l)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(U,H,Z,z))break}l=U,c=H,f=Z,h=z,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let y=new ye(l.getX()+.5,l.getY()-.5),C=new ye(c.getX()+.5,c.getY()+.5),E=new ye(f.getX()-.5,f.getY()+.5),D=new ye(h.getX()-.5,h.getY()-.5);return this.expandSquare([y,C,E,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,l,c,f;try{let y=new Fe(this.image).detect();i=y[0],l=y[1],c=y[2],f=y[3]}catch{let C=this.image.getWidth()/2,E=this.image.getHeight()/2;i=this.getFirstDifferent(new gn(C+7,E-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new gn(C+7,E+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new gn(C-7,E+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new gn(C-7,E-7),!1,-1,-1).toResultPoint()}let h=oe.round((i.getX()+f.getX()+l.getX()+c.getX())/4),x=oe.round((i.getY()+f.getY()+l.getY()+c.getY())/4);try{let y=new Fe(this.image,15,h,x).detect();i=y[0],l=y[1],c=y[2],f=y[3]}catch{i=this.getFirstDifferent(new gn(h+7,x-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new gn(h+7,x+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new gn(h-7,x+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new gn(h-7,x-7),!1,-1,-1).toResultPoint()}return h=oe.round((i.getX()+f.getX()+l.getX()+c.getX())/4),x=oe.round((i.getY()+f.getY()+l.getY()+c.getY())/4),new gn(h,x)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,l,c,f,h){let x=en.getInstance(),y=this.getDimension(),C=y/2-this.nbCenterLayers,E=y/2+this.nbCenterLayers;return x.sampleGrid(i,y,y,C,C,E,C,E,E,C,E,l.getX(),l.getY(),c.getX(),c.getY(),f.getX(),f.getY(),h.getX(),h.getY())}sampleLine(i,l,c){let f=0,h=this.distanceResultPoint(i,l),x=h/c,y=i.getX(),C=i.getY(),E=x*(l.getX()-i.getX())/h,D=x*(l.getY()-i.getY())/h;for(let U=0;U<c;U++)this.image.get(oe.round(y+U*E),oe.round(C+U*D))&&(f|=1<<c-U-1);return f}isWhiteOrBlackRectangle(i,l,c,f){let h=3;i=new gn(i.getX()-h,i.getY()+h),l=new gn(l.getX()-h,l.getY()-h),c=new gn(c.getX()+h,c.getY()-h),f=new gn(f.getX()+h,f.getY()+h);let x=this.getColor(f,i);if(x===0)return!1;let y=this.getColor(i,l);return y!==x||(y=this.getColor(l,c),y!==x)?!1:(y=this.getColor(c,f),y===x)}getColor(i,l){let c=this.distancePoint(i,l),f=(l.getX()-i.getX())/c,h=(l.getY()-i.getY())/c,x=0,y=i.getX(),C=i.getY(),E=this.image.get(i.getX(),i.getY()),D=Math.ceil(c);for(let H=0;H<D;H++)y+=f,C+=h,this.image.get(oe.round(y),oe.round(C))!==E&&x++;let U=x/c;return U>.1&&U<.9?0:U<=.1===E?1:-1}getFirstDifferent(i,l,c,f){let h=i.getX()+c,x=i.getY()+f;for(;this.isValid(h,x)&&this.image.get(h,x)===l;)h+=c,x+=f;for(h-=c,x-=f;this.isValid(h,x)&&this.image.get(h,x)===l;)h+=c;for(h-=c;this.isValid(h,x)&&this.image.get(h,x)===l;)x+=f;return x-=f,new gn(h,x)}expandSquare(i,l,c){let f=c/(2*l),h=i[0].getX()-i[2].getX(),x=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,C=(i[0].getY()+i[2].getY())/2,E=new ye(y+f*h,C+f*x),D=new ye(y-f*h,C-f*x);h=i[1].getX()-i[3].getX(),x=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,C=(i[1].getY()+i[3].getY())/2;let U=new ye(y+f*h,C+f*x),H=new ye(y-f*h,C-f*x);return[E,U,D,H]}isValid(i,l){return i>=0&&i<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(i){let l=oe.round(i.getX()),c=oe.round(i.getY());return this.isValid(l,c)}distancePoint(i,l){return oe.distance(i.getX(),i.getY(),l.getX(),l.getY())}distanceResultPoint(i,l){return oe.distance(i.getX(),i.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(M.truncDivision(this.nbLayers-4,8)+1)+15}}class As{decode(i,l=null){let c=null,f=new os(i.getBlackMatrix()),h=null,x=null;try{let D=f.detectMirror(!1);h=D.getPoints(),this.reportFoundResultPoints(l,h),x=new qe().decode(D)}catch(D){c=D}if(x==null)try{let D=f.detectMirror(!0);h=D.getPoints(),this.reportFoundResultPoints(l,h),x=new qe().decode(D)}catch(D){throw c??D}let y=new $e(x.getText(),x.getRawBytes(),x.getNumBits(),h,De.AZTEC,R.currentTimeMillis()),C=x.getByteSegments();C!=null&&y.putMetadata(at.BYTE_SEGMENTS,C);let E=x.getECLevel();return E!=null&&y.putMetadata(at.ERROR_CORRECTION_LEVEL,E),y}reportFoundResultPoints(i,l){if(i!=null){let c=i.get(P.NEED_RESULT_POINT_CALLBACK);c!=null&&l.forEach((f,h,x)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class qa extends Te{constructor(i=500){super(new As,i)}}class ln{decode(i,l){try{return this.doDecode(i,l)}catch{if(l&&l.get(P.TRY_HARDER)===!0&&i.isRotateSupported()){const h=i.rotateCounterClockwise(),x=this.doDecode(h,l),y=x.getResultMetadata();let C=270;y!==null&&y.get(at.ORIENTATION)===!0&&(C=C+y.get(at.ORIENTATION)%360),x.putMetadata(at.ORIENTATION,C);const E=x.getResultPoints();if(E!==null){const D=h.getHeight();for(let U=0;U<E.length;U++)E[U]=new ye(D-E[U].getY()-1,E[U].getX())}return x}else throw new ae}}reset(){}doDecode(i,l){const c=i.getWidth(),f=i.getHeight();let h=new B(c);const x=l&&l.get(P.TRY_HARDER)===!0,y=Math.max(1,f>>(x?8:5));let C;x?C=f:C=15;const E=Math.trunc(f/2);for(let D=0;D<C;D++){const U=Math.trunc((D+1)/2),H=(D&1)===0,Z=E+y*(H?U:-U);if(Z<0||Z>=f)break;try{h=i.getBlackRow(Z,h)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(h.reverse(),l&&l.get(P.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;l.forEach((X,re)=>$.set(re,X)),$.delete(P.NEED_RESULT_POINT_CALLBACK),l=$}try{const $=this.decodeRow(Z,h,l);if(z===1){$.putMetadata(at.ORIENTATION,180);const X=$.getResultPoints();X!==null&&(X[0]=new ye(c-X[0].getX()-1,X[0].getY()),X[1]=new ye(c-X[1].getX()-1,X[1].getY()))}return $}catch{}}}throw new ae}static recordPattern(i,l,c){const f=c.length;for(let E=0;E<f;E++)c[E]=0;const h=i.getSize();if(l>=h)throw new ae;let x=!i.get(l),y=0,C=l;for(;C<h;){if(i.get(C)!==x)c[y]++;else{if(++y===f)break;c[y]=1,x=!x}C++}if(!(y===f||y===f-1&&C===h))throw new ae}static recordPatternInReverse(i,l,c){let f=c.length,h=i.get(l);for(;l>0&&f>=0;)i.get(--l)!==h&&(f--,h=!h);if(f>=0)throw new ae;ln.recordPattern(i,l+1,c)}static patternMatchVariance(i,l,c){const f=i.length;let h=0,x=0;for(let E=0;E<f;E++)h+=i[E],x+=l[E];if(h<x)return Number.POSITIVE_INFINITY;const y=h/x;c*=y;let C=0;for(let E=0;E<f;E++){const D=i[E],U=l[E]*y,H=D>U?D-U:U-D;if(H>c)return Number.POSITIVE_INFINITY;C+=H}return C/h}}class Pe extends ln{static findStartPattern(i){const l=i.getSize(),c=i.getNextSet(0);let f=0,h=Int32Array.from([0,0,0,0,0,0]),x=c,y=!1;const C=6;for(let E=c;E<l;E++)if(i.get(E)!==y)h[f]++;else{if(f===C-1){let D=Pe.MAX_AVG_VARIANCE,U=-1;for(let H=Pe.CODE_START_A;H<=Pe.CODE_START_C;H++){const Z=ln.patternMatchVariance(h,Pe.CODE_PATTERNS[H],Pe.MAX_INDIVIDUAL_VARIANCE);Z<D&&(D=Z,U=H)}if(U>=0&&i.isRange(Math.max(0,x-(E-x)/2),x,!1))return Int32Array.from([x,E,U]);x+=h[0]+h[1],h=h.slice(2,h.length-1),h[f-1]=0,h[f]=0,f--}else f++;h[f]=1,y=!y}throw new ae}static decodeCode(i,l,c){ln.recordPattern(i,c,l);let f=Pe.MAX_AVG_VARIANCE,h=-1;for(let x=0;x<Pe.CODE_PATTERNS.length;x++){const y=Pe.CODE_PATTERNS[x],C=this.patternMatchVariance(l,y,Pe.MAX_INDIVIDUAL_VARIANCE);C<f&&(f=C,h=x)}if(h>=0)return h;throw new ae}decodeRow(i,l,c){const f=c&&c.get(P.ASSUME_GS1)===!0,h=Pe.findStartPattern(l),x=h[2];let y=0;const C=new Uint8Array(20);C[y++]=x;let E;switch(x){case Pe.CODE_START_A:E=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:E=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:E=Pe.CODE_CODE_C;break;default:throw new O}let D=!1,U=!1,H="",Z=h[0],z=h[1];const $=Int32Array.from([0,0,0,0,0,0]);let X=0,re=0,xe=x,we=0,Ce=!0,Ze=!1,xt=!1;for(;!D;){const It=U;switch(U=!1,X=re,re=Pe.decodeCode(l,$,z),C[y++]=re,re!==Pe.CODE_STOP&&(Ce=!0),re!==Pe.CODE_STOP&&(we++,xe+=we*re),Z=z,z+=$.reduce((Dp,Kd)=>Dp+Kd,0),re){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new O}switch(E){case Pe.CODE_CODE_A:if(re<64)xt===Ze?H+=String.fromCharCode(" ".charCodeAt(0)+re):H+=String.fromCharCode(" ".charCodeAt(0)+re+128),xt=!1;else if(re<96)xt===Ze?H+=String.fromCharCode(re-64):H+=String.fromCharCode(re+64),xt=!1;else switch(re!==Pe.CODE_STOP&&(Ce=!1),re){case Pe.CODE_FNC_1:f&&(H.length===0?H+="]C1":H+=String.fromCharCode(29));break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!Ze&&xt?(Ze=!0,xt=!1):Ze&&xt?(Ze=!1,xt=!1):xt=!0;break;case Pe.CODE_SHIFT:U=!0,E=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:E=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:E=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:D=!0;break}break;case Pe.CODE_CODE_B:if(re<96)xt===Ze?H+=String.fromCharCode(" ".charCodeAt(0)+re):H+=String.fromCharCode(" ".charCodeAt(0)+re+128),xt=!1;else switch(re!==Pe.CODE_STOP&&(Ce=!1),re){case Pe.CODE_FNC_1:f&&(H.length===0?H+="]C1":H+=String.fromCharCode(29));break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!Ze&&xt?(Ze=!0,xt=!1):Ze&&xt?(Ze=!1,xt=!1):xt=!0;break;case Pe.CODE_SHIFT:U=!0,E=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:E=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:E=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:D=!0;break}break;case Pe.CODE_CODE_C:if(re<100)re<10&&(H+="0"),H+=re;else switch(re!==Pe.CODE_STOP&&(Ce=!1),re){case Pe.CODE_FNC_1:f&&(H.length===0?H+="]C1":H+=String.fromCharCode(29));break;case Pe.CODE_CODE_A:E=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:E=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:D=!0;break}break}It&&(E=E===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const _r=z-Z;if(z=l.getNextUnset(z),!l.isRange(z,Math.min(l.getSize(),z+(z-Z)/2),!1))throw new ae;if(xe-=we*X,xe%103!==X)throw new j;const En=H.length;if(En===0)throw new ae;En>0&&Ce&&(E===Pe.CODE_CODE_C?H=H.substring(0,En-2):H=H.substring(0,En-1));const sr=(h[1]+h[0])/2,sn=Z+_r/2,Sn=C.length,dr=new Uint8Array(Sn);for(let It=0;It<Sn;It++)dr[It]=C[It];const ea=[new ye(sr,i),new ye(sn,i)];return new $e(H,dr,0,ea,De.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class dn extends ln{constructor(i=!1,l=!1){super(),this.usingCheckDigit=i,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,l,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let h=dn.findAsteriskPattern(l,f),x=l.getNextSet(h[1]),y=l.getSize(),C,E;do{dn.recordPattern(l,x,f);let $=dn.toNarrowWidePattern(f);if($<0)throw new ae;C=dn.patternToChar($),this.decodeRowResult+=C,E=x;for(let X of f)x+=X;x=l.getNextSet(x)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let $ of f)D+=$;let U=x-E-D;if(x!==y&&U*2<D)throw new ae;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,X=0;for(let re=0;re<$;re++)X+=dn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(re));if(this.decodeRowResult.charAt($)!==dn.ALPHABET_STRING.charAt(X%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new ae;let H;this.extendedMode?H=dn.decodeExtended(this.decodeRowResult):H=this.decodeRowResult;let Z=(h[1]+h[0])/2,z=E+D/2;return new $e(H,null,0,[new ye(Z,i),new ye(z,i)],De.CODE_39,new Date().getTime())}static findAsteriskPattern(i,l){let c=i.getSize(),f=i.getNextSet(0),h=0,x=f,y=!1,C=l.length;for(let E=f;E<c;E++)if(i.get(E)!==y)l[h]++;else{if(h===C-1){if(this.toNarrowWidePattern(l)===dn.ASTERISK_ENCODING&&i.isRange(Math.max(0,x-Math.floor((E-x)/2)),x,!1))return[x,E];x+=l[0]+l[1],l.copyWithin(0,2,2+h-1),l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,y=!y}throw new ae}static toNarrowWidePattern(i){let l=i.length,c=0,f;do{let h=2147483647;for(let C of i)C<h&&C>c&&(h=C);c=h,f=0;let x=0,y=0;for(let C=0;C<l;C++){let E=i[C];E>c&&(y|=1<<l-1-C,f++,x+=E)}if(f===3){for(let C=0;C<l&&f>0;C++){let E=i[C];if(E>c&&(f--,E*2>=x))return-1}return y}}while(f>3);return-1}static patternToChar(i){for(let l=0;l<dn.CHARACTER_ENCODINGS.length;l++)if(dn.CHARACTER_ENCODINGS[l]===i)return dn.ALPHABET_STRING.charAt(l);if(i===dn.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(i){let l=i.length,c="";for(let f=0;f<l;f++){let h=i.charAt(f);if(h==="+"||h==="$"||h==="%"||h==="/"){let x=i.charAt(f+1),y="\0";switch(h){case"+":if(x>="A"&&x<="Z")y=String.fromCharCode(x.charCodeAt(0)+32);else throw new O;break;case"$":if(x>="A"&&x<="Z")y=String.fromCharCode(x.charCodeAt(0)-64);else throw new O;break;case"%":if(x>="A"&&x<="E")y=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")y=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")y=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")y=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")y="\0";else if(x==="V")y="@";else if(x==="W")y="`";else if(x==="X"||x==="Y"||x==="Z")y="";else throw new O;break;case"/":if(x>="A"&&x<="O")y=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")y=":";else throw new O;break}c+=y,f++}else c+=h}return c}}dn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",dn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],dn.ASTERISK_ENCODING=148;class Mt extends ln{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,l,c){let f=this.decodeStart(l),h=this.decodeEnd(l),x=new te;Mt.decodeMiddle(l,f[1],h[0],x);let y=x.toString(),C=null;c!=null&&(C=c.get(P.ALLOWED_LENGTHS)),C==null&&(C=Mt.DEFAULT_ALLOWED_LENGTHS);let E=y.length,D=!1,U=0;for(let z of C){if(E===z){D=!0;break}z>U&&(U=z)}if(!D&&E>U&&(D=!0),!D)throw new O;const H=[new ye(f[1],i),new ye(h[0],i)];return new $e(y,null,0,H,De.ITF,new Date().getTime())}static decodeMiddle(i,l,c,f){let h=new Int32Array(10),x=new Int32Array(5),y=new Int32Array(5);for(h.fill(0),x.fill(0),y.fill(0);l<c;){ln.recordPattern(i,l,h);for(let E=0;E<5;E++){let D=2*E;x[E]=h[D],y[E]=h[D+1]}let C=Mt.decodeDigit(x);f.append(C.toString()),C=this.decodeDigit(y),f.append(C.toString()),h.forEach(function(E){l+=E})}}decodeStart(i){let l=Mt.skipWhiteSpace(i),c=Mt.findGuardPattern(i,l,Mt.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(i,c[0]),c}validateQuietZone(i,l){let c=this.narrowLineWidth*10;c=c<l?c:l;for(let f=l-1;c>0&&f>=0&&!i.get(f);f--)c--;if(c!==0)throw new ae}static skipWhiteSpace(i){const l=i.getSize(),c=i.getNextSet(0);if(c===l)throw new ae;return c}decodeEnd(i){i.reverse();try{let l=Mt.skipWhiteSpace(i),c;try{c=Mt.findGuardPattern(i,l,Mt.END_PATTERN_REVERSED[0])}catch(h){h instanceof ae&&(c=Mt.findGuardPattern(i,l,Mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,c[0]);let f=c[0];return c[0]=i.getSize()-c[1],c[1]=i.getSize()-f,c}finally{i.reverse()}}static findGuardPattern(i,l,c){let f=c.length,h=new Int32Array(f),x=i.getSize(),y=!1,C=0,E=l;h.fill(0);for(let D=l;D<x;D++)if(i.get(D)!==y)h[C]++;else{if(C===f-1){if(ln.patternMatchVariance(h,c,Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return[E,D];E+=h[0]+h[1],R.arraycopy(h,2,h,0,C-1),h[C-1]=0,h[C]=0,C--}else C++;h[C]=1,y=!y}throw new ae}static decodeDigit(i){let l=Mt.MAX_AVG_VARIANCE,c=-1,f=Mt.PATTERNS.length;for(let h=0;h<f;h++){let x=Mt.PATTERNS[h],y=ln.patternMatchVariance(i,x,Mt.MAX_INDIVIDUAL_VARIANCE);y<l?(l=y,c=h):y===l&&(c=-1)}if(c>=0)return c%10;throw new ae}}Mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Mt.MAX_AVG_VARIANCE=.38,Mt.MAX_INDIVIDUAL_VARIANCE=.5,Mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Mt.START_PATTERN=Int32Array.from([1,1,1,1]),Mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Xt extends ln{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let l=!1,c,f=0,h=Int32Array.from([0,0,0]);for(;!l;){h=Int32Array.from([0,0,0]),c=Xt.findGuardPattern(i,f,!1,this.START_END_PATTERN,h);let x=c[0];f=c[1];let y=x-(f-x);y>=0&&(l=i.isRange(y,x,!1))}return c}static checkChecksum(i){return Xt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let c=parseInt(i.charAt(l-1),10);return Xt.getStandardUPCEANChecksum(i.substring(0,l-1))===c}static getStandardUPCEANChecksum(i){let l=i.length,c=0;for(let f=l-1;f>=0;f-=2){let h=i.charAt(f).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new O;c+=h}c*=3;for(let f=l-2;f>=0;f-=2){let h=i.charAt(f).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new O;c+=h}return(1e3-c)%10}static decodeEnd(i,l){return Xt.findGuardPattern(i,l,!1,Xt.START_END_PATTERN,new Int32Array(Xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,l,c,f){return this.findGuardPattern(i,l,c,f,new Int32Array(f.length))}static findGuardPattern(i,l,c,f,h){let x=i.getSize();l=c?i.getNextUnset(l):i.getNextSet(l);let y=0,C=l,E=f.length,D=c;for(let U=l;U<x;U++)if(i.get(U)!==D)h[y]++;else{if(y===E-1){if(ln.patternMatchVariance(h,f,Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return Int32Array.from([C,U]);C+=h[0]+h[1];let H=h.slice(2,h.length-1);for(let Z=0;Z<y-1;Z++)h[Z]=H[Z];h[y-1]=0,h[y]=0,y--}else y++;h[y]=1,D=!D}throw new ae}static decodeDigit(i,l,c,f){this.recordPattern(i,c,l);let h=this.MAX_AVG_VARIANCE,x=-1,y=f.length;for(let C=0;C<y;C++){let E=f[C],D=ln.patternMatchVariance(l,E,Xt.MAX_INDIVIDUAL_VARIANCE);D<h&&(h=D,x=C)}if(x>=0)return x;throw new ae}}Xt.MAX_AVG_VARIANCE=.48,Xt.MAX_INDIVIDUAL_VARIANCE=.7,Xt.START_END_PATTERN=Int32Array.from([1,1,1]),Xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ks{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,c){let f=this.decodeRowStringBuffer,h=this.decodeMiddle(l,c,f),x=f.toString(),y=Ks.parseExtensionString(x),C=[new ye((c[0]+c[1])/2,i),new ye(h,i)],E=new $e(x,null,0,C,De.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(i,l,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=i.getSize(),x=l[1],y=0;for(let E=0;E<5&&x<h;E++){let D=Xt.decodeDigit(i,f,x,Xt.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D%10);for(let U of f)x+=U;D>=10&&(y|=1<<4-E),E!==4&&(x=i.getNextSet(x),x=i.getNextUnset(x))}if(c.length!==5)throw new ae;let C=this.determineCheckDigit(y);if(Ks.extensionChecksum(c.toString())!==C)throw new ae;return x}static extensionChecksum(i){let l=i.length,c=0;for(let f=l-2;f>=0;f-=2)c+=i.charAt(f).charCodeAt(0)-"0".charCodeAt(0);c*=3;for(let f=l-1;f>=0;f-=2)c+=i.charAt(f).charCodeAt(0)-"0".charCodeAt(0);return c*=3,c%10}determineCheckDigit(i){for(let l=0;l<10;l++)if(i===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new ae}static parseExtensionString(i){if(i.length!==5)return null;let l=Ks.parseExtension5String(i);return l==null?null:new Map([[at.SUGGESTED_PRICE,l]])}static parseExtension5String(i){let l;switch(i.charAt(0)){case"0":l="£";break;case"5":l="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let c=parseInt(i.substring(1)),f=(c/100).toString(),h=c%100,x=h<10?"0"+h:h.toString();return l+f+"."+x}}class No{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,c){let f=this.decodeRowStringBuffer,h=this.decodeMiddle(l,c,f),x=f.toString(),y=No.parseExtensionString(x),C=[new ye((c[0]+c[1])/2,i),new ye(h,i)],E=new $e(x,null,0,C,De.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(i,l,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=i.getSize(),x=l[1],y=0;for(let C=0;C<2&&x<h;C++){let E=Xt.decodeDigit(i,f,x,Xt.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+E%10);for(let D of f)x+=D;E>=10&&(y|=1<<1-C),C!==1&&(x=i.getNextSet(x),x=i.getNextUnset(x))}if(c.length!==2)throw new ae;if(parseInt(c.toString())%4!==y)throw new ae;return x}static parseExtensionString(i){return i.length!==2?null:new Map([[at.ISSUE_NUMBER,parseInt(i)]])}}class Md{static decodeRow(i,l,c){let f=Xt.findGuardPattern(l,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ks().decodeRow(i,l,f)}catch{return new No().decodeRow(i,l,f)}}}Md.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ft extends Xt{constructor(){super(),this.decodeRowStringBuffer="",Ft.L_AND_G_PATTERNS=Ft.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let l=Ft.L_PATTERNS[i-10],c=new Int32Array(l.length);for(let f=0;f<l.length;f++)c[f]=l[l.length-f-1];Ft.L_AND_G_PATTERNS[i]=c}}decodeRow(i,l,c){let f=Ft.findStartGuardPattern(l),h=c==null?null:c.get(P.NEED_RESULT_POINT_CALLBACK);if(h!=null){const Ce=new ye((f[0]+f[1])/2,i);h.foundPossibleResultPoint(Ce)}let x=this.decodeMiddle(l,f,this.decodeRowStringBuffer),y=x.rowOffset,C=x.resultString;if(h!=null){const Ce=new ye(y,i);h.foundPossibleResultPoint(Ce)}let E=this.decodeEnd(l,y);if(h!=null){const Ce=new ye((E[0]+E[1])/2,i);h.foundPossibleResultPoint(Ce)}let D=E[1],U=D+(D-E[0]);if(U>=l.getSize()||!l.isRange(D,U,!1))throw new ae;let H=C.toString();if(H.length<8)throw new O;if(!Ft.checkChecksum(H))throw new j;let Z=(f[1]+f[0])/2,z=(E[1]+E[0])/2,$=this.getBarcodeFormat(),X=[new ye(Z,i),new ye(z,i)],re=new $e(H,null,0,X,$,new Date().getTime()),xe=0;try{let Ce=Md.decodeRow(i,l,E[1]);re.putMetadata(at.UPC_EAN_EXTENSION,Ce.getText()),re.putAllMetadata(Ce.getResultMetadata()),re.addResultPoints(Ce.getResultPoints()),xe=Ce.getText().length}catch{}let we=c==null?null:c.get(P.ALLOWED_EAN_EXTENSIONS);if(we!=null){let Ce=!1;for(let Ze in we)if(xe.toString()===Ze){Ce=!0;break}if(!Ce)throw new ae}return re}decodeEnd(i,l){return Ft.findGuardPattern(i,l,!1,Ft.START_END_PATTERN,new Int32Array(Ft.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Ft.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let c=parseInt(i.charAt(l-1),10);return Ft.getStandardUPCEANChecksum(i.substring(0,l-1))===c}static getStandardUPCEANChecksum(i){let l=i.length,c=0;for(let f=l-1;f>=0;f-=2){let h=i.charAt(f).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new O;c+=h}c*=3;for(let f=l-2;f>=0;f-=2){let h=i.charAt(f).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new O;c+=h}return(1e3-c)%10}}class ga extends Ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=i.getSize(),x=l[1],y=0;for(let E=0;E<6&&x<h;E++){let D=Ft.decodeDigit(i,f,x,Ft.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D%10);for(let U of f)x+=U;D>=10&&(y|=1<<5-E)}c=ga.determineFirstDigit(c,y),x=Ft.findGuardPattern(i,x,!0,Ft.MIDDLE_PATTERN,new Int32Array(Ft.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&x<h;E++){let D=Ft.decodeDigit(i,f,x,Ft.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D);for(let U of f)x+=U}return{rowOffset:x,resultString:c}}getBarcodeFormat(){return De.EAN_13}static determineFirstDigit(i,l){for(let c=0;c<10;c++)if(l===this.FIRST_DIGIT_ENCODINGS[c])return i=String.fromCharCode("0".charCodeAt(0)+c)+i,i;throw new ae}}ga.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Od extends Ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=i.getSize(),x=l[1];for(let C=0;C<4&&x<h;C++){let E=Ft.decodeDigit(i,f,x,Ft.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+E);for(let D of f)x+=D}x=Ft.findGuardPattern(i,x,!0,Ft.MIDDLE_PATTERN,new Int32Array(Ft.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&x<h;C++){let E=Ft.decodeDigit(i,f,x,Ft.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+E);for(let D of f)x+=D}return{rowOffset:x,resultString:c}}getBarcodeFormat(){return De.EAN_8}}class Ld extends Ft{constructor(){super(...arguments),this.ean13Reader=new ga}getBarcodeFormat(){return De.UPC_A}decode(i,l){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,l,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,l,c))}decodeMiddle(i,l,c){return this.ean13Reader.decodeMiddle(i,l,c)}maybeReturnResult(i){let l=i.getText();if(l.charAt(0)==="0"){let c=new $e(l.substring(1),null,null,i.getResultPoints(),De.UPC_A);return i.getResultMetadata()!=null&&c.putAllMetadata(i.getResultMetadata()),c}else throw new ae}reset(){this.ean13Reader.reset()}}class ls extends Ft{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,l,c){const f=this.decodeMiddleCounters.map(E=>E);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const h=i.getSize();let x=l[1],y=0;for(let E=0;E<6&&x<h;E++){const D=ls.decodeDigit(i,f,x,ls.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D%10);for(let U of f)x+=U;D>=10&&(y|=1<<5-E)}let C=ls.determineNumSysAndCheckDigit(c,y);return{rowOffset:x,resultString:C}}decodeEnd(i,l){return ls.findGuardPatternWithoutCounters(i,l,!0,ls.MIDDLE_END_PATTERN)}checkChecksum(i){return Ft.checkChecksum(ls.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,l){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let h=String.fromCharCode("0".charCodeAt(0)+c),x=String.fromCharCode("0".charCodeAt(0)+f);return h+i+x}throw ae.getNotFoundInstance()}getBarcodeFormat(){return De.UPC_E}static convertUPCEtoUPCA(i){const l=i.slice(1,7).split("").map(h=>h.charCodeAt(0)),c=new te;c.append(i.charAt(0));let f=l[5];switch(f){case 0:case 1:case 2:c.appendChars(l,0,2),c.append(f),c.append("0000"),c.appendChars(l,2,3);break;case 3:c.appendChars(l,0,3),c.append("00000"),c.appendChars(l,3,2);break;case 4:c.appendChars(l,0,4),c.append("00000"),c.append(l[4]);break;default:c.appendChars(l,0,5),c.append("0000"),c.append(f);break}return i.length>=8&&c.append(i.charAt(7)),c.toString()}}ls.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ls.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Uc extends ln{constructor(i){super();let l=i==null?null:i.get(P.POSSIBLE_FORMATS),c=[];r(l)?(c.push(new ga),c.push(new Ld),c.push(new Od),c.push(new ls)):(l.indexOf(De.EAN_13)>-1&&c.push(new ga),l.indexOf(De.UPC_A)>-1&&c.push(new Ld),l.indexOf(De.EAN_8)>-1&&c.push(new Od),l.indexOf(De.UPC_E)>-1&&c.push(new ls)),this.readers=c}decodeRow(i,l,c){for(let f of this.readers)try{const h=f.decodeRow(i,l,c),x=h.getBarcodeFormat()===De.EAN_13&&h.getText().charAt(0)==="0",y=c==null?null:c.get(P.POSSIBLE_FORMATS),C=y==null||y.includes(De.UPC_A);if(x&&C){const E=h.getRawBytes(),D=new $e(h.getText().substring(1),E,E?E.length:null,h.getResultPoints(),De.UPC_A);return D.putAllMetadata(h.getResultMetadata()),D}return h}catch{}throw new ae}reset(){for(let i of this.readers)i.reset()}}class tr extends ln{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,l){for(let c=0;c<l.length;c++)if(ln.patternMatchVariance(i,l[c],tr.MAX_INDIVIDUAL_VARIANCE)<tr.MAX_AVG_VARIANCE)return c;throw new ae}static count(i){return oe.sum(new Int32Array(i))}static increment(i,l){let c=0,f=l[0];for(let h=1;h<i.length;h++)l[h]>f&&(f=l[h],c=h);i[c]++}static decrement(i,l){let c=0,f=l[0];for(let h=1;h<i.length;h++)l[h]<f&&(f=l[h],c=h);i[c]--}static isFinderPattern(i){let l=i[0]+i[1],c=l+i[2]+i[3],f=l/c;if(f>=tr.MIN_FINDER_PATTERN_RATIO&&f<=tr.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let y of i)y>x&&(x=y),y<h&&(h=y);return x<10*h}return!1}}tr.MAX_AVG_VARIANCE=.2,tr.MAX_INDIVIDUAL_VARIANCE=.45,tr.MIN_FINDER_PATTERN_RATIO=9.5/12,tr.MAX_FINDER_PATTERN_RATIO=12.5/14;class _i{constructor(i,l){this.value=i,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof _i))return!1;const l=i;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class wl{constructor(i,l,c,f,h){this.value=i,this.startEnd=l,this.value=i,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new ye(c,h)),this.resultPoints.push(new ye(f,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof wl))return!1;const l=i;return this.value===l.value}hashCode(){return this.value}}class ks{constructor(){}static getRSSvalue(i,l,c){let f=0;for(let C of i)f+=C;let h=0,x=0,y=i.length;for(let C=0;C<y-1;C++){let E;for(E=1,x|=1<<C;E<i[C];E++,x&=~(1<<C)){let D=ks.combins(f-E-1,y-C-2);if(c&&x===0&&f-E-(y-C-1)>=y-C-1&&(D-=ks.combins(f-E-(y-C),y-C-2)),y-C-1>1){let U=0;for(let H=f-E-(y-C-2);H>l;H--)U+=ks.combins(f-E-H-1,y-C-3);D-=U*(y-1-C)}else f-E>l&&D--;h+=D}f-=E}return h}static combins(i,l){let c,f;i-l>l?(f=l,c=i-l):(f=i-l,c=l);let h=1,x=1;for(let y=i;y>c;y--)h*=y,x<=f&&(h/=x,x++);for(;x<=f;)h/=x,x++;return h}}class qc{static buildBitArray(i){let l=i.length*2-1;i[i.length-1].getRightChar()==null&&(l-=1);let c=12*l,f=new B(c),h=0,y=i[0].getRightChar().getValue();for(let C=11;C>=0;--C)y&1<<C&&f.set(h),h++;for(let C=1;C<i.length;++C){let E=i[C],D=E.getLeftChar().getValue();for(let U=11;U>=0;--U)D&1<<U&&f.set(h),h++;if(E.getRightChar()!=null){let U=E.getRightChar().getValue();for(let H=11;H>=0;--H)U&1<<H&&f.set(h),h++}}return f}}class za{constructor(i,l){l?this.decodedInformation=null:(this.finished=i,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Co{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Nr extends Co{constructor(i,l){super(i),this.value=l}getValue(){return this.value}isFNC1(){return this.value===Nr.FNC1}}Nr.FNC1="$";class Wa extends Co{constructor(i,l,c){super(i),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Qr extends Co{constructor(i,l,c){if(super(i),l<0||l>10||c<0||c>10)throw new O;this.firstDigit=l,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Qr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Qr.FNC1}isAnyFNC1(){return this.firstDigit===Qr.FNC1||this.secondDigit===Qr.FNC1}}Qr.FNC1=10;class We{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ae;let l=i.substring(0,2);for(let h of We.TWO_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===We.VARIABLE_LENGTH?We.processVariableAI(2,h[2],i):We.processFixedAI(2,h[1],i);if(i.length<3)throw new ae;let c=i.substring(0,3);for(let h of We.THREE_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===We.VARIABLE_LENGTH?We.processVariableAI(3,h[2],i):We.processFixedAI(3,h[1],i);for(let h of We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,h[2],i):We.processFixedAI(4,h[1],i);if(i.length<4)throw new ae;let f=i.substring(0,4);for(let h of We.FOUR_DIGIT_DATA_LENGTH)if(h[0]===f)return h[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,h[2],i):We.processFixedAI(4,h[1],i);throw new ae}static processFixedAI(i,l,c){if(c.length<i)throw new ae;let f=c.substring(0,i);if(c.length<i+l)throw new ae;let h=c.substring(i,i+l),x=c.substring(i+l),y="("+f+")"+h,C=We.parseFieldsInGeneralPurpose(x);return C==null?y:y+C}static processVariableAI(i,l,c){let f=c.substring(0,i),h;c.length<i+l?h=c.length:h=i+l;let x=c.substring(i,h),y=c.substring(h),C="("+f+")"+x,E=We.parseFieldsInGeneralPurpose(y);return E==null?C:C+E}}We.VARIABLE_LENGTH=[],We.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",We.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",We.VARIABLE_LENGTH,20],["22",We.VARIABLE_LENGTH,29],["30",We.VARIABLE_LENGTH,8],["37",We.VARIABLE_LENGTH,8],["90",We.VARIABLE_LENGTH,30],["91",We.VARIABLE_LENGTH,30],["92",We.VARIABLE_LENGTH,30],["93",We.VARIABLE_LENGTH,30],["94",We.VARIABLE_LENGTH,30],["95",We.VARIABLE_LENGTH,30],["96",We.VARIABLE_LENGTH,30],["97",We.VARIABLE_LENGTH,3],["98",We.VARIABLE_LENGTH,30],["99",We.VARIABLE_LENGTH,30]],We.THREE_DIGIT_DATA_LENGTH=[["240",We.VARIABLE_LENGTH,30],["241",We.VARIABLE_LENGTH,30],["242",We.VARIABLE_LENGTH,6],["250",We.VARIABLE_LENGTH,30],["251",We.VARIABLE_LENGTH,30],["253",We.VARIABLE_LENGTH,17],["254",We.VARIABLE_LENGTH,20],["400",We.VARIABLE_LENGTH,30],["401",We.VARIABLE_LENGTH,30],["402",17],["403",We.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",We.VARIABLE_LENGTH,20],["421",We.VARIABLE_LENGTH,15],["422",3],["423",We.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",We.VARIABLE_LENGTH,15],["391",We.VARIABLE_LENGTH,18],["392",We.VARIABLE_LENGTH,15],["393",We.VARIABLE_LENGTH,18],["703",We.VARIABLE_LENGTH,30]],We.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",We.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",We.VARIABLE_LENGTH,20],["8003",We.VARIABLE_LENGTH,30],["8004",We.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",We.VARIABLE_LENGTH,30],["8008",We.VARIABLE_LENGTH,12],["8018",18],["8020",We.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",We.VARIABLE_LENGTH,70],["8200",We.VARIABLE_LENGTH,70]];class ji{constructor(i){this.buffer=new te,this.information=i}decodeAllCodes(i,l){let c=l,f=null;do{let h=this.decodeGeneralPurposeField(c,f),x=We.parseFieldsInGeneralPurpose(h.getNewString());if(x!=null&&i.append(x),h.isRemaining()?f=""+h.getRemainingValue():f=null,c===h.getNewPosition())break;c=h.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let l=i;l<i+3;++l)if(this.information.get(l))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(i,4);return h===0?new Qr(this.information.getSize(),Qr.FNC1,Qr.FNC1):new Qr(this.information.getSize(),h-1,Qr.FNC1)}let l=this.extractNumericValueFromBitArray(i,7),c=(l-8)/11,f=(l-8)%11;return new Qr(i+7,c,f)}extractNumericValueFromBitArray(i,l){return ji.extractNumericValueFromBitArray(this.information,i,l)}static extractNumericValueFromBitArray(i,l,c){let f=0;for(let h=0;h<c;++h)i.get(l+h)&&(f|=1<<c-h-1);return f}decodeGeneralPurposeField(i,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(i);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Wa(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Wa(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,l;do{let c=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),i=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),i=l.isFinished()):(l=this.parseNumericBlock(),i=l.isFinished()),!(c!==this.current.getPosition())&&!i)break}while(!i);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let l;return i.isSecondDigitFNC1()?l=new Wa(this.current.getPosition(),this.buffer.toString()):l=new Wa(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new za(!0,l)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let l=new Wa(this.current.getPosition(),this.buffer.toString());return new za(!0,l)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new za(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new Wa(this.current.getPosition(),this.buffer.toString());return new za(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new za(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new Wa(this.current.getPosition(),this.buffer.toString());return new za(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new za(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<116)return!0;if(i+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(i,8);return f>=232&&f<253}decodeIsoIec646(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new Nr(i+5,Nr.FNC1);if(l>=5&&l<15)return new Nr(i+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<90)return new Nr(i+7,""+(c+1));if(c>=90&&c<116)return new Nr(i+7,""+(c+7));let f=this.extractNumericValueFromBitArray(i,8),h;switch(f){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new O}return new Nr(i+8,h)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,6);return c>=16&&c<63}decodeAlphanumeric(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new Nr(i+5,Nr.FNC1);if(l>=5&&l<15)return new Nr(i+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(i,6);if(c>=32&&c<58)return new Nr(i+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Nt("Decoding invalid alphanumeric value: "+c)}return new Nr(i+6,f)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<5&&l+i<this.information.getSize();++l)if(l===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+l))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let l=i;l<i+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<4&&l+i<this.information.getSize();++l)if(this.information.get(i+l))return!1;return!0}}class zc{constructor(i){this.information=i,this.generalDecoder=new ji(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Cr extends zc{constructor(i){super(i)}encodeCompressedGtin(i,l){i.append("(01)");let c=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,l,c)}encodeCompressedGtinWithoutAI(i,l,c){for(let f=0;f<4;++f){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*f,10);h/100===0&&i.append("0"),h/10===0&&i.append("0"),i.append(h)}Cr.appendCheckDigit(i,c)}static appendCheckDigit(i,l){let c=0;for(let f=0;f<13;f++){let h=i.charAt(f+l).charCodeAt(0)-"0".charCodeAt(0);c+=f&1?h:3*h}c=10-c%10,c===10&&(c=0),i.append(c)}}Cr.GTIN_SIZE=40;class Ai extends Cr{constructor(i){super(i)}parseInformation(){let i=new te;i.append("(01)");let l=i.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Ai.HEADER_SIZE,4);return i.append(c),this.encodeCompressedGtinWithoutAI(i,Ai.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(i,Ai.HEADER_SIZE+44)}}Ai.HEADER_SIZE=1+1+2;class Eo extends zc{constructor(i){super(i)}parseInformation(){let i=new te;return this.getGeneralDecoder().decodeAllCodes(i,Eo.HEADER_SIZE)}}Eo.HEADER_SIZE=2+1+2;class bl extends Cr{constructor(i){super(i)}encodeCompressedWeight(i,l,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l,c);this.addWeightCode(i,f);let h=this.checkWeight(f),x=1e5;for(let y=0;y<5;++y)h/x===0&&i.append("0"),x/=10;i.append(h)}}class Ts extends bl{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Ts.HEADER_SIZE+bl.GTIN_SIZE+Ts.WEIGHT_SIZE)throw new ae;let i=new te;return this.encodeCompressedGtin(i,Ts.HEADER_SIZE),this.encodeCompressedWeight(i,Ts.HEADER_SIZE+bl.GTIN_SIZE,Ts.WEIGHT_SIZE),i.toString()}}Ts.HEADER_SIZE=4+1,Ts.WEIGHT_SIZE=15;class wp extends Ts{constructor(i){super(i)}addWeightCode(i,l){i.append("(3103)")}checkWeight(i){return i}}class bp extends Ts{constructor(i){super(i)}addWeightCode(i,l){l<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Ds extends Cr{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Ds.HEADER_SIZE+Cr.GTIN_SIZE)throw new ae;let i=new te;this.encodeCompressedGtin(i,Ds.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ds.HEADER_SIZE+Cr.GTIN_SIZE,Ds.LAST_DIGIT_SIZE);i.append("(392"),i.append(l),i.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(Ds.HEADER_SIZE+Cr.GTIN_SIZE+Ds.LAST_DIGIT_SIZE,null);return i.append(c.getNewString()),i.toString()}}Ds.HEADER_SIZE=5+1+2,Ds.LAST_DIGIT_SIZE=2;class xr extends Cr{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<xr.HEADER_SIZE+Cr.GTIN_SIZE)throw new ae;let i=new te;this.encodeCompressedGtin(i,xr.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(xr.HEADER_SIZE+Cr.GTIN_SIZE,xr.LAST_DIGIT_SIZE);i.append("(393"),i.append(l),i.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(xr.HEADER_SIZE+Cr.GTIN_SIZE+xr.LAST_DIGIT_SIZE,xr.FIRST_THREE_DIGITS_SIZE);c/100==0&&i.append("0"),c/10==0&&i.append("0"),i.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(xr.HEADER_SIZE+Cr.GTIN_SIZE+xr.LAST_DIGIT_SIZE+xr.FIRST_THREE_DIGITS_SIZE,null);return i.append(f.getNewString()),i.toString()}}xr.HEADER_SIZE=5+1+2,xr.LAST_DIGIT_SIZE=2,xr.FIRST_THREE_DIGITS_SIZE=10;class tn extends bl{constructor(i,l,c){super(i),this.dateCode=c,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=tn.HEADER_SIZE+tn.GTIN_SIZE+tn.WEIGHT_SIZE+tn.DATE_SIZE)throw new ae;let i=new te;return this.encodeCompressedGtin(i,tn.HEADER_SIZE),this.encodeCompressedWeight(i,tn.HEADER_SIZE+tn.GTIN_SIZE,tn.WEIGHT_SIZE),this.encodeCompressedDate(i,tn.HEADER_SIZE+tn.GTIN_SIZE+tn.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(l,tn.DATE_SIZE);if(c==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let f=c%32;c/=32;let h=c%12+1;c/=12;let x=c;x/10==0&&i.append("0"),i.append(x),h/10==0&&i.append("0"),i.append(h),f/10==0&&i.append("0"),i.append(f)}addWeightCode(i,l){i.append("("),i.append(this.firstAIdigits),i.append(l/1e5),i.append(")")}checkWeight(i){return i%1e5}}tn.HEADER_SIZE=7+1,tn.WEIGHT_SIZE=20,tn.DATE_SIZE=16;function Pd(F){try{if(F.get(1))return new Ai(F);if(!F.get(2))return new Eo(F);switch(ji.extractNumericValueFromBitArray(F,1,4)){case 4:return new wp(F);case 5:return new bp(F)}switch(ji.extractNumericValueFromBitArray(F,1,5)){case 12:return new Ds(F);case 13:return new xr(F)}switch(ji.extractNumericValueFromBitArray(F,1,7)){case 56:return new tn(F,"310","11");case 57:return new tn(F,"320","11");case 58:return new tn(F,"310","13");case 59:return new tn(F,"320","13");case 60:return new tn(F,"310","15");case 61:return new tn(F,"320","15");case 62:return new tn(F,"310","17");case 63:return new tn(F,"320","17")}}catch(i){throw console.log(i),new Nt("unknown decoder: "+F)}}class cs{constructor(i,l,c,f){this.leftchar=i,this.rightchar=l,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,l){return i instanceof cs?cs.equalsOrNull(i.leftchar,l.leftchar)&&cs.equalsOrNull(i.rightchar,l.rightchar)&&cs.equalsOrNull(i.finderpattern,l.finderpattern):!1}static equalsOrNull(i,l){return i===null?l===null:cs.equals(i,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Wc{constructor(i,l,c){this.pairs=i,this.rowNumber=l,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,l){return i instanceof Wc?this.checkEqualitity(i,l)&&i.wasReversed===l.wasReversed:!1}checkEqualitity(i,l){if(!i||!l)return;let c;return i.forEach((f,h)=>{l.forEach(x=>{f.getLeftChar().getValue()===x.getLeftChar().getValue()&&f.getRightChar().getValue()===x.getRightChar().getValue()&&f.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(c=!0)})}),c}}class Ie extends tr{constructor(i){super(...arguments),this.pairs=new Array(Ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,l,c){this.pairs.length=0,this.startFromEven=!1;try{return Ie.constructResult(this.decodeRow2pairs(i,l))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Ie.constructResult(this.decodeRow2pairs(i,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,l){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,i))}catch(h){if(h instanceof ae){if(!this.pairs.length)throw new ae;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(i,!1),f){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new ae}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return i&&(this.rows=this.rows.reverse()),l}checkRows(i,l){for(let c=l;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let x of i)this.pairs.push(x.getPairs());if(this.pairs.push(f.getPairs()),!Ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(i);h.push(f);try{return this.checkRows(h,c+1)}catch(x){this.verbose&&console.log(x)}}throw new ae}static isValidSequence(i){for(let l of Ie.FINDER_PATTERN_SEQUENCES){if(i.length>l.length)continue;let c=!0;for(let f=0;f<i.length;f++)if(i[f].getFinderPattern().getValue()!=l[f]){c=!1;break}if(c)return!0}return!1}storeRow(i,l){let c=0,f=!1,h=!1;for(;c<this.rows.length;){let x=this.rows[c];if(x.getRowNumber()>i){h=x.isEquivalent(this.pairs);break}f=x.isEquivalent(this.pairs),c++}h||f||Ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Wc(this.pairs,i,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,l){for(let c of l)if(c.getPairs().length!==i.length){for(let f of c.getPairs())for(let h of i)if(cs.equals(f,h))break}}static isPartialRow(i,l){for(let c of l){let f=!0;for(let h of i){let x=!1;for(let y of c.getPairs())if(h.equals(y)){x=!0;break}if(!x){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(i){let l=qc.buildBitArray(i),f=Pd(l).parseInformation(),h=i[0].getFinderPattern().getResultPoints(),x=i[i.length-1].getFinderPattern().getResultPoints(),y=[h[0],h[1],x[0],x[1]];return new $e(f,null,null,y,De.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),l=i.getLeftChar(),c=i.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),h=2;for(let y=1;y<this.pairs.size();++y){let C=this.pairs.get(y);f+=C.getLeftChar().getChecksumPortion(),h++;let E=C.getRightChar();E!=null&&(f+=E.getChecksumPortion(),h++)}return f%=211,211*(h-4)+f==l.getValue()}static getNextSecondBar(i,l){let c;return i.get(l)?(c=i.getNextUnset(l),c=i.getNextSet(c)):(c=i.getNextSet(l),c=i.getNextUnset(c)),c}retrieveNextPair(i,l,c){let f=l.length%2==0;this.startFromEven&&(f=!f);let h,x=!0,y=-1;do this.findNextPair(i,l,y),h=this.parseFoundFinderPattern(i,c,f),h==null?y=Ie.getNextSecondBar(i,this.startEnd[0]):x=!1;while(x);let C=this.decodeDataCharacter(i,h,f,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new ae;let E;try{E=this.decodeDataCharacter(i,h,f,!1)}catch(D){E=null,this.verbose&&console.log(D)}return new cs(C,E,h,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,l,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=i.getSize(),x;c>=0?x=c:this.isEmptyPair(l)?x=0:x=l[l.length-1].getFinderPattern().getStartEnd()[1];let y=l.length%2!=0;this.startFromEven&&(y=!y);let C=!1;for(;x<h&&(C=!i.get(x),!!C);)x++;let E=0,D=x;for(let U=x;U<h;U++)if(i.get(U)!=C)f[E]++;else{if(E==3){if(y&&Ie.reverseCounters(f),Ie.isFinderPattern(f)){this.startEnd[0]=D,this.startEnd[1]=U;return}y&&Ie.reverseCounters(f),D+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,E--}else E++;f[E]=1,C=!C}throw new ae}static reverseCounters(i){let l=i.length;for(let c=0;c<l/2;++c){let f=i[c];i[c]=i[l-c-1],i[l-c-1]=f}}parseFoundFinderPattern(i,l,c){let f,h,x;if(c){let E=this.startEnd[0]-1;for(;E>=0&&!i.get(E);)E--;E++,f=this.startEnd[0]-E,h=E,x=this.startEnd[1]}else h=this.startEnd[0],x=i.getNextUnset(this.startEnd[1]+1),f=x-this.startEnd[1];let y=this.getDecodeFinderCounters();R.arraycopy(y,0,y,1,y.length-1),y[0]=f;let C;try{C=this.parseFinderValue(y,Ie.FINDER_PATTERNS)}catch{return null}return new wl(C,[h,x],h,x,l)}decodeDataCharacter(i,l,c,f){let h=this.getDataCharacterCounters();for(let sn=0;sn<h.length;sn++)h[sn]=0;if(f)Ie.recordPatternInReverse(i,l.getStartEnd()[0],h);else{Ie.recordPattern(i,l.getStartEnd()[1],h);for(let sn=0,Sn=h.length-1;sn<Sn;sn++,Sn--){let dr=h[sn];h[sn]=h[Sn],h[Sn]=dr}}let x=17,y=oe.sum(new Int32Array(h))/x,C=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(y-C)/C>.3)throw new ae;let E=this.getOddCounts(),D=this.getEvenCounts(),U=this.getOddRoundingErrors(),H=this.getEvenRoundingErrors();for(let sn=0;sn<h.length;sn++){let Sn=1*h[sn]/y,dr=Sn+.5;if(dr<1){if(Sn<.3)throw new ae;dr=1}else if(dr>8){if(Sn>8.7)throw new ae;dr=8}let ea=sn/2;sn&1?(D[ea]=dr,H[ea]=Sn-dr):(E[ea]=dr,U[ea]=Sn-dr)}this.adjustOddEvenCounts(x);let Z=4*l.getValue()+(c?0:2)+(f?0:1)-1,z=0,$=0;for(let sn=E.length-1;sn>=0;sn--){if(Ie.isNotA1left(l,c,f)){let Sn=Ie.WEIGHTS[Z][2*sn];$+=E[sn]*Sn}z+=E[sn]}let X=0;for(let sn=D.length-1;sn>=0;sn--)if(Ie.isNotA1left(l,c,f)){let Sn=Ie.WEIGHTS[Z][2*sn+1];X+=D[sn]*Sn}let re=$+X;if(z&1||z>13||z<4)throw new ae;let xe=(13-z)/2,we=Ie.SYMBOL_WIDEST[xe],Ce=9-we,Ze=ks.getRSSvalue(E,we,!0),xt=ks.getRSSvalue(D,Ce,!1),_r=Ie.EVEN_TOTAL_SUBSET[xe],En=Ie.GSUM[xe],sr=Ze*_r+xt+En;return new _i(sr,re)}static isNotA1left(i,l,c){return!(i.getValue()==0&&l&&c)}adjustOddEvenCounts(i){let l=oe.sum(new Int32Array(this.getOddCounts())),c=oe.sum(new Int32Array(this.getEvenCounts())),f=!1,h=!1;l>13?h=!0:l<4&&(f=!0);let x=!1,y=!1;c>13?y=!0:c<4&&(x=!0);let C=l+c-i,E=(l&1)==1,D=(c&1)==0;if(C==1)if(E){if(D)throw new ae;h=!0}else{if(!D)throw new ae;y=!0}else if(C==-1)if(E){if(D)throw new ae;f=!0}else{if(!D)throw new ae;x=!0}else if(C==0){if(E){if(!D)throw new ae;l<c?(f=!0,y=!0):(h=!0,x=!0)}else if(D)throw new ae}else throw new ae;if(f){if(h)throw new ae;Ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(y)throw new ae;Ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ie.SYMBOL_WIDEST=[7,5,4,3,1],Ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ie.GSUM=[0,348,1388,2948,3988],Ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ie.FINDER_PAT_A=0,Ie.FINDER_PAT_B=1,Ie.FINDER_PAT_C=2,Ie.FINDER_PAT_D=3,Ie.FINDER_PAT_E=4,Ie.FINDER_PAT_F=5,Ie.FINDER_PATTERN_SEQUENCES=[[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_C,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_C],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F]],Ie.MAX_PAIRS=11;class Np extends _i{constructor(i,l,c){super(i,l),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class vn extends tr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,l,c){const f=this.decodePair(l,!1,i,c);vn.addOrTally(this.possibleLeftPairs,f),l.reverse();let h=this.decodePair(l,!0,i,c);vn.addOrTally(this.possibleRightPairs,h),l.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&vn.checkChecksum(x,y))return vn.constructResult(x,y)}throw new ae}static addOrTally(i,l){if(l==null)return;let c=!1;for(let f of i)if(f.getValue()===l.getValue()){f.incrementCount(),c=!0;break}c||i.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,l){let c=4537077*i.getValue()+l.getValue(),f=new String(c).toString(),h=new te;for(let E=13-f.length;E>0;E--)h.append("0");h.append(f);let x=0;for(let E=0;E<13;E++){let D=h.charAt(E).charCodeAt(0)-"0".charCodeAt(0);x+=E&1?D:3*D}x=10-x%10,x===10&&(x=0),h.append(x.toString());let y=i.getFinderPattern().getResultPoints(),C=l.getFinderPattern().getResultPoints();return new $e(h.toString(),null,0,[y[0],y[1],C[0],C[1]],De.RSS_14,new Date().getTime())}static checkChecksum(i,l){let c=(i.getChecksumPortion()+16*l.getChecksumPortion())%79,f=9*i.getFinderPattern().getValue()+l.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(i,l,c,f){try{let h=this.findFinderPattern(i,l),x=this.parseFoundFinderPattern(i,c,l,h),y=f==null?null:f.get(P.NEED_RESULT_POINT_CALLBACK);if(y!=null){let D=(h[0]+h[1])/2;l&&(D=i.getSize()-1-D),y.foundPossibleResultPoint(new ye(D,c))}let C=this.decodeDataCharacter(i,x,!0),E=this.decodeDataCharacter(i,x,!1);return new Np(1597*C.getValue()+E.getValue(),C.getChecksumPortion()+4*E.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(i,l,c){let f=this.getDataCharacterCounters();for(let X=0;X<f.length;X++)f[X]=0;if(c)ln.recordPatternInReverse(i,l.getStartEnd()[0],f);else{ln.recordPattern(i,l.getStartEnd()[1]+1,f);for(let X=0,re=f.length-1;X<re;X++,re--){let xe=f[X];f[X]=f[re],f[re]=xe}}let h=c?16:15,x=oe.sum(new Int32Array(f))/h,y=this.getOddCounts(),C=this.getEvenCounts(),E=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let X=0;X<f.length;X++){let re=f[X]/x,xe=Math.floor(re+.5);xe<1?xe=1:xe>8&&(xe=8);let we=Math.floor(X/2);X&1?(C[we]=xe,D[we]=re-xe):(y[we]=xe,E[we]=re-xe)}this.adjustOddEvenCounts(c,h);let U=0,H=0;for(let X=y.length-1;X>=0;X--)H*=9,H+=y[X],U+=y[X];let Z=0,z=0;for(let X=C.length-1;X>=0;X--)Z*=9,Z+=C[X],z+=C[X];let $=H+3*Z;if(c){if(U&1||U>12||U<4)throw new ae;let X=(12-U)/2,re=vn.OUTSIDE_ODD_WIDEST[X],xe=9-re,we=ks.getRSSvalue(y,re,!1),Ce=ks.getRSSvalue(C,xe,!0),Ze=vn.OUTSIDE_EVEN_TOTAL_SUBSET[X],xt=vn.OUTSIDE_GSUM[X];return new _i(we*Ze+Ce+xt,$)}else{if(z&1||z>10||z<4)throw new ae;let X=(10-z)/2,re=vn.INSIDE_ODD_WIDEST[X],xe=9-re,we=ks.getRSSvalue(y,re,!0),Ce=ks.getRSSvalue(C,xe,!1),Ze=vn.INSIDE_ODD_TOTAL_SUBSET[X],xt=vn.INSIDE_GSUM[X];return new _i(Ce*Ze+we+xt,$)}}findFinderPattern(i,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=i.getSize(),h=!1,x=0;for(;x<f&&(h=!i.get(x),l!==h);)x++;let y=0,C=x;for(let E=x;E<f;E++)if(i.get(E)!==h)c[y]++;else{if(y===3){if(tr.isFinderPattern(c))return[C,E];C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,h=!h}throw new ae}parseFoundFinderPattern(i,l,c,f){let h=i.get(f[0]),x=f[0]-1;for(;x>=0&&h!==i.get(x);)x--;x++;const y=f[0]-x,C=this.getDecodeFinderCounters(),E=new Int32Array(C.length);R.arraycopy(C,0,E,1,C.length-1),E[0]=y;const D=this.parseFinderValue(E,vn.FINDER_PATTERNS);let U=x,H=f[1];return c&&(U=i.getSize()-1-U,H=i.getSize()-1-H),new wl(D,[x,f[1]],U,H,l)}adjustOddEvenCounts(i,l){let c=oe.sum(new Int32Array(this.getOddCounts())),f=oe.sum(new Int32Array(this.getEvenCounts())),h=!1,x=!1,y=!1,C=!1;i?(c>12?x=!0:c<4&&(h=!0),f>12?C=!0:f<4&&(y=!0)):(c>11?x=!0:c<5&&(h=!0),f>10?C=!0:f<4&&(y=!0));let E=c+f-l,D=(c&1)===(i?1:0),U=(f&1)===1;if(E===1)if(D){if(U)throw new ae;x=!0}else{if(!U)throw new ae;C=!0}else if(E===-1)if(D){if(U)throw new ae;h=!0}else{if(!U)throw new ae;y=!0}else if(E===0){if(D){if(!U)throw new ae;c<f?(h=!0,C=!0):(x=!0,y=!0)}else if(U)throw new ae}else throw new ae;if(h){if(x)throw new ae;tr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&tr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(C)throw new ae;tr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&tr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}vn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],vn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],vn.OUTSIDE_GSUM=[0,161,961,2015,2715],vn.INSIDE_GSUM=[0,336,1036,1516],vn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],vn.INSIDE_ODD_WIDEST=[2,4,6,8],vn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ha extends ln{constructor(i,l){super(),this.readers=[],this.verbose=l===!0;const c=i?i.get(P.POSSIBLE_FORMATS):null,f=i&&i.get(P.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(De.EAN_13)||c.includes(De.UPC_A)||c.includes(De.EAN_8)||c.includes(De.UPC_E))&&this.readers.push(new Uc(i)),c.includes(De.CODE_39)&&this.readers.push(new dn(f)),c.includes(De.CODE_128)&&this.readers.push(new Pe),c.includes(De.ITF)&&this.readers.push(new Mt),c.includes(De.RSS_14)&&this.readers.push(new vn),c.includes(De.RSS_EXPANDED)&&this.readers.push(new Ie(this.verbose))):(this.readers.push(new Uc(i)),this.readers.push(new dn),this.readers.push(new Uc(i)),this.readers.push(new Pe),this.readers.push(new Mt),this.readers.push(new vn),this.readers.push(new Ie(this.verbose)))}decodeRow(i,l,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(i,l,c)}catch{}throw new ae}reset(){this.readers.forEach(i=>i.reset())}}class Fd extends Te{constructor(i=500,l){super(new Ha(l),i,l)}}class Yt{constructor(i,l,c){this.ecCodewords=i,this.ecBlocks=[l],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ut{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class jt{constructor(i,l,c,f,h,x){this.versionNumber=i,this.symbolSizeRows=l,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=h,this.ecBlocks=x;let y=0;const C=x.getECCodewords(),E=x.getECBlocks();for(let D of E)y+=D.getCount()*(D.getDataCodewords()+C);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,l){if(i&1||l&1)throw new O;for(let c of jt.VERSIONS)if(c.symbolSizeRows===i&&c.symbolSizeColumns===l)return c;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new jt(1,10,10,8,8,new Yt(5,new Ut(1,3))),new jt(2,12,12,10,10,new Yt(7,new Ut(1,5))),new jt(3,14,14,12,12,new Yt(10,new Ut(1,8))),new jt(4,16,16,14,14,new Yt(12,new Ut(1,12))),new jt(5,18,18,16,16,new Yt(14,new Ut(1,18))),new jt(6,20,20,18,18,new Yt(18,new Ut(1,22))),new jt(7,22,22,20,20,new Yt(20,new Ut(1,30))),new jt(8,24,24,22,22,new Yt(24,new Ut(1,36))),new jt(9,26,26,24,24,new Yt(28,new Ut(1,44))),new jt(10,32,32,14,14,new Yt(36,new Ut(1,62))),new jt(11,36,36,16,16,new Yt(42,new Ut(1,86))),new jt(12,40,40,18,18,new Yt(48,new Ut(1,114))),new jt(13,44,44,20,20,new Yt(56,new Ut(1,144))),new jt(14,48,48,22,22,new Yt(68,new Ut(1,174))),new jt(15,52,52,24,24,new Yt(42,new Ut(2,102))),new jt(16,64,64,14,14,new Yt(56,new Ut(2,140))),new jt(17,72,72,16,16,new Yt(36,new Ut(4,92))),new jt(18,80,80,18,18,new Yt(48,new Ut(4,114))),new jt(19,88,88,20,20,new Yt(56,new Ut(4,144))),new jt(20,96,96,22,22,new Yt(68,new Ut(4,174))),new jt(21,104,104,24,24,new Yt(56,new Ut(6,136))),new jt(22,120,120,18,18,new Yt(68,new Ut(6,175))),new jt(23,132,132,20,20,new Yt(62,new Ut(8,163))),new jt(24,144,144,22,22,new Yt(62,new Ut(8,156),new Ut(2,155))),new jt(25,8,18,6,16,new Yt(7,new Ut(1,5))),new jt(26,8,32,6,14,new Yt(11,new Ut(1,10))),new jt(27,12,26,10,24,new Yt(14,new Ut(1,16))),new jt(28,12,36,10,16,new Yt(18,new Ut(1,22))),new jt(29,16,36,14,16,new Yt(24,new Ut(1,32))),new jt(30,16,48,14,22,new Yt(28,new Ut(1,49)))]}}jt.VERSIONS=jt.buildVersions();class Hc{constructor(i){const l=i.getHeight();if(l<8||l>144||l&1)throw new O;this.version=Hc.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const l=i.getHeight(),c=i.getWidth();return jt.getVersionForDimensions(l,c)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let l=0,c=4,f=0;const h=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let y=!1,C=!1,E=!1,D=!1;do if(c===h&&f===0&&!y)i[l++]=this.readCorner1(h,x)&255,c-=2,f+=2,y=!0;else if(c===h-2&&f===0&&x&3&&!C)i[l++]=this.readCorner2(h,x)&255,c-=2,f+=2,C=!0;else if(c===h+4&&f===2&&!(x&7)&&!E)i[l++]=this.readCorner3(h,x)&255,c-=2,f+=2,E=!0;else if(c===h-2&&f===0&&(x&7)===4&&!D)i[l++]=this.readCorner4(h,x)&255,c-=2,f+=2,D=!0;else{do c<h&&f>=0&&!this.readMappingMatrix.get(f,c)&&(i[l++]=this.readUtah(c,f,h,x)&255),c-=2,f+=2;while(c>=0&&f<x);c+=1,f+=3;do c>=0&&f<x&&!this.readMappingMatrix.get(f,c)&&(i[l++]=this.readUtah(c,f,h,x)&255),c+=2,f-=2;while(c<h&&f>=0);c+=3,f+=1}while(c<h||f<x);if(l!==this.version.getTotalCodewords())throw new O;return i}readModule(i,l,c,f){return i<0&&(i+=c,l+=4-(c+4&7)),l<0&&(l+=f,i+=4-(f+4&7)),this.readMappingMatrix.set(l,i),this.mappingBitMatrix.get(l,i)}readUtah(i,l,c,f){let h=0;return this.readModule(i-2,l-2,c,f)&&(h|=1),h<<=1,this.readModule(i-2,l-1,c,f)&&(h|=1),h<<=1,this.readModule(i-1,l-2,c,f)&&(h|=1),h<<=1,this.readModule(i-1,l-1,c,f)&&(h|=1),h<<=1,this.readModule(i-1,l,c,f)&&(h|=1),h<<=1,this.readModule(i,l-2,c,f)&&(h|=1),h<<=1,this.readModule(i,l-1,c,f)&&(h|=1),h<<=1,this.readModule(i,l,c,f)&&(h|=1),h}readCorner1(i,l){let c=0;return this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,1,i,l)&&(c|=1),c<<=1,this.readModule(i-1,2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(2,l-1,i,l)&&(c|=1),c<<=1,this.readModule(3,l-1,i,l)&&(c|=1),c}readCorner2(i,l){let c=0;return this.readModule(i-3,0,i,l)&&(c|=1),c<<=1,this.readModule(i-2,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(0,l-4,i,l)&&(c|=1),c<<=1,this.readModule(0,l-3,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c}readCorner3(i,l){let c=0;return this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(0,l-3,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-3,i,l)&&(c|=1),c<<=1,this.readModule(1,l-2,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c}readCorner4(i,l){let c=0;return this.readModule(i-3,0,i,l)&&(c|=1),c<<=1,this.readModule(i-2,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(2,l-1,i,l)&&(c|=1),c<<=1,this.readModule(3,l-1,i,l)&&(c|=1),c}extractDataRegion(i){const l=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(i.getHeight()!==l)throw new N("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),x=l/f|0,y=c/h|0,C=x*f,E=y*h,D=new Ne(E,C);for(let U=0;U<x;++U){const H=U*f;for(let Z=0;Z<y;++Z){const z=Z*h;for(let $=0;$<f;++$){const X=U*(f+2)+1+$,re=H+$;for(let xe=0;xe<h;++xe){const we=Z*(h+2)+1+xe;if(i.get(we,X)){const Ce=z+xe;D.set(Ce,re)}}}}}return D}}class Nl{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l){const c=l.getECBlocks();let f=0;const h=c.getECBlocks();for(let $ of h)f+=$.getCount();const x=new Array(f);let y=0;for(let $ of h)for(let X=0;X<$.getCount();X++){const re=$.getDataCodewords(),xe=c.getECCodewords()+re;x[y++]=new Nl(re,new Uint8Array(xe))}const E=x[0].codewords.length-c.getECCodewords(),D=E-1;let U=0;for(let $=0;$<D;$++)for(let X=0;X<y;X++)x[X].codewords[$]=i[U++];const H=l.getVersionNumber()===24,Z=H?8:y;for(let $=0;$<Z;$++)x[$].codewords[E-1]=i[U++];const z=x[0].codewords.length;for(let $=E;$<z;$++)for(let X=0;X<y;X++){const re=H?(X+8)%y:X,xe=H&&re>7?$-1:$;x[re].codewords[xe]=i[U++]}if(U!==i.length)throw new N;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Cl{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new N(""+i);let l=0,c=this.bitOffset,f=this.byteOffset;const h=this.bytes;if(c>0){const x=8-c,y=i<x?i:x,C=x-y,E=255>>8-y<<C;l=(h[f]&E)>>C,i-=y,c+=y,c===8&&(c=0,f++)}if(i>0){for(;i>=8;)l=l<<8|h[f]&255,f++,i-=8;if(i>0){const x=8-i,y=255>>x<<x;l=l<<i|(h[f]&y)>>x,c+=i}}return this.bitOffset=c,this.byteOffset=f,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var On;(function(F){F[F.PAD_ENCODE=0]="PAD_ENCODE",F[F.ASCII_ENCODE=1]="ASCII_ENCODE",F[F.C40_ENCODE=2]="C40_ENCODE",F[F.TEXT_ENCODE=3]="TEXT_ENCODE",F[F.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",F[F.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",F[F.BASE256_ENCODE=6]="BASE256_ENCODE"})(On||(On={}));class Is{static decode(i){const l=new Cl(i),c=new te,f=new te,h=new Array;let x=On.ASCII_ENCODE;do if(x===On.ASCII_ENCODE)x=this.decodeAsciiSegment(l,c,f);else{switch(x){case On.C40_ENCODE:this.decodeC40Segment(l,c);break;case On.TEXT_ENCODE:this.decodeTextSegment(l,c);break;case On.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,c);break;case On.EDIFACT_ENCODE:this.decodeEdifactSegment(l,c);break;case On.BASE256_ENCODE:this.decodeBase256Segment(l,c,h);break;default:throw new O}x=On.ASCII_ENCODE}while(x!==On.PAD_ENCODE&&l.available()>0);return f.length()>0&&c.append(f.toString()),new Ht(i,c.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(i,l,c){let f=!1;do{let h=i.readBits(8);if(h===0)throw new O;if(h<=128)return f&&(h+=128),l.append(String.fromCharCode(h-1)),On.ASCII_ENCODE;if(h===129)return On.PAD_ENCODE;if(h<=229){const x=h-130;x<10&&l.append("0"),l.append(""+x)}else switch(h){case 230:return On.C40_ENCODE;case 231:return On.BASE256_ENCODE;case 232:l.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:f=!0;break;case 236:l.append("[)>05"),c.insert(0,"");break;case 237:l.append("[)>06"),c.insert(0,"");break;case 238:return On.ANSIX12_ENCODE;case 239:return On.TEXT_ENCODE;case 240:return On.EDIFACT_ENCODE;case 241:break;default:if(h!==254||i.available()!==0)throw new O;break}}while(i.available()>0);return On.ASCII_ENCODE}static decodeC40Segment(i,l){let c=!1;const f=[];let h=0;do{if(i.available()===8)return;const x=i.readBits(8);if(x===254)return;this.parseTwoBytes(x,i.readBits(8),f);for(let y=0;y<3;y++){const C=f[y];switch(h){case 0:if(C<3)h=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[C];c?(l.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):l.append(E)}else throw new O;break;case 1:c?(l.append(String.fromCharCode(C+128)),c=!1):l.append(String.fromCharCode(C)),h=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[C];c?(l.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):l.append(E)}else switch(C){case 27:l.append(String.fromCharCode(29));break;case 30:c=!0;break;default:throw new O}h=0;break;case 3:c?(l.append(String.fromCharCode(C+224)),c=!1):l.append(String.fromCharCode(C+96)),h=0;break;default:throw new O}}}while(i.available()>0)}static decodeTextSegment(i,l){let c=!1,f=[],h=0;do{if(i.available()===8)return;const x=i.readBits(8);if(x===254)return;this.parseTwoBytes(x,i.readBits(8),f);for(let y=0;y<3;y++){const C=f[y];switch(h){case 0:if(C<3)h=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[C];c?(l.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):l.append(E)}else throw new O;break;case 1:c?(l.append(String.fromCharCode(C+128)),c=!1):l.append(String.fromCharCode(C)),h=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[C];c?(l.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):l.append(E)}else switch(C){case 27:l.append(String.fromCharCode(29));break;case 30:c=!0;break;default:throw new O}h=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[C];c?(l.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):l.append(E),h=0}else throw new O;break;default:throw new O}}}while(i.available()>0)}static decodeAnsiX12Segment(i,l){const c=[];do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let h=0;h<3;h++){const x=c[h];switch(x){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(x<14)l.append(String.fromCharCode(x+44));else if(x<40)l.append(String.fromCharCode(x+51));else throw new O;break}}}while(i.available()>0)}static parseTwoBytes(i,l,c){let f=(i<<8)+l-1,h=Math.floor(f/1600);c[0]=h,f-=h*1600,h=Math.floor(f/40),c[1]=h,c[2]=f-h*40}static decodeEdifactSegment(i,l){do{if(i.available()<=16)return;for(let c=0;c<4;c++){let f=i.readBits(6);if(f===31){const h=8-i.getBitOffset();h!==8&&i.readBits(h);return}f&32||(f|=64),l.append(String.fromCharCode(f))}}while(i.available()>0)}static decodeBase256Segment(i,l,c){let f=1+i.getByteOffset();const h=this.unrandomize255State(i.readBits(8),f++);let x;if(h===0?x=i.available()/8|0:h<250?x=h:x=250*(h-249)+this.unrandomize255State(i.readBits(8),f++),x<0)throw new O;const y=new Uint8Array(x);for(let C=0;C<x;C++){if(i.available()<8)throw new O;y[C]=this.unrandomize255State(i.readBits(8),f++)}c.push(y);try{l.append(ce.decode(y,ne.ISO88591))}catch(C){throw new Nt("Platform does not support required encoding: "+C.message)}}static unrandomize255State(i,l){const c=149*l%255+1,f=i-c;return f>=0?f:f+256}}Is.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Is.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Is.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Is.TEXT_SHIFT2_SET_CHARS=Is.C40_SHIFT2_SET_CHARS,Is.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Cp{constructor(){this.rsDecoder=new ve(_e.DATA_MATRIX_FIELD_256)}decode(i){const l=new Hc(i),c=l.getVersion(),f=l.readCodewords(),h=Nl.getDataBlocks(f,c);let x=0;for(let E of h)x+=E.getNumDataCodewords();const y=new Uint8Array(x),C=h.length;for(let E=0;E<C;E++){const D=h[E],U=D.getCodewords(),H=D.getNumDataCodewords();this.correctErrors(U,H);for(let Z=0;Z<H;Z++)y[Z*C+E]=U[Z]}return Is.decode(y)}correctErrors(i,l){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-l)}catch{throw new j}for(let f=0;f<l;f++)i[f]=c[f]}}class Nn{constructor(i){this.image=i,this.rectangleDetector=new Fe(this.image)}detect(){const i=this.rectangleDetector.detect();let l=this.detectSolid1(i);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new ae;l=this.shiftToModuleCenter(l);const c=l[0],f=l[1],h=l[2],x=l[3];let y=this.transitionsBetween(c,x)+1,C=this.transitionsBetween(h,x)+1;(y&1)===1&&(y+=1),(C&1)===1&&(C+=1),4*y<7*C&&4*C<7*y&&(y=C=Math.max(y,C));let E=Nn.sampleGrid(this.image,c,f,h,x,y,C);return new gt(E,[c,f,h,x])}static shiftPoint(i,l,c){let f=(l.getX()-i.getX())/(c+1),h=(l.getY()-i.getY())/(c+1);return new ye(i.getX()+f,i.getY()+h)}static moveAway(i,l,c){let f=i.getX(),h=i.getY();return f<l?f-=1:f+=1,h<c?h-=1:h+=1,new ye(f,h)}detectSolid1(i){let l=i[0],c=i[1],f=i[3],h=i[2],x=this.transitionsBetween(l,c),y=this.transitionsBetween(c,f),C=this.transitionsBetween(f,h),E=this.transitionsBetween(h,l),D=x,U=[h,l,c,f];return D>y&&(D=y,U[0]=l,U[1]=c,U[2]=f,U[3]=h),D>C&&(D=C,U[0]=c,U[1]=f,U[2]=h,U[3]=l),D>E&&(U[0]=f,U[1]=h,U[2]=l,U[3]=c),U}detectSolid2(i){let l=i[0],c=i[1],f=i[2],h=i[3],x=this.transitionsBetween(l,h),y=Nn.shiftPoint(c,f,(x+1)*4),C=Nn.shiftPoint(f,c,(x+1)*4),E=this.transitionsBetween(y,l),D=this.transitionsBetween(C,h);return E<D?(i[0]=l,i[1]=c,i[2]=f,i[3]=h):(i[0]=c,i[1]=f,i[2]=h,i[3]=l),i}correctTopRight(i){let l=i[0],c=i[1],f=i[2],h=i[3],x=this.transitionsBetween(l,h),y=this.transitionsBetween(c,h),C=Nn.shiftPoint(l,c,(y+1)*4),E=Nn.shiftPoint(f,c,(x+1)*4);x=this.transitionsBetween(C,h),y=this.transitionsBetween(E,h);let D=new ye(h.getX()+(f.getX()-c.getX())/(x+1),h.getY()+(f.getY()-c.getY())/(x+1)),U=new ye(h.getX()+(l.getX()-c.getX())/(y+1),h.getY()+(l.getY()-c.getY())/(y+1));if(!this.isValid(D))return this.isValid(U)?U:null;if(!this.isValid(U))return D;let H=this.transitionsBetween(C,D)+this.transitionsBetween(E,D),Z=this.transitionsBetween(C,U)+this.transitionsBetween(E,U);return H>Z?D:U}shiftToModuleCenter(i){let l=i[0],c=i[1],f=i[2],h=i[3],x=this.transitionsBetween(l,h)+1,y=this.transitionsBetween(f,h)+1,C=Nn.shiftPoint(l,c,y*4),E=Nn.shiftPoint(f,c,x*4);x=this.transitionsBetween(C,h)+1,y=this.transitionsBetween(E,h)+1,(x&1)===1&&(x+=1),(y&1)===1&&(y+=1);let D=(l.getX()+c.getX()+f.getX()+h.getX())/4,U=(l.getY()+c.getY()+f.getY()+h.getY())/4;l=Nn.moveAway(l,D,U),c=Nn.moveAway(c,D,U),f=Nn.moveAway(f,D,U),h=Nn.moveAway(h,D,U);let H,Z;return C=Nn.shiftPoint(l,c,y*4),C=Nn.shiftPoint(C,h,x*4),H=Nn.shiftPoint(c,l,y*4),H=Nn.shiftPoint(H,f,x*4),E=Nn.shiftPoint(f,h,y*4),E=Nn.shiftPoint(E,c,x*4),Z=Nn.shiftPoint(h,f,y*4),Z=Nn.shiftPoint(Z,l,x*4),[C,H,E,Z]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,l,c,f,h,x,y){return en.getInstance().sampleGrid(i,x,y,.5,.5,x-.5,.5,x-.5,y-.5,.5,y-.5,l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(i,l){let c=Math.trunc(i.getX()),f=Math.trunc(i.getY()),h=Math.trunc(l.getX()),x=Math.trunc(l.getY()),y=Math.abs(x-f)>Math.abs(h-c);if(y){let $=c;c=f,f=$,$=h,h=x,x=$}let C=Math.abs(h-c),E=Math.abs(x-f),D=-C/2,U=f<x?1:-1,H=c<h?1:-1,Z=0,z=this.image.get(y?f:c,y?c:f);for(let $=c,X=f;$!==h;$+=H){let re=this.image.get(y?X:$,y?$:X);if(re!==z&&(Z++,z=re),D+=E,D>0){if(X===x)break;X+=U,D-=C}}return Z}}class us{constructor(){this.decoder=new Cp}decode(i,l=null){let c,f;if(l!=null&&l.has(P.PURE_BARCODE)){const E=us.extractPureBits(i.getBlackMatrix());c=this.decoder.decode(E),f=us.NO_POINTS}else{const E=new Nn(i.getBlackMatrix()).detect();c=this.decoder.decode(E.getBits()),f=E.getPoints()}const h=c.getRawBytes(),x=new $e(c.getText(),h,8*h.length,f,De.DATA_MATRIX,R.currentTimeMillis()),y=c.getByteSegments();y!=null&&x.putMetadata(at.BYTE_SEGMENTS,y);const C=c.getECLevel();return C!=null&&x.putMetadata(at.ERROR_CORRECTION_LEVEL,C),x}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(l==null||c==null)throw new ae;const f=this.moduleSize(l,i);let h=l[1];const x=c[1];let y=l[0];const E=(c[0]-y+1)/f,D=(x-h+1)/f;if(E<=0||D<=0)throw new ae;const U=f/2;h+=U,y+=U;const H=new Ne(E,D);for(let Z=0;Z<D;Z++){const z=h+Z*f;for(let $=0;$<E;$++)i.get(y+$*f,z)&&H.set($,Z)}return H}static moduleSize(i,l){const c=l.getWidth();let f=i[0];const h=i[1];for(;f<c&&l.get(f,h);)f++;if(f===c)throw new ae;const x=f-i[0];if(x===0)throw new ae;return x}}us.NO_POINTS=[];class Bd extends Te{constructor(i=500){super(new us,i)}}var ki;(function(F){F[F.L=0]="L",F[F.M=1]="M",F[F.Q=2]="Q",F[F.H=3]="H"})(ki||(ki={}));class nn{constructor(i,l,c){this.value=i,this.stringValue=l,this.bits=c,nn.FOR_BITS.set(c,this),nn.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return nn.L;case"M":return nn.M;case"Q":return nn.Q;case"H":return nn.H;default:throw new w(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof nn))return!1;const l=i;return this.value===l.value}static forBits(i){if(i<0||i>=nn.FOR_BITS.size)throw new N;return nn.FOR_BITS.get(i)}}nn.FOR_BITS=new Map,nn.FOR_VALUE=new Map,nn.L=new nn(ki.L,"L",1),nn.M=new nn(ki.M,"M",0),nn.Q=new nn(ki.Q,"Q",3),nn.H=new nn(ki.H,"H",2);class nr{constructor(i){this.errorCorrectionLevel=nn.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,l){return M.bitCount(i^l)}static decodeFormatInformation(i,l){const c=nr.doDecodeFormatInformation(i,l);return c!==null?c:nr.doDecodeFormatInformation(i^nr.FORMAT_INFO_MASK_QR,l^nr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,l){let c=Number.MAX_SAFE_INTEGER,f=0;for(const h of nr.FORMAT_INFO_DECODE_LOOKUP){const x=h[0];if(x===i||x===l)return new nr(h[1]);let y=nr.numBitsDiffering(i,x);y<c&&(f=h[1],c=y),i!==l&&(y=nr.numBitsDiffering(l,x),y<c&&(f=h[1],c=y))}return c<=3?new nr(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof nr))return!1;const l=i;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}nr.FORMAT_INFO_MASK_QR=21522,nr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(i,...l){this.ecCodewordsPerBlock=i,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const l=this.ecBlocks;for(const c of l)i+=c.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class K{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tt{constructor(i,l,...c){this.versionNumber=i,this.alignmentPatternCenters=l,this.ecBlocks=c;let f=0;const h=c[0].getECCodewordsPerBlock(),x=c[0].getECBlocks();for(const y of x)f+=y.getCount()*(y.getDataCodewords()+h);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new O;try{return this.getVersionForNumber((i-17)/4)}catch{throw new O}}static getVersionForNumber(i){if(i<1||i>40)throw new N;return tt.VERSIONS[i-1]}static decodeVersionInformation(i){let l=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<tt.VERSION_DECODE_INFO.length;f++){const h=tt.VERSION_DECODE_INFO[f];if(h===i)return tt.getVersionForNumber(f+7);const x=nr.numBitsDiffering(i,h);x<l&&(c=f+7,l=x)}return l<=3?tt.getVersionForNumber(c):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),l=new Ne(i);l.setRegion(0,0,9,9),l.setRegion(i-8,0,8,9),l.setRegion(0,i-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const h=this.alignmentPatternCenters[f]-2;for(let x=0;x<c;x++)f===0&&(x===0||x===c-1)||f===c-1&&x===0||l.setRegion(this.alignmentPatternCenters[x]-2,h,5,5)}return l.setRegion(6,9,1,i-17),l.setRegion(9,6,i-17,1),this.versionNumber>6&&(l.setRegion(i-11,0,3,6),l.setRegion(0,i-11,6,3)),l}toString(){return""+this.versionNumber}}tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),tt.VERSIONS=[new tt(1,new Int32Array(0),new ue(7,new K(1,19)),new ue(10,new K(1,16)),new ue(13,new K(1,13)),new ue(17,new K(1,9))),new tt(2,Int32Array.from([6,18]),new ue(10,new K(1,34)),new ue(16,new K(1,28)),new ue(22,new K(1,22)),new ue(28,new K(1,16))),new tt(3,Int32Array.from([6,22]),new ue(15,new K(1,55)),new ue(26,new K(1,44)),new ue(18,new K(2,17)),new ue(22,new K(2,13))),new tt(4,Int32Array.from([6,26]),new ue(20,new K(1,80)),new ue(18,new K(2,32)),new ue(26,new K(2,24)),new ue(16,new K(4,9))),new tt(5,Int32Array.from([6,30]),new ue(26,new K(1,108)),new ue(24,new K(2,43)),new ue(18,new K(2,15),new K(2,16)),new ue(22,new K(2,11),new K(2,12))),new tt(6,Int32Array.from([6,34]),new ue(18,new K(2,68)),new ue(16,new K(4,27)),new ue(24,new K(4,19)),new ue(28,new K(4,15))),new tt(7,Int32Array.from([6,22,38]),new ue(20,new K(2,78)),new ue(18,new K(4,31)),new ue(18,new K(2,14),new K(4,15)),new ue(26,new K(4,13),new K(1,14))),new tt(8,Int32Array.from([6,24,42]),new ue(24,new K(2,97)),new ue(22,new K(2,38),new K(2,39)),new ue(22,new K(4,18),new K(2,19)),new ue(26,new K(4,14),new K(2,15))),new tt(9,Int32Array.from([6,26,46]),new ue(30,new K(2,116)),new ue(22,new K(3,36),new K(2,37)),new ue(20,new K(4,16),new K(4,17)),new ue(24,new K(4,12),new K(4,13))),new tt(10,Int32Array.from([6,28,50]),new ue(18,new K(2,68),new K(2,69)),new ue(26,new K(4,43),new K(1,44)),new ue(24,new K(6,19),new K(2,20)),new ue(28,new K(6,15),new K(2,16))),new tt(11,Int32Array.from([6,30,54]),new ue(20,new K(4,81)),new ue(30,new K(1,50),new K(4,51)),new ue(28,new K(4,22),new K(4,23)),new ue(24,new K(3,12),new K(8,13))),new tt(12,Int32Array.from([6,32,58]),new ue(24,new K(2,92),new K(2,93)),new ue(22,new K(6,36),new K(2,37)),new ue(26,new K(4,20),new K(6,21)),new ue(28,new K(7,14),new K(4,15))),new tt(13,Int32Array.from([6,34,62]),new ue(26,new K(4,107)),new ue(22,new K(8,37),new K(1,38)),new ue(24,new K(8,20),new K(4,21)),new ue(22,new K(12,11),new K(4,12))),new tt(14,Int32Array.from([6,26,46,66]),new ue(30,new K(3,115),new K(1,116)),new ue(24,new K(4,40),new K(5,41)),new ue(20,new K(11,16),new K(5,17)),new ue(24,new K(11,12),new K(5,13))),new tt(15,Int32Array.from([6,26,48,70]),new ue(22,new K(5,87),new K(1,88)),new ue(24,new K(5,41),new K(5,42)),new ue(30,new K(5,24),new K(7,25)),new ue(24,new K(11,12),new K(7,13))),new tt(16,Int32Array.from([6,26,50,74]),new ue(24,new K(5,98),new K(1,99)),new ue(28,new K(7,45),new K(3,46)),new ue(24,new K(15,19),new K(2,20)),new ue(30,new K(3,15),new K(13,16))),new tt(17,Int32Array.from([6,30,54,78]),new ue(28,new K(1,107),new K(5,108)),new ue(28,new K(10,46),new K(1,47)),new ue(28,new K(1,22),new K(15,23)),new ue(28,new K(2,14),new K(17,15))),new tt(18,Int32Array.from([6,30,56,82]),new ue(30,new K(5,120),new K(1,121)),new ue(26,new K(9,43),new K(4,44)),new ue(28,new K(17,22),new K(1,23)),new ue(28,new K(2,14),new K(19,15))),new tt(19,Int32Array.from([6,30,58,86]),new ue(28,new K(3,113),new K(4,114)),new ue(26,new K(3,44),new K(11,45)),new ue(26,new K(17,21),new K(4,22)),new ue(26,new K(9,13),new K(16,14))),new tt(20,Int32Array.from([6,34,62,90]),new ue(28,new K(3,107),new K(5,108)),new ue(26,new K(3,41),new K(13,42)),new ue(30,new K(15,24),new K(5,25)),new ue(28,new K(15,15),new K(10,16))),new tt(21,Int32Array.from([6,28,50,72,94]),new ue(28,new K(4,116),new K(4,117)),new ue(26,new K(17,42)),new ue(28,new K(17,22),new K(6,23)),new ue(30,new K(19,16),new K(6,17))),new tt(22,Int32Array.from([6,26,50,74,98]),new ue(28,new K(2,111),new K(7,112)),new ue(28,new K(17,46)),new ue(30,new K(7,24),new K(16,25)),new ue(24,new K(34,13))),new tt(23,Int32Array.from([6,30,54,78,102]),new ue(30,new K(4,121),new K(5,122)),new ue(28,new K(4,47),new K(14,48)),new ue(30,new K(11,24),new K(14,25)),new ue(30,new K(16,15),new K(14,16))),new tt(24,Int32Array.from([6,28,54,80,106]),new ue(30,new K(6,117),new K(4,118)),new ue(28,new K(6,45),new K(14,46)),new ue(30,new K(11,24),new K(16,25)),new ue(30,new K(30,16),new K(2,17))),new tt(25,Int32Array.from([6,32,58,84,110]),new ue(26,new K(8,106),new K(4,107)),new ue(28,new K(8,47),new K(13,48)),new ue(30,new K(7,24),new K(22,25)),new ue(30,new K(22,15),new K(13,16))),new tt(26,Int32Array.from([6,30,58,86,114]),new ue(28,new K(10,114),new K(2,115)),new ue(28,new K(19,46),new K(4,47)),new ue(28,new K(28,22),new K(6,23)),new ue(30,new K(33,16),new K(4,17))),new tt(27,Int32Array.from([6,34,62,90,118]),new ue(30,new K(8,122),new K(4,123)),new ue(28,new K(22,45),new K(3,46)),new ue(30,new K(8,23),new K(26,24)),new ue(30,new K(12,15),new K(28,16))),new tt(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new K(3,117),new K(10,118)),new ue(28,new K(3,45),new K(23,46)),new ue(30,new K(4,24),new K(31,25)),new ue(30,new K(11,15),new K(31,16))),new tt(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new K(7,116),new K(7,117)),new ue(28,new K(21,45),new K(7,46)),new ue(30,new K(1,23),new K(37,24)),new ue(30,new K(19,15),new K(26,16))),new tt(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new K(5,115),new K(10,116)),new ue(28,new K(19,47),new K(10,48)),new ue(30,new K(15,24),new K(25,25)),new ue(30,new K(23,15),new K(25,16))),new tt(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new K(13,115),new K(3,116)),new ue(28,new K(2,46),new K(29,47)),new ue(30,new K(42,24),new K(1,25)),new ue(30,new K(23,15),new K(28,16))),new tt(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new K(17,115)),new ue(28,new K(10,46),new K(23,47)),new ue(30,new K(10,24),new K(35,25)),new ue(30,new K(19,15),new K(35,16))),new tt(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new K(17,115),new K(1,116)),new ue(28,new K(14,46),new K(21,47)),new ue(30,new K(29,24),new K(19,25)),new ue(30,new K(11,15),new K(46,16))),new tt(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new K(13,115),new K(6,116)),new ue(28,new K(14,46),new K(23,47)),new ue(30,new K(44,24),new K(7,25)),new ue(30,new K(59,16),new K(1,17))),new tt(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new K(12,121),new K(7,122)),new ue(28,new K(12,47),new K(26,48)),new ue(30,new K(39,24),new K(14,25)),new ue(30,new K(22,15),new K(41,16))),new tt(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new K(6,121),new K(14,122)),new ue(28,new K(6,47),new K(34,48)),new ue(30,new K(46,24),new K(10,25)),new ue(30,new K(2,15),new K(64,16))),new tt(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new K(17,122),new K(4,123)),new ue(28,new K(29,46),new K(14,47)),new ue(30,new K(49,24),new K(10,25)),new ue(30,new K(24,15),new K(46,16))),new tt(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new K(4,122),new K(18,123)),new ue(28,new K(13,46),new K(32,47)),new ue(30,new K(48,24),new K(14,25)),new ue(30,new K(42,15),new K(32,16))),new tt(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new K(20,117),new K(4,118)),new ue(28,new K(40,47),new K(7,48)),new ue(30,new K(43,24),new K(22,25)),new ue(30,new K(10,15),new K(67,16))),new tt(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new K(19,118),new K(6,119)),new ue(28,new K(18,47),new K(31,48)),new ue(30,new K(34,24),new K(34,25)),new ue(30,new K(20,15),new K(61,16)))];var Ln;(function(F){F[F.DATA_MASK_000=0]="DATA_MASK_000",F[F.DATA_MASK_001=1]="DATA_MASK_001",F[F.DATA_MASK_010=2]="DATA_MASK_010",F[F.DATA_MASK_011=3]="DATA_MASK_011",F[F.DATA_MASK_100=4]="DATA_MASK_100",F[F.DATA_MASK_101=5]="DATA_MASK_101",F[F.DATA_MASK_110=6]="DATA_MASK_110",F[F.DATA_MASK_111=7]="DATA_MASK_111"})(Ln||(Ln={}));class Er{constructor(i,l){this.value=i,this.isMasked=l}unmaskBitMatrix(i,l){for(let c=0;c<l;c++)for(let f=0;f<l;f++)this.isMasked(c,f)&&i.flip(f,c)}}Er.values=new Map([[Ln.DATA_MASK_000,new Er(Ln.DATA_MASK_000,(F,i)=>(F+i&1)===0)],[Ln.DATA_MASK_001,new Er(Ln.DATA_MASK_001,(F,i)=>(F&1)===0)],[Ln.DATA_MASK_010,new Er(Ln.DATA_MASK_010,(F,i)=>i%3===0)],[Ln.DATA_MASK_011,new Er(Ln.DATA_MASK_011,(F,i)=>(F+i)%3===0)],[Ln.DATA_MASK_100,new Er(Ln.DATA_MASK_100,(F,i)=>(Math.floor(F/2)+Math.floor(i/3)&1)===0)],[Ln.DATA_MASK_101,new Er(Ln.DATA_MASK_101,(F,i)=>F*i%6===0)],[Ln.DATA_MASK_110,new Er(Ln.DATA_MASK_110,(F,i)=>F*i%6<3)],[Ln.DATA_MASK_111,new Er(Ln.DATA_MASK_111,(F,i)=>(F+i+F*i%3&1)===0)]]);class Ti{constructor(i){const l=i.getHeight();if(l<21||(l&3)!==1)throw new O;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let h=0;h<6;h++)i=this.copyBit(h,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let h=5;h>=0;h--)i=this.copyBit(8,h,i);const l=this.bitMatrix.getHeight();let c=0;const f=l-7;for(let h=l-1;h>=f;h--)c=this.copyBit(8,h,c);for(let h=l-8;h<l;h++)c=this.copyBit(h,8,c);if(this.parsedFormatInfo=nr.decodeFormatInformation(i,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),l=Math.floor((i-17)/4);if(l<=6)return tt.getVersionForNumber(l);let c=0;const f=i-11;for(let x=5;x>=0;x--)for(let y=i-9;y>=f;y--)c=this.copyBit(y,x,c);let h=tt.decodeVersionInformation(c);if(h!==null&&h.getDimensionForVersion()===i)return this.parsedVersion=h,h;c=0;for(let x=5;x>=0;x--)for(let y=i-9;y>=f;y--)c=this.copyBit(x,y,c);if(h=tt.decodeVersionInformation(c),h!==null&&h.getDimensionForVersion()===i)return this.parsedVersion=h,h;throw new O}copyBit(i,l,c){return(this.isMirror?this.bitMatrix.get(l,i):this.bitMatrix.get(i,l))?c<<1|1:c<<1}readCodewords(){const i=this.readFormatInformation(),l=this.readVersion(),c=Er.values.get(i.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const h=l.buildFunctionPattern();let x=!0;const y=new Uint8Array(l.getTotalCodewords());let C=0,E=0,D=0;for(let U=f-1;U>0;U-=2){U===6&&U--;for(let H=0;H<f;H++){const Z=x?f-1-H:H;for(let z=0;z<2;z++)h.get(U-z,Z)||(D++,E<<=1,this.bitMatrix.get(U-z,Z)&&(E|=1),D===8&&(y[C++]=E,D=0,E=0))}x=!x}if(C!==l.getTotalCodewords())throw new O;return y}remask(){if(this.parsedFormatInfo===null)return;const i=Er.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let l=0,c=i.getWidth();l<c;l++)for(let f=l+1,h=i.getHeight();f<h;f++)i.get(l,f)!==i.get(f,l)&&(i.flip(f,l),i.flip(l,f))}}class El{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l,c){if(i.length!==l.getTotalCodewords())throw new N;const f=l.getECBlocksForLevel(c);let h=0;const x=f.getECBlocks();for(const z of x)h+=z.getCount();const y=new Array(h);let C=0;for(const z of x)for(let $=0;$<z.getCount();$++){const X=z.getDataCodewords(),re=f.getECCodewordsPerBlock()+X;y[C++]=new El(X,new Uint8Array(re))}const E=y[0].codewords.length;let D=y.length-1;for(;D>=0&&y[D].codewords.length!==E;)D--;D++;const U=E-f.getECCodewordsPerBlock();let H=0;for(let z=0;z<U;z++)for(let $=0;$<C;$++)y[$].codewords[z]=i[H++];for(let z=D;z<C;z++)y[z].codewords[U]=i[H++];const Z=y[0].codewords.length;for(let z=U;z<Z;z++)for(let $=0;$<C;$++){const X=$<D?z:z+1;y[$].codewords[X]=i[H++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Lr;(function(F){F[F.TERMINATOR=0]="TERMINATOR",F[F.NUMERIC=1]="NUMERIC",F[F.ALPHANUMERIC=2]="ALPHANUMERIC",F[F.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",F[F.BYTE=4]="BYTE",F[F.ECI=5]="ECI",F[F.KANJI=6]="KANJI",F[F.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",F[F.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",F[F.HANZI=9]="HANZI"})(Lr||(Lr={}));class it{constructor(i,l,c,f){this.value=i,this.stringValue=l,this.characterCountBitsForVersions=c,this.bits=f,it.FOR_BITS.set(f,this),it.FOR_VALUE.set(i,this)}static forBits(i){const l=it.FOR_BITS.get(i);if(l===void 0)throw new N;return l}getCharacterCountBits(i){const l=i.getVersionNumber();let c;return l<=9?c=0:l<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof it))return!1;const l=i;return this.value===l.value}toString(){return this.stringValue}}it.FOR_BITS=new Map,it.FOR_VALUE=new Map,it.TERMINATOR=new it(Lr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),it.NUMERIC=new it(Lr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),it.ALPHANUMERIC=new it(Lr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),it.STRUCTURED_APPEND=new it(Lr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),it.BYTE=new it(Lr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),it.ECI=new it(Lr.ECI,"ECI",Int32Array.from([0,0,0]),7),it.KANJI=new it(Lr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),it.FNC1_FIRST_POSITION=new it(Lr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),it.FNC1_SECOND_POSITION=new it(Lr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),it.HANZI=new it(Lr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class mn{static decode(i,l,c,f){const h=new Cl(i);let x=new te;const y=new Array;let C=-1,E=-1;try{let D=null,U=!1,H;do{if(h.available()<4)H=it.TERMINATOR;else{const Z=h.readBits(4);H=it.forBits(Z)}switch(H){case it.TERMINATOR:break;case it.FNC1_FIRST_POSITION:case it.FNC1_SECOND_POSITION:U=!0;break;case it.STRUCTURED_APPEND:if(h.available()<16)throw new O;C=h.readBits(8),E=h.readBits(8);break;case it.ECI:const Z=mn.parseECIValue(h);if(D=W.getCharacterSetECIByValue(Z),D===null)throw new O;break;case it.HANZI:const z=h.readBits(4),$=h.readBits(H.getCharacterCountBits(l));z===mn.GB2312_SUBSET&&mn.decodeHanziSegment(h,x,$);break;default:const X=h.readBits(H.getCharacterCountBits(l));switch(H){case it.NUMERIC:mn.decodeNumericSegment(h,x,X);break;case it.ALPHANUMERIC:mn.decodeAlphanumericSegment(h,x,X,U);break;case it.BYTE:mn.decodeByteSegment(h,x,X,D,y,f);break;case it.KANJI:mn.decodeKanjiSegment(h,x,X);break;default:throw new O}break}}while(H!==it.TERMINATOR)}catch{throw new O}return new Ht(i,x.toString(),y.length===0?null:y,c===null?null:c.toString(),C,E)}static decodeHanziSegment(i,l,c){if(c*13>i.available())throw new O;const f=new Uint8Array(2*c);let h=0;for(;c>0;){const x=i.readBits(13);let y=x/96<<8&4294967295|x%96;y<959?y+=41377:y+=42657,f[h]=y>>8&255,f[h+1]=y&255,h+=2,c--}try{l.append(ce.decode(f,ne.GB2312))}catch(x){throw new O(x)}}static decodeKanjiSegment(i,l,c){if(c*13>i.available())throw new O;const f=new Uint8Array(2*c);let h=0;for(;c>0;){const x=i.readBits(13);let y=x/192<<8&4294967295|x%192;y<7936?y+=33088:y+=49472,f[h]=y>>8,f[h+1]=y,h+=2,c--}try{l.append(ce.decode(f,ne.SHIFT_JIS))}catch(x){throw new O(x)}}static decodeByteSegment(i,l,c,f,h,x){if(8*c>i.available())throw new O;const y=new Uint8Array(c);for(let E=0;E<c;E++)y[E]=i.readBits(8);let C;f===null?C=ne.guessEncoding(y,x):C=f.getName();try{l.append(ce.decode(y,C))}catch(E){throw new O(E)}h.push(y)}static toAlphaNumericChar(i){if(i>=mn.ALPHANUMERIC_CHARS.length)throw new O;return mn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,l,c,f){const h=l.length();for(;c>1;){if(i.available()<11)throw new O;const x=i.readBits(11);l.append(mn.toAlphaNumericChar(Math.floor(x/45))),l.append(mn.toAlphaNumericChar(x%45)),c-=2}if(c===1){if(i.available()<6)throw new O;l.append(mn.toAlphaNumericChar(i.readBits(6)))}if(f)for(let x=h;x<l.length();x++)l.charAt(x)==="%"&&(x<l.length()-1&&l.charAt(x+1)==="%"?l.deleteCharAt(x+1):l.setCharAt(x,String.fromCharCode(29)))}static decodeNumericSegment(i,l,c){for(;c>=3;){if(i.available()<10)throw new O;const f=i.readBits(10);if(f>=1e3)throw new O;l.append(mn.toAlphaNumericChar(Math.floor(f/100))),l.append(mn.toAlphaNumericChar(Math.floor(f/10)%10)),l.append(mn.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(i.available()<7)throw new O;const f=i.readBits(7);if(f>=100)throw new O;l.append(mn.toAlphaNumericChar(Math.floor(f/10))),l.append(mn.toAlphaNumericChar(f%10))}else if(c===1){if(i.available()<4)throw new O;const f=i.readBits(4);if(f>=10)throw new O;l.append(mn.toAlphaNumericChar(f))}}static parseECIValue(i){const l=i.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const c=i.readBits(8);return(l&63)<<8&4294967295|c}if((l&224)===192){const c=i.readBits(16);return(l&31)<<16&4294967295|c}throw new O}}mn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",mn.GB2312_SUBSET=1;class Vc{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const l=i[0];i[0]=i[2],i[2]=l}}class Ud{constructor(){this.rsDecoder=new ve(_e.QR_CODE_FIELD_256)}decodeBooleanArray(i,l){return this.decodeBitMatrix(Ne.parseFromBooleanArray(i),l)}decodeBitMatrix(i,l){const c=new Ti(i);let f=null;try{return this.decodeBitMatrixParser(c,l)}catch(h){f=h}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const h=this.decodeBitMatrixParser(c,l);return h.setOther(new Vc(!0)),h}catch(h){throw f!==null?f:h}}decodeBitMatrixParser(i,l){const c=i.readVersion(),f=i.readFormatInformation().getErrorCorrectionLevel(),h=i.readCodewords(),x=El.getDataBlocks(h,c,f);let y=0;for(const D of x)y+=D.getNumDataCodewords();const C=new Uint8Array(y);let E=0;for(const D of x){const U=D.getCodewords(),H=D.getNumDataCodewords();this.correctErrors(U,H);for(let Z=0;Z<H;Z++)C[E++]=U[Z]}return mn.decode(C,c,f,l)}correctErrors(i,l){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-l)}catch{throw new j}for(let f=0;f<l;f++)i[f]=c[f]}}class Sl extends ye{constructor(i,l,c){super(i,l),this.estimatedModuleSize=c}aboutEquals(i,l,c){if(Math.abs(l-this.getY())<=i&&Math.abs(c-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,l,c){const f=(this.getX()+l)/2,h=(this.getY()+i)/2,x=(this.estimatedModuleSize+c)/2;return new Sl(f,h,x)}}class _l{constructor(i,l,c,f,h,x,y){this.image=i,this.startX=l,this.startY=c,this.width=f,this.height=h,this.moduleSize=x,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,l=this.height,c=this.width,f=i+c,h=this.startY+l/2,x=new Int32Array(3),y=this.image;for(let C=0;C<l;C++){const E=h+(C&1?-Math.floor((C+1)/2):Math.floor((C+1)/2));x[0]=0,x[1]=0,x[2]=0;let D=i;for(;D<f&&!y.get(D,E);)D++;let U=0;for(;D<f;){if(y.get(D,E))if(U===1)x[1]++;else if(U===2){if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,E,D);if(H!==null)return H}x[0]=x[2],x[1]=1,x[2]=0,U=1}else x[++U]++;else U===1&&U++,x[U]++;D++}if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,E,f);if(H!==null)return H}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(i,l){return l-i[2]-i[1]/2}foundPatternCross(i){const l=this.moduleSize,c=l/2;for(let f=0;f<3;f++)if(Math.abs(l-i[f])>=c)return!1;return!0}crossCheckVertical(i,l,c,f){const h=this.image,x=h.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let C=i;for(;C>=0&&h.get(l,C)&&y[1]<=c;)y[1]++,C--;if(C<0||y[1]>c)return NaN;for(;C>=0&&!h.get(l,C)&&y[0]<=c;)y[0]++,C--;if(y[0]>c)return NaN;for(C=i+1;C<x&&h.get(l,C)&&y[1]<=c;)y[1]++,C++;if(C===x||y[1]>c)return NaN;for(;C<x&&!h.get(l,C)&&y[2]<=c;)y[2]++,C++;if(y[2]>c)return NaN;const E=y[0]+y[1]+y[2];return 5*Math.abs(E-f)>=2*f?NaN:this.foundPatternCross(y)?_l.centerFromEnd(y,C):NaN}handlePossibleCenter(i,l,c){const f=i[0]+i[1]+i[2],h=_l.centerFromEnd(i,c),x=this.crossCheckVertical(l,h,2*i[1],f);if(!isNaN(x)){const y=(i[0]+i[1]+i[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(y,x,h))return E.combineEstimate(x,h,y);const C=new Sl(h,x,y);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class Yc extends ye{constructor(i,l,c,f){super(i,l),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,l,c){if(Math.abs(l-this.getY())<=i&&Math.abs(c-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,l,c){const f=this.count+1,h=(this.count*this.getX()+l)/f,x=(this.count*this.getY()+i)/f,y=(this.count*this.estimatedModuleSize+c)/f;return new Yc(h,x,y,f)}}class Ep{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Hn{constructor(i,l){this.image=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const l=i!=null&&i.get(P.TRY_HARDER)!==void 0,c=i!=null&&i.get(P.PURE_BARCODE)!==void 0,f=this.image,h=f.getHeight(),x=f.getWidth();let y=Math.floor(3*h/(4*Hn.MAX_MODULES));(y<Hn.MIN_SKIP||l)&&(y=Hn.MIN_SKIP);let C=!1;const E=new Int32Array(5);for(let U=y-1;U<h&&!C;U+=y){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let H=0;for(let Z=0;Z<x;Z++)if(f.get(Z,U))(H&1)===1&&H++,E[H]++;else if(H&1)E[H]++;else if(H===4)if(Hn.foundPatternCross(E)){if(this.handlePossibleCenter(E,U,Z,c)===!0)if(y=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>E[2]&&(U+=$-E[2]-y,Z=x-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,H=3;continue}H=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,H=3;else E[++H]++;Hn.foundPatternCross(E)&&this.handlePossibleCenter(E,U,x,c)===!0&&(y=E[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return ye.orderBestPatterns(D),new Ep(D)}static centerFromEnd(i,l){return l-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let l=0;for(let h=0;h<5;h++){const x=i[h];if(x===0)return!1;l+=x}if(l<7)return!1;const c=l/7,f=c/2;return Math.abs(c-i[0])<f&&Math.abs(c-i[1])<f&&Math.abs(3*c-i[2])<3*f&&Math.abs(c-i[3])<f&&Math.abs(c-i[4])<f}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,l,c,f){const h=this.getCrossCheckStateCount();let x=0;const y=this.image;for(;i>=x&&l>=x&&y.get(l-x,i-x);)h[2]++,x++;if(i<x||l<x)return!1;for(;i>=x&&l>=x&&!y.get(l-x,i-x)&&h[1]<=c;)h[1]++,x++;if(i<x||l<x||h[1]>c)return!1;for(;i>=x&&l>=x&&y.get(l-x,i-x)&&h[0]<=c;)h[0]++,x++;if(h[0]>c)return!1;const C=y.getHeight(),E=y.getWidth();for(x=1;i+x<C&&l+x<E&&y.get(l+x,i+x);)h[2]++,x++;if(i+x>=C||l+x>=E)return!1;for(;i+x<C&&l+x<E&&!y.get(l+x,i+x)&&h[3]<c;)h[3]++,x++;if(i+x>=C||l+x>=E||h[3]>=c)return!1;for(;i+x<C&&l+x<E&&y.get(l+x,i+x)&&h[4]<c;)h[4]++,x++;if(h[4]>=c)return!1;const D=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(D-f)<2*f&&Hn.foundPatternCross(h)}crossCheckVertical(i,l,c,f){const h=this.image,x=h.getHeight(),y=this.getCrossCheckStateCount();let C=i;for(;C>=0&&h.get(l,C);)y[2]++,C--;if(C<0)return NaN;for(;C>=0&&!h.get(l,C)&&y[1]<=c;)y[1]++,C--;if(C<0||y[1]>c)return NaN;for(;C>=0&&h.get(l,C)&&y[0]<=c;)y[0]++,C--;if(y[0]>c)return NaN;for(C=i+1;C<x&&h.get(l,C);)y[2]++,C++;if(C===x)return NaN;for(;C<x&&!h.get(l,C)&&y[3]<c;)y[3]++,C++;if(C===x||y[3]>=c)return NaN;for(;C<x&&h.get(l,C)&&y[4]<c;)y[4]++,C++;if(y[4]>=c)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-f)>=2*f?NaN:Hn.foundPatternCross(y)?Hn.centerFromEnd(y,C):NaN}crossCheckHorizontal(i,l,c,f){const h=this.image,x=h.getWidth(),y=this.getCrossCheckStateCount();let C=i;for(;C>=0&&h.get(C,l);)y[2]++,C--;if(C<0)return NaN;for(;C>=0&&!h.get(C,l)&&y[1]<=c;)y[1]++,C--;if(C<0||y[1]>c)return NaN;for(;C>=0&&h.get(C,l)&&y[0]<=c;)y[0]++,C--;if(y[0]>c)return NaN;for(C=i+1;C<x&&h.get(C,l);)y[2]++,C++;if(C===x)return NaN;for(;C<x&&!h.get(C,l)&&y[3]<c;)y[3]++,C++;if(C===x||y[3]>=c)return NaN;for(;C<x&&h.get(C,l)&&y[4]<c;)y[4]++,C++;if(y[4]>=c)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-f)>=f?NaN:Hn.foundPatternCross(y)?Hn.centerFromEnd(y,C):NaN}handlePossibleCenter(i,l,c,f){const h=i[0]+i[1]+i[2]+i[3]+i[4];let x=Hn.centerFromEnd(i,c),y=this.crossCheckVertical(l,Math.floor(x),i[2],h);if(!isNaN(y)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(y),i[2],h),!isNaN(x)&&(!f||this.crossCheckDiagonal(Math.floor(y),Math.floor(x),i[2],h)))){const C=h/7;let E=!1;const D=this.possibleCenters;for(let U=0,H=D.length;U<H;U++){const Z=D[U];if(Z.aboutEquals(C,y,x)){D[U]=Z.combineEstimate(y,x,C),E=!0;break}}if(!E){const U=new Yc(x,y,C);D.push(U),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(U)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const c of this.possibleCenters)if(c.getCount()>=Hn.CENTER_QUORUM)if(l==null)l=c;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-c.getX())-Math.abs(l.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,l=0;const c=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=Hn.CENTER_QUORUM&&(i++,l+=x.getEstimatedModuleSize());if(i<3)return!1;const f=l/c;let h=0;for(const x of this.possibleCenters)h+=Math.abs(x.getEstimatedModuleSize()-f);return h<=.05*l}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ae;const l=this.possibleCenters;let c;if(i>3){let f=0,h=0;for(const C of this.possibleCenters){const E=C.getEstimatedModuleSize();f+=E,h+=E*E}c=f/i;let x=Math.sqrt(h/i-c*c);l.sort((C,E)=>{const D=Math.abs(E.getEstimatedModuleSize()-c),U=Math.abs(C.getEstimatedModuleSize()-c);return D<U?-1:D>U?1:0});const y=Math.max(.2*c,x);for(let C=0;C<l.length&&l.length>3;C++){const E=l[C];Math.abs(E.getEstimatedModuleSize()-c)>y&&(l.splice(C,1),C--)}}if(l.length>3){let f=0;for(const h of l)f+=h.getEstimatedModuleSize();c=f/l.length,l.sort((h,x)=>{if(x.getCount()===h.getCount()){const y=Math.abs(x.getEstimatedModuleSize()-c),C=Math.abs(h.getEstimatedModuleSize()-c);return y<C?1:y>C?-1:0}else return x.getCount()-h.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Hn.CENTER_QUORUM=2,Hn.MIN_SKIP=3,Hn.MAX_MODULES=57;class So{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(P.NEED_RESULT_POINT_CALLBACK);const c=new Hn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(c)}processFinderPatternInfo(i){const l=i.getTopLeft(),c=i.getTopRight(),f=i.getBottomLeft(),h=this.calculateModuleSize(l,c,f);if(h<1)throw new ae("No pattern found in proccess finder.");const x=So.computeDimension(l,c,f,h),y=tt.getProvisionalVersionForDimension(x),C=y.getDimensionForVersion()-7;let E=null;if(y.getAlignmentPatternCenters().length>0){const Z=c.getX()-l.getX()+f.getX(),z=c.getY()-l.getY()+f.getY(),$=1-3/C,X=Math.floor(l.getX()+$*(Z-l.getX())),re=Math.floor(l.getY()+$*(z-l.getY()));for(let xe=4;xe<=16;xe<<=1)try{E=this.findAlignmentInRegion(h,X,re,xe);break}catch(we){if(!(we instanceof ae))throw we}}const D=So.createTransform(l,c,f,E,x),U=So.sampleGrid(this.image,D,x);let H;return E===null?H=[f,l,c]:H=[f,l,c,E],new gt(U,H)}static createTransform(i,l,c,f,h){const x=h-3.5;let y,C,E,D;return f!==null?(y=f.getX(),C=f.getY(),E=x-3,D=E):(y=l.getX()-i.getX()+c.getX(),C=l.getY()-i.getY()+c.getY(),E=x,D=x),Pt.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,E,D,3.5,x,i.getX(),i.getY(),l.getX(),l.getY(),y,C,c.getX(),c.getY())}static sampleGrid(i,l,c){return en.getInstance().sampleGridWithTransform(i,c,c,l)}static computeDimension(i,l,c,f){const h=oe.round(ye.distance(i,l)/f),x=oe.round(ye.distance(i,c)/f);let y=Math.floor((h+x)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ae("Dimensions could be not found.")}return y}calculateModuleSize(i,l,c){return(this.calculateModuleSizeOneWay(i,l)+this.calculateModuleSizeOneWay(i,c))/2}calculateModuleSizeOneWay(i,l){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(l.getX()),Math.floor(l.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(i,l,c,f){let h=this.sizeOfBlackWhiteBlackRun(i,l,c,f),x=1,y=i-(c-i);y<0?(x=i/(i-y),y=0):y>=this.image.getWidth()&&(x=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let C=Math.floor(l-(f-l)*x);return x=1,C<0?(x=l/(l-C),C=0):C>=this.image.getHeight()&&(x=(this.image.getHeight()-1-l)/(C-l),C=this.image.getHeight()-1),y=Math.floor(i+(y-i)*x),h+=this.sizeOfBlackWhiteBlackRun(i,l,y,C),h-1}sizeOfBlackWhiteBlackRun(i,l,c,f){const h=Math.abs(f-l)>Math.abs(c-i);if(h){let Z=i;i=l,l=Z,Z=c,c=f,f=Z}const x=Math.abs(c-i),y=Math.abs(f-l);let C=-x/2;const E=i<c?1:-1,D=l<f?1:-1;let U=0;const H=c+E;for(let Z=i,z=l;Z!==H;Z+=E){const $=h?z:Z,X=h?Z:z;if(U===1===this.image.get($,X)){if(U===2)return oe.distance(Z,z,i,l);U++}if(C+=y,C>0){if(z===f)break;z+=D,C-=x}}return U===2?oe.distance(c+E,f,i,l):NaN}findAlignmentInRegion(i,l,c,f){const h=Math.floor(f*i),x=Math.max(0,l-h),y=Math.min(this.image.getWidth()-1,l+h);if(y-x<i*3)throw new ae("Alignment top exceeds estimated module size.");const C=Math.max(0,c-h),E=Math.min(this.image.getHeight()-1,c+h);if(E-C<i*3)throw new ae("Alignment bottom exceeds estimated module size.");return new _l(this.image,x,C,y-x,E-C,i,this.resultPointCallback).find()}}class va{constructor(){this.decoder=new Ud}getDecoder(){return this.decoder}decode(i,l){let c,f;if(l!=null&&l.get(P.PURE_BARCODE)!==void 0){const C=va.extractPureBits(i.getBlackMatrix());c=this.decoder.decodeBitMatrix(C,l),f=va.NO_POINTS}else{const C=new So(i.getBlackMatrix()).detect(l);c=this.decoder.decodeBitMatrix(C.getBits(),l),f=C.getPoints()}c.getOther()instanceof Vc&&c.getOther().applyMirroredCorrection(f);const h=new $e(c.getText(),c.getRawBytes(),void 0,f,De.QR_CODE,void 0),x=c.getByteSegments();x!==null&&h.putMetadata(at.BYTE_SEGMENTS,x);const y=c.getECLevel();return y!==null&&h.putMetadata(at.ERROR_CORRECTION_LEVEL,y),c.hasStructuredAppend()&&(h.putMetadata(at.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),h.putMetadata(at.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),h}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(l===null||c===null)throw new ae;const f=this.moduleSize(l,i);let h=l[1],x=c[1],y=l[0],C=c[0];if(y>=C||h>=x)throw new ae;if(x-h!==C-y&&(C=y+(x-h),C>=i.getWidth()))throw new ae;const E=Math.round((C-y+1)/f),D=Math.round((x-h+1)/f);if(E<=0||D<=0)throw new ae;if(D!==E)throw new ae;const U=Math.floor(f/2);h+=U,y+=U;const H=y+Math.floor((E-1)*f)-C;if(H>0){if(H>U)throw new ae;y-=H}const Z=h+Math.floor((D-1)*f)-x;if(Z>0){if(Z>U)throw new ae;h-=Z}const z=new Ne(E,D);for(let $=0;$<D;$++){const X=h+Math.floor($*f);for(let re=0;re<E;re++)i.get(y+Math.floor(re*f),X)&&z.set(re,$)}return z}static moduleSize(i,l){const c=l.getHeight(),f=l.getWidth();let h=i[0],x=i[1],y=!0,C=0;for(;h<f&&x<c;){if(y!==l.get(h,x)){if(++C===5)break;y=!y}h++,x++}if(h===f||x===c)throw new ae;return(h-i[0])/7}}va.NO_POINTS=new Array;class ut{PDF417Common(){}static getBitCountSum(i){return oe.sum(i)}static toIntArray(i){if(i==null||!i.length)return ut.EMPTY_INT_ARRAY;const l=new Int32Array(i.length);let c=0;for(const f of i)l[c++]=f;return l}static getCodeword(i){const l=A.binarySearch(ut.SYMBOL_TABLE,i&262143);return l<0?-1:(ut.CODEWORD_TABLE[l]-1)%ut.NUMBER_OF_CODEWORDS}}ut.NUMBER_OF_CODEWORDS=929,ut.MAX_CODEWORDS_IN_BARCODE=ut.NUMBER_OF_CODEWORDS-1,ut.MIN_ROWS_IN_BARCODE=3,ut.MAX_ROWS_IN_BARCODE=90,ut.MODULES_IN_CODEWORD=17,ut.MODULES_IN_STOP_PATTERN=18,ut.BARS_IN_MODULE=8,ut.EMPTY_INT_ARRAY=new Int32Array([]),ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Sp{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class vt{static detectMultiple(i,l,c){let f=i.getBlackMatrix(),h=vt.detect(c,f);return h.length||(f=f.clone(),f.rotate180(),h=vt.detect(c,f)),new Sp(f,h)}static detect(i,l){const c=new Array;let f=0,h=0,x=!1;for(;f<l.getHeight();){const y=vt.findVertices(l,f,h);if(y[0]==null&&y[3]==null){if(!x)break;x=!1,h=0;for(const C of c)C[1]!=null&&(f=Math.trunc(Math.max(f,C[1].getY()))),C[3]!=null&&(f=Math.max(f,Math.trunc(C[3].getY())));f+=vt.ROW_STEP;continue}if(x=!0,c.push(y),!i)break;y[2]!=null?(h=Math.trunc(y[2].getX()),f=Math.trunc(y[2].getY())):(h=Math.trunc(y[4].getX()),f=Math.trunc(y[4].getY()))}return c}static findVertices(i,l,c){const f=i.getHeight(),h=i.getWidth(),x=new Array(8);return vt.copyToResult(x,vt.findRowsWithPattern(i,f,h,l,c,vt.START_PATTERN),vt.INDEXES_START_PATTERN),x[4]!=null&&(c=Math.trunc(x[4].getX()),l=Math.trunc(x[4].getY())),vt.copyToResult(x,vt.findRowsWithPattern(i,f,h,l,c,vt.STOP_PATTERN),vt.INDEXES_STOP_PATTERN),x}static copyToResult(i,l,c){for(let f=0;f<c.length;f++)i[c[f]]=l[f]}static findRowsWithPattern(i,l,c,f,h,x){const y=new Array(4);let C=!1;const E=new Int32Array(x.length);for(;f<l;f+=vt.ROW_STEP){let U=vt.findGuardPattern(i,h,f,c,!1,x,E);if(U!=null){for(;f>0;){const H=vt.findGuardPattern(i,h,--f,c,!1,x,E);if(H!=null)U=H;else{f++;break}}y[0]=new ye(U[0],f),y[1]=new ye(U[1],f),C=!0;break}}let D=f+1;if(C){let U=0,H=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;D<l;D++){const Z=vt.findGuardPattern(i,H[0],D,c,!1,x,E);if(Z!=null&&Math.abs(H[0]-Z[0])<vt.MAX_PATTERN_DRIFT&&Math.abs(H[1]-Z[1])<vt.MAX_PATTERN_DRIFT)H=Z,U=0;else{if(U>vt.SKIPPED_ROW_COUNT_MAX)break;U++}}D-=U+1,y[2]=new ye(H[0],D),y[3]=new ye(H[1],D)}return D-f<vt.BARCODE_MIN_HEIGHT&&A.fill(y,null),y}static findGuardPattern(i,l,c,f,h,x,y){A.fillWithin(y,0,y.length,0);let C=l,E=0;for(;i.get(C,c)&&C>0&&E++<vt.MAX_PIXEL_DRIFT;)C--;let D=C,U=0,H=x.length;for(let Z=h;D<f;D++)if(i.get(D,c)!==Z)y[U]++;else{if(U===H-1){if(vt.patternMatchVariance(y,x,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return new Int32Array([C,D]);C+=y[0]+y[1],R.arraycopy(y,2,y,0,U-1),y[U-1]=0,y[U]=0,U--}else U++;y[U]=1,Z=!Z}return U===H-1&&vt.patternMatchVariance(y,x,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE?new Int32Array([C,D-1]):null}static patternMatchVariance(i,l,c){let f=i.length,h=0,x=0;for(let E=0;E<f;E++)h+=i[E],x+=l[E];if(h<x)return 1/0;let y=h/x;c*=y;let C=0;for(let E=0;E<f;E++){let D=i[E],U=l[E]*y,H=D>U?D-U:U-D;if(H>c)return 1/0;C+=H}return C/h}}vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),vt.MAX_AVG_VARIANCE=.42,vt.MAX_INDIVIDUAL_VARIANCE=.8,vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),vt.MAX_PIXEL_DRIFT=3,vt.MAX_PATTERN_DRIFT=5,vt.SKIPPED_ROW_COUNT_MAX=25,vt.ROW_STEP=5,vt.BARCODE_MIN_HEIGHT=10;class rr{constructor(i,l){if(l.length===0)throw new N;this.field=i;let c=l.length;if(c>1&&l[0]===0){let f=1;for(;f<c&&l[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),R.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let f=0;for(let h of this.coefficients)f=this.field.add(f,h);return f}let l=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)l=this.field.add(this.field.multiply(i,l),this.coefficients[f]);return l}add(i){if(!this.field.equals(i.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,c=i.coefficients;if(l.length>c.length){let x=l;l=c,c=x}let f=new Int32Array(c.length),h=c.length-l.length;R.arraycopy(c,0,f,0,h);for(let x=h;x<c.length;x++)f[x]=this.field.add(l[x-h],c[x]);return new rr(this.field,f)}subtract(i){if(!this.field.equals(i.field))throw new N("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof rr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new rr(this.field,new Int32Array([0]));let l=this.coefficients,c=l.length,f=i.coefficients,h=f.length,x=new Int32Array(c+h-1);for(let y=0;y<c;y++){let C=l[y];for(let E=0;E<h;E++)x[y+E]=this.field.add(x[y+E],this.field.multiply(C,f[E]))}return new rr(this.field,x)}negative(){let i=this.coefficients.length,l=new Int32Array(i);for(let c=0;c<i;c++)l[c]=this.field.subtract(0,this.coefficients[c]);return new rr(this.field,l)}multiplyScalar(i){if(i===0)return new rr(this.field,new Int32Array([0]));if(i===1)return this;let l=this.coefficients.length,c=new Int32Array(l);for(let f=0;f<l;f++)c[f]=this.field.multiply(this.coefficients[f],i);return new rr(this.field,c)}multiplyByMonomial(i,l){if(i<0)throw new N;if(l===0)return new rr(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+i);for(let h=0;h<c;h++)f[h]=this.field.multiply(this.coefficients[h],l);return new rr(this.field,f)}toString(){let i=new te;for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);c!==0&&(c<0?(i.append(" - "),c=-c):i.length()>0&&i.append(" + "),(l===0||c!==1)&&i.append(c),l!==0&&(l===1?i.append("x"):(i.append("x^"),i.append(l))))}return i.toString()}}class _p{add(i,l){return(i+l)%this.modulus}subtract(i,l){return(this.modulus+i-l)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new N;return this.logTable[i]}inverse(i){if(i===0)throw new Lt;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class $c extends _p{constructor(i,l){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let c=1;for(let f=0;f<i;f++)this.expTable[f]=c,c=c*l%i;for(let f=0;f<i-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new rr(this,new Int32Array([0])),this.one=new rr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new N;if(l===0)return this.zero;let c=new Int32Array(i+1);return c[0]=l,new rr(this,c)}}$c.PDF417_GF=new $c(ut.NUMBER_OF_CODEWORDS,3);class qd{constructor(){this.field=$c.PDF417_GF}decode(i,l,c){let f=new rr(this.field,i),h=new Int32Array(l),x=!1;for(let z=l;z>0;z--){let $=f.evaluateAt(this.field.exp(z));h[l-z]=$,$!==0&&(x=!0)}if(!x)return 0;let y=this.field.getOne();if(c!=null)for(const z of c){let $=this.field.exp(i.length-1-z),X=new rr(this.field,new Int32Array([this.field.subtract(0,$),1]));y=y.multiply(X)}let C=new rr(this.field,h),E=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),C,l),D=E[0],U=E[1],H=this.findErrorLocations(D),Z=this.findErrorMagnitudes(U,D,H);for(let z=0;z<H.length;z++){let $=i.length-1-this.field.log(H[z]);if($<0)throw j.getChecksumInstance();i[$]=this.field.subtract(i[$],Z[z])}return H.length}runEuclideanAlgorithm(i,l,c){if(i.getDegree()<l.getDegree()){let H=i;i=l,l=H}let f=i,h=l,x=this.field.getZero(),y=this.field.getOne();for(;h.getDegree()>=Math.round(c/2);){let H=f,Z=x;if(f=h,x=y,f.isZero())throw j.getChecksumInstance();h=H;let z=this.field.getZero(),$=f.getCoefficient(f.getDegree()),X=this.field.inverse($);for(;h.getDegree()>=f.getDegree()&&!h.isZero();){let re=h.getDegree()-f.getDegree(),xe=this.field.multiply(h.getCoefficient(h.getDegree()),X);z=z.add(this.field.buildMonomial(re,xe)),h=h.subtract(f.multiplyByMonomial(re,xe))}y=z.multiply(x).subtract(Z).negative()}let C=y.getCoefficient(0);if(C===0)throw j.getChecksumInstance();let E=this.field.inverse(C),D=y.multiply(E),U=h.multiply(E);return[D,U]}findErrorLocations(i){let l=i.getDegree(),c=new Int32Array(l),f=0;for(let h=1;h<this.field.getSize()&&f<l;h++)i.evaluateAt(h)===0&&(c[f]=this.field.inverse(h),f++);if(f!==l)throw j.getChecksumInstance();return c}findErrorMagnitudes(i,l,c){let f=l.getDegree(),h=new Int32Array(f);for(let E=1;E<=f;E++)h[f-E]=this.field.multiply(E,l.getCoefficient(E));let x=new rr(this.field,h),y=c.length,C=new Int32Array(y);for(let E=0;E<y;E++){let D=this.field.inverse(c[E]),U=this.field.subtract(0,i.evaluateAt(D)),H=this.field.inverse(x.evaluateAt(D));C[E]=this.field.multiply(U,H)}return C}}class Va{constructor(i,l,c,f,h){i instanceof Va?this.constructor_2(i):this.constructor_1(i,l,c,f,h)}constructor_1(i,l,c,f,h){const x=l==null||c==null,y=f==null||h==null;if(x&&y)throw new ae;x?(l=new ye(0,f.getY()),c=new ye(0,h.getY())):y&&(f=new ye(i.getWidth()-1,l.getY()),h=new ye(i.getWidth()-1,c.getY())),this.image=i,this.topLeft=l,this.bottomLeft=c,this.topRight=f,this.bottomRight=h,this.minX=Math.trunc(Math.min(l.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),h.getX())),this.minY=Math.trunc(Math.min(l.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),h.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,l){return i==null?l:l==null?i:new Va(i.image,i.topLeft,i.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(i,l,c){let f=this.topLeft,h=this.bottomLeft,x=this.topRight,y=this.bottomRight;if(i>0){let C=c?this.topLeft:this.topRight,E=Math.trunc(C.getY()-i);E<0&&(E=0);let D=new ye(C.getX(),E);c?f=D:x=D}if(l>0){let C=c?this.bottomLeft:this.bottomRight,E=Math.trunc(C.getY()+l);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let D=new ye(C.getX(),E);c?h=D:y=D}return new Va(this.image,f,h,x,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class fn{constructor(i,l,c,f){this.columnCount=i,this.errorCorrectionLevel=f,this.rowCountUpperPart=l,this.rowCountLowerPart=c,this.rowCount=l+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class $t{constructor(){this.buffer=""}static form(i,l){let c=-1;function f(x,y,C,E,D,U){if(x==="%%")return"%";if(l[++c]===void 0)return;x=E?parseInt(E.substr(1)):void 0;let H=D?parseInt(D.substr(1)):void 0,Z;switch(U){case"s":Z=l[c];break;case"c":Z=l[c][0];break;case"f":Z=parseFloat(l[c]).toFixed(x);break;case"p":Z=parseFloat(l[c]).toPrecision(x);break;case"e":Z=parseFloat(l[c]).toExponential(x);break;case"x":Z=parseInt(l[c]).toString(H||16);break;case"d":Z=parseFloat(parseInt(l[c],H||10).toPrecision(x)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(H);let z=parseInt(C),$=C&&C[0]+""=="0"?"0":" ";for(;Z.length<z;)Z=y!==void 0?Z+$:$+Z;return Z}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(h,f)}format(i,...l){this.buffer+=$t.form(i,l)}toString(){return this.buffer}}class _o{constructor(i){this.boundingBox=new Va(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let l=this.getCodeword(i);if(l!=null)return l;for(let c=1;c<_o.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(i)-c;if(f>=0&&(l=this.codewords[f],l!=null)||(f=this.imageRowToCodewordIndex(i)+c,f<this.codewords.length&&(l=this.codewords[f],l!=null)))return l}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,l){this.codewords[this.imageRowToCodewordIndex(i)]=l}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new $t;let l=0;for(const c of this.codewords){if(c==null){i.format("%3d:    |   %n",l++);continue}i.format("%3d: %3d|%3d%n",l++,c.getRowNumber(),c.getValue())}return i.toString()}}_o.MAX_NEARBY_DISTANCE=5;class jo{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let l=this.values.get(i);l==null&&(l=0),l++,this.values.set(i,l)}getValue(){let i=-1,l=new Array;for(const[c,f]of this.values.entries()){const h={getKey:()=>c,getValue:()=>f};h.getValue()>i?(i=h.getValue(),l=[],l.push(h.getKey())):h.getValue()===i&&l.push(h.getKey())}return ut.toIntArray(l)}getConfidence(i){return this.values.get(i)}}class zd extends _o{constructor(i,l){super(i),this._isLeft=l}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,i);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),h=this._isLeft?c.getBottomLeft():c.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.imageRowToCodewordIndex(Math.trunc(h.getY())),C=-1,E=1,D=0;for(let U=x;U<y;U++){if(l[U]==null)continue;let H=l[U],Z=H.getRowNumber()-C;if(Z===0)D++;else if(Z===1)E=Math.max(E,D),D=1,C=H.getRowNumber();else if(Z<0||H.getRowNumber()>=i.getRowCount()||Z>U)l[U]=null;else{let z;E>2?z=(E-2)*Z:z=Z;let $=z>=U;for(let X=1;X<=z&&!$;X++)$=l[U-X]!=null;$?l[U]=null:(C=H.getRowNumber(),D=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let l=new Int32Array(i.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=l.length)continue;l[f]++}return l}adjustIncompleteIndicatorColumnRowNumbers(i){let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.getCodewords(),C=-1;for(let E=h;E<x;E++){if(y[E]==null)continue;let D=y[E];D.setRowNumberAsRowIndicatorColumn();let U=D.getRowNumber()-C;U===0||(U===1?C=D.getRowNumber():D.getRowNumber()>=i.getRowCount()?y[E]=null:C=D.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),l=new jo,c=new jo,f=new jo,h=new jo;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let C=y.getValue()%30,E=y.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:c.setValue(C*3+1);break;case 1:h.setValue(C/3),f.setValue(C%3);break;case 2:l.setValue(C+1);break}}if(l.getValue().length===0||c.getValue().length===0||f.getValue().length===0||h.getValue().length===0||l.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<ut.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>ut.MAX_ROWS_IN_BARCODE)return null;let x=new fn(l.getValue()[0],c.getValue()[0],f.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(i,x),x}removeIncorrectCodewords(i,l){for(let c=0;c<i.length;c++){let f=i[c];if(i[c]==null)continue;let h=f.getValue()%30,x=f.getRowNumber();if(x>l.getRowCount()){i[c]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:h*3+1!==l.getRowCountUpperPart()&&(i[c]=null);break;case 1:(Math.trunc(h/3)!==l.getErrorCorrectionLevel()||h%3!==l.getRowCountLowerPart())&&(i[c]=null);break;case 2:h+1!==l.getColumnCount()&&(i[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ao{constructor(i,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=ut.MAX_CODEWORDS_IN_BARCODE,l;do l=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let c=this.detectionResultColumns[l].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(l,f,c))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<i.length;c++)if(i[c]!=null&&l[c]!=null&&i[c].getRowNumber()===l[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let h=this.detectionResultColumns[f].getCodewords()[c];h!=null&&(h.setRowNumber(i[c].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let f=l[c].getRowNumber(),h=0;for(let x=this.barcodeColumnCount+1;x>0&&h<this.ADJUST_ROW_NUMBER_SKIP;x--){let y=this.detectionResultColumns[x].getCodewords()[c];y!=null&&(h=Ao.adjustRowNumberIfValid(f,h,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,l=this.detectionResultColumns[0].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let f=l[c].getRowNumber(),h=0;for(let x=1;x<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;x++){let y=this.detectionResultColumns[x].getCodewords()[c];y!=null&&(h=Ao.adjustRowNumberIfValid(f,h,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,l,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(i)?(c.setRowNumber(i),l=0):++l),l}adjustRowNumbers(i,l,c){if(!this.detectionResultColumns[i-1])return;let f=c[l],h=this.detectionResultColumns[i-1].getCodewords(),x=h;this.detectionResultColumns[i+1]!=null&&(x=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=h[l],y[3]=x[l],l>0&&(y[0]=c[l-1],y[4]=h[l-1],y[5]=x[l-1]),l>1&&(y[8]=c[l-2],y[10]=h[l-2],y[11]=x[l-2]),l<c.length-1&&(y[1]=c[l+1],y[6]=h[l+1],y[7]=x[l+1]),l<c.length-2&&(y[9]=c[l+2],y[12]=h[l+2],y[13]=x[l+2]);for(let C of y)if(Ao.adjustRowNumber(f,C))return}static adjustRowNumber(i,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===i.getBucket()?(i.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,l){this.detectionResultColumns[i]=l}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new $t;for(let c=0;c<i.getCodewords().length;c++){l.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){l.format("    |   ");continue}let h=this.detectionResultColumns[f].getCodewords()[c];if(h==null){l.format("    |   ");continue}l.format(" %3d|%3d",h.getRowNumber(),h.getValue())}l.format("%n")}return l.toString()}}class ko{constructor(i,l,c,f){this.rowNumber=ko.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(l),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==ko.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}ko.BARCODE_ROW_UNKNOWN=-1;class Sr{static initialize(){for(let i=0;i<ut.SYMBOL_TABLE.length;i++){let l=ut.SYMBOL_TABLE[i],c=l&1;for(let f=0;f<ut.BARS_IN_MODULE;f++){let h=0;for(;(l&1)===c;)h+=1,l>>=1;c=l&1,Sr.RATIOS_TABLE[i]||(Sr.RATIOS_TABLE[i]=new Array(ut.BARS_IN_MODULE)),Sr.RATIOS_TABLE[i][ut.BARS_IN_MODULE-f-1]=Math.fround(h/ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let l=Sr.getDecodedCodewordValue(Sr.sampleBitCounts(i));return l!==-1?l:Sr.getClosestDecodedValue(i)}static sampleBitCounts(i){let l=oe.sum(i),c=new Int32Array(ut.BARS_IN_MODULE),f=0,h=0;for(let x=0;x<ut.MODULES_IN_CODEWORD;x++){let y=l/(2*ut.MODULES_IN_CODEWORD)+x*l/ut.MODULES_IN_CODEWORD;h+i[f]<=y&&(h+=i[f],f++),c[f]++}return c}static getDecodedCodewordValue(i){let l=Sr.getBitValue(i);return ut.getCodeword(l)===-1?-1:l}static getBitValue(i){let l=0;for(let c=0;c<i.length;c++)for(let f=0;f<i[c];f++)l=l<<1|(c%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(i){let l=oe.sum(i),c=new Array(ut.BARS_IN_MODULE);if(l>1)for(let x=0;x<c.length;x++)c[x]=Math.fround(i[x]/l);let f=Ee.MAX_VALUE,h=-1;this.bSymbolTableReady||Sr.initialize();for(let x=0;x<Sr.RATIOS_TABLE.length;x++){let y=0,C=Sr.RATIOS_TABLE[x];for(let E=0;E<ut.BARS_IN_MODULE;E++){let D=Math.fround(C[E]-c[E]);if(y+=Math.fround(D*D),y>=f)break}y<f&&(f=y,h=ut.SYMBOL_TABLE[x])}return h}}Sr.bSymbolTableReady=!1,Sr.RATIOS_TABLE=new Array(ut.SYMBOL_TABLE.length).map(F=>new Array(ut.BARS_IN_MODULE));class Gc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Wd{static parseLong(i,l=void 0){return parseInt(i,l)}}class Kn extends g{}Kn.kind="NullPointerException";class Qc{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,l,c){if(i==null)throw new Kn;if(l<0||l>i.length||c<0||l+c>i.length||l+c<0)throw new T;if(c===0)return;for(let f=0;f<c;f++)this.write(i[l+f])}flush(){}close(){}}class Ya extends g{}class Hd extends Qc{constructor(i=32){if(super(),this.count=0,i<0)throw new N("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let c=this.buf.length<<1;if(c-i<0&&(c=i),c<0){if(i<0)throw new Ya;c=M.MAX_VALUE}this.buf=A.copyOfUint8Array(this.buf,c)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,l,c){if(l<0||l>i.length||c<0||l+c-i.length>0)throw new T;this.ensureCapacity(this.count+c),R.arraycopy(i,l,this.buf,this.count,c),this.count+=c}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return A.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Gt;(function(F){F[F.ALPHA=0]="ALPHA",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.PUNCT=3]="PUNCT",F[F.ALPHA_SHIFT=4]="ALPHA_SHIFT",F[F.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Gt||(Gt={}));function Pr(){if(typeof window<"u")return window.BigInt||null;if(typeof Aa<"u")return Aa.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let To;function Zs(F){if(typeof To>"u"&&(To=Pr()),To===null)throw new Error("BigInt is not supported!");return To(F)}function Vd(){let F=[];F[0]=Zs(1);let i=Zs(900);F[1]=i;for(let l=2;l<16;l++)F[l]=F[l-1]*i;return F}class pe{static decode(i,l){let c=new te(""),f=W.ISO8859_1;c.enableDecoding(f);let h=1,x=i[h++],y=new Gc;for(;h<i[0];){switch(x){case pe.TEXT_COMPACTION_MODE_LATCH:h=pe.textCompaction(i,h,c);break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:h=pe.byteCompaction(x,i,f,h,c);break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[h++]);break;case pe.NUMERIC_COMPACTION_MODE_LATCH:h=pe.numericCompaction(i,h,c);break;case pe.ECI_CHARSET:W.getCharacterSetECIByValue(i[h++]);break;case pe.ECI_GENERAL_PURPOSE:h+=2;break;case pe.ECI_USER_DEFINED:h++;break;case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=pe.decodeMacroBlock(i,h,y);break;case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:throw new O;default:h--,h=pe.textCompaction(i,h,c);break}if(h<i.length)x=i[h++];else throw O.getFormatInstance()}if(c.length()===0)throw O.getFormatInstance();let C=new Ht(null,c.toString(),null,l);return C.setOther(y),C}static decodeMacroBlock(i,l,c){if(l+pe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw O.getFormatInstance();let f=new Int32Array(pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<pe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,l++)f[y]=i[l];c.setSegmentIndex(M.parseInt(pe.decodeBase900toBase10(f,pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new te;l=pe.textCompaction(i,l,h),c.setFileId(h.toString());let x=-1;for(i[l]===pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=l+1);l<i[0];)switch(i[l]){case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,i[l]){case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new te;l=pe.textCompaction(i,l+1,y),c.setFileName(y.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new te;l=pe.textCompaction(i,l+1,C),c.setSender(C.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new te;l=pe.textCompaction(i,l+1,E),c.setAddressee(E.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new te;l=pe.numericCompaction(i,l+1,D),c.setSegmentCount(M.parseInt(D.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let U=new te;l=pe.numericCompaction(i,l+1,U),c.setTimestamp(Wd.parseLong(U.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let H=new te;l=pe.numericCompaction(i,l+1,H),c.setChecksum(M.parseInt(H.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new te;l=pe.numericCompaction(i,l+1,Z),c.setFileSize(Wd.parseLong(Z.toString()));break;default:throw O.getFormatInstance()}break;case pe.MACRO_PDF417_TERMINATOR:l++,c.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(x!==-1){let y=l-x;c.isLastSegment()&&y--,c.setOptionalData(A.copyOfRange(i,x,x+y))}return l}static textCompaction(i,l,c){let f=new Int32Array((i[0]-l)*2),h=new Int32Array((i[0]-l)*2),x=0,y=!1;for(;l<i[0]&&!y;){let C=i[l++];if(C<pe.TEXT_COMPACTION_MODE_LATCH)f[x]=C/30,f[x+1]=C%30,x+=2;else switch(C){case pe.TEXT_COMPACTION_MODE_LATCH:f[x++]=pe.TEXT_COMPACTION_MODE_LATCH;break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:l--,y=!0;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[x]=pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=i[l++],h[x]=C,x++;break}}return pe.decodeTextCompaction(f,h,x,c),l}static decodeTextCompaction(i,l,c,f){let h=Gt.ALPHA,x=Gt.ALPHA,y=0;for(;y<c;){let C=i[y],E="";switch(h){case Gt.ALPHA:if(C<26)E=String.fromCharCode(65+C);else switch(C){case 26:E=" ";break;case pe.LL:h=Gt.LOWER;break;case pe.ML:h=Gt.MIXED;break;case pe.PS:x=h,h=Gt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:h=Gt.ALPHA;break}break;case Gt.LOWER:if(C<26)E=String.fromCharCode(97+C);else switch(C){case 26:E=" ";break;case pe.AS:x=h,h=Gt.ALPHA_SHIFT;break;case pe.ML:h=Gt.MIXED;break;case pe.PS:x=h,h=Gt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:h=Gt.ALPHA;break}break;case Gt.MIXED:if(C<pe.PL)E=pe.MIXED_CHARS[C];else switch(C){case pe.PL:h=Gt.PUNCT;break;case 26:E=" ";break;case pe.LL:h=Gt.LOWER;break;case pe.AL:h=Gt.ALPHA;break;case pe.PS:x=h,h=Gt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:h=Gt.ALPHA;break}break;case Gt.PUNCT:if(C<pe.PAL)E=pe.PUNCT_CHARS[C];else switch(C){case pe.PAL:h=Gt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:h=Gt.ALPHA;break}break;case Gt.ALPHA_SHIFT:if(h=x,C<26)E=String.fromCharCode(65+C);else switch(C){case 26:E=" ";break;case pe.TEXT_COMPACTION_MODE_LATCH:h=Gt.ALPHA;break}break;case Gt.PUNCT_SHIFT:if(h=x,C<pe.PAL)E=pe.PUNCT_CHARS[C];else switch(C){case pe.PAL:h=Gt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:h=Gt.ALPHA;break}break}E!==""&&f.append(E),y++}}static byteCompaction(i,l,c,f,h){let x=new Hd,y=0,C=0,E=!1;switch(i){case pe.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),U=l[f++];for(;f<l[0]&&!E;)switch(D[y++]=U,C=900*C+U,U=l[f++],U){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:f--,E=!0;break;default:if(y%5===0&&y>0){for(let H=0;H<6;++H)x.write(Number(Zs(C)>>Zs(8*(5-H))));C=0,y=0}break}f===l[0]&&U<pe.TEXT_COMPACTION_MODE_LATCH&&(D[y++]=U);for(let H=0;H<y;H++)x.write(D[H]);break;case pe.BYTE_COMPACTION_MODE_LATCH_6:for(;f<l[0]&&!E;){let H=l[f++];if(H<pe.TEXT_COMPACTION_MODE_LATCH)y++,C=900*C+H;else switch(H){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:f--,E=!0;break}if(y%5===0&&y>0){for(let Z=0;Z<6;++Z)x.write(Number(Zs(C)>>Zs(8*(5-Z))));C=0,y=0}}break}return h.append(ce.decode(x.toByteArray(),c)),f}static numericCompaction(i,l,c){let f=0,h=!1,x=new Int32Array(pe.MAX_NUMERIC_CODEWORDS);for(;l<i[0]&&!h;){let y=i[l++];if(l===i[0]&&(h=!0),y<pe.TEXT_COMPACTION_MODE_LATCH)x[f]=y,f++;else switch(y){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:l--,h=!0;break}(f%pe.MAX_NUMERIC_CODEWORDS===0||y===pe.NUMERIC_COMPACTION_MODE_LATCH||h)&&f>0&&(c.append(pe.decodeBase900toBase10(x,f)),f=0)}return l}static decodeBase900toBase10(i,l){let c=Zs(0);for(let h=0;h<l;h++)c+=pe.EXP900[l-h-1]*Zs(i[h]);let f=c.toString();if(f.charAt(0)!=="1")throw new O;return f.substring(1)}}pe.TEXT_COMPACTION_MODE_LATCH=900,pe.BYTE_COMPACTION_MODE_LATCH=901,pe.NUMERIC_COMPACTION_MODE_LATCH=902,pe.BYTE_COMPACTION_MODE_LATCH_6=924,pe.ECI_USER_DEFINED=925,pe.ECI_GENERAL_PURPOSE=926,pe.ECI_CHARSET=927,pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pe.MACRO_PDF417_TERMINATOR=922,pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pe.MAX_NUMERIC_CODEWORDS=15,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pe.PL=25,pe.LL=27,pe.AS=27,pe.ML=28,pe.AL=28,pe.PS=29,pe.PAL=29,pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pe.EXP900=Pr()?Vd():[],pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class wt{constructor(){}static decode(i,l,c,f,h,x,y){let C=new Va(i,l,c,f,h),E=null,D=null,U;for(let z=!0;;z=!1){if(l!=null&&(E=wt.getRowIndicatorColumn(i,C,l,!0,x,y)),f!=null&&(D=wt.getRowIndicatorColumn(i,C,f,!1,x,y)),U=wt.merge(E,D),U==null)throw ae.getNotFoundInstance();let $=U.getBoundingBox();if(z&&$!=null&&($.getMinY()<C.getMinY()||$.getMaxY()>C.getMaxY()))C=$;else break}U.setBoundingBox(C);let H=U.getBarcodeColumnCount()+1;U.setDetectionResultColumn(0,E),U.setDetectionResultColumn(H,D);let Z=E!=null;for(let z=1;z<=H;z++){let $=Z?z:H-z;if(U.getDetectionResultColumn($)!==void 0)continue;let X;$===0||$===H?X=new zd(C,$===0):X=new _o(C),U.setDetectionResultColumn($,X);let re=-1,xe=re;for(let we=C.getMinY();we<=C.getMaxY();we++){if(re=wt.getStartColumn(U,$,we,Z),re<0||re>C.getMaxX()){if(xe===-1)continue;re=xe}let Ce=wt.detectCodeword(i,C.getMinX(),C.getMaxX(),Z,re,we,x,y);Ce!=null&&(X.setCodeword(we,Ce),xe=re,x=Math.min(x,Ce.getWidth()),y=Math.max(y,Ce.getWidth()))}}return wt.createDecoderResult(U)}static merge(i,l){if(i==null&&l==null)return null;let c=wt.getBarcodeMetadata(i,l);if(c==null)return null;let f=Va.merge(wt.adjustBoundingBox(i),wt.adjustBoundingBox(l));return new Ao(c,f)}static adjustBoundingBox(i){if(i==null)return null;let l=i.getRowHeights();if(l==null)return null;let c=wt.getMax(l),f=0;for(let y of l)if(f+=c-y,y>0)break;let h=i.getCodewords();for(let y=0;f>0&&h[y]==null;y++)f--;let x=0;for(let y=l.length-1;y>=0&&(x+=c-l[y],!(l[y]>0));y--);for(let y=h.length-1;x>0&&h[y]==null;y--)x--;return i.getBoundingBox().addMissingRows(f,x,i.isLeft())}static getMax(i){let l=-1;for(let c of i)l=Math.max(l,c);return l}static getBarcodeMetadata(i,l){let c;if(i==null||(c=i.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let f;return l==null||(f=l.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(i,l,c,f,h,x){let y=new zd(l,f);for(let C=0;C<2;C++){let E=C===0?1:-1,D=Math.trunc(Math.trunc(c.getX()));for(let U=Math.trunc(Math.trunc(c.getY()));U<=l.getMaxY()&&U>=l.getMinY();U+=E){let H=wt.detectCodeword(i,0,i.getWidth(),f,D,U,h,x);H!=null&&(y.setCodeword(U,H),f?D=H.getStartX():D=H.getEndX())}}return y}static adjustCodewordCount(i,l){let c=l[0][1],f=c.getValue(),h=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-wt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(f.length===0){if(h<1||h>ut.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();c.setValue(h)}else f[0]!==h&&c.setValue(h)}static createDecoderResult(i){let l=wt.createBarcodeMatrix(i);wt.adjustCodewordCount(i,l);let c=new Array,f=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),h=[],x=new Array;for(let C=0;C<i.getBarcodeRowCount();C++)for(let E=0;E<i.getBarcodeColumnCount();E++){let D=l[C][E+1].getValue(),U=C*i.getBarcodeColumnCount()+E;D.length===0?c.push(U):D.length===1?f[U]=D[0]:(x.push(U),h.push(D))}let y=new Array(h.length);for(let C=0;C<y.length;C++)y[C]=h[C];return wt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),f,ut.toIntArray(c),ut.toIntArray(x),y)}static createDecoderResultFromAmbiguousValues(i,l,c,f,h){let x=new Int32Array(f.length),y=100;for(;y-- >0;){for(let C=0;C<x.length;C++)l[f[C]]=h[C][x[C]];try{return wt.decodeCodewords(l,i,c)}catch(C){if(!(C instanceof j))throw C}if(x.length===0)throw j.getChecksumInstance();for(let C=0;C<x.length;C++)if(x[C]<h[C].length-1){x[C]++;break}else if(x[C]=0,C===x.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(i){let l=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let f=0;f<l.length;f++)for(let h=0;h<l[f].length;h++)l[f][h]=new jo;let c=0;for(let f of i.getDetectionResultColumns()){if(f!=null){for(let h of f.getCodewords())if(h!=null){let x=h.getRowNumber();if(x>=0){if(x>=l.length)continue;l[x][c].setValue(h.getValue())}}}c++}return l}static isValidBarcodeColumn(i,l){return l>=0&&l<=i.getBarcodeColumnCount()+1}static getStartColumn(i,l,c,f){let h=f?1:-1,x=null;if(wt.isValidBarcodeColumn(i,l-h)&&(x=i.getDetectionResultColumn(l-h).getCodeword(c)),x!=null)return f?x.getEndX():x.getStartX();if(x=i.getDetectionResultColumn(l).getCodewordNearby(c),x!=null)return f?x.getStartX():x.getEndX();if(wt.isValidBarcodeColumn(i,l-h)&&(x=i.getDetectionResultColumn(l-h).getCodewordNearby(c)),x!=null)return f?x.getEndX():x.getStartX();let y=0;for(;wt.isValidBarcodeColumn(i,l-h);){l-=h;for(let C of i.getDetectionResultColumn(l).getCodewords())if(C!=null)return(f?C.getEndX():C.getStartX())+h*y*(C.getEndX()-C.getStartX());y++}return f?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,l,c,f,h,x,y,C){h=wt.adjustCodewordStartColumn(i,l,c,f,h,x);let E=wt.getModuleBitCount(i,l,c,f,h,x);if(E==null)return null;let D,U=oe.sum(E);if(f)D=h+U;else{for(let z=0;z<E.length/2;z++){let $=E[z];E[z]=E[E.length-1-z],E[E.length-1-z]=$}D=h,h=D-U}if(!wt.checkCodewordSkew(U,y,C))return null;let H=Sr.getDecodedValue(E),Z=ut.getCodeword(H);return Z===-1?null:new ko(h,D,wt.getCodewordBucketNumber(H),Z)}static getModuleBitCount(i,l,c,f,h,x){let y=h,C=new Int32Array(8),E=0,D=f?1:-1,U=f;for(;(f?y<c:y>=l)&&E<C.length;)i.get(y,x)===U?(C[E]++,y+=D):(E++,U=!U);return E===C.length||y===(f?c:l)&&E===C.length-1?C:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,l,c,f,h,x){let y=h,C=f?-1:1;for(let E=0;E<2;E++){for(;(f?y>=l:y<c)&&f===i.get(y,x);){if(Math.abs(h-y)>wt.CODEWORD_SKEW_SIZE)return h;y+=C}C=-C,f=!f}return y}static checkCodewordSkew(i,l,c){return l-wt.CODEWORD_SKEW_SIZE<=i&&i<=c+wt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,l,c){if(i.length===0)throw O.getFormatInstance();let f=1<<l+1,h=wt.correctErrors(i,c,f);wt.verifyCodewordCount(i,f);let x=pe.decode(i,""+l);return x.setErrorsCorrected(h),x.setErasures(c.length),x}static correctErrors(i,l,c){if(l!=null&&l.length>c/2+wt.MAX_ERRORS||c<0||c>wt.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return wt.errorCorrection.decode(i,c,l)}static verifyCodewordCount(i,l){if(i.length<4)throw O.getFormatInstance();let c=i[0];if(c>i.length)throw O.getFormatInstance();if(c===0)if(l<i.length)i[0]=i.length-l;else throw O.getFormatInstance()}static getBitCountForCodeword(i){let l=new Int32Array(8),c=0,f=l.length-1;for(;!((i&1)!==c&&(c=i&1,f--,f<0));)l[f]++,i>>=1;return l}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return wt.getCodewordBucketNumber(wt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let l=new $t;for(let c=0;c<i.length;c++){l.format("Row %2d: ",c);for(let f=0;f<i[c].length;f++){let h=i[c][f];h.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}l.format("%n")}return l.toString()}}wt.CODEWORD_SKEW_SIZE=2,wt.MAX_ERRORS=3,wt.MAX_EC_CODEWORDS=512,wt.errorCorrection=new qd;class Zn{decode(i,l=null){let c=Zn.decode(i,l,!1);if(c==null||c.length===0||c[0]==null)throw ae.getNotFoundInstance();return c[0]}decodeMultiple(i,l=null){try{return Zn.decode(i,l,!0)}catch(c){throw c instanceof O||c instanceof j?ae.getNotFoundInstance():c}}static decode(i,l,c){const f=new Array,h=vt.detectMultiple(i,l,c);for(const x of h.getPoints()){const y=wt.decode(h.getBits(),x[4],x[5],x[6],x[7],Zn.getMinCodewordWidth(x),Zn.getMaxCodewordWidth(x)),C=new $e(y.getText(),y.getRawBytes(),void 0,x,De.PDF_417);C.putMetadata(at.ERROR_CORRECTION_LEVEL,y.getECLevel());const E=y.getOther();E!=null&&C.putMetadata(at.PDF417_EXTRA_METADATA,E),f.push(C)}return f.map(x=>x)}static getMaxWidth(i,l){return i==null||l==null?0:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMinWidth(i,l){return i==null||l==null?M.MAX_VALUE:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Zn.getMaxWidth(i[0],i[4]),Zn.getMaxWidth(i[6],i[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.max(Zn.getMaxWidth(i[1],i[5]),Zn.getMaxWidth(i[7],i[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Zn.getMinWidth(i[0],i[4]),Zn.getMinWidth(i[6],i[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.min(Zn.getMinWidth(i[1],i[5]),Zn.getMinWidth(i[7],i[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class cr extends g{}cr.kind="ReaderException";class Yd{constructor(i,l){this.verbose=i===!0,l&&this.setHints(l)}decode(i,l){return l&&this.setHints(l),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const l=!r(i)&&i.get(P.TRY_HARDER)===!0,c=r(i)?null:i.get(P.POSSIBLE_FORMATS),f=new Array;if(!r(c)){const h=c.some(x=>x===De.UPC_A||x===De.UPC_E||x===De.EAN_13||x===De.EAN_8||x===De.CODABAR||x===De.CODE_39||x===De.CODE_93||x===De.CODE_128||x===De.ITF||x===De.RSS_14||x===De.RSS_EXPANDED);h&&!l&&f.push(new Ha(i,this.verbose)),c.includes(De.QR_CODE)&&f.push(new va),c.includes(De.DATA_MATRIX)&&f.push(new us),c.includes(De.AZTEC)&&f.push(new As),c.includes(De.PDF_417)&&f.push(new Zn),h&&l&&f.push(new Ha(i,this.verbose))}f.length===0&&(l||f.push(new Ha(i,this.verbose)),f.push(new va),f.push(new us),f.push(new As),f.push(new Zn),l&&f.push(new Ha(i,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new cr("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(i,this.hints)}catch(c){if(c instanceof cr)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class Xr extends Te{constructor(i=null,l=500){const c=new Yd;c.setHints(i),super(c,l)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class jp extends Te{constructor(i=500){super(new Zn,i)}}class $d extends Te{constructor(i=500){super(new va,i)}}var Rs;(function(F){F[F.ERROR_CORRECTION=0]="ERROR_CORRECTION",F[F.CHARACTER_SET=1]="CHARACTER_SET",F[F.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",F[F.MIN_SIZE=3]="MIN_SIZE",F[F.MAX_SIZE=4]="MAX_SIZE",F[F.MARGIN=5]="MARGIN",F[F.PDF417_COMPACT=6]="PDF417_COMPACT",F[F.PDF417_COMPACTION=7]="PDF417_COMPACTION",F[F.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",F[F.AZTEC_LAYERS=9]="AZTEC_LAYERS",F[F.QR_VERSION=10]="QR_VERSION"})(Rs||(Rs={}));var Cn=Rs;class Do{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Bt(i,Int32Array.from([1])))}buildGenerator(i){const l=this.cachedGenerators;if(i>=l.length){let c=l[l.length-1];const f=this.field;for(let h=l.length;h<=i;h++){const x=c.multiply(new Bt(f,Int32Array.from([1,f.exp(h-1+f.getGeneratorBase())])));l.push(x),c=x}}return l[i]}encode(i,l){if(l===0)throw new N("No error correction bytes");const c=i.length-l;if(c<=0)throw new N("No data bytes provided");const f=this.buildGenerator(l),h=new Int32Array(c);R.arraycopy(i,0,h,0,c);let x=new Bt(this.field,h);x=x.multiplyByMonomial(l,1);const C=x.divide(f)[1].getCoefficients(),E=l-C.length;for(let D=0;D<E;D++)i[c+D]=0;R.arraycopy(C,0,i,c+E,C.length)}}class pt{constructor(){}static applyMaskPenaltyRule1(i){return pt.applyMaskPenaltyRule1Internal(i,!0)+pt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let l=0;const c=i.getArray(),f=i.getWidth(),h=i.getHeight();for(let x=0;x<h-1;x++){const y=c[x];for(let C=0;C<f-1;C++){const E=y[C];E===y[C+1]&&E===c[x+1][C]&&E===c[x+1][C+1]&&l++}}return pt.N2*l}static applyMaskPenaltyRule3(i){let l=0;const c=i.getArray(),f=i.getWidth(),h=i.getHeight();for(let x=0;x<h;x++)for(let y=0;y<f;y++){const C=c[x];y+6<f&&C[y]===1&&C[y+1]===0&&C[y+2]===1&&C[y+3]===1&&C[y+4]===1&&C[y+5]===0&&C[y+6]===1&&(pt.isWhiteHorizontal(C,y-4,y)||pt.isWhiteHorizontal(C,y+7,y+11))&&l++,x+6<h&&c[x][y]===1&&c[x+1][y]===0&&c[x+2][y]===1&&c[x+3][y]===1&&c[x+4][y]===1&&c[x+5][y]===0&&c[x+6][y]===1&&(pt.isWhiteVertical(c,y,x-4,x)||pt.isWhiteVertical(c,y,x+7,x+11))&&l++}return l*pt.N3}static isWhiteHorizontal(i,l,c){l=Math.max(l,0),c=Math.min(c,i.length);for(let f=l;f<c;f++)if(i[f]===1)return!1;return!0}static isWhiteVertical(i,l,c,f){c=Math.max(c,0),f=Math.min(f,i.length);for(let h=c;h<f;h++)if(i[h][l]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let l=0;const c=i.getArray(),f=i.getWidth(),h=i.getHeight();for(let C=0;C<h;C++){const E=c[C];for(let D=0;D<f;D++)E[D]===1&&l++}const x=i.getHeight()*i.getWidth();return Math.floor(Math.abs(l*2-x)*10/x)*pt.N4}static getDataMaskBit(i,l,c){let f,h;switch(i){case 0:f=c+l&1;break;case 1:f=c&1;break;case 2:f=l%3;break;case 3:f=(c+l)%3;break;case 4:f=Math.floor(c/2)+Math.floor(l/3)&1;break;case 5:h=c*l,f=(h&1)+h%3;break;case 6:h=c*l,f=(h&1)+h%3&1;break;case 7:h=c*l,f=h%3+(c+l&1)&1;break;default:throw new N("Invalid mask pattern: "+i)}return f===0}static applyMaskPenaltyRule1Internal(i,l){let c=0;const f=l?i.getHeight():i.getWidth(),h=l?i.getWidth():i.getHeight(),x=i.getArray();for(let y=0;y<f;y++){let C=0,E=-1;for(let D=0;D<h;D++){const U=l?x[y][D]:x[D][y];U===E?C++:(C>=5&&(c+=pt.N1+(C-5)),C=1,E=U)}C>=5&&(c+=pt.N1+(C-5))}return c}}pt.N1=3,pt.N2=3,pt.N3=40,pt.N4=10;class ds{constructor(i,l){this.width=i,this.height=l;const c=new Array(l);for(let f=0;f!==l;f++)c[f]=new Uint8Array(i);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(i,l){return this.bytes[l][i]}getArray(){return this.bytes}setNumber(i,l,c){this.bytes[l][i]=c}setBoolean(i,l,c){this.bytes[l][i]=c?1:0}clear(i){for(const l of this.bytes)A.fill(l,i)}equals(i){if(!(i instanceof ds))return!1;const l=i;if(this.width!==l.width||this.height!==l.height)return!1;for(let c=0,f=this.height;c<f;++c){const h=this.bytes[c],x=l.bytes[c];for(let y=0,C=this.width;y<C;++y)if(h[y]!==x[y])return!1}return!0}toString(){const i=new te;for(let l=0,c=this.height;l<c;++l){const f=this.bytes[l];for(let h=0,x=this.width;h<x;++h)switch(f[h]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Js{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new te;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Js.NUM_MASK_PATTERNS}}Js.NUM_MASK_PATTERNS=8;class rn extends g{}rn.kind="WriterException";class ot{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,l,c,f,h){ot.clearMatrix(h),ot.embedBasicPatterns(c,h),ot.embedTypeInfo(l,f,h),ot.maybeEmbedVersionInfo(c,h),ot.embedDataBits(i,f,h)}static embedBasicPatterns(i,l){ot.embedPositionDetectionPatternsAndSeparators(l),ot.embedDarkDotAtLeftBottomCorner(l),ot.maybeEmbedPositionAdjustmentPatterns(i,l),ot.embedTimingPatterns(l)}static embedTypeInfo(i,l,c){const f=new B;ot.makeTypeInfoBits(i,l,f);for(let h=0,x=f.getSize();h<x;++h){const y=f.get(f.getSize()-1-h),C=ot.TYPE_INFO_COORDINATES[h],E=C[0],D=C[1];if(c.setBoolean(E,D,y),h<8){const U=c.getWidth()-h-1,H=8;c.setBoolean(U,H,y)}else{const H=c.getHeight()-7+(h-8);c.setBoolean(8,H,y)}}}static maybeEmbedVersionInfo(i,l){if(i.getVersionNumber()<7)return;const c=new B;ot.makeVersionInfoBits(i,c);let f=6*3-1;for(let h=0;h<6;++h)for(let x=0;x<3;++x){const y=c.get(f);f--,l.setBoolean(h,l.getHeight()-11+x,y),l.setBoolean(l.getHeight()-11+x,h,y)}}static embedDataBits(i,l,c){let f=0,h=-1,x=c.getWidth()-1,y=c.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);y>=0&&y<c.getHeight();){for(let C=0;C<2;++C){const E=x-C;if(!ot.isEmpty(c.get(E,y)))continue;let D;f<i.getSize()?(D=i.get(f),++f):D=!1,l!==255&&pt.getDataMaskBit(l,E,y)&&(D=!D),c.setBoolean(E,y,D)}y+=h}h=-h,y+=h,x-=2}if(f!==i.getSize())throw new rn("Not all bits consumed: "+f+"/"+i.getSize())}static findMSBSet(i){return 32-M.numberOfLeadingZeros(i)}static calculateBCHCode(i,l){if(l===0)throw new N("0 polynomial");const c=ot.findMSBSet(l);for(i<<=c-1;ot.findMSBSet(i)>=c;)i^=l<<ot.findMSBSet(i)-c;return i}static makeTypeInfoBits(i,l,c){if(!Js.isValidMaskPattern(l))throw new rn("Invalid mask pattern");const f=i.getBits()<<3|l;c.appendBits(f,5);const h=ot.calculateBCHCode(f,ot.TYPE_INFO_POLY);c.appendBits(h,10);const x=new B;if(x.appendBits(ot.TYPE_INFO_MASK_PATTERN,15),c.xor(x),c.getSize()!==15)throw new rn("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(i,l){l.appendBits(i.getVersionNumber(),6);const c=ot.calculateBCHCode(i.getVersionNumber(),ot.VERSION_INFO_POLY);if(l.appendBits(c,12),l.getSize()!==18)throw new rn("should not happen but we got: "+l.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let l=8;l<i.getWidth()-8;++l){const c=(l+1)%2;ot.isEmpty(i.get(l,6))&&i.setNumber(l,6,c),ot.isEmpty(i.get(6,l))&&i.setNumber(6,l,c)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new rn;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,l,c){for(let f=0;f<8;++f){if(!ot.isEmpty(c.get(i+f,l)))throw new rn;c.setNumber(i+f,l,0)}}static embedVerticalSeparationPattern(i,l,c){for(let f=0;f<7;++f){if(!ot.isEmpty(c.get(i,l+f)))throw new rn;c.setNumber(i,l+f,0)}}static embedPositionAdjustmentPattern(i,l,c){for(let f=0;f<5;++f){const h=ot.POSITION_ADJUSTMENT_PATTERN[f];for(let x=0;x<5;++x)c.setNumber(i+x,l+f,h[x])}}static embedPositionDetectionPattern(i,l,c){for(let f=0;f<7;++f){const h=ot.POSITION_DETECTION_PATTERN[f];for(let x=0;x<7;++x)c.setNumber(i+x,l+f,h[x])}}static embedPositionDetectionPatternsAndSeparators(i){const l=ot.POSITION_DETECTION_PATTERN[0].length;ot.embedPositionDetectionPattern(0,0,i),ot.embedPositionDetectionPattern(i.getWidth()-l,0,i),ot.embedPositionDetectionPattern(0,i.getWidth()-l,i);const c=8;ot.embedHorizontalSeparationPattern(0,c-1,i),ot.embedHorizontalSeparationPattern(i.getWidth()-c,c-1,i),ot.embedHorizontalSeparationPattern(0,i.getWidth()-c,i);const f=7;ot.embedVerticalSeparationPattern(f,0,i),ot.embedVerticalSeparationPattern(i.getHeight()-f-1,0,i),ot.embedVerticalSeparationPattern(f,i.getHeight()-f,i)}static maybeEmbedPositionAdjustmentPatterns(i,l){if(i.getVersionNumber()<2)return;const c=i.getVersionNumber()-1,f=ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let h=0,x=f.length;h!==x;h++){const y=f[h];if(y>=0)for(let C=0;C!==x;C++){const E=f[C];E>=0&&ot.isEmpty(l.get(E,y))&&ot.embedPositionAdjustmentPattern(E-2,y-2,l)}}}}ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ot.VERSION_INFO_POLY=7973,ot.TYPE_INFO_POLY=1335,ot.TYPE_INFO_MASK_PATTERN=21522;class Ap{constructor(i,l){this.dataBytes=i,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class hn{constructor(){}static calculateMaskPenalty(i){return pt.applyMaskPenaltyRule1(i)+pt.applyMaskPenaltyRule2(i)+pt.applyMaskPenaltyRule3(i)+pt.applyMaskPenaltyRule4(i)}static encode(i,l,c=null){let f=hn.DEFAULT_BYTE_MODE_ENCODING;const h=c!==null&&c.get(Cn.CHARACTER_SET)!==void 0;h&&(f=c.get(Cn.CHARACTER_SET).toString());const x=this.chooseMode(i,f),y=new B;if(x===it.BYTE&&(h||hn.DEFAULT_BYTE_MODE_ENCODING!==f)){const we=W.getCharacterSetECIByName(f);we!==void 0&&this.appendECI(we,y)}this.appendModeInfo(x,y);const C=new B;this.appendBytes(i,x,C,f);let E;if(c!==null&&c.get(Cn.QR_VERSION)!==void 0){const we=Number.parseInt(c.get(Cn.QR_VERSION).toString(),10);E=tt.getVersionForNumber(we);const Ce=this.calculateBitsNeeded(x,y,C,E);if(!this.willFit(Ce,E,l))throw new rn("Data too big for requested version")}else E=this.recommendVersion(l,x,y,C);const D=new B;D.appendBitArray(y);const U=x===it.BYTE?C.getSizeInBytes():i.length;this.appendLengthInfo(U,E,x,D),D.appendBitArray(C);const H=E.getECBlocksForLevel(l),Z=E.getTotalCodewords()-H.getTotalECCodewords();this.terminateBits(Z,D);const z=this.interleaveWithECBytes(D,E.getTotalCodewords(),Z,H.getNumBlocks()),$=new Js;$.setECLevel(l),$.setMode(x),$.setVersion(E);const X=E.getDimensionForVersion(),re=new ds(X,X),xe=this.chooseMaskPattern(z,l,E,re);return $.setMaskPattern(xe),ot.buildMatrix(z,l,E,xe,re),$.setMatrix(re),$}static recommendVersion(i,l,c,f){const h=this.calculateBitsNeeded(l,c,f,tt.getVersionForNumber(1)),x=this.chooseVersion(h,i),y=this.calculateBitsNeeded(l,c,f,x);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,l,c,f){return l.getSize()+i.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(i){return i<hn.ALPHANUMERIC_TABLE.length?hn.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,l=null){if(W.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(i))return it.KANJI;let c=!1,f=!1;for(let h=0,x=i.length;h<x;++h){const y=i.charAt(h);if(hn.isDigit(y))c=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)f=!0;else return it.BYTE}return f?it.ALPHANUMERIC:c?it.NUMERIC:it.BYTE}static isOnlyDoubleByteKanji(i){let l;try{l=ce.encode(i,W.SJIS)}catch{return!1}const c=l.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const h=l[f]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(i,l,c,f){let h=Number.MAX_SAFE_INTEGER,x=-1;for(let y=0;y<Js.NUM_MASK_PATTERNS;y++){ot.buildMatrix(i,l,c,y,f);let C=this.calculateMaskPenalty(f);C<h&&(h=C,x=y)}return x}static chooseVersion(i,l){for(let c=1;c<=40;c++){const f=tt.getVersionForNumber(c);if(hn.willFit(i,f,l))return f}throw new rn("Data too big")}static willFit(i,l,c){const f=l.getTotalCodewords(),x=l.getECBlocksForLevel(c).getTotalECCodewords(),y=f-x,C=(i+7)/8;return y>=C}static terminateBits(i,l){const c=i*8;if(l.getSize()>c)throw new rn("data bits cannot fit in the QR Code"+l.getSize()+" > "+c);for(let x=0;x<4&&l.getSize()<c;++x)l.appendBit(!1);const f=l.getSize()&7;if(f>0)for(let x=f;x<8;x++)l.appendBit(!1);const h=i-l.getSizeInBytes();for(let x=0;x<h;++x)l.appendBits(x&1?17:236,8);if(l.getSize()!==c)throw new rn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,l,c,f,h,x){if(f>=c)throw new rn("Block ID too large");const y=i%c,C=c-y,E=Math.floor(i/c),D=E+1,U=Math.floor(l/c),H=U+1,Z=E-U,z=D-H;if(Z!==z)throw new rn("EC bytes mismatch");if(c!==C+y)throw new rn("RS blocks mismatch");if(i!==(U+Z)*C+(H+z)*y)throw new rn("Total bytes mismatch");f<C?(h[0]=U,x[0]=Z):(h[0]=H,x[0]=z)}static interleaveWithECBytes(i,l,c,f){if(i.getSizeInBytes()!==c)throw new rn("Number of bits and data bytes does not match");let h=0,x=0,y=0;const C=new Array;for(let D=0;D<f;++D){const U=new Int32Array(1),H=new Int32Array(1);hn.getNumDataBytesAndNumECBytesForBlockID(l,c,f,D,U,H);const Z=U[0],z=new Uint8Array(Z);i.toBytes(8*h,z,0,Z);const $=hn.generateECBytes(z,H[0]);C.push(new Ap(z,$)),x=Math.max(x,Z),y=Math.max(y,$.length),h+=U[0]}if(c!==h)throw new rn("Data bytes does not match offset");const E=new B;for(let D=0;D<x;++D)for(const U of C){const H=U.getDataBytes();D<H.length&&E.appendBits(H[D],8)}for(let D=0;D<y;++D)for(const U of C){const H=U.getErrorCorrectionBytes();D<H.length&&E.appendBits(H[D],8)}if(l!==E.getSizeInBytes())throw new rn("Interleaving error: "+l+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(i,l){const c=i.length,f=new Int32Array(c+l);for(let x=0;x<c;x++)f[x]=i[x]&255;new Do(_e.QR_CODE_FIELD_256).encode(f,l);const h=new Uint8Array(l);for(let x=0;x<l;x++)h[x]=f[c+x];return h}static appendModeInfo(i,l){l.appendBits(i.getBits(),4)}static appendLengthInfo(i,l,c,f){const h=c.getCharacterCountBits(l);if(i>=1<<h)throw new rn(i+" is bigger than "+((1<<h)-1));f.appendBits(i,h)}static appendBytes(i,l,c,f){switch(l){case it.NUMERIC:hn.appendNumericBytes(i,c);break;case it.ALPHANUMERIC:hn.appendAlphanumericBytes(i,c);break;case it.BYTE:hn.append8BitBytes(i,c,f);break;case it.KANJI:hn.appendKanjiBytes(i,c);break;default:throw new rn("Invalid mode: "+l)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const l=hn.getDigit(i);return l>=0&&l<=9}static appendNumericBytes(i,l){const c=i.length;let f=0;for(;f<c;){const h=hn.getDigit(i.charAt(f));if(f+2<c){const x=hn.getDigit(i.charAt(f+1)),y=hn.getDigit(i.charAt(f+2));l.appendBits(h*100+x*10+y,10),f+=3}else if(f+1<c){const x=hn.getDigit(i.charAt(f+1));l.appendBits(h*10+x,7),f+=2}else l.appendBits(h,4),f++}}static appendAlphanumericBytes(i,l){const c=i.length;let f=0;for(;f<c;){const h=hn.getAlphanumericCode(i.charCodeAt(f));if(h===-1)throw new rn;if(f+1<c){const x=hn.getAlphanumericCode(i.charCodeAt(f+1));if(x===-1)throw new rn;l.appendBits(h*45+x,11),f+=2}else l.appendBits(h,6),f++}}static append8BitBytes(i,l,c){let f;try{f=ce.encode(i,c)}catch(h){throw new rn(h)}for(let h=0,x=f.length;h!==x;h++){const y=f[h];l.appendBits(y,8)}}static appendKanjiBytes(i,l){let c;try{c=ce.encode(i,W.SJIS)}catch(h){throw new rn(h)}const f=c.length;for(let h=0;h<f;h+=2){const x=c[h]&255,y=c[h+1]&255,C=x<<8&4294967295|y;let E=-1;if(C>=33088&&C<=40956?E=C-33088:C>=57408&&C<=60351&&(E=C-49472),E===-1)throw new rn("Invalid byte sequence");const D=(E>>8)*192+(E&255);l.appendBits(D,13)}}static appendECI(i,l){l.appendBits(it.ECI.getBits(),4),l.appendBits(i.getValue(),8)}}hn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),hn.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();class $a{write(i,l,c,f=null){if(i.length===0)throw new N("Found empty contents");if(l<0||c<0)throw new N("Requested dimensions are too small: "+l+"x"+c);let h=nn.L,x=$a.QUIET_ZONE_SIZE;f!==null&&(f.get(Cn.ERROR_CORRECTION)!==void 0&&(h=nn.fromString(f.get(Cn.ERROR_CORRECTION).toString())),f.get(Cn.MARGIN)!==void 0&&(x=Number.parseInt(f.get(Cn.MARGIN).toString(),10)));const y=hn.encode(i,h,f);return this.renderResult(y,l,c,x)}writeToDom(i,l,c,f,h=null){typeof i=="string"&&(i=document.querySelector(i));const x=this.write(l,c,f,h);i&&i.appendChild(x)}renderResult(i,l,c,f){const h=i.getMatrix();if(h===null)throw new Nt;const x=h.getWidth(),y=h.getHeight(),C=x+f*2,E=y+f*2,D=Math.max(l,C),U=Math.max(c,E),H=Math.min(Math.floor(D/C),Math.floor(U/E)),Z=Math.floor((D-x*H)/2),z=Math.floor((U-y*H)/2),$=this.createSVGElement(D,U);for(let X=0,re=z;X<y;X++,re+=H)for(let xe=0,we=Z;xe<x;xe++,we+=H)if(h.get(xe,X)===1){const Ce=this.createSvgRectElement(we,re,H,H);$.appendChild(Ce)}return $}createSVGElement(i,l){const c=document.createElementNS($a.SVG_NS,"svg");return c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c}createSvgRectElement(i,l,c,f){const h=document.createElementNS($a.SVG_NS,"rect");return h.setAttributeNS(null,"x",i.toString()),h.setAttributeNS(null,"y",l.toString()),h.setAttributeNS(null,"height",c.toString()),h.setAttributeNS(null,"width",f.toString()),h.setAttributeNS(null,"fill","#000000"),h}}$a.QUIET_ZONE_SIZE=4,$a.SVG_NS="http://www.w3.org/2000/svg";class Ga{encode(i,l,c,f,h){if(i.length===0)throw new N("Found empty contents");if(l!==De.QR_CODE)throw new N("Can only encode QR_CODE, but got "+l);if(c<0||f<0)throw new N(`Requested dimensions are too small: ${c}x${f}`);let x=nn.L,y=Ga.QUIET_ZONE_SIZE;h!==null&&(h.get(Cn.ERROR_CORRECTION)!==void 0&&(x=nn.fromString(h.get(Cn.ERROR_CORRECTION).toString())),h.get(Cn.MARGIN)!==void 0&&(y=Number.parseInt(h.get(Cn.MARGIN).toString(),10)));const C=hn.encode(i,x,h);return Ga.renderResult(C,c,f,y)}static renderResult(i,l,c,f){const h=i.getMatrix();if(h===null)throw new Nt;const x=h.getWidth(),y=h.getHeight(),C=x+f*2,E=y+f*2,D=Math.max(l,C),U=Math.max(c,E),H=Math.min(Math.floor(D/C),Math.floor(U/E)),Z=Math.floor((D-x*H)/2),z=Math.floor((U-y*H)/2),$=new Ne(D,U);for(let X=0,re=z;X<y;X++,re+=H)for(let xe=0,we=Z;xe<x;xe++,we+=H)h.get(xe,X)===1&&$.setRegion(we,re,H,H);return $}}Ga.QUIET_ZONE_SIZE=4;class jl{encode(i,l,c,f,h){let x;switch(l){case De.QR_CODE:x=new Ga;break;default:throw new N("No encoder available for format "+l)}return x.encode(i,l,c,f,h)}}class gr extends de{constructor(i,l,c,f,h,x,y,C){if(super(x,y),this.yuvData=i,this.dataWidth=l,this.dataHeight=c,this.left=f,this.top=h,f+x>l||h+y>c)throw new N("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(x,y)}getRow(i,l){if(i<0||i>=this.getHeight())throw new N("Requested row is outside the image: "+i);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const f=(i+this.top)*this.dataWidth+this.left;return R.arraycopy(this.yuvData,f,l,0,c),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.yuvData;const c=i*l,f=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return R.arraycopy(this.yuvData,h,f,0,c),f;for(let x=0;x<l;x++){const y=x*i;R.arraycopy(this.yuvData,h,f,y,i),h+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,l,c,f){return new gr(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+l,c,f,!1)}renderThumbnail(){const i=this.getWidth()/gr.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/gr.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(i*l),f=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let x=0;x<l;x++){const y=x*i;for(let C=0;C<i;C++){const E=f[h+C*gr.THUMBNAIL_SCALE_FACTOR]&255;c[y+C]=4278190080|E*65793}h+=this.dataWidth*gr.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/gr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/gr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,l){const c=this.yuvData;for(let f=0,h=this.top*this.dataWidth+this.left;f<l;f++,h+=this.dataWidth){const x=h+i/2;for(let y=h,C=h+i-1;y<x;y++,C--){const E=c[y];c[y]=c[C],c[C]=E}}}invert(){return new fe(this)}}gr.THUMBNAIL_SCALE_FACTOR=2;class Xc extends de{constructor(i,l,c,f,h,x,y){if(super(l,c),this.dataWidth=f,this.dataHeight=h,this.left=x,this.top=y,i.BYTES_PER_ELEMENT===4){const C=l*c,E=new Uint8ClampedArray(C);for(let D=0;D<C;D++){const U=i[D],H=U>>16&255,Z=U>>7&510,z=U&255;E[D]=(H+Z+z)/4&255}this.luminances=E}else this.luminances=i;if(f===void 0&&(this.dataWidth=l),h===void 0&&(this.dataHeight=c),x===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+c>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(i,l){if(i<0||i>=this.getHeight())throw new N("Requested row is outside the image: "+i);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const f=(i+this.top)*this.dataWidth+this.left;return R.arraycopy(this.luminances,f,l,0,c),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.luminances;const c=i*l,f=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return R.arraycopy(this.luminances,h,f,0,c),f;for(let x=0;x<l;x++){const y=x*i;R.arraycopy(this.luminances,h,f,y,i),h+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,l,c,f){return new Xc(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+i,this.top+l)}invert(){return new fe(this)}}class Kc extends W{static forName(i){return this.getCharacterSetECIByName(i)}}class Al{}Al.ISO_8859_1=W.ISO8859_1;class kl{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Tl{static singletonList(i){return[i]}static min(i,l){return i.sort(l)[0]}}class Gd{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Di extends Gd{constructor(i,l,c){super(i),this.value=l,this.bitCount=c}appendTo(i,l){i.appendBits(this.value,this.bitCount)}add(i,l){return new Di(this,i,l)}addBinaryShift(i,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Di(this,i,l)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+M.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Io extends Di{constructor(i,l,c){super(i,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=c}appendTo(i,l){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):c===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(l[this.binaryShiftStart+c],8)}addBinaryShift(i,l){return new Io(this,i,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Zc(F,i,l){return new Io(F,i,l)}function Ro(F,i,l){return new Di(F,i,l)}const Qd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pn=0,Ii=1,ur=2,Jc=3,fs=4,kp=new Di(null,0,0),eu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function Tp(F){for(let i of F)A.fill(i,-1);return F[Pn][fs]=0,F[Ii][fs]=0,F[Ii][Pn]=28,F[Jc][fs]=0,F[ur][fs]=0,F[ur][Pn]=15,F}const Xd=Tp(A.createInt32Array(6,6));class Ms{constructor(i,l,c,f){this.token=i,this.mode=l,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,l){let c=this.bitCount,f=this.token;if(i!==this.mode){let x=eu[this.mode][i];f=Ro(f,x&65535,x>>16),c+=x>>16}let h=i===ur?4:5;return f=Ro(f,l,h),new Ms(f,i,0,c+h)}shiftAndAppend(i,l){let c=this.token,f=this.mode===ur?4:5;return c=Ro(c,Xd[this.mode][i],f),c=Ro(c,l,5),new Ms(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(i){let l=this.token,c=this.mode,f=this.bitCount;if(this.mode===fs||this.mode===ur){let y=eu[c][Pn];l=Ro(l,y&65535,y>>16),f+=y>>16,c=Pn}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new Ms(l,c,this.binaryShiftByteCount+1,f+h);return x.binaryShiftByteCount===2047+31&&(x=x.endBinaryShift(i+1)),x}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=Zc(l,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ms(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let l=this.bitCount+(eu[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?l+=Ms.calculateBinaryShiftCost(i)-Ms.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(l+=10),l<=i.bitCount}toBitArray(i){let l=[];for(let f=this.endBinaryShift(i.length).token;f!==null;f=f.getPrevious())l.unshift(f);let c=new B;for(const f of l)f.appendTo(c,i);return c}toString(){return ne.format("%s bits=%d bytes=%d",Qd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Ms.INITIAL_STATE=new Ms(kp,Pn,0,0);function Ri(F){const i=ne.getCharCode(" "),l=ne.getCharCode("."),c=ne.getCharCode(",");F[Pn][i]=1;const f=ne.getCharCode("Z"),h=ne.getCharCode("A");for(let H=h;H<=f;H++)F[Pn][H]=H-h+2;F[Ii][i]=1;const x=ne.getCharCode("z"),y=ne.getCharCode("a");for(let H=y;H<=x;H++)F[Ii][H]=H-y+2;F[ur][i]=1;const C=ne.getCharCode("9"),E=ne.getCharCode("0");for(let H=E;H<=C;H++)F[ur][H]=H-E+2;F[ur][c]=12,F[ur][l]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let H=0;H<D.length;H++)F[Jc][ne.getCharCode(D[H])]=H;const U=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let H=0;H<U.length;H++)ne.getCharCode(U[H])>0&&(F[fs][ne.getCharCode(U[H])]=H);return F}const tu=Ri(A.createInt32Array(5,256));class Mo{constructor(i){this.text=i}encode(){const i=ne.getCharCode(" "),l=ne.getCharCode(`
`);let c=Tl.singletonList(Ms.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let x,y=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case ne.getCharCode("\r"):x=y===l?2:0;break;case ne.getCharCode("."):x=y===i?3:0;break;case ne.getCharCode(","):x=y===i?4:0;break;case ne.getCharCode(":"):x=y===i?5:0;break;default:x=0}x>0?(c=Mo.updateStateListForPair(c,h,x),h++):c=this.updateStateListForChar(c,h)}return Tl.min(c,(h,x)=>h.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,l){const c=[];for(let f of i)this.updateStateForChar(f,l,c);return Mo.simplifyStates(c)}updateStateForChar(i,l,c){let f=this.text[l]&255,h=tu[i.getMode()][f]>0,x=null;for(let y=0;y<=fs;y++){let C=tu[y][f];if(C>0){if(x==null&&(x=i.endBinaryShift(l)),!h||y===i.getMode()||y===ur){const E=x.latchAndAppend(y,C);c.push(E)}if(!h&&Xd[i.getMode()][y]>=0){const E=x.shiftAndAppend(y,C);c.push(E)}}}if(i.getBinaryShiftByteCount()>0||tu[i.getMode()][f]===0){let y=i.addBinaryShiftChar(l);c.push(y)}}static updateStateListForPair(i,l,c){const f=[];for(let h of i)this.updateStateForPair(h,l,c,f);return this.simplifyStates(f)}static updateStateForPair(i,l,c,f){let h=i.endBinaryShift(l);if(f.push(h.latchAndAppend(fs,c)),i.getMode()!==fs&&f.push(h.shiftAndAppend(fs,c)),c===3||c===4){let x=h.latchAndAppend(ur,16-c).latchAndAppend(ur,1);f.push(x)}if(i.getBinaryShiftByteCount()>0){let x=i.addBinaryShiftChar(l).addBinaryShiftChar(l+1);f.push(x)}}static simplifyStates(i){let l=[];for(const c of i){let f=!0;for(const h of l){if(h.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(h)&&(l=l.filter(x=>x!==h))}f&&l.push(c)}return l}}class At{constructor(){}static encodeBytes(i){return At.encode(i,At.DEFAULT_EC_PERCENT,At.DEFAULT_AZTEC_LAYERS)}static encode(i,l,c){let f=new Mo(i).encode(),h=M.truncDivision(f.getSize()*l,100)+11,x=f.getSize()+h,y,C,E,D,U;if(c!==At.DEFAULT_AZTEC_LAYERS){if(y=c<0,C=Math.abs(c),C>(y?At.MAX_NB_BITS_COMPACT:At.MAX_NB_BITS))throw new N(ne.format("Illegal value %s for layers",c));E=At.totalBitsInLayer(C,y),D=At.WORD_SIZE[C];let Ce=E-E%D;if(U=At.stuffBits(f,D),U.getSize()+h>Ce)throw new N("Data to large for user specified layer");if(y&&U.getSize()>D*64)throw new N("Data to large for user specified layer")}else{D=0,U=null;for(let Ce=0;;Ce++){if(Ce>At.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(y=Ce<=3,C=y?Ce+1:Ce,E=At.totalBitsInLayer(C,y),x>E)continue;(U==null||D!==At.WORD_SIZE[C])&&(D=At.WORD_SIZE[C],U=At.stuffBits(f,D));let Ze=E-E%D;if(!(y&&U.getSize()>D*64)&&U.getSize()+h<=Ze)break}}let H=At.generateCheckWords(U,E,D),Z=U.getSize()/D,z=At.generateModeMessage(y,C,Z),$=(y?11:14)+C*4,X=new Int32Array($),re;if(y){re=$;for(let Ce=0;Ce<X.length;Ce++)X[Ce]=Ce}else{re=$+1+2*M.truncDivision(M.truncDivision($,2)-1,15);let Ce=M.truncDivision($,2),Ze=M.truncDivision(re,2);for(let xt=0;xt<Ce;xt++){let _r=xt+M.truncDivision(xt,15);X[Ce-xt-1]=Ze-_r-1,X[Ce+xt]=Ze+_r+1}}let xe=new Ne(re);for(let Ce=0,Ze=0;Ce<C;Ce++){let xt=(C-Ce)*4+(y?9:12);for(let _r=0;_r<xt;_r++){let En=_r*2;for(let sr=0;sr<2;sr++)H.get(Ze+En+sr)&&xe.set(X[Ce*2+sr],X[Ce*2+_r]),H.get(Ze+xt*2+En+sr)&&xe.set(X[Ce*2+_r],X[$-1-Ce*2-sr]),H.get(Ze+xt*4+En+sr)&&xe.set(X[$-1-Ce*2-sr],X[$-1-Ce*2-_r]),H.get(Ze+xt*6+En+sr)&&xe.set(X[$-1-Ce*2-_r],X[Ce*2+sr])}Ze+=xt*8}if(At.drawModeMessage(xe,y,re,z),y)At.drawBullsEye(xe,M.truncDivision(re,2),5);else{At.drawBullsEye(xe,M.truncDivision(re,2),7);for(let Ce=0,Ze=0;Ce<M.truncDivision($,2)-1;Ce+=15,Ze+=16)for(let xt=M.truncDivision(re,2)&1;xt<re;xt+=2)xe.set(M.truncDivision(re,2)-Ze,xt),xe.set(M.truncDivision(re,2)+Ze,xt),xe.set(xt,M.truncDivision(re,2)-Ze),xe.set(xt,M.truncDivision(re,2)+Ze)}let we=new kl;return we.setCompact(y),we.setSize(re),we.setLayers(C),we.setCodeWords(Z),we.setMatrix(xe),we}static drawBullsEye(i,l,c){for(let f=0;f<c;f+=2)for(let h=l-f;h<=l+f;h++)i.set(h,l-f),i.set(h,l+f),i.set(l-f,h),i.set(l+f,h);i.set(l-c,l-c),i.set(l-c+1,l-c),i.set(l-c,l-c+1),i.set(l+c,l-c),i.set(l+c,l-c+1),i.set(l+c,l+c-1)}static generateModeMessage(i,l,c){let f=new B;return i?(f.appendBits(l-1,2),f.appendBits(c-1,6),f=At.generateCheckWords(f,28,4)):(f.appendBits(l-1,5),f.appendBits(c-1,11),f=At.generateCheckWords(f,40,4)),f}static drawModeMessage(i,l,c,f){let h=M.truncDivision(c,2);if(l)for(let x=0;x<7;x++){let y=h-3+x;f.get(x)&&i.set(y,h-5),f.get(x+7)&&i.set(h+5,y),f.get(20-x)&&i.set(y,h+5),f.get(27-x)&&i.set(h-5,y)}else for(let x=0;x<10;x++){let y=h-5+x+M.truncDivision(x,5);f.get(x)&&i.set(y,h-7),f.get(x+10)&&i.set(h+7,y),f.get(29-x)&&i.set(y,h+7),f.get(39-x)&&i.set(h-7,y)}}static generateCheckWords(i,l,c){let f=i.getSize()/c,h=new Do(At.getGF(c)),x=M.truncDivision(l,c),y=At.bitsToWords(i,c,x);h.encode(y,x-f);let C=l%c,E=new B;E.appendBits(0,C);for(const D of Array.from(y))E.appendBits(D,c);return E}static bitsToWords(i,l,c){let f=new Int32Array(c),h,x;for(h=0,x=i.getSize()/l;h<x;h++){let y=0;for(let C=0;C<l;C++)y|=i.get(h*l+C)?1<<l-C-1:0;f[h]=y}return f}static getGF(i){switch(i){case 4:return _e.AZTEC_PARAM;case 6:return _e.AZTEC_DATA_6;case 8:return _e.AZTEC_DATA_8;case 10:return _e.AZTEC_DATA_10;case 12:return _e.AZTEC_DATA_12;default:throw new N("Unsupported word size "+i)}}static stuffBits(i,l){let c=new B,f=i.getSize(),h=(1<<l)-2;for(let x=0;x<f;x+=l){let y=0;for(let C=0;C<l;C++)(x+C>=f||i.get(x+C))&&(y|=1<<l-1-C);(y&h)===h?(c.appendBits(y&h,l),x--):y&h?c.appendBits(y,l):(c.appendBits(y|1,l),x--)}return c}static totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}At.DEFAULT_EC_PERCENT=33,At.DEFAULT_AZTEC_LAYERS=0,At.MAX_NB_BITS=32,At.MAX_NB_BITS_COMPACT=4,At.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Oo{encode(i,l,c,f){return this.encodeWithHints(i,l,c,f,null)}encodeWithHints(i,l,c,f,h){let x=Al.ISO_8859_1,y=At.DEFAULT_EC_PERCENT,C=At.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(Cn.CHARACTER_SET)&&(x=Kc.forName(h.get(Cn.CHARACTER_SET).toString())),h.has(Cn.ERROR_CORRECTION)&&(y=M.parseInt(h.get(Cn.ERROR_CORRECTION).toString())),h.has(Cn.AZTEC_LAYERS)&&(C=M.parseInt(h.get(Cn.AZTEC_LAYERS).toString()))),Oo.encodeLayers(i,l,c,f,x,y,C)}static encodeLayers(i,l,c,f,h,x,y){if(l!==De.AZTEC)throw new N("Can only encode AZTEC, but got "+l);let C=At.encode(ne.getBytes(i,h),x,y);return Oo.renderResult(C,c,f)}static renderResult(i,l,c){let f=i.getMatrix();if(f==null)throw new Nt;let h=f.getWidth(),x=f.getHeight(),y=Math.max(l,h),C=Math.max(c,x),E=Math.min(y/h,C/x),D=(y-h*E)/2,U=(C-x*E)/2,H=new Ne(y,C);for(let Z=0,z=U;Z<x;Z++,z+=E)for(let $=0,X=D;$<h;$++,X+=E)f.get($,Z)&&H.setRegion(X,z,E,E);return H}}n.AbstractExpandedDecoder=zc,n.ArgumentException=w,n.ArithmeticException=Lt,n.AztecCode=kl,n.AztecCodeReader=As,n.AztecCodeWriter=Oo,n.AztecDecoder=qe,n.AztecDetector=os,n.AztecDetectorResult=pn,n.AztecEncoder=At,n.AztecHighLevelEncoder=Mo,n.AztecPoint=gn,n.BarcodeFormat=De,n.Binarizer=k,n.BinaryBitmap=S,n.BitArray=B,n.BitMatrix=Ne,n.BitSource=Cl,n.BrowserAztecCodeReader=qa,n.BrowserBarcodeReader=Fd,n.BrowserCodeReader=Te,n.BrowserDatamatrixCodeReader=Bd,n.BrowserMultiFormatReader=Xr,n.BrowserPDF417Reader=jp,n.BrowserQRCodeReader=$d,n.BrowserQRCodeSvgWriter=$a,n.CharacterSetECI=W,n.ChecksumException=j,n.Code128Reader=Pe,n.Code39Reader=dn,n.DataMatrixDecodedBitStreamParser=Is,n.DataMatrixReader=us,n.DecodeHintType=P,n.DecoderResult=Ht,n.DefaultGridSampler=un,n.DetectorResult=gt,n.EAN13Reader=ga,n.EncodeHintType=Cn,n.Exception=g,n.FormatException=O,n.GenericGF=_e,n.GenericGFPoly=Bt,n.GlobalHistogramBinarizer=Ae,n.GridSampler=rt,n.GridSamplerInstance=en,n.HTMLCanvasElementLuminanceSource=Be,n.HybridBinarizer=me,n.ITFReader=Mt,n.IllegalArgumentException=N,n.IllegalStateException=Nt,n.InvertedLuminanceSource=fe,n.LuminanceSource=de,n.MathUtils=oe,n.MultiFormatOneDReader=Ha,n.MultiFormatReader=Yd,n.MultiFormatWriter=jl,n.NotFoundException=ae,n.OneDReader=ln,n.PDF417DecodedBitStreamParser=pe,n.PDF417DecoderErrorCorrection=qd,n.PDF417Reader=Zn,n.PDF417ResultMetadata=Gc,n.PerspectiveTransform=Pt,n.PlanarYUVLuminanceSource=gr,n.QRCodeByteMatrix=ds,n.QRCodeDataMask=Er,n.QRCodeDecodedBitStreamParser=mn,n.QRCodeDecoderErrorCorrectionLevel=nn,n.QRCodeDecoderFormatInformation=nr,n.QRCodeEncoder=hn,n.QRCodeEncoderQRCode=Js,n.QRCodeMaskUtil=pt,n.QRCodeMatrixUtil=ot,n.QRCodeMode=it,n.QRCodeReader=va,n.QRCodeVersion=tt,n.QRCodeWriter=Ga,n.RGBLuminanceSource=Xc,n.RSS14Reader=vn,n.RSSExpandedReader=Ie,n.ReaderException=cr,n.ReedSolomonDecoder=ve,n.ReedSolomonEncoder=Do,n.ReedSolomonException=Ke,n.Result=$e,n.ResultMetadataType=at,n.ResultPoint=ye,n.StringUtils=ne,n.UnsupportedOperationException=ee,n.VideoInputDevice=Ye,n.WhiteRectangleDetector=Fe,n.WriterException=rn,n.ZXingArrays=A,n.ZXingCharset=Kc,n.ZXingInteger=M,n.ZXingStandardCharsets=Al,n.ZXingStringBuilder=te,n.ZXingStringEncoding=ce,n.ZXingSystem=R,n.createAbstractExpandedDecoder=Pd,Object.defineProperty(n,"__esModule",{value:!0})})})(Lx,Lx.exports);var wn=Lx.exports;const gL=kh(wn),vL=S3({__proto__:null,default:gL},[wn]);var _b=function(){function e(t,n,r){if(this.formatMap=new Map([[Ve.QR_CODE,wn.BarcodeFormat.QR_CODE],[Ve.AZTEC,wn.BarcodeFormat.AZTEC],[Ve.CODABAR,wn.BarcodeFormat.CODABAR],[Ve.CODE_39,wn.BarcodeFormat.CODE_39],[Ve.CODE_93,wn.BarcodeFormat.CODE_93],[Ve.CODE_128,wn.BarcodeFormat.CODE_128],[Ve.DATA_MATRIX,wn.BarcodeFormat.DATA_MATRIX],[Ve.MAXICODE,wn.BarcodeFormat.MAXICODE],[Ve.ITF,wn.BarcodeFormat.ITF],[Ve.EAN_13,wn.BarcodeFormat.EAN_13],[Ve.EAN_8,wn.BarcodeFormat.EAN_8],[Ve.PDF_417,wn.BarcodeFormat.PDF_417],[Ve.RSS_14,wn.BarcodeFormat.RSS_14],[Ve.RSS_EXPANDED,wn.BarcodeFormat.RSS_EXPANDED],[Ve.UPC_A,wn.BarcodeFormat.UPC_A],[Ve.UPC_E,wn.BarcodeFormat.UPC_E],[Ve.UPC_EAN_EXTENSION,wn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!vL)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var a=this.createZXingFormats(t),o=new Map;o.set(wn.DecodeHintType.POSSIBLE_FORMATS,a),o.set(wn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,a){try{r(n.decode(t))}catch(o){a(o)}})},e.prototype.decode=function(t){var n=new wn.MultiFormatReader(this.verbose,this.hints),r=new wn.HTMLCanvasElementLuminanceSource(t),a=new wn.BinaryBitmap(new wn.HybridBinarizer(r)),o=n.decode(a);return{text:o.text,format:xE.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var o=a[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),yL=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(N){d(N)}}function v(w){try{g(r.throw(w))}catch(N){d(N)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,t||[])).next())})},wL=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},jb=function(){function e(t,n,r){if(this.formatMap=new Map([[Ve.QR_CODE,"qr_code"],[Ve.AZTEC,"aztec"],[Ve.CODABAR,"codabar"],[Ve.CODE_39,"code_39"],[Ve.CODE_93,"code_93"],[Ve.CODE_128,"code_128"],[Ve.DATA_MATRIX,"data_matrix"],[Ve.ITF,"itf"],[Ve.EAN_13,"ean_13"],[Ve.EAN_8,"ean_8"],[Ve.PDF_417,"pdf417"],[Ve.UPC_A,"upc_a"],[Ve.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return yL(this,void 0,void 0,function(){var n,r;return wL(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:xE.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,a=0,o=t;a<o.length;a++){var d=o[a],m=d.boundingBox.width*d.boundingBox.height;m>r&&(r=m,n=d)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var o=a[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Ab=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(N){d(N)}}function v(w){try{g(r.throw(w))}catch(N){d(N)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,t||[])).next())})},kb=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},bL=function(){function e(t,n,r,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&jb.isSupported()?(this.primaryDecoder=new jb(t,r,a),this.secondaryDecoder=new _b(t,r,a)):this.primaryDecoder=new _b(t,r,a)}return e.prototype.decodeAsync=function(t){return Ab(this,void 0,void 0,function(){var n;return kb(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Ab(this,void 0,void 0,function(){var n,r;return kb(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(r=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var a=r[n];t+=a}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),v2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xh=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(N){d(N)}}function v(w){try{g(r.throw(w))}catch(N){d(N)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,t||[])).next())})},gh=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},vE=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),NL=function(e){v2(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var a={advanced:[r]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(vE),CL=function(e){v2(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(NL),EL=function(e){v2(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(vE),SL=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new CL(this.track)},e.prototype.torchFeature=function(){return new EL(this.track)},e}(),_L=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,a){return xh(this,void 0,void 0,function(){var o,d;return gh(this,function(m){switch(m.label){case 0:return o=new e(t,n,a),r.aspectRatio?(d={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:m.sent(),m.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return xh(this,void 0,void 0,function(){return gh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var a=t.mediaStream.getVideoTracks(),o=a.length,d=0;t.mediaStream.getVideoTracks().forEach(function(m){t.mediaStream.removeTrack(m),m.stop(),++d,d>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new SL(this.getFirstTrackOrFail())},e}(),jL=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return xh(this,void 0,void 0,function(){return gh(this,function(a){return[2,_L.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return xh(this,void 0,void 0,function(){var n,r;return gh(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=a.sent(),[2,new e(r)]}})})},e}(),Tb=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(N){d(N)}}function v(w){try{g(r.throw(w))}catch(N){d(N)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,t||[])).next())})},Db=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},AL=function(){function e(){}return e.failIfNotSupported=function(){return Tb(this,void 0,void 0,function(){return Db(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Tb(this,void 0,void 0,function(){return Db(this,function(n){return[2,jL.create(t)]})})},e}(),kL=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(N){d(N)}}function v(w){try{g(r.throw(w))}catch(N){d(N)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,t||[])).next())})},TL=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},DL=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=nc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=nc.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return kL(this,void 0,void 0,function(){var t,n,r,a,o,d,m;return TL(this,function(v){switch(v.label){case 0:return t=function(g){for(var w=g.getVideoTracks(),N=0,S=w;N<S.length;N++){var j=S[N];j.enabled=!1,j.stop(),g.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=v.sent(),a=[],o=0,d=r;o<d.length;o++)m=d[o],m.kind==="videoinput"&&a.push({id:m.deviceId,label:m.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(o){for(var d=[],m=0,v=o;m<v.length;m++){var g=v[m];g.kind==="video"&&d.push({id:g.id,label:g.label})}t(d)},a=MediaStreamTrack;a.getSources(r)})},e}(),Bn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Bn||(Bn={}));var IL=function(){function e(){this.state=Bn.NOT_STARTED,this.onGoingTransactionNewState=Bn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Bn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Bn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Bn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Bn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Bn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Bn.UNKNOWN:throw"Transition from unknown is not allowed";case Bn.NOT_STARTED:this.failIfNewStateIs(t,[Bn.PAUSED]);break;case Bn.SCANNING:break;case Bn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,a=n;r<a.length;r++){var o=a[r];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),RL=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Bn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Bn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Bn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Bn.PAUSED},e}(),ML=function(){function e(){}return e.create=function(){return new RL(new IL)},e}(),OL=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vs=function(e){OL(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(pL),LL=function(){function e(t,n){this.logger=n,this.fps=vs.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=vs.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?gE.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ai(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),PL=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new xL(this.verbose),this.qrcode=new bL(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ML.create()}return e.prototype.start=function(t,n,r,a){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;a?d=a:d=this.verbose?this.logger.log:function(){};var m=LL.create(n,this.logger);this.clearElement();var v=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=v,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:vs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var N=this,S=this.stateManagerProxy.startTransition(Bn.SCANNING);return new Promise(function(j,k){var R=g?m.videoConstraints:N.createVideoConstraints(t);if(!R){S.cancel(),k("videoConstraints should be defined");return}var T={};(!g||m.aspectRatio)&&(T.aspectRatio=m.aspectRatio);var I={onRenderSurfaceReady:function(A,M){N.setupUi(A,M,m),N.isScanning=!0,N.foreverScan(m,r,d)}};AL.failIfNotSupported().then(function(A){A.create(R).then(function(M){return M.render(o.element,T,I).then(function(B){N.renderedCamera=B,S.execute(),j(null)}).catch(function(B){S.cancel(),k(B)})}).catch(function(M){S.cancel(),k(nc.errorGettingUserMedia(M))})}).catch(function(A){S.cancel(),k(nc.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Bn.PAUSED),this.showPausedState(),(ai(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Bn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Bn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var o=document.getElementById(vs.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),r(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ai(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var d=new Image;d.onload=function(){var m=d.width,v=d.height,g=document.getElementById(r.elementId),w=g.clientWidth?g.clientWidth:vs.DEFAULT_WIDTH,N=Math.max(g.clientHeight?g.clientHeight:v,vs.FILE_SCAN_MIN_HEIGHT),S=r.computeCanvasDrawConfig(m,v,w,N);if(n){var j=r.createCanvasElement(w,N,"qr-canvas-visible");j.style.display="inline-block",g.appendChild(j);var k=j.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=w,k.canvas.height=N,k.drawImage(d,0,0,m,v,S.x,S.y,S.width,S.height)}var R=vs.FILE_SCAN_HIDDEN_CANVAS_PADDING,T=Math.max(d.width,S.width),I=Math.max(d.height,S.height),A=T+2*R,M=I+2*R,B=r.createCanvasElement(A,M);g.appendChild(B);var G=B.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=A,G.canvas.height=M,G.drawImage(d,0,0,m,v,R,R,T,I);try{r.qrcode.decodeRobustlyAsync(B).then(function(P){a(Sb.createFromQrcodeResult(P))}).catch(o)}catch(P){o("QR code parse error, error = ".concat(P))}},d.onerror=o,d.onabort=o,d.onstalled=o,d.onsuspend=o,d.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return DL.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!gE.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Ve.QR_CODE,Ve.AZTEC,Ve.CODABAR,Ve.CODE_39,Ve.CODE_93,Ve.CODE_128,Ve.DATA_MATRIX,Ve.MAXICODE,Ve.ITF,Ve.EAN_13,Ve.EAN_8,Ve.PDF_417,Ve.RSS_14,Ve.RSS_EXPANDED,Ve.UPC_A,Ve.UPC_E,Ve.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],a=0,o=t.formatsToSupport;a<o.length;a++){var d=o[a];hL(d)?r.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ai(t))return!0;if(!ai(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ai(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return ai(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var a=this,o=r.qrbox;this.validateQrboxConfig(o);var d=this.toQrdimensions(t,n,o),m=function(g){if(g<vs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(vs.MIN_QR_BOX_SIZE,"px.")},v=function(g){return g>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=t),g};m(d.width),m(d.height),d.width=v(d.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var a=ai(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(t,n,a);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=r.isShadedBoxEnabled()&&o.height<=n,m={x:0,y:0,width:t,height:n},v=d?this.getShadedRegionBounds(t,n,o):m,g=this.createCanvasElement(v.width,v.height),w={willReadFrequently:!0},N=g.getContext("2d",w);N.canvas.width=v.width,N.canvas.height=v.height,this.element.append(g),d&&this.possiblyInsertShadingElement(this.element,t,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=N,this.canvasElement=g},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=nc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,Sb.createFromQrcodeResult(a)),r.possiblyUpdateShaders(!0),!0}).catch(function(a){r.possiblyUpdateShaders(!1);var o=nc.codeParseError(a);return n(o,mL.createFrom(o)),!1})},e.prototype.foreverScan=function(t,n,r){var a=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),d=o.videoWidth/o.clientWidth,m=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*d,g=this.qrRegion.height*m,w=this.qrRegion.x*d,N=this.qrRegion.y*m;this.context.drawImage(o,w,N,v,g,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,r)},a.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(j){!j&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,r).finally(function(){S()})):S()}).catch(function(j){a.logger.logError("Error happend while scanning context",j),S()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",a={user:!0,environment:!0},o="exact",d=function(k){if(k in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(k,"'")},m=Object.keys(t);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var v=Object.keys(t)[0];if(v!==n&&v!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var g=t.facingMode;if(typeof g=="string"){if(d(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(d(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var N=t.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(o in N)return{deviceId:{exact:N["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var S=typeof N;throw"Invalid type of 'deviceId' = ".concat(S)}}}var j=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},e.prototype.computeCanvasDrawConfig=function(t,n,r,a){if(t<=r&&n<=a){var o=(r-t)/2,d=(a-n)/2;return{x:o,y:d,width:t,height:n}}else{var m=t,v=n;return t>r&&(n=r/t*n,t=r),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(v)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?vs.BORDER_SHADER_MATCH_COLOR:vs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var a=t,o=n,d=document.createElement("canvas");return d.style.width="".concat(a,"px"),d.style.height="".concat(o,"px"),d.style.display="none",d.id=ai(r)?"qr-canvas":r,d},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,a){if(!(n-a.width<1||r-a.height<1)){var o=document.createElement("div");o.style.position="absolute";var d=(n-a.width)/2,m=(r-a.height)/2;if(o.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(vs.SHADED_REGION_ELEMENT_ID),n-a.width<11||r-a.height<11)this.hasBorderShaders=!1;else{var v=5,g=40;this.insertShaderBorders(o,g,v,-v,null,0,!0),this.insertShaderBorders(o,g,v,-v,null,0,!1),this.insertShaderBorders(o,g,v,null,-v,0,!0),this.insertShaderBorders(o,g,v,null,-v,0,!1),this.insertShaderBorders(o,v,g+v,-v,null,-v,!0),this.insertShaderBorders(o,v,g+v,null,-v,-v,!0),this.insertShaderBorders(o,v,g+v,-v,null,-v,!1),this.insertShaderBorders(o,v,g+v,null,-v,-v,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,n,r,a,o,d,m){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=vs.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(r,"px"),a!==null&&(v.style.top="".concat(a,"px")),o!==null&&(v.style.bottom="".concat(o,"px")),m?v.style.left="".concat(d,"px"):v.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),t.appendChild(v)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}();globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var Ib;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ib||(Ib={}));const yE=({onScan:e,onError:t=a=>console.error(a),isOpen:n,onClose:r})=>{const[a,o]=L.useState(!1),[d,m]=L.useState(""),v=L.useRef(null),g=L.useRef(null);L.useEffect(()=>(n&&!a&&w(),()=>{N()}),[n]);const w=async()=>{if(v.current)try{const j=new PL("scanner");g.current=j;const k={fps:10,qrbox:{width:250,height:250},aspectRatio:1,formatsToSupport:[1,2,3,4,5,6,7,8,9,10,11,12]};await j.start({facingMode:"environment"},k,R=>{e(R),N(),r()},R=>{console.log(R)}),o(!0)}catch(j){console.error("Error starting scanner:",j);let k="",R="";j.name==="NotFoundError"||j.message&&j.message.includes("Requested device not found")?(k="No camera found. Please make sure your device has a camera and you have granted permission to use it.",R="No camera detected. You can manually enter the barcode value instead.",st.error(R,{icon:"📷❌",toastId:"camera-not-found"})):j.name==="NotAllowedError"||j.message&&j.message.includes("Permission denied")?(k="Camera access denied. Please grant permission to use your camera.",R="Camera access denied. Please check your browser permissions.",st.error(R,{icon:"🔒",toastId:"camera-permission-denied"})):(k=j&&j.message?j.message:"Failed to start scanner",st.error("Failed to start barcode scanner. Please try again later.",{toastId:"scanner-error"})),m(k),t(k),r()}},N=async()=>{if(g.current&&a)try{await g.current.stop(),o(!1)}catch(j){console.error("Error stopping scanner:",j)}},S=()=>{N(),r()};return n?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Scan Barcode"}),s.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{id:"scanner",ref:v,className:"w-full h-64 bg-gray-100 rounded flex items-center justify-center",children:d&&s.jsxs("div",{className:"text-center p-4",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-red-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:"text-red-600 font-medium",children:d}),s.jsx("p",{className:"text-gray-600 mt-2",children:"You can manually enter the barcode value instead."})]})})}),s.jsx("div",{className:"text-sm text-gray-500 mb-4",children:d?"To use the barcode scanner, you need a device with a camera and permission to access it.":"Position the barcode within the scanner area. The scanner will automatically detect and process the code."}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:S,className:"btn btn-outline",children:"Cancel"})})]})}):null};yE.propTypes={onScan:ie.func.isRequired,onError:ie.func,isOpen:ie.bool.isRequired,onClose:ie.func.isRequired};const wE=({id:e="",onScan:t,buttonText:n="",className:r=""})=>{const[a,o]=L.useState(!1),d=()=>{o(!0)},m=()=>{o(!1)},v=g=>{console.error("Scan error:",g)};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{id:e,type:"button",onClick:d,className:`flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md
          bg-white text-primary-600 hover:bg-primary-50 border border-primary-500
          hover:border-primary-600 hover:shadow-sm transition-all ${r}`,title:"Scan Barcode",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),n&&s.jsx("span",{className:"ml-1 font-medium",children:n})]}),s.jsx(yE,{isOpen:a,onClose:m,onScan:t,onError:v})]})};wE.propTypes={id:ie.string,onScan:ie.func.isRequired,buttonText:ie.string,className:ie.string};const bE=({id:e,name:t,type:n="text",label:r,placeholder:a,value:o,onChange:d,onBlur:m,error:v,disabled:g=!1,required:w=!1,className:N="",onScan:S,...j})=>{const I=`
    rounded-l-md shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
    ${v?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 text-slate-900 placeholder-slate-400"}
    ${g?"bg-slate-100 cursor-not-allowed opacity-75":"bg-white"}
    py-2 px-3 text-sm
    w-full
    ${N}
  `,A=`barcode-scan-button-${e}`;return s.jsxs("div",{className:"w-full",children:[r&&s.jsxs("label",{htmlFor:e,className:`block text-sm font-medium mb-1 ${v?"text-red-600":"text-slate-700"}`,children:[r,w&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"flex",style:{display:"flex",width:"100%"},children:[s.jsx("input",{id:e,name:t,type:n,value:o,onChange:d,onBlur:m,placeholder:a,disabled:g,required:w,className:I,style:{width:"calc(100% - 120px)"},...j}),s.jsxs("button",{type:"button",onClick:()=>{const M=document.getElementById(A);M&&M.click()},className:`w-[120px] bg-white text-primary-600 hover:bg-primary-50 border border-primary-500
            hover:border-primary-600 hover:shadow-sm transition-all font-medium flex items-center
            justify-center rounded-r-md border-l-0`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Scan"]}),s.jsx("div",{style:{display:"none"},children:s.jsx(wE,{id:A,onScan:S})})]}),v&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v})]})};bE.propTypes={id:ie.string.isRequired,name:ie.string.isRequired,type:ie.string,label:ie.string,placeholder:ie.string,value:ie.oneOfType([ie.string,ie.number]),onChange:ie.func,onBlur:ie.func,error:ie.string,disabled:ie.bool,required:ie.bool,className:ie.string,onScan:ie.func.isRequired};const Ns=({id:e,name:t,label:n,value:r,onChange:a,onBlur:o,options:d=[],error:m,disabled:v=!1,required:g=!1,placeholder:w="Select an option",className:N="",...S})=>{const T=`
    w-full rounded-md shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none
    ${m?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":"border-slate-300 text-slate-900"}
    ${v?"bg-slate-100 cursor-not-allowed opacity-75":"bg-white"}
    py-2 pl-3 pr-10 text-sm
    ${N}
  `;return s.jsxs("div",{className:"w-full",children:[n&&s.jsxs("label",{htmlFor:e,className:`block text-sm font-medium mb-1 ${m?"text-red-600":"text-slate-700"}`,children:[n,g&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:e,name:t,value:r,onChange:a,onBlur:o,disabled:v,required:g,className:T,...S,children:[s.jsx("option",{value:"",children:w}),d.map(I=>s.jsx("option",{value:I.value||I,children:I.label||I},I.value||I))]}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:s.jsx("svg",{className:"h-5 w-5 text-slate-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),m&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:m})]})};Ns.propTypes={id:ie.string.isRequired,name:ie.string.isRequired,label:ie.string,value:ie.string,onChange:ie.func,onBlur:ie.func,options:ie.arrayOf(ie.oneOfType([ie.string,ie.shape({value:ie.string.isRequired,label:ie.string.isRequired})])),error:ie.string,disabled:ie.bool,required:ie.bool,placeholder:ie.string,className:ie.string};const Re=({children:e,className:t="",...n})=>s.jsx("div",{className:`bg-white rounded-lg shadow-soft overflow-hidden ${t}`,...n,children:e}),NE=({children:e,className:t="",...n})=>s.jsx("div",{className:`px-6 py-4 border-b border-slate-200 ${t}`,...n,children:e}),CE=({children:e,className:t="",...n})=>s.jsx("h3",{className:`text-lg font-medium text-slate-800 ${t}`,...n,children:e}),EE=({children:e,className:t="",...n})=>s.jsx("div",{className:`p-6 ${t}`,...n,children:e}),SE=({children:e,className:t="",...n})=>s.jsx("div",{className:`px-6 py-4 bg-slate-50 border-t border-slate-200 ${t}`,...n,children:e});Re.Header=NE;Re.Title=CE;Re.Body=EE;Re.Footer=SE;Re.propTypes={children:ie.node.isRequired,className:ie.string};NE.propTypes={children:ie.node.isRequired,className:ie.string};CE.propTypes={children:ie.node.isRequired,className:ie.string};EE.propTypes={children:ie.node.isRequired,className:ie.string};SE.propTypes={children:ie.node.isRequired,className:ie.string};const ws=({children:e,variant:t="primary",size:n="md",className:r="",...a})=>{const o="inline-flex items-center font-medium rounded-full",d={primary:"bg-primary-100 text-primary-800",secondary:"bg-slate-100 text-slate-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"},m={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-base"},v=`
    ${o}
    ${d[t]||d.primary}
    ${m[n]||m.md}
    ${r}
  `;return s.jsx("span",{className:v,...a,children:e})};ws.propTypes={children:ie.node.isRequired,variant:ie.oneOf(["primary","secondary","success","danger","warning","info"]),size:ie.oneOf(["sm","md","lg"]),className:ie.string};function fp(){return typeof window<"u"}function Bc(e){return _E(e)?(e.nodeName||"").toLowerCase():"#document"}function Es(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ua(e){var t;return(t=(_E(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _E(e){return fp()?e instanceof Node||e instanceof Es(e).Node:!1}function Hr(e){return fp()?e instanceof Element||e instanceof Es(e).Element:!1}function Fa(e){return fp()?e instanceof HTMLElement||e instanceof Es(e).HTMLElement:!1}function Rb(e){return!fp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Es(e).ShadowRoot}function Ad(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Xs(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function FL(e){return["table","td","th"].includes(Bc(e))}function hp(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function y2(e){const t=w2(),n=Hr(e)?Xs(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function BL(e){let t=po(e);for(;Fa(t)&&!Cc(t);){if(y2(t))return t;if(hp(t))return null;t=po(t)}return null}function w2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cc(e){return["html","body","#document"].includes(Bc(e))}function Xs(e){return Es(e).getComputedStyle(e)}function pp(e){return Hr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function po(e){if(Bc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Rb(e)&&e.host||Ua(e);return Rb(t)?t.host:t}function jE(e){const t=po(e);return Cc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fa(t)&&Ad(t)?t:jE(t)}function gd(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=jE(e),o=a===((r=e.ownerDocument)==null?void 0:r.body),d=Es(a);if(o){const m=Px(d);return t.concat(d,d.visualViewport||[],Ad(a)?a:[],m&&n?gd(m):[])}return t.concat(a,gd(a,[],n))}function Px(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Ec=Math.min,al=Math.max,vh=Math.round,X0=Math.floor,Pa=e=>({x:e,y:e}),UL={left:"right",right:"left",bottom:"top",top:"bottom"},qL={start:"end",end:"start"};function zL(e,t,n){return al(e,Ec(t,n))}function mp(e,t){return typeof e=="function"?e(t):e}function Sc(e){return e.split("-")[0]}function kd(e){return e.split("-")[1]}function WL(e){return e==="x"?"y":"x"}function b2(e){return e==="y"?"height":"width"}function Jo(e){return["top","bottom"].includes(Sc(e))?"y":"x"}function N2(e){return WL(Jo(e))}function HL(e,t,n){n===void 0&&(n=!1);const r=kd(e),a=N2(e),o=b2(a);let d=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(d=yh(d)),[d,yh(d)]}function VL(e){const t=yh(e);return[Fx(e),t,Fx(t)]}function Fx(e){return e.replace(/start|end/g,t=>qL[t])}function YL(e,t,n){const r=["left","right"],a=["right","left"],o=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?o:d;default:return[]}}function $L(e,t,n,r){const a=kd(e);let o=YL(Sc(e),n==="start",r);return a&&(o=o.map(d=>d+"-"+a),t&&(o=o.concat(o.map(Fx)))),o}function yh(e){return e.replace(/left|right|bottom|top/g,t=>UL[t])}function GL(e){return{top:0,right:0,bottom:0,left:0,...e}}function AE(e){return typeof e!="number"?GL(e):{top:e,right:e,bottom:e,left:e}}function wh(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}var QL=typeof document<"u",XL=function(){},bh=QL?L.useLayoutEffect:XL;const KL={...Jx},ZL=KL.useInsertionEffect,JL=ZL||(e=>e());function eP(e){const t=L.useRef(()=>{});return JL(()=>{t.current=e}),L.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function Mb(e,t,n){let{reference:r,floating:a}=e;const o=Jo(t),d=N2(t),m=b2(d),v=Sc(t),g=o==="y",w=r.x+r.width/2-a.width/2,N=r.y+r.height/2-a.height/2,S=r[m]/2-a[m]/2;let j;switch(v){case"top":j={x:w,y:r.y-a.height};break;case"bottom":j={x:w,y:r.y+r.height};break;case"right":j={x:r.x+r.width,y:N};break;case"left":j={x:r.x-a.width,y:N};break;default:j={x:r.x,y:r.y}}switch(kd(t)){case"start":j[d]-=S*(n&&g?-1:1);break;case"end":j[d]+=S*(n&&g?-1:1);break}return j}const tP=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:d}=n,m=o.filter(Boolean),v=await(d.isRTL==null?void 0:d.isRTL(t));let g=await d.getElementRects({reference:e,floating:t,strategy:a}),{x:w,y:N}=Mb(g,r,v),S=r,j={},k=0;for(let R=0;R<m.length;R++){const{name:T,fn:I}=m[R],{x:A,y:M,data:B,reset:G}=await I({x:w,y:N,initialPlacement:r,placement:S,strategy:a,middlewareData:j,rects:g,platform:d,elements:{reference:e,floating:t}});w=A??w,N=M??N,j={...j,[T]:{...j[T],...B}},G&&k<=50&&(k++,typeof G=="object"&&(G.placement&&(S=G.placement),G.rects&&(g=G.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:a}):G.rects),{x:w,y:N}=Mb(g,S,v)),R=-1)}return{x:w,y:N,placement:S,strategy:a,middlewareData:j}};async function nP(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:o,rects:d,elements:m,strategy:v}=e,{boundary:g="clippingAncestors",rootBoundary:w="viewport",elementContext:N="floating",altBoundary:S=!1,padding:j=0}=mp(t,e),k=AE(j),T=m[S?N==="floating"?"reference":"floating":N],I=wh(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(T)))==null||n?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(m.floating)),boundary:g,rootBoundary:w,strategy:v})),A=N==="floating"?{x:r,y:a,width:d.floating.width,height:d.floating.height}:d.reference,M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(m.floating)),B=await(o.isElement==null?void 0:o.isElement(M))?await(o.getScale==null?void 0:o.getScale(M))||{x:1,y:1}:{x:1,y:1},G=wh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:A,offsetParent:M,strategy:v}):A);return{top:(I.top-G.top+k.top)/B.y,bottom:(G.bottom-I.bottom+k.bottom)/B.y,left:(I.left-G.left+k.left)/B.x,right:(G.right-I.right+k.right)/B.x}}const rP=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:o,platform:d,elements:m,middlewareData:v}=t,{element:g,padding:w=0}=mp(e,t)||{};if(g==null)return{};const N=AE(w),S={x:n,y:r},j=N2(a),k=b2(j),R=await d.getDimensions(g),T=j==="y",I=T?"top":"left",A=T?"bottom":"right",M=T?"clientHeight":"clientWidth",B=o.reference[k]+o.reference[j]-S[j]-o.floating[k],G=S[j]-o.reference[j],P=await(d.getOffsetParent==null?void 0:d.getOffsetParent(g));let O=P?P[M]:0;(!O||!await(d.isElement==null?void 0:d.isElement(P)))&&(O=m.floating[M]||o.floating[k]);const V=B/2-G/2,W=O/2-R[k]/2-1,ee=Ec(N[I],W),ce=Ec(N[A],W),ne=ee,te=O-R[k]-ce,Ne=O/2-R[k]/2+V,ae=zL(ne,Ne,te),Ae=!v.arrow&&kd(a)!=null&&Ne!==ae&&o.reference[k]/2-(Ne<ne?ee:ce)-R[k]/2<0,me=Ae?Ne<ne?Ne-ne:Ne-te:0;return{[j]:S[j]+me,data:{[j]:ae,centerOffset:Ne-ae-me,...Ae&&{alignmentOffset:me}},reset:Ae}}}),sP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:o,rects:d,initialPlacement:m,platform:v,elements:g}=t,{mainAxis:w=!0,crossAxis:N=!0,fallbackPlacements:S,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:R=!0,...T}=mp(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const I=Sc(a),A=Jo(m),M=Sc(m)===m,B=await(v.isRTL==null?void 0:v.isRTL(g.floating)),G=S||(M||!R?[yh(m)]:VL(m)),P=k!=="none";!S&&P&&G.push(...$L(m,R,k,B));const O=[m,...G],V=await nP(t,T),W=[];let ee=((r=o.flip)==null?void 0:r.overflows)||[];if(w&&W.push(V[I]),N){const Ne=HL(a,d,B);W.push(V[Ne[0]],V[Ne[1]])}if(ee=[...ee,{placement:a,overflows:W}],!W.every(Ne=>Ne<=0)){var ce,ne;const Ne=(((ce=o.flip)==null?void 0:ce.index)||0)+1,ae=O[Ne];if(ae&&(!(N==="alignment"?A!==Jo(ae):!1)||ee.every(de=>de.overflows[0]>0&&Jo(de.placement)===A)))return{data:{index:Ne,overflows:ee},reset:{placement:ae}};let Ae=(ne=ee.filter(me=>me.overflows[0]<=0).sort((me,de)=>me.overflows[1]-de.overflows[1])[0])==null?void 0:ne.placement;if(!Ae)switch(j){case"bestFit":{var te;const me=(te=ee.filter(de=>{if(P){const fe=Jo(de.placement);return fe===A||fe==="y"}return!0}).map(de=>[de.placement,de.overflows.filter(fe=>fe>0).reduce((fe,Be)=>fe+Be,0)]).sort((de,fe)=>de[1]-fe[1])[0])==null?void 0:te[0];me&&(Ae=me);break}case"initialPlacement":Ae=m;break}if(a!==Ae)return{reset:{placement:Ae}}}return{}}}};async function aP(e,t){const{placement:n,platform:r,elements:a}=e,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),d=Sc(n),m=kd(n),v=Jo(n)==="y",g=["left","top"].includes(d)?-1:1,w=o&&v?-1:1,N=mp(t,e);let{mainAxis:S,crossAxis:j,alignmentAxis:k}=typeof N=="number"?{mainAxis:N,crossAxis:0,alignmentAxis:null}:{mainAxis:N.mainAxis||0,crossAxis:N.crossAxis||0,alignmentAxis:N.alignmentAxis};return m&&typeof k=="number"&&(j=m==="end"?k*-1:k),v?{x:j*w,y:S*g}:{x:S*g,y:j*w}}const iP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:o,placement:d,middlewareData:m}=t,v=await aP(t,e);return d===((n=m.offset)==null?void 0:n.placement)&&(r=m.arrow)!=null&&r.alignmentOffset?{}:{x:a+v.x,y:o+v.y,data:{...v,placement:d}}}}};function kE(e){const t=Xs(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Fa(e),o=a?e.offsetWidth:n,d=a?e.offsetHeight:r,m=vh(n)!==o||vh(r)!==d;return m&&(n=o,r=d),{width:n,height:r,$:m}}function C2(e){return Hr(e)?e:e.contextElement}function cc(e){const t=C2(e);if(!Fa(t))return Pa(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:o}=kE(t);let d=(o?vh(n.width):n.width)/r,m=(o?vh(n.height):n.height)/a;return(!d||!Number.isFinite(d))&&(d=1),(!m||!Number.isFinite(m))&&(m=1),{x:d,y:m}}const oP=Pa(0);function TE(e){const t=Es(e);return!w2()||!t.visualViewport?oP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function lP(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Es(e)?!1:t}function ml(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=C2(e);let d=Pa(1);t&&(r?Hr(r)&&(d=cc(r)):d=cc(e));const m=lP(o,n,r)?TE(o):Pa(0);let v=(a.left+m.x)/d.x,g=(a.top+m.y)/d.y,w=a.width/d.x,N=a.height/d.y;if(o){const S=Es(o),j=r&&Hr(r)?Es(r):r;let k=S,R=Px(k);for(;R&&r&&j!==k;){const T=cc(R),I=R.getBoundingClientRect(),A=Xs(R),M=I.left+(R.clientLeft+parseFloat(A.paddingLeft))*T.x,B=I.top+(R.clientTop+parseFloat(A.paddingTop))*T.y;v*=T.x,g*=T.y,w*=T.x,N*=T.y,v+=M,g+=B,k=Es(R),R=Px(k)}}return wh({width:w,height:N,x:v,y:g})}function E2(e,t){const n=pp(e).scrollLeft;return t?t.left+n:ml(Ua(e)).left+n}function DE(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:E2(e,r)),o=r.top+t.scrollTop;return{x:a,y:o}}function cP(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const o=a==="fixed",d=Ua(r),m=t?hp(t.floating):!1;if(r===d||m&&o)return n;let v={scrollLeft:0,scrollTop:0},g=Pa(1);const w=Pa(0),N=Fa(r);if((N||!N&&!o)&&((Bc(r)!=="body"||Ad(d))&&(v=pp(r)),Fa(r))){const j=ml(r);g=cc(r),w.x=j.x+r.clientLeft,w.y=j.y+r.clientTop}const S=d&&!N&&!o?DE(d,v,!0):Pa(0);return{width:n.width*g.x,height:n.height*g.y,x:n.x*g.x-v.scrollLeft*g.x+w.x+S.x,y:n.y*g.y-v.scrollTop*g.y+w.y+S.y}}function uP(e){return Array.from(e.getClientRects())}function dP(e){const t=Ua(e),n=pp(e),r=e.ownerDocument.body,a=al(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=al(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+E2(e);const m=-n.scrollTop;return Xs(r).direction==="rtl"&&(d+=al(t.clientWidth,r.clientWidth)-a),{width:a,height:o,x:d,y:m}}function fP(e,t){const n=Es(e),r=Ua(e),a=n.visualViewport;let o=r.clientWidth,d=r.clientHeight,m=0,v=0;if(a){o=a.width,d=a.height;const g=w2();(!g||g&&t==="fixed")&&(m=a.offsetLeft,v=a.offsetTop)}return{width:o,height:d,x:m,y:v}}function hP(e,t){const n=ml(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,o=Fa(e)?cc(e):Pa(1),d=e.clientWidth*o.x,m=e.clientHeight*o.y,v=a*o.x,g=r*o.y;return{width:d,height:m,x:v,y:g}}function Ob(e,t,n){let r;if(t==="viewport")r=fP(e,n);else if(t==="document")r=dP(Ua(e));else if(Hr(t))r=hP(t,n);else{const a=TE(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return wh(r)}function IE(e,t){const n=po(e);return n===t||!Hr(n)||Cc(n)?!1:Xs(n).position==="fixed"||IE(n,t)}function pP(e,t){const n=t.get(e);if(n)return n;let r=gd(e,[],!1).filter(m=>Hr(m)&&Bc(m)!=="body"),a=null;const o=Xs(e).position==="fixed";let d=o?po(e):e;for(;Hr(d)&&!Cc(d);){const m=Xs(d),v=y2(d);!v&&m.position==="fixed"&&(a=null),(o?!v&&!a:!v&&m.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Ad(d)&&!v&&IE(e,d))?r=r.filter(w=>w!==d):a=m,d=po(d)}return t.set(e,r),r}function mP(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const d=[...n==="clippingAncestors"?hp(t)?[]:pP(t,this._c):[].concat(n),r],m=d[0],v=d.reduce((g,w)=>{const N=Ob(t,w,a);return g.top=al(N.top,g.top),g.right=Ec(N.right,g.right),g.bottom=Ec(N.bottom,g.bottom),g.left=al(N.left,g.left),g},Ob(t,m,a));return{width:v.right-v.left,height:v.bottom-v.top,x:v.left,y:v.top}}function xP(e){const{width:t,height:n}=kE(e);return{width:t,height:n}}function gP(e,t,n){const r=Fa(t),a=Ua(t),o=n==="fixed",d=ml(e,!0,o,t);let m={scrollLeft:0,scrollTop:0};const v=Pa(0);function g(){v.x=E2(a)}if(r||!r&&!o)if((Bc(t)!=="body"||Ad(a))&&(m=pp(t)),r){const j=ml(t,!0,o,t);v.x=j.x+t.clientLeft,v.y=j.y+t.clientTop}else a&&g();o&&!r&&a&&g();const w=a&&!r&&!o?DE(a,m):Pa(0),N=d.left+m.scrollLeft-v.x-w.x,S=d.top+m.scrollTop-v.y-w.y;return{x:N,y:S,width:d.width,height:d.height}}function sm(e){return Xs(e).position==="static"}function Lb(e,t){if(!Fa(e)||Xs(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ua(e)===n&&(n=n.ownerDocument.body),n}function RE(e,t){const n=Es(e);if(hp(e))return n;if(!Fa(e)){let a=po(e);for(;a&&!Cc(a);){if(Hr(a)&&!sm(a))return a;a=po(a)}return n}let r=Lb(e,t);for(;r&&FL(r)&&sm(r);)r=Lb(r,t);return r&&Cc(r)&&sm(r)&&!y2(r)?n:r||BL(e)||n}const vP=async function(e){const t=this.getOffsetParent||RE,n=this.getDimensions,r=await n(e.floating);return{reference:gP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yP(e){return Xs(e).direction==="rtl"}const wP={convertOffsetParentRelativeRectToViewportRelativeRect:cP,getDocumentElement:Ua,getClippingRect:mP,getOffsetParent:RE,getElementRects:vP,getClientRects:uP,getDimensions:xP,getScale:cc,isElement:Hr,isRTL:yP};function ME(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function bP(e,t){let n=null,r;const a=Ua(e);function o(){var m;clearTimeout(r),(m=n)==null||m.disconnect(),n=null}function d(m,v){m===void 0&&(m=!1),v===void 0&&(v=1),o();const g=e.getBoundingClientRect(),{left:w,top:N,width:S,height:j}=g;if(m||t(),!S||!j)return;const k=X0(N),R=X0(a.clientWidth-(w+S)),T=X0(a.clientHeight-(N+j)),I=X0(w),M={rootMargin:-k+"px "+-R+"px "+-T+"px "+-I+"px",threshold:al(0,Ec(1,v))||1};let B=!0;function G(P){const O=P[0].intersectionRatio;if(O!==v){if(!B)return d();O?d(!1,O):r=setTimeout(()=>{d(!1,1e-7)},1e3)}O===1&&!ME(g,e.getBoundingClientRect())&&d(),B=!1}try{n=new IntersectionObserver(G,{...M,root:a.ownerDocument})}catch{n=new IntersectionObserver(G,M)}n.observe(e)}return d(!0),o}function NP(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:v=!1}=r,g=C2(e),w=a||o?[...g?gd(g):[],...gd(t)]:[];w.forEach(I=>{a&&I.addEventListener("scroll",n,{passive:!0}),o&&I.addEventListener("resize",n)});const N=g&&m?bP(g,n):null;let S=-1,j=null;d&&(j=new ResizeObserver(I=>{let[A]=I;A&&A.target===g&&j&&(j.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var M;(M=j)==null||M.observe(t)})),n()}),g&&!v&&j.observe(g),j.observe(t));let k,R=v?ml(e):null;v&&T();function T(){const I=ml(e);R&&!ME(R,I)&&n(),R=I,k=requestAnimationFrame(T)}return n(),()=>{var I;w.forEach(A=>{a&&A.removeEventListener("scroll",n),o&&A.removeEventListener("resize",n)}),N==null||N(),(I=j)==null||I.disconnect(),j=null,v&&cancelAnimationFrame(k)}}const CP=iP,EP=sP,Pb=rP,SP=(e,t,n)=>{const r=new Map,a={platform:wP,...n},o={...a.platform,_c:r};return tP(e,t,{...a,platform:o})};var _P=typeof document<"u",jP=function(){},_f=_P?L.useLayoutEffect:jP;function Nh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Nh(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const o=a[r];if(!(o==="_owner"&&e.$$typeof)&&!Nh(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function OE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fb(e,t){const n=OE(e);return Math.round(t*n)/n}function am(e){const t=L.useRef(e);return _f(()=>{t.current=e}),t}function AP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:d}={},transform:m=!0,whileElementsMounted:v,open:g}=e,[w,N]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[S,j]=L.useState(r);Nh(S,r)||j(r);const[k,R]=L.useState(null),[T,I]=L.useState(null),A=L.useCallback(de=>{de!==P.current&&(P.current=de,R(de))},[]),M=L.useCallback(de=>{de!==O.current&&(O.current=de,I(de))},[]),B=o||k,G=d||T,P=L.useRef(null),O=L.useRef(null),V=L.useRef(w),W=v!=null,ee=am(v),ce=am(a),ne=am(g),te=L.useCallback(()=>{if(!P.current||!O.current)return;const de={placement:t,strategy:n,middleware:S};ce.current&&(de.platform=ce.current),SP(P.current,O.current,de).then(fe=>{const Be={...fe,isPositioned:ne.current!==!1};Ne.current&&!Nh(V.current,Be)&&(V.current=Be,Hg.flushSync(()=>{N(Be)}))})},[S,t,n,ce,ne]);_f(()=>{g===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,N(de=>({...de,isPositioned:!1})))},[g]);const Ne=L.useRef(!1);_f(()=>(Ne.current=!0,()=>{Ne.current=!1}),[]),_f(()=>{if(B&&(P.current=B),G&&(O.current=G),B&&G){if(ee.current)return ee.current(B,G,te);te()}},[B,G,te,ee,W]);const ae=L.useMemo(()=>({reference:P,floating:O,setReference:A,setFloating:M}),[A,M]),Ae=L.useMemo(()=>({reference:B,floating:G}),[B,G]),me=L.useMemo(()=>{const de={position:n,left:0,top:0};if(!Ae.floating)return de;const fe=Fb(Ae.floating,w.x),Be=Fb(Ae.floating,w.y);return m?{...de,transform:"translate("+fe+"px, "+Be+"px)",...OE(Ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:fe,top:Be}},[n,m,Ae.floating,w.x,w.y]);return L.useMemo(()=>({...w,update:te,refs:ae,elements:Ae,floatingStyles:me}),[w,te,ae,Ae,me])}const kP=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Pb({element:r.current,padding:a}).fn(n):{}:r?Pb({element:r,padding:a}).fn(n):{}}}},TP=(e,t)=>({...CP(e),options:[e,t]}),DP=(e,t)=>({...EP(e),options:[e,t]}),IP=(e,t)=>({...kP(e),options:[e,t]}),RP={...Jx};let Bb=!1,MP=0;const Ub=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+MP++;function OP(){const[e,t]=L.useState(()=>Bb?Ub():void 0);return bh(()=>{e==null&&t(Ub())},[]),L.useEffect(()=>{Bb=!0},[]),e}const LP=RP.useId,LE=LP||OP,PP=L.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:a},middlewareData:{arrow:o,shift:d}},width:m=14,height:v=7,tipRadius:g=0,strokeWidth:w=0,staticOffset:N,stroke:S,d:j,style:{transform:k,...R}={},...T}=t,I=LE(),[A,M]=L.useState(!1);if(bh(()=>{if(!a)return;Xs(a).direction==="rtl"&&M(!0)},[a]),!a)return null;const[B,G]=r.split("-"),P=B==="top"||B==="bottom";let O=N;(P&&d!=null&&d.x||!P&&d!=null&&d.y)&&(O=null);const V=w*2,W=V/2,ee=m/2*(g/-8+1),ce=v/2*g/4,ne=!!j,te=O&&G==="end"?"bottom":"top";let Ne=O&&G==="end"?"right":"left";O&&A&&(Ne=G==="end"?"left":"right");const ae=(o==null?void 0:o.x)!=null?O||o.x:"",Ae=(o==null?void 0:o.y)!=null?O||o.y:"",me=j||"M0,0"+(" H"+m)+(" L"+(m-ee)+","+(v-ce))+(" Q"+m/2+","+v+" "+ee+","+(v-ce))+" Z",de={top:ne?"rotate(180deg)":"",left:ne?"rotate(90deg)":"rotate(-90deg)",bottom:ne?"":"rotate(180deg)",right:ne?"rotate(-90deg)":"rotate(90deg)"}[B];return s.jsxs("svg",{...T,"aria-hidden":!0,ref:n,width:ne?m:m+V,height:m,viewBox:"0 0 "+m+" "+(v>m?v:m),style:{position:"absolute",pointerEvents:"none",[Ne]:ae,[te]:Ae,[B]:P||ne?"100%":"calc(100% - "+V/2+"px)",transform:[de,k].filter(fe=>!!fe).join(" "),...R},children:[V>0&&s.jsx("path",{clipPath:"url(#"+I+")",fill:"none",stroke:S,strokeWidth:V+(j?0:1),d:me}),s.jsx("path",{stroke:V&&!j?T.fill:"none",d:me}),s.jsx("clipPath",{id:I,children:s.jsx("rect",{x:-W,y:W*(ne?-1:1),width:m+V,height:m})})]})});function FP(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(a=>a(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const BP=L.createContext(null),UP=L.createContext(null),qP=()=>{var e;return((e=L.useContext(BP))==null?void 0:e.id)||null},zP=()=>L.useContext(UP);function WP(e){const{open:t=!1,onOpenChange:n,elements:r}=e,a=LE(),o=L.useRef({}),[d]=L.useState(()=>FP()),m=qP()!=null,[v,g]=L.useState(r.reference),w=eP((j,k,R)=>{o.current.openEvent=j?k:void 0,d.emit("openchange",{open:j,event:k,reason:R,nested:m}),n==null||n(j,k,R)}),N=L.useMemo(()=>({setPositionReference:g}),[]),S=L.useMemo(()=>({reference:v||r.reference||null,floating:r.floating||null,domReference:r.reference}),[v,r.reference,r.floating]);return L.useMemo(()=>({dataRef:o,open:t,onOpenChange:w,elements:S,events:d,floatingId:a,refs:N}),[t,w,S,d,a,N])}function HP(e){e===void 0&&(e={});const{nodeId:t}=e,n=WP({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,a=r.elements,[o,d]=L.useState(null),[m,v]=L.useState(null),w=(a==null?void 0:a.domReference)||o,N=L.useRef(null),S=zP();bh(()=>{w&&(N.current=w)},[w]);const j=AP({...e,elements:{...a,...m&&{reference:m}}}),k=L.useCallback(M=>{const B=Hr(M)?{getBoundingClientRect:()=>M.getBoundingClientRect(),getClientRects:()=>M.getClientRects(),contextElement:M}:M;v(B),j.refs.setReference(B)},[j.refs]),R=L.useCallback(M=>{(Hr(M)||M===null)&&(N.current=M,d(M)),(Hr(j.refs.reference.current)||j.refs.reference.current===null||M!==null&&!Hr(M))&&j.refs.setReference(M)},[j.refs]),T=L.useMemo(()=>({...j.refs,setReference:R,setPositionReference:k,domReference:N}),[j.refs,R,k]),I=L.useMemo(()=>({...j.elements,domReference:w}),[j.elements,w]),A=L.useMemo(()=>({...j,...r,refs:T,elements:I,nodeId:t}),[j,T,I,t,r]);return bh(()=>{r.dataRef.current.floatingContext=A;const M=S==null?void 0:S.nodesRef.current.find(B=>B.id===t);M&&(M.context=A)}),L.useMemo(()=>({...j,context:A,refs:T,elements:I}),[j,T,I,A])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Bx=function(t,n){return Bx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},Bx(t,n)};function mr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Bx(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var zt=function(){return zt=Object.assign||function(n){for(var r,a=1,o=arguments.length;a<o;a++){r=arguments[a];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(n[d]=r[d])}return n},zt.apply(this,arguments)};function Ra(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var VP=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,a=r===void 0?!1:r,o=e.className,d=e.children,m=n?"Choose Time":"Choose Date".concat(a?" and Time":"");return he.createElement("div",{className:o,role:"dialog","aria-label":m,"aria-modal":"true"},d)},YP=function(e,t){var n=L.useRef(null),r=L.useRef(e);r.current=e;var a=L.useCallback(function(o){var d,m=o.composed&&o.composedPath&&o.composedPath().find(function(v){return v instanceof Node})||o.target;n.current&&!n.current.contains(m)&&(t&&m instanceof HTMLElement&&m.classList.contains(t)||(d=r.current)===null||d===void 0||d.call(r,o))},[t]);return L.useEffect(function(){return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[a]),n},xp=function(e){var t=e.children,n=e.onClickOutside,r=e.className,a=e.containerRef,o=e.style,d=e.ignoreClass,m=YP(n,d);return he.createElement("div",{className:r,style:o,ref:function(v){m.current=v,a&&(a.current=v)}},t)},ze;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(ze||(ze={}));function PE(){var e=typeof window<"u"?window:globalThis;return e}var Td=12;function Zt(e){if(e==null)return new Date;var t=typeof e=="string"?z9(e):Xe(e);return gp(t)?t:new Date}function im(e,t,n,r,a){a===void 0&&(a=Zt());for(var o=_c(n)||_c(S2()),d=Array.isArray(t)?t:[t],m=0,v=d;m<v.length;m++){var g=v[m],w=L9(e,g,a,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(gp(w)&&(!r||e===An(w,g,n)))return w}return null}function gp(e,t){return dh(e)&&!pl(e,new Date("1/1/1800"))}function An(e,t,n){if(n==="en")return md(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?_c(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||_c(S2()),md(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function qs(e,t){var n=t.dateFormat,r=t.locale,a=Array.isArray(n)&&n.length>0?n[0]:n;return e&&An(e,a,r)||""}var FE=" - ";function $P(e,t,n){if(!e)return"";var r=qs(e,n),a=t?qs(t,n):"";return"".concat(r).concat(FE).concat(a)}function GP(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?qs(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=qs(e[1],t);return"".concat(n,", ").concat(r)}var a=e.length-1;return"".concat(n," (+").concat(a,")")}function om(e,t){var n=t.hour,r=n===void 0?0:n,a=t.minute,o=a===void 0?0:a,d=t.second,m=d===void 0?0:d;return Cf(Ef(Sf(e,m),o),r)}function QP(e){return p2(e)}function XP(e,t){return An(e,"ddd",t)}function jf(e){return hl(e)}function co(e,t,n){var r=_c(t||S2());return bi(e,{locale:r,weekStartsOn:n})}function mi(e){return tE(e)}function Ru(e){return dp(e)}function qb(e){return Dx(e)}function zb(){return hl(Zt())}function Wb(e){return d2(e)}function KP(e){return WM(e)}function ZP(e){return f2(e)}function ja(e,t){return e&&t?U9(e,t):!e&&!t}function zr(e,t){return e&&t?F9(e,t):!e&&!t}function Ch(e,t){return e&&t?B9(e,t):!e&&!t}function qt(e,t){return e&&t?LM(e,t):!e&&!t}function el(e,t){return e&&t?qO(e,t):!e&&!t}function Mu(e,t,n){var r,a=hl(t),o=d2(n);try{r=xd(e,{start:a,end:o})}catch{r=!1}return r}function S2(){var e=PE();return e.__localeId__}function _c(e){if(typeof e=="string"){var t=PE();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function JP(e,t,n){return t(An(e,"EEEE",n))}function eF(e,t){return An(e,"EEEEEE",t)}function tF(e,t){return An(e,"EEE",t)}function _2(e,t){return An(zs(Zt(),e),"LLLL",t)}function BE(e,t){return An(zs(Zt(),e),"LLL",t)}function nF(e,t){return An(ql(Zt(),e),"QQQ",t)}function Vs(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,o=n.excludeDates,d=n.excludeDateIntervals,m=n.includeDates,v=n.includeDateIntervals,g=n.filterDate;return Dd(e,{minDate:r,maxDate:a})||o&&o.some(function(w){return w instanceof Date?qt(e,w):qt(e,w.date)})||d&&d.some(function(w){var N=w.start,S=w.end;return xd(e,{start:N,end:S})})||m&&!m.some(function(w){return qt(e,w)})||v&&!v.some(function(w){var N=w.start,S=w.end;return xd(e,{start:N,end:S})})||g&&!g(Zt(e))||!1}function j2(e,t){var n=t===void 0?{}:t,r=n.excludeDates,a=n.excludeDateIntervals;return a&&a.length>0?a.some(function(o){var d=o.start,m=o.end;return xd(e,{start:d,end:m})}):r&&r.some(function(o){var d;return o instanceof Date?qt(e,o):qt(e,(d=o.date)!==null&&d!==void 0?d:new Date)})||!1}function UE(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,o=n.excludeDates,d=n.includeDates,m=n.filterDate;return Dd(e,{minDate:r?tE(r):void 0,maxDate:a?f2(a):void 0})||(o==null?void 0:o.some(function(v){return zr(e,v instanceof Date?v:v.date)}))||d&&!d.some(function(v){return zr(e,v)})||m&&!m(Zt(e))||!1}function K0(e,t,n,r){var a=_t(e),o=Mr(e),d=_t(t),m=Mr(t),v=_t(r);return a===d&&a===v?o<=n&&n<=m:a<d?v===a&&o<=n||v===d&&m>=n||v<d&&v>a:!1}function rF(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,o=n.excludeDates,d=n.includeDates;return Dd(e,{minDate:r,maxDate:a})||o&&o.some(function(m){return zr(m instanceof Date?m:m.date,e)})||d&&!d.some(function(m){return zr(m,e)})||!1}function Z0(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,o=n.excludeDates,d=n.includeDates,m=n.filterDate;return Dd(e,{minDate:r,maxDate:a})||(o==null?void 0:o.some(function(v){return Ch(e,v instanceof Date?v:v.date)}))||d&&!d.some(function(v){return Ch(e,v)})||m&&!m(Zt(e))||!1}function J0(e,t,n){if(!t||!n||!dh(t)||!dh(n))return!1;var r=_t(t),a=_t(n);return r<=e&&a>=e}function Af(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,o=n.excludeDates,d=n.includeDates,m=n.filterDate,v=new Date(e,0,1);return Dd(v,{minDate:r?dp(r):void 0,maxDate:a?nE(a):void 0})||(o==null?void 0:o.some(function(g){return ja(v,g instanceof Date?g:g.date)}))||d&&!d.some(function(g){return ja(v,g)})||m&&!m(Zt(v))||!1}function ef(e,t,n,r){var a=_t(e),o=rl(e),d=_t(t),m=rl(t),v=_t(r);return a===d&&a===v?o<=n&&n<=m:a<d?v===a&&o<=n||v===d&&m>=n||v<d&&v>a:!1}function Dd(e,t){var n,r=t===void 0?{}:t,a=r.minDate,o=r.maxDate;return(n=a&&bc(e,a)<0||o&&bc(e,o)>0)!==null&&n!==void 0?n:!1}function Hb(e,t){return t.some(function(n){return hi(n)===hi(e)&&pi(n)===pi(e)&&lo(n)===lo(e)})}function Vb(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,a=n.includeTimes,o=n.filterTime;return r&&Hb(e,r)||a&&!Hb(e,a)||o&&!o(e)||!1}function Yb(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var a=Zt();a=Cf(a,hi(e)),a=Ef(a,pi(e)),a=Sf(a,lo(e));var o=Zt();o=Cf(o,hi(n)),o=Ef(o,pi(n)),o=Sf(o,lo(n));var d=Zt();d=Cf(d,hi(r)),d=Ef(d,pi(r)),d=Sf(d,lo(r));var m;try{m=!xd(a,{start:o,end:d})}catch{m=!1}return m}function $b(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.includeDates,o=sl(e,1);return r&&pd(r,o)>0||a&&a.every(function(d){return pd(d,o)>0})||!1}function Gb(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.includeDates,o=pa(e,1);return r&&pd(o,r)>0||a&&a.every(function(d){return pd(o,d)>0})||!1}function sF(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.includeDates,o=dp(e),d=fE(o,1);return r&&fh(r,d)>0||a&&a.every(function(m){return fh(m,d)>0})||!1}function aF(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.includeDates,o=nE(e),d=u2(o,1);return r&&fh(d,r)>0||a&&a.every(function(m){return fh(d,m)>0})||!1}function Qb(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.includeDates,o=Nc(e,1);return r&&hh(r,o)>0||a&&a.every(function(d){return hh(d,o)>0})||!1}function iF(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.yearItemNumber,o=a===void 0?Td:a,d=Ru(Nc(e,o)),m=Zi(d,o).endPeriod,v=r&&_t(r);return v&&v>m||!1}function Xb(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.includeDates,o=di(e,1);return r&&hh(o,r)>0||a&&a.every(function(d){return hh(o,d)>0})||!1}function oF(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.yearItemNumber,o=a===void 0?Td:a,d=di(e,o),m=Zi(d,o).startPeriod,v=r&&_t(r);return v&&v<m||!1}function qE(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(a){return bc(a,t)>=0});return mb(r)}else return n?mb(n):t}function zE(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(a){return bc(a,t)<=0});return pb(r)}else return n?pb(n):t}function Kb(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,a=0,o=e.length;a<o;a++){var d=e[a];if(fi(d)){var m=An(d,"MM.dd.yyyy"),v=r.get(m)||[];v.includes(t)||(v.push(t),r.set(m,v))}else if(typeof d=="object"){var g=Object.keys(d),w=(n=g[0])!==null&&n!==void 0?n:"",N=d[w];if(typeof w=="string"&&Array.isArray(N))for(var S=0,j=N.length;S<j;S++){var k=N[S];if(k){var m=An(k,"MM.dd.yyyy"),v=r.get(m)||[];v.includes(w)||(v.push(w),r.set(m,v))}}}}return r}function lF(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function cF(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var a=r.date,o=r.holidayName;if(fi(a)){var d=An(a,"MM.dd.yyyy"),m=n.get(d)||{className:"",holidayNames:[]};if(!("className"in m&&m.className===t&&lF(m.holidayNames,[o]))){m.className=t;var v=m.holidayNames;m.holidayNames=v?Ra(Ra([],v,!0),[o],!1):[o],n.set(d,m)}}}),n}function uF(e,t,n,r,a){for(var o=a.length,d=[],m=0;m<o;m++){var v=e,g=a[m];g&&(v=DM(v,hi(g)),v=Tx(v,pi(g)),v=MM(v,lo(g)));var w=Tx(e,(n+1)*r);ho(v,t)&&pl(v,w)&&g!=null&&d.push(g)}return d}function Zb(e){return e<10?"0".concat(e):"".concat(e)}function Zi(e,t){t===void 0&&(t=Td);var n=Math.ceil(_t(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function dF(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function Jb(e){var t=e.getSeconds(),n=e.getMilliseconds();return Xe(e.getTime()-t*1e3-n)}function fF(e,t){return Jb(e).getTime()===Jb(t).getTime()}function e3(e){if(!fi(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function t3(e,t){if(!fi(e)||!fi(t))throw new Error("Invalid date received");var n=e3(e),r=e3(t);return pl(n,r)}function WE(e){return e.key===ze.Space}var hF=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=he.createRef(),r.onTimeChange=function(a){var o,d;r.setState({time:a});var m=r.props.date,v=m instanceof Date&&!isNaN(+m),g=v?m:new Date;if(a!=null&&a.includes(":")){var w=a.split(":"),N=w[0],S=w[1];g.setHours(Number(N)),g.setMinutes(Number(S))}(d=(o=r.props).onChange)===null||d===void 0||d.call(o,g)},r.renderTimeInput=function(){var a=r.state.time,o=r.props,d=o.date,m=o.timeString,v=o.customTimeInput;return v?L.cloneElement(v,{date:d,value:a,onChange:r.onTimeChange}):he.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var g;(g=r.inputRef.current)===null||g===void 0||g.focus()},required:!0,value:a,onChange:function(g){r.onTimeChange(g.target.value||m)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return he.createElement("div",{className:"react-datepicker__input-time-container"},he.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),he.createElement("div",{className:"react-datepicker-time__input-container"},he.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(L.Component),pF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=L.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var a,o,d=r.key;d===ze.Space&&(r.preventDefault(),r.key=ze.Enter),(o=(a=n.props).handleOnKeyDown)===null||o===void 0||o.call(a,r)},n.isSameDay=function(r){return qt(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var a=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(d){return n.isSameDayOrWeek(d)}):n.isSameDayOrWeek(n.props.selected),o=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!a&&n.isSameDayOrWeek(n.props.preSelection)&&!o},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Vs(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return j2(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return qt(n.props.day,co(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&qt(r,co(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,a=r.day,o=r.highlightDates;if(!o)return!1;var d=An(a,"MM.dd.yyyy");return o.get(d)},n.getHolidaysClass=function(){var r,a=n.props,o=a.day,d=a.holidays;if(!d)return[void 0];var m=An(o,"MM.dd.yyyy");return d.has(m)?[(r=d.get(m))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,a=r.day,o=r.startDate,d=r.endDate;return!o||!d?!1:Mu(a,o,d)},n.isInSelectingRange=function(){var r,a=n.props,o=a.day,d=a.selectsStart,m=a.selectsEnd,v=a.selectsRange,g=a.selectsDisabledDaysInRange,w=a.startDate,N=a.endDate,S=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(d||m||v)||!S||!g&&n.isDisabled()?!1:d&&N&&(pl(S,N)||el(S,N))?Mu(o,S,N):m&&w&&(ho(S,w)||el(S,w))||v&&w&&!N&&(ho(S,w)||el(S,w))?Mu(o,w,S):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var a=n.props,o=a.day,d=a.startDate,m=a.selectsStart,v=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return m?qt(o,v):qt(o,d)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var a=n.props,o=a.day,d=a.endDate,m=a.selectsEnd,v=a.selectsRange,g=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return m||v?qt(o,g):qt(o,d)},n.isRangeStart=function(){var r=n.props,a=r.day,o=r.startDate,d=r.endDate;return!o||!d?!1:qt(o,a)},n.isRangeEnd=function(){var r=n.props,a=r.day,o=r.startDate,d=r.endDate;return!o||!d?!1:qt(d,a)},n.isWeekend=function(){var r=PO(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===Mr(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(Mr(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(Zt())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(a){return n.isSameDayOrWeek(a)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var a=n.props.dayClassName?n.props.dayClassName(r):void 0;return jn("react-datepicker__day",a,"react-datepicker__day--"+XP(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,a=r.day,o=r.ariaLabelPrefixWhenEnabled,d=o===void 0?"Choose":o,m=r.ariaLabelPrefixWhenDisabled,v=m===void 0?"Not available":m,g=n.isDisabled()||n.isExcluded()?v:d;return"".concat(g," ").concat(An(a,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,a=r.day,o=r.holidays,d=o===void 0?new Map:o,m=r.excludeDates,v=An(a,"MM.dd.yyyy"),g=[];return d.has(v)&&g.push.apply(g,d.get(v).holidayNames),n.isExcluded()&&g.push(m==null?void 0:m.filter(function(w){return w instanceof Date?qt(w,a):qt(w==null?void 0:w.date,a)}).map(function(w){if(!(w instanceof Date))return w==null?void 0:w.message})),g.join(", ")},n.getTabIndex=function(){var r=n.props.selected,a=n.props.preSelection,o=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&qt(a,r))?0:-1;return o},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(bb(n.props.day),n.props.day):bb(n.props.day)},n.render=function(){return he.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&he.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,a;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((a=document.activeElement)===null||a===void 0?void 0:a.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(L.Component),mF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=L.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var a,o,d=r.key;d===ze.Space&&(r.preventDefault(),r.key=ze.Enter),(o=(a=n.props).handleOnKeyDown)===null||o===void 0||o.call(a,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!qt(n.props.date,n.props.selected)&&qt(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||qt(n.props.date,n.props.selected)&&qt(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var a=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&qt(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(a=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(a=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(a=!0)),a&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,a=n.isWeekDisabled,o=n.ariaLabelPrefix,d=o===void 0?t.defaultProps.ariaLabelPrefix:o,m=n.onClick,v={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!m&&!a,"react-datepicker__week-number--selected":!!m&&qt(this.props.date,this.props.selected)};return he.createElement("div",{ref:this.weekNumberEl,className:jn(v),"aria-label":"".concat(d," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t}(L.Component),xF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return Vs(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,a){n.props.onDayClick&&n.props.onDayClick(r,a)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,a,o){for(var d,m,v,g=new Date(r),w=0;w<7;w++){var N=new Date(r);N.setDate(N.getDate()+w);var S=!n.isDisabled(N);if(S){g=N;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(g,a,o),n.props.showWeekPicker&&n.handleDayClick(g,o),((d=n.props.shouldCloseOnSelect)!==null&&d!==void 0?d:t.defaultProps.shouldCloseOnSelect)&&((v=(m=n.props).setOpen)===null||v===void 0||v.call(m,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):QP(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),a=fa(r,6),o=new Date(r);o<=a;){if(!n.isDisabled(o))return!1;o=fa(o,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),a=[],o=n.formatWeekNumber(r);if(n.props.showWeekNumber){var d=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,o):void 0;a.push(he.createElement(mF,zt({key:"W"},t.defaultProps,n.props,{weekNumber:o,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:d})))}return a.concat([0,1,2,3,4,5,6].map(function(m){var v=fa(r,m);return he.createElement(pF,zt({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:v.valueOf(),day:v,onClick:n.handleDayClick.bind(n,v),onMouseEnter:n.handleDayMouseEnter.bind(n,v)}))}))},n.startOfWeek=function(){return co(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!qt(n.startOfWeek(),n.props.selected)&&qt(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":qt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return he.createElement("div",{className:jn(n)},this.renderDays())},t}(L.Component),Au,gF=6,uc={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},lm=(Au={},Au[uc.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Au[uc.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Au[uc.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Au),tf=1;function n3(e,t){return e?uc.FOUR_COLUMNS:t?uc.TWO_COLUMNS:uc.THREE_COLUMNS}var vF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=Ra([],Array(12),!0).map(function(){return L.createRef()}),n.QUARTER_REFS=Ra([],Array(4),!0).map(function(){return L.createRef()}),n.isDisabled=function(r){return Vs(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return j2(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,a){var o,d;(d=(o=n.props).onDayClick)===null||d===void 0||d.call(o,r,a,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var a,o;(o=(a=n.props).onDayMouseEnter)===null||o===void 0||o.call(a,r)},n.handleMouseLeave=function(){var r,a;(a=(r=n.props).onMouseLeave)===null||a===void 0||a.call(r)},n.isRangeStartMonth=function(r){var a=n.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:zr(zs(o,r),d)},n.isRangeStartQuarter=function(r){var a=n.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:Ch(ql(o,r),d)},n.isRangeEndMonth=function(r){var a=n.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:zr(zs(o,r),m)},n.isRangeEndQuarter=function(r){var a=n.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:Ch(ql(o,r),m)},n.isInSelectingRangeMonth=function(r){var a,o=n.props,d=o.day,m=o.selectsStart,v=o.selectsEnd,g=o.selectsRange,w=o.startDate,N=o.endDate,S=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return!(m||v||g)||!S?!1:m&&N?K0(S,N,r,d):v&&w||g&&w&&!N?K0(w,S,r,d):!1},n.isSelectingMonthRangeStart=function(r){var a;if(!n.isInSelectingRangeMonth(r))return!1;var o=n.props,d=o.day,m=o.startDate,v=o.selectsStart,g=zs(d,r),w=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return v?zr(g,w):zr(g,m)},n.isSelectingMonthRangeEnd=function(r){var a;if(!n.isInSelectingRangeMonth(r))return!1;var o=n.props,d=o.day,m=o.endDate,v=o.selectsEnd,g=o.selectsRange,w=zs(d,r),N=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return v||g?zr(w,N):zr(w,m)},n.isInSelectingRangeQuarter=function(r){var a,o=n.props,d=o.day,m=o.selectsStart,v=o.selectsEnd,g=o.selectsRange,w=o.startDate,N=o.endDate,S=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return!(m||v||g)||!S?!1:m&&N?ef(S,N,r,d):v&&w||g&&w&&!N?ef(w,S,r,d):!1},n.isWeekInMonth=function(r){var a=n.props.day,o=fa(r,6);return zr(r,a)||zr(o,a)},n.isCurrentMonth=function(r,a){return _t(r)===_t(Zt())&&a===Mr(Zt())},n.isCurrentQuarter=function(r,a){return _t(r)===_t(Zt())&&a===rl(Zt())},n.isSelectedMonth=function(r,a,o){return Mr(o)===a&&_t(r)===_t(o)},n.isSelectMonthInList=function(r,a,o){return o.some(function(d){return n.isSelectedMonth(r,a,d)})},n.isSelectedQuarter=function(r,a,o){return rl(r)===a&&_t(r)===_t(o)},n.isMonthSelected=function(){var r=n.props,a=r.day,o=r.selected,d=r.selectedDates,m=r.selectsMultiple,v=Mr(a);return m?d==null?void 0:d.some(function(g){return n.isSelectedMonth(a,v,g)}):!!o&&n.isSelectedMonth(a,v,o)},n.renderWeeks=function(){for(var r=[],a=n.props.fixedHeight,o=0,d=!1,m=co(mi(n.props.day),n.props.locale,n.props.calendarStartDay),v=function(k){return n.props.showWeekPicker?co(k,n.props.locale,n.props.calendarStartDay):n.props.preSelection},g=function(k){return n.props.showWeekPicker?co(k,n.props.locale,n.props.calendarStartDay):n.props.selected},w=n.props.selected?g(n.props.selected):void 0,N=n.props.preSelection?v(n.props.preSelection):void 0;r.push(he.createElement(xF,zt({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:o,day:m,month:Mr(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:w,preSelection:N,showWeekNumber:n.props.showWeekNumbers}))),!d;){o++,m=uh(m,1);var S=a&&o>=gF,j=!a&&!n.isWeekInMonth(m);if(S||j)if(n.props.peekNextMonth)d=!0;else break}return r},n.onMonthClick=function(r,a){var o=n.isMonthDisabledForLabelDate(a),d=o.isDisabled,m=o.labelDate;d||n.handleDayClick(mi(m),r)},n.onMonthMouseEnter=function(r){var a=n.isMonthDisabledForLabelDate(r),o=a.isDisabled,d=a.labelDate;o||n.handleDayMouseEnter(mi(d))},n.handleMonthNavigation=function(r,a){var o,d,m,v;(d=(o=n.props).setPreSelection)===null||d===void 0||d.call(o,a),(v=(m=n.MONTH_REFS[r])===null||m===void 0?void 0:m.current)===null||v===void 0||v.focus()},n.handleKeyboardNavigation=function(r,a,o){var d,m=n.props,v=m.selected,g=m.preSelection,w=m.setPreSelection,N=m.minDate,S=m.maxDate,j=m.showFourColumnMonthYearPicker,k=m.showTwoColumnMonthYearPicker;if(g){var R=n3(j,k),T=n.getVerticalOffset(R),I=(d=lm[R])===null||d===void 0?void 0:d.grid,A=function(O,V,W){var ee,ce,ne=V,te=W;switch(O){case ze.ArrowRight:ne=pa(V,tf),te=W===11?0:W+tf;break;case ze.ArrowLeft:ne=sl(V,tf),te=W===0?11:W-tf;break;case ze.ArrowUp:ne=sl(V,T),te=!((ee=I==null?void 0:I[0])===null||ee===void 0)&&ee.includes(W)?W+12-T:W-T;break;case ze.ArrowDown:ne=pa(V,T),te=!((ce=I==null?void 0:I[I.length-1])===null||ce===void 0)&&ce.includes(W)?W-12+T:W+T;break}return{newCalculatedDate:ne,newCalculatedMonth:te}},M=function(O,V,W){for(var ee=40,ce=O,ne=!1,te=0,Ne=A(ce,V,W),ae=Ne.newCalculatedDate,Ae=Ne.newCalculatedMonth;!ne;){if(te>=ee){ae=V,Ae=W;break}if(N&&ae<N){ce=ze.ArrowRight;var me=A(ce,ae,Ae);ae=me.newCalculatedDate,Ae=me.newCalculatedMonth}if(S&&ae>S){ce=ze.ArrowLeft;var me=A(ce,ae,Ae);ae=me.newCalculatedDate,Ae=me.newCalculatedMonth}if(rF(ae,n.props)){var me=A(ce,ae,Ae);ae=me.newCalculatedDate,Ae=me.newCalculatedMonth}else ne=!0;te++}return{newCalculatedDate:ae,newCalculatedMonth:Ae}};if(a===ze.Enter){n.isMonthDisabled(o)||(n.onMonthClick(r,o),w==null||w(v));return}var B=M(a,g,o),G=B.newCalculatedDate,P=B.newCalculatedMonth;switch(a){case ze.ArrowRight:case ze.ArrowLeft:case ze.ArrowUp:case ze.ArrowDown:n.handleMonthNavigation(P,G);break}}},n.getVerticalOffset=function(r){var a,o;return(o=(a=lm[r])===null||a===void 0?void 0:a.verticalNavigationOffset)!==null&&o!==void 0?o:0},n.onMonthKeyDown=function(r,a){var o=n.props,d=o.disabledKeyboardNavigation,m=o.handleOnMonthKeyDown,v=r.key;v!==ze.Tab&&r.preventDefault(),d||n.handleKeyboardNavigation(r,v,a),m&&m(r)},n.onQuarterClick=function(r,a){var o=ql(n.props.day,a);Z0(o,n.props)||n.handleDayClick(qb(o),r)},n.onQuarterMouseEnter=function(r){var a=ql(n.props.day,r);Z0(a,n.props)||n.handleDayMouseEnter(qb(a))},n.handleQuarterNavigation=function(r,a){var o,d,m,v;n.isDisabled(a)||n.isExcluded(a)||((d=(o=n.props).setPreSelection)===null||d===void 0||d.call(o,a),(v=(m=n.QUARTER_REFS[r-1])===null||m===void 0?void 0:m.current)===null||v===void 0||v.focus())},n.onQuarterKeyDown=function(r,a){var o,d,m=r.key;if(!n.props.disabledKeyboardNavigation)switch(m){case ze.Enter:n.onQuarterClick(r,a),(d=(o=n.props).setPreSelection)===null||d===void 0||d.call(o,n.props.selected);break;case ze.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(a===4?1:a+1,u2(n.props.preSelection,1));break;case ze.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(a===1?4:a-1,fE(n.props.preSelection,1));break}},n.isMonthDisabledForLabelDate=function(r){var a,o=n.props,d=o.day,m=o.minDate,v=o.maxDate,g=o.excludeDates,w=o.includeDates,N=zs(d,r);return{isDisabled:(a=(m||v||g||w)&&UE(N,n.props))!==null&&a!==void 0?a:!1,labelDate:N}},n.isMonthDisabled=function(r){var a=n.isMonthDisabledForLabelDate(r).isDisabled;return a},n.getMonthClassNames=function(r){var a=n.props,o=a.day,d=a.startDate,m=a.endDate,v=a.preSelection,g=a.monthClassName,w=g?g(zs(o,r)):void 0,N=n.getSelection();return jn("react-datepicker__month-text","react-datepicker__month-".concat(r),w,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":N?n.isSelectMonthInList(o,r,N):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&v&&n.isSelectedMonth(o,r,v)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":d&&m?K0(d,m,r,o):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(o,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var a=Mr(n.props.preSelection),o=n.isMonthDisabledForLabelDate(a).isDisabled,d=r===a&&!(o||n.props.disabledKeyboardNavigation)?"0":"-1";return d},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var a=rl(n.props.preSelection),o=Z0(n.props.day,n.props),d=r===a&&!(o||n.props.disabledKeyboardNavigation)?"0":"-1";return d},n.getAriaLabel=function(r){var a=n.props,o=a.chooseDayAriaLabelPrefix,d=o===void 0?"Choose":o,m=a.disabledDayAriaLabelPrefix,v=m===void 0?"Not available":m,g=a.day,w=a.locale,N=zs(g,r),S=n.isDisabled(N)||n.isExcluded(N)?v:d;return"".concat(S," ").concat(An(N,"MMMM yyyy",w))},n.getQuarterClassNames=function(r){var a=n.props,o=a.day,d=a.startDate,m=a.endDate,v=a.selected,g=a.minDate,w=a.maxDate,N=a.excludeDates,S=a.includeDates,j=a.filterDate,k=a.preSelection,R=a.disabledKeyboardNavigation,T=(g||w||N||S||j)&&Z0(ql(o,r),n.props);return jn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":T,"react-datepicker__quarter-text--selected":v?n.isSelectedQuarter(o,r,v):void 0,"react-datepicker__quarter-text--keyboard-selected":!R&&k&&n.isSelectedQuarter(o,r,k)&&!T,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":d&&m?ef(d,m,r,o):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(o,r)})},n.getMonthContent=function(r){var a=n.props,o=a.showFullMonthYearPicker,d=a.renderMonthContent,m=a.locale,v=a.day,g=BE(r,m),w=_2(r,m);return d?d(r,g,w,v):o?w:g},n.getQuarterContent=function(r){var a,o=n.props,d=o.renderQuarterContent,m=o.locale,v=nF(r,m);return(a=d==null?void 0:d(r,v))!==null&&a!==void 0?a:v},n.renderMonths=function(){var r,a=n.props,o=a.showTwoColumnMonthYearPicker,d=a.showFourColumnMonthYearPicker,m=a.day,v=a.selected,g=(r=lm[n3(d,o)])===null||r===void 0?void 0:r.grid;return g==null?void 0:g.map(function(w,N){return he.createElement("div",{className:"react-datepicker__month-wrapper",key:N},w.map(function(S,j){return he.createElement("div",{ref:n.MONTH_REFS[S],key:j,onClick:function(k){n.onMonthClick(k,S)},onKeyDown:function(k){WE(k)&&(k.preventDefault(),k.key=ze.Enter),n.onMonthKeyDown(k,S)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(S)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(S)}:void 0,tabIndex:Number(n.getTabIndex(S)),className:n.getMonthClassNames(S),"aria-disabled":n.isMonthDisabled(S),role:"option","aria-label":n.getAriaLabel(S),"aria-current":n.isCurrentMonth(m,S)?"date":void 0,"aria-selected":v?n.isSelectedMonth(m,S,v):void 0},n.getMonthContent(S))}))})},n.renderQuarters=function(){var r=n.props,a=r.day,o=r.selected,d=[1,2,3,4];return he.createElement("div",{className:"react-datepicker__quarter-wrapper"},d.map(function(m,v){return he.createElement("div",{key:v,ref:n.QUARTER_REFS[v],role:"option",onClick:function(g){n.onQuarterClick(g,m)},onKeyDown:function(g){n.onQuarterKeyDown(g,m)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(m)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(m)}:void 0,className:n.getQuarterClassNames(m),"aria-selected":o?n.isSelectedQuarter(a,m,o):void 0,tabIndex:Number(n.getQuarterTabIndex(m)),"aria-current":n.isCurrentQuarter(a,m)?"date":void 0},n.getQuarterContent(m))}))},n.getClassNames=function(){var r=n.props,a=r.selectingDate,o=r.selectsStart,d=r.selectsEnd,m=r.showMonthYearPicker,v=r.showQuarterYearPicker,g=r.showWeekPicker;return jn("react-datepicker__month",{"react-datepicker__month--selecting-range":a&&(o||d)},{"react-datepicker__monthPicker":m},{"react-datepicker__quarterPicker":v},{"react-datepicker__weekPicker":g})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,a=n.selectedDates,o=n.selectsMultiple;if(o)return a;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,a=n.showQuarterYearPicker,o=n.day,d=n.ariaLabelPrefix,m=d===void 0?"Month ":d,v=m?m.trim()+" ":"";return he.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(v).concat(An(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():a?this.renderQuarters():this.renderWeeks())},t}(L.Component),yF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,a){return he.createElement("div",{className:n.isSelectedMonth(a)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,a),"aria-selected":n.isSelectedMonth(a)?"true":void 0},n.isSelectedMonth(a)?he.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return he.createElement(xp,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(L.Component),wF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(a,o){return he.createElement("option",{key:a,value:o},a)})},n.renderSelectMode=function(r){return he.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(a){return n.onChange(parseInt(a.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,a){return he.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},he.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),he.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},a[n.props.month]))},n.renderDropdown=function(r){return he.createElement(yF,zt({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var a=n.state.dropdownVisible,o=[n.renderReadView(!a,r)];return a&&o.unshift(n.renderDropdown(r)),o},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return BE(o,n.props.locale)}:function(o){return _2(o,n.props.locale)}),a;switch(this.props.dropdownMode){case"scroll":a=this.renderScrollMode(r);break;case"select":a=this.renderSelectMode(r);break}return he.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},a)},t}(L.Component);function bF(e,t){for(var n=[],r=mi(e),a=mi(t);!ho(r,a);)n.push(Zt(r)),r=pa(r,1);return n}var NF=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(a){var o=Mx(a),d=ja(r.props.date,a)&&zr(r.props.date,a);return he.createElement("div",{className:d?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:r.onChange.bind(r,o),"aria-selected":d?"true":void 0},d?he.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",An(a,r.props.dateFormat,r.props.locale))})},r.onChange=function(a){return r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:bF(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=jn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return he.createElement(xp,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(L.Component),CF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=mi(n.props.minDate),a=mi(n.props.maxDate),o=[];!ho(r,a);){var d=Mx(r);o.push(he.createElement("option",{key:d,value:d},An(r,n.props.dateFormat,n.props.locale))),r=pa(r,1)}return o},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return he.createElement("select",{value:Mx(mi(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var a=An(n.props.date,n.props.dateFormat,n.props.locale);return he.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},he.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),he.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},a))},n.renderDropdown=function(){return he.createElement(NF,zt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,a=[n.renderReadView(!r)];return r&&a.unshift(n.renderDropdown()),a},n.onChange=function(r){n.toggleDropdown();var a=Zt(r);ja(n.props.date,a)&&zr(n.props.date,a)||n.props.onChange(a)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return he.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(L.Component),EF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,a,o;n.list&&(n.list.scrollTop=(o=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((a=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&a!==void 0?a:0):n.list.clientHeight,n.centerLi))!==null&&o!==void 0?o:0)})},n.handleClick=function(r){var a,o;(n.props.minTime||n.props.maxTime)&&Yb(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Vb(r,n.props)||(o=(a=n.props).onChange)===null||o===void 0||o.call(a,r)},n.isSelectedTime=function(r){return n.props.selected&&fF(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&Yb(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Vb(r,n.props)},n.liClasses=function(r){var a,o=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&o.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&o.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(hi(r)*3600+pi(r)*60+lo(r))%(((a=n.props.intervals)!==null&&a!==void 0?a:t.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},n.handleOnKeyDown=function(r,a){var o,d;r.key===ze.Space&&(r.preventDefault(),r.key=ze.Enter),(r.key===ze.ArrowUp||r.key===ze.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===ze.ArrowDown||r.key===ze.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===ze.Enter&&n.handleClick(a),(d=(o=n.props).handleOnKeyDown)===null||d===void 0||d.call(o,r)},n.renderTimes=function(){for(var r,a=[],o=typeof n.props.format=="string"?n.props.format:"p",d=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,m=n.props.selected||n.props.openToDate||Zt(),v=jf(m),g=n.props.injectTimes&&n.props.injectTimes.sort(function(T,I){return T.getTime()-I.getTime()}),w=60*dF(m),N=w/d,S=0;S<N;S++){var j=Tx(v,S*d);if(a.push(j),g){var k=uF(v,j,S,d,g);a=a.concat(k)}}var R=a.reduce(function(T,I){return I.getTime()<=m.getTime()?I:T},a[0]);return a.map(function(T){return he.createElement("li",{key:T.valueOf(),onClick:n.handleClick.bind(n,T),className:n.liClasses(T),ref:function(I){T===R&&(n.centerLi=I)},onKeyDown:function(I){n.handleOnKeyDown(I,T)},tabIndex:T===R?0:-1,role:"option","aria-selected":n.isSelectedTime(T)?"true":void 0,"aria-disabled":n.isDisabledTime(T)?"true":void 0},An(T,o,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?he.createElement(he.Fragment,null):he.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},he.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var n=this,r,a=this.state.height;return he.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),he.createElement("div",{className:"react-datepicker__time"},he.createElement("div",{className:"react-datepicker__time-box"},he.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){n.list=o},style:a?{height:a}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t}(L.Component),r3=3,SF=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=Ra([],Array(r.props.yearItemNumber),!0).map(function(){return L.createRef()}),r.isDisabled=function(a){return Vs(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(a){return j2(a,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var a;return(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection},r.updateFocusOnPaginate=function(a){var o=function(){var d,m;(m=(d=r.YEAR_REFS[a])===null||d===void 0?void 0:d.current)===null||m===void 0||m.focus()};window.requestAnimationFrame(o)},r.handleYearClick=function(a,o){r.props.onDayClick&&r.props.onDayClick(a,o)},r.handleYearNavigation=function(a,o){var d,m,v,g,w=r.props,N=w.date,S=w.yearItemNumber;if(!(N===void 0||S===void 0)){var j=Zi(N,S).startPeriod;r.isDisabled(o)||r.isExcluded(o)||((m=(d=r.props).setPreSelection)===null||m===void 0||m.call(d,o),a-j<0?r.updateFocusOnPaginate(S-(j-a)):a-j>=S?r.updateFocusOnPaginate(Math.abs(S-(a-j))):(g=(v=r.YEAR_REFS[a-j])===null||v===void 0?void 0:v.current)===null||g===void 0||g.focus())}},r.isSameDay=function(a,o){return qt(a,o)},r.isCurrentYear=function(a){return a===_t(Zt())},r.isRangeStart=function(a){return r.props.startDate&&r.props.endDate&&ja(_a(Zt(),a),r.props.startDate)},r.isRangeEnd=function(a){return r.props.startDate&&r.props.endDate&&ja(_a(Zt(),a),r.props.endDate)},r.isInRange=function(a){return J0(a,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(a){var o=r.props,d=o.selectsStart,m=o.selectsEnd,v=o.selectsRange,g=o.startDate,w=o.endDate;return!(d||m||v)||!r.selectingDate()?!1:d&&w?J0(a,r.selectingDate(),w):m&&g||v&&g&&!w?J0(a,g,r.selectingDate()):!1},r.isSelectingRangeStart=function(a){var o;if(!r.isInSelectingRange(a))return!1;var d=r.props,m=d.startDate,v=d.selectsStart,g=_a(Zt(),a);return v?ja(g,(o=r.selectingDate())!==null&&o!==void 0?o:null):ja(g,m??null)},r.isSelectingRangeEnd=function(a){var o;if(!r.isInSelectingRange(a))return!1;var d=r.props,m=d.endDate,v=d.selectsEnd,g=d.selectsRange,w=_a(Zt(),a);return v||g?ja(w,(o=r.selectingDate())!==null&&o!==void 0?o:null):ja(w,m??null)},r.isKeyboardSelected=function(a){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var o=r.props,d=o.minDate,m=o.maxDate,v=o.excludeDates,g=o.includeDates,w=o.filterDate,N=Ru(_a(r.props.date,a)),S=(d||m||v||g||w)&&Af(a,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!qt(N,Ru(r.props.selected))&&qt(N,Ru(r.props.preSelection))&&!S}},r.isSelectedYear=function(a){var o=r.props,d=o.selectsMultiple,m=o.selected,v=o.selectedDates;return d?v==null?void 0:v.some(function(g){return a===_t(g)}):!!m&&a===_t(m)},r.onYearClick=function(a,o){var d=r.props.date;d!==void 0&&r.handleYearClick(Ru(_a(d,o)),a)},r.onYearKeyDown=function(a,o){var d,m,v=a.key,g=r.props,w=g.date,N=g.yearItemNumber,S=g.handleOnKeyDown;if(v!==ze.Tab&&a.preventDefault(),!r.props.disabledKeyboardNavigation)switch(v){case ze.Enter:if(r.props.selected==null)break;r.onYearClick(a,o),(m=(d=r.props).setPreSelection)===null||m===void 0||m.call(d,r.props.selected);break;case ze.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(o+1,di(r.props.preSelection,1));break;case ze.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(o-1,Nc(r.props.preSelection,1));break;case ze.ArrowUp:{if(w===void 0||N===void 0||r.props.preSelection==null)break;var j=Zi(w,N).startPeriod,k=r3,R=o-k;if(R<j){var T=N%k;o>=j&&o<j+T?k=T:k+=T,R=o-k}r.handleYearNavigation(R,Nc(r.props.preSelection,k));break}case ze.ArrowDown:{if(w===void 0||N===void 0||r.props.preSelection==null)break;var I=Zi(w,N).endPeriod,k=r3,R=o+k;if(R>I){var T=N%k;o<=I&&o>I-T?k=T:k+=T,R=o+k}r.handleYearNavigation(R,di(r.props.preSelection,k));break}}S&&S(a)},r.getYearClassNames=function(a){var o=r.props,d=o.date,m=o.minDate,v=o.maxDate,g=o.excludeDates,w=o.includeDates,N=o.filterDate,S=o.yearClassName;return jn("react-datepicker__year-text","react-datepicker__year-".concat(a),d?S==null?void 0:S(_a(d,a)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(a),"react-datepicker__year-text--disabled":(m||v||g||w||N)&&Af(a,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(a),"react-datepicker__year-text--range-start":r.isRangeStart(a),"react-datepicker__year-text--range-end":r.isRangeEnd(a),"react-datepicker__year-text--in-range":r.isInRange(a),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(a),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(a),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(a),"react-datepicker__year-text--today":r.isCurrentYear(a)})},r.getYearTabIndex=function(a){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var o=_t(r.props.preSelection),d=Af(a,r.props);return a===o&&!d?"0":"-1"},r.getYearContent=function(a){return r.props.renderYearContent?r.props.renderYearContent(a):a},r}return t.prototype.render=function(){var n=this,r=[],a=this.props,o=a.date,d=a.yearItemNumber,m=a.onYearMouseEnter,v=a.onYearMouseLeave;if(o===void 0)return null;for(var g=Zi(o,d),w=g.startPeriod,N=g.endPeriod,S=function(R){r.push(he.createElement("div",{ref:j.YEAR_REFS[R-w],onClick:function(T){n.onYearClick(T,R)},onKeyDown:function(T){WE(T)&&(T.preventDefault(),T.key=ze.Enter),n.onYearKeyDown(T,R)},tabIndex:Number(j.getYearTabIndex(R)),className:j.getYearClassNames(R),onMouseEnter:j.props.usePointerEvent?void 0:function(T){return m(T,R)},onPointerEnter:j.props.usePointerEvent?function(T){return m(T,R)}:void 0,onMouseLeave:j.props.usePointerEvent?void 0:function(T){return v(T,R)},onPointerLeave:j.props.usePointerEvent?function(T){return v(T,R)}:void 0,key:R,"aria-current":j.isCurrentYear(R)?"date":void 0},j.getYearContent(R)))},j=this,k=w;k<=N;k++)S(k);return he.createElement("div",{className:"react-datepicker__year"},he.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t}(L.Component);function _F(e,t,n,r){for(var a=[],o=0;o<2*t+1;o++){var d=e+t-o,m=!0;n&&(m=_t(n)<=d),r&&m&&(m=_t(r)>=d),m&&a.push(d)}return a}var jF=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;r.renderOptions=function(){var m=r.props.year,v=r.state.yearsList.map(function(N){return he.createElement("div",{className:m===N?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:N,onClick:r.onChange.bind(r,N),"aria-selected":m===N?"true":void 0},m===N?he.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",N)}),g=r.props.minDate?_t(r.props.minDate):null,w=r.props.maxDate?_t(r.props.maxDate):null;return(!w||!r.state.yearsList.find(function(N){return N===w}))&&v.unshift(he.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},he.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!g||!r.state.yearsList.find(function(N){return N===g}))&&v.push(he.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},he.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),v},r.onChange=function(m){r.props.onChange(m)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(m){var v=r.state.yearsList.map(function(g){return g+m});r.setState({yearsList:v})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var a=n.yearDropdownItemNumber,o=n.scrollableYearDropdown,d=a||(o?10:5);return r.state={yearsList:_F(r.props.year,d,r.props.minDate,r.props.maxDate)},r.dropdownRef=L.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,a=r?r.find(function(o){return o.ariaSelected}):null;n.scrollTop=a&&a instanceof HTMLElement?a.offsetTop+(a.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=jn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return he.createElement(xp,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(L.Component),AF=function(e){mr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?_t(n.props.minDate):1900,a=n.props.maxDate?_t(n.props.maxDate):2100,o=[],d=r;d<=a;d++)o.push(he.createElement("option",{key:d,value:d},d));return o},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return he.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return he.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(a){return n.toggleDropdown(a)}},he.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),he.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return he.createElement(jF,zt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,a=[n.renderReadView(!r)];return r&&a.unshift(n.renderDropdown()),a},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,a){var o;(o=n.onSelect)===null||o===void 0||o.call(n,r,a),n.setOpen()},n.onSelect=function(r,a){var o,d;(d=(o=n.props).onSelect)===null||d===void 0||d.call(o,r,a)},n.setOpen=function(){var r,a;(a=(r=n.props).setOpen)===null||a===void 0||a.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return he.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(L.Component),kF=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],TF=function(e){var t=(e.className||"").split(/\s+/);return kF.some(function(n){return t.indexOf(n)>=0})},DF=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(a){r.props.onClickOutside(a)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(a){var o,d;TF(a.target)&&((d=(o=r.props).onDropdownFocus)===null||d===void 0||d.call(o,a))},r.getDateInView=function(){var a=r.props,o=a.preSelection,d=a.selected,m=a.openToDate,v=qE(r.props),g=zE(r.props),w=Zt(),N=m||d||o;return N||(v&&pl(w,v)?v:g&&ho(w,g)?g:w)},r.increaseMonth=function(){r.setState(function(a){var o=a.date;return{date:pa(o,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(a){var o=a.date;return{date:sl(o,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(a,o,d){r.props.onSelect(a,o,d),r.props.setPreSelection&&r.props.setPreSelection(a)},r.handleDayMouseEnter=function(a){r.setState({selectingDate:a}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(a)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(a,o){r.setState({selectingDate:_a(Zt(),o)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(a,o)},r.handleYearMouseLeave=function(a,o){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(a,o)},r.handleYearChange=function(a){var o,d,m,v;(d=(o=r.props).onYearChange)===null||d===void 0||d.call(o,a),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(a),(v=(m=r.props).setOpen)===null||v===void 0||v.call(m,!0)),r.props.setPreSelection&&r.props.setPreSelection(a)},r.getEnabledPreSelectionDateForMonth=function(a){if(!Vs(a,r.props))return a;for(var o=mi(a),d=ZP(a),m=PM(d,o),v=null,g=0;g<=m;g++){var w=fa(o,g);if(!Vs(w,r.props)){v=w;break}}return v},r.handleMonthChange=function(a){var o,d,m,v=(o=r.getEnabledPreSelectionDateForMonth(a))!==null&&o!==void 0?o:a;r.handleCustomMonthChange(v),r.props.adjustDateOnChange&&(r.props.onSelect(v),(m=(d=r.props).setOpen)===null||m===void 0||m.call(d,!0)),r.props.setPreSelection&&r.props.setPreSelection(v)},r.handleCustomMonthChange=function(a){var o,d;(d=(o=r.props).onMonthChange)===null||d===void 0||d.call(o,a),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(a){r.handleYearChange(a),r.handleMonthChange(a)},r.changeYear=function(a){r.setState(function(o){var d=o.date;return{date:_a(d,Number(a))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(a){r.setState(function(o){var d=o.date;return{date:zs(d,Number(a))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(a){r.setState(function(o){var d=o.date;return{date:_a(zs(d,Mr(a)),_t(a))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(a){a===void 0&&(a=r.state.date);var o=co(a,r.props.locale,r.props.calendarStartDay),d=[];return r.props.showWeekNumbers&&d.push(he.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),d.concat([0,1,2,3,4,5,6].map(function(m){var v=fa(o,m),g=r.formatWeekday(v,r.props.locale),w=r.props.weekDayClassName?r.props.weekDayClassName(v):void 0;return he.createElement("div",{key:m,"aria-label":An(v,"EEEE",r.props.locale),className:jn("react-datepicker__day-name",w)},g)}))},r.formatWeekday=function(a,o){return r.props.formatWeekDay?JP(a,r.props.formatWeekDay,o):r.props.useWeekdaysShort?tF(a,o):eF(a,o)},r.decreaseYear=function(){r.setState(function(a){var o,d=a.date;return{date:Nc(d,r.props.showYearPicker?(o=r.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var a,o,d;if(!r.props.renderCustomHeader){var m=(a=r.props.monthsShown)!==null&&a!==void 0?a:t.defaultProps.monthsShown,v=r.props.showPreviousMonths?m-1:0,g=(o=r.props.monthSelectedIn)!==null&&o!==void 0?o:v,w=sl(r.state.date,g),N;switch(!0){case r.props.showMonthYearPicker:N=Qb(r.state.date,r.props);break;case r.props.showYearPicker:N=iF(r.state.date,r.props);break;case r.props.showQuarterYearPicker:N=sF(r.state.date,r.props);break;default:N=$b(w,r.props);break}if(!(!((d=r.props.forceShowMonthNavigation)!==null&&d!==void 0?d:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&N||r.props.showTimeSelectOnly)){var S=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],j=["react-datepicker__navigation","react-datepicker__navigation--previous"],k=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(k=r.decreaseYear),N&&r.props.showDisabledMonthNavigation&&(j.push("react-datepicker__navigation--previous--disabled"),k=void 0);var R=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,T=r.props,I=T.previousMonthButtonLabel,A=I===void 0?t.defaultProps.previousMonthButtonLabel:I,M=T.previousYearButtonLabel,B=M===void 0?t.defaultProps.previousYearButtonLabel:M,G=r.props,P=G.previousMonthAriaLabel,O=P===void 0?typeof A=="string"?A:"Previous Month":P,V=G.previousYearAriaLabel,W=V===void 0?typeof B=="string"?B:"Previous Year":V;return he.createElement("button",{type:"button",className:j.join(" "),onClick:k,onKeyDown:r.props.handleOnKeyDown,"aria-label":R?W:O},he.createElement("span",{className:S.join(" ")},R?B:A))}}},r.increaseYear=function(){r.setState(function(a){var o,d=a.date;return{date:di(d,r.props.showYearPicker?(o=r.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var a;if(!r.props.renderCustomHeader){var o;switch(!0){case r.props.showMonthYearPicker:o=Xb(r.state.date,r.props);break;case r.props.showYearPicker:o=oF(r.state.date,r.props);break;case r.props.showQuarterYearPicker:o=aF(r.state.date,r.props);break;default:o=Gb(r.state.date,r.props);break}if(!(!((a=r.props.forceShowMonthNavigation)!==null&&a!==void 0?a:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&o||r.props.showTimeSelectOnly)){var d=["react-datepicker__navigation","react-datepicker__navigation--next"],m=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&d.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&d.push("react-datepicker__navigation--next--with-today-button");var v=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(v=r.increaseYear),o&&r.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--next--disabled"),v=void 0);var g=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,w=r.props,N=w.nextMonthButtonLabel,S=N===void 0?t.defaultProps.nextMonthButtonLabel:N,j=w.nextYearButtonLabel,k=j===void 0?t.defaultProps.nextYearButtonLabel:j,R=r.props,T=R.nextMonthAriaLabel,I=T===void 0?typeof S=="string"?S:"Next Month":T,A=R.nextYearAriaLabel,M=A===void 0?typeof k=="string"?k:"Next Year":A;return he.createElement("button",{type:"button",className:d.join(" "),onClick:v,onKeyDown:r.props.handleOnKeyDown,"aria-label":g?M:I},he.createElement("span",{className:m.join(" ")},g?k:S))}}},r.renderCurrentMonth=function(a){a===void 0&&(a=r.state.date);var o=["react-datepicker__current-month"];return r.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),he.createElement("h2",{className:o.join(" ")},An(a,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showYearDropdown||a))return he.createElement(AF,zt({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:_t(r.state.date)}))},r.renderMonthDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showMonthDropdown||a))return he.createElement(wF,zt({},t.defaultProps,r.props,{month:Mr(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showMonthYearDropdown||a))return he.createElement(CF,zt({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(a){r.props.onSelect(zb(),a),r.props.setPreSelection&&r.props.setPreSelection(zb())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return he.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(a){var o=a.monthDate,d=a.i;return he.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(o),he.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(d!==0),r.renderMonthYearDropdown(d!==0),r.renderYearDropdown(d!==0)),he.createElement("div",{className:"react-datepicker__day-names"},r.header(o)))},r.renderCustomHeader=function(a){var o,d,m=a.monthDate,v=a.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var g=$b(r.state.date,r.props),w=Gb(r.state.date,r.props),N=Qb(r.state.date,r.props),S=Xb(r.state.date,r.props),j=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return he.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(d=(o=r.props).renderCustomHeader)===null||d===void 0?void 0:d.call(o,zt(zt({},r.state),{customHeaderCount:v,monthDate:m,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:g,nextMonthButtonDisabled:w,prevYearButtonDisabled:N,nextYearButtonDisabled:S})),j&&he.createElement("div",{className:"react-datepicker__day-names"},r.header(m)))},r.renderYearHeader=function(a){var o=a.monthDate,d=r.props,m=d.showYearPicker,v=d.yearItemNumber,g=v===void 0?t.defaultProps.yearItemNumber:v,w=Zi(o,g),N=w.startPeriod,S=w.endPeriod;return he.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},m?"".concat(N," - ").concat(S):_t(o))},r.renderHeader=function(a){var o=a.monthDate,d=a.i,m=d===void 0?0:d,v={monthDate:o,i:m};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(v);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(v);default:return r.renderDefaultHeader(v)}},r.renderMonths=function(){var a,o;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var d=[],m=(a=r.props.monthsShown)!==null&&a!==void 0?a:t.defaultProps.monthsShown,v=r.props.showPreviousMonths?m-1:0,g=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?di(r.state.date,v):sl(r.state.date,v),w=(o=r.props.monthSelectedIn)!==null&&o!==void 0?o:v,N=0;N<m;++N){var S=N-w+v,j=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?di(g,S):pa(g,S),k="month-".concat(N),R=N<m-1,T=N>0;d.push(he.createElement("div",{key:k,ref:function(I){r.monthContainer=I??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:j,i:N}),he.createElement(vF,zt({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:j,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:N,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:R,monthShowsDuplicateDaysStart:T}))))}return d}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return he.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),he.createElement(SF,zt({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return he.createElement(EF,zt({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var a=r.props.selected?new Date(r.props.selected):void 0,o=a&&gp(a)&&!!r.props.selected,d=o?"".concat(Zb(a.getHours()),":").concat(Zb(a.getMinutes())):"";if(r.props.showTimeInput)return he.createElement(hF,zt({},t.defaultProps,r.props,{date:a,timeString:d,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var a,o=Zi(r.state.date,(a=r.props.yearItemNumber)!==null&&a!==void 0?a:t.defaultProps.yearItemNumber),d=o.startPeriod,m=o.endPeriod,v;return r.props.showYearPicker?v="".concat(d," - ").concat(m):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?v=_t(r.state.date):v="".concat(_2(Mr(r.state.date),r.props.locale)," ").concat(_t(r.state.date)),he.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&v)},r.renderChildren=function(){if(r.props.children)return he.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=L.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Td}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!qt(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var a=!zr(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return a&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!qt(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||VP;return he.createElement(xp,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},he.createElement("div",{style:{display:"contents"},ref:this.containerRef},he.createElement(n,{className:jn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(L.Component),IF=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,a=e.onClick,o="react-datepicker__calendar-icon";if(typeof t=="string")return he.createElement("i",{className:"".concat(o," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:a});if(he.isValidElement(t)){var d=t;return he.cloneElement(d,{className:"".concat(d.props.className||""," ").concat(o," ").concat(r),onClick:function(m){typeof d.props.onClick=="function"&&d.props.onClick(m),typeof a=="function"&&a(m)}})}return he.createElement("svg",{className:"".concat(o," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:a},he.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},HE=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return ZT.createPortal(this.props.children,this.el)},t}(L.Component),RF="[tabindex], a, button, input, select, textarea",MF=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},VE=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var a;return Array.prototype.slice.call((a=r.tabLoopRef.current)===null||a===void 0?void 0:a.querySelectorAll(RF),1,-1).filter(MF)},r.handleFocusStart=function(){var a=r.getTabChildren();a&&a.length>1&&a[a.length-1].focus()},r.handleFocusEnd=function(){var a=r.getTabChildren();a&&a.length>1&&a[0].focus()},r.tabLoopRef=L.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?he.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},he.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,he.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(L.Component);function OF(e){var t=function(n){var r,a=typeof n.hidePopper=="boolean"?n.hidePopper:!0,o=L.useRef(null),d=HP(zt({open:!a,whileElementsMounted:NP,placement:n.popperPlacement,middleware:Ra([DP({padding:15}),TP(10),IP({element:o})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),m=zt(zt({},n),{hidePopper:a,popperProps:zt(zt({},d),{arrowRef:o})});return he.createElement(e,zt({},m))};return t}var LF=function(e){mr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this.props,r=n.className,a=n.wrapperClassName,o=n.hidePopper,d=o===void 0?t.defaultProps.hidePopper:o,m=n.popperComponent,v=n.targetComponent,g=n.enableTabLoop,w=n.popperOnKeyDown,N=n.portalId,S=n.portalHost,j=n.popperProps,k=n.showArrow,R=void 0;if(!d){var T=jn("react-datepicker-popper",r);R=he.createElement(VE,{enableTabLoop:g},he.createElement("div",{ref:j.refs.setFloating,style:j.floatingStyles,className:T,"data-placement":j.placement,onKeyDown:w},m,k&&he.createElement(PP,{ref:j.arrowRef,context:j.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(R=L.createElement(this.props.popperContainer,{},R)),N&&!d&&(R=he.createElement(HE,{portalId:N,portalHost:S},R));var I=jn("react-datepicker-wrapper",a);return he.createElement(he.Fragment,null,he.createElement("div",{ref:j.refs.setReference,className:I},v),R)},t}(L.Component),PF=OF(LF),s3="react-datepicker-ignore-onclickoutside";function FF(e,t){return e&&t?Mr(e)!==Mr(t)||_t(e)!==_t(t):e!==t}var cm="Date input not valid.",YE=function(e){mr(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Zt()},r.modifyHolidays=function(){var a;return(a=r.props.holidays)===null||a===void 0?void 0:a.reduce(function(o,d){var m=new Date(d.date);return gp(m)?Ra(Ra([],o,!0),[zt(zt({},d),{date:m})],!1):o},[])},r.calcInitialState=function(){var a,o=r.getPreSelection(),d=qE(r.props),m=zE(r.props),v=d&&pl(o,jf(d))?d:m&&ho(o,Wb(m))?m:o;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(a=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&a!==void 0?a:v,highlightDates:Kb(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(zt(zt({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(zt(zt({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var a,o;(o=(a=r.input)===null||a===void 0?void 0:a.focus)===null||o===void 0||o.call(a,{preventScroll:!0})},r.setBlur=function(){var a,o;(o=(a=r.input)===null||a===void 0?void 0:a.blur)===null||o===void 0||o.call(a),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(a,o){o===void 0&&(o=!1),r.setState({open:a,preSelection:a&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:um},function(){a||r.setState(function(d){return{focused:o?d.focused:!1}},function(){!o&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return fi(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(a){var o,d,m=r.state.wasHidden,v=m?r.state.open:!0;m&&r.resetHiddenStatus(),r.state.preventFocus||((d=(o=r.props).onFocus)===null||d===void 0||d.call(o,a),v&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(a){var o,d;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((d=(o=r.props).onBlur)===null||d===void 0||d.call(o,a)),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(a){var o,d;r.props.inline||r.setOpen(!1),(d=(o=r.props).onClickOutside)===null||d===void 0||d.call(o,a),r.props.withPortal&&a.preventDefault()},r.handleChange=function(){for(var a,o,d,m,v,g=[],w=0;w<arguments.length;w++)g[w]=arguments[w];var N=g[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,g),!N||typeof N.isDefaultPrevented!="function"||N.isDefaultPrevented()))){r.setState({inputValue:(N==null?void 0:N.target)instanceof HTMLInputElement?N.target.value:null,lastPreSelectChange:BF});var S=r.props,j=S.selectsRange,k=S.startDate,R=S.endDate,T=(a=r.props.dateFormat)!==null&&a!==void 0?a:t.defaultProps.dateFormat,I=(o=r.props.strictParsing)!==null&&o!==void 0?o:t.defaultProps.strictParsing,A=(N==null?void 0:N.target)instanceof HTMLInputElement?N.target.value:"";if(j){var M=A.split(T.includes("-")?FE:"-",2).map(function(ce){return ce.trim()}),B=M[0],G=M[1],P=im(B??"",T,r.props.locale,I),O=im(G??"",T,r.props.locale,I),V=(k==null?void 0:k.getTime())!==(P==null?void 0:P.getTime()),W=(R==null?void 0:R.getTime())!==(O==null?void 0:O.getTime());if(!V&&!W||P&&Vs(P,r.props)||O&&Vs(O,r.props))return;(m=(d=r.props).onChange)===null||m===void 0||m.call(d,[P,O],N)}else{var ee=im(A,T,r.props.locale,I,(v=r.props.selected)!==null&&v!==void 0?v:void 0);(ee||!A)&&r.setSelected(ee,N,!0)}}},r.handleSelect=function(a,o,d){if(!r.props.readOnly){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(o),r.setSelected(a,o,!1,d),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(a);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var m=r.props,v=m.startDate,g=m.endDate;v&&!g&&(r.props.swapRange||!t3(a,v))&&r.setOpen(!1)}}},r.setSelected=function(a,o,d,m){var v,g,w=a;if(r.props.showYearPicker){if(w!==null&&Af(_t(w),r.props))return}else if(r.props.showMonthYearPicker){if(w!==null&&UE(w,r.props))return}else if(w!==null&&Vs(w,r.props))return;var N=r.props,S=N.onChange,j=N.selectsRange,k=N.startDate,R=N.endDate,T=N.selectsMultiple,I=N.selectedDates,A=N.minTime,M=N.swapRange;if(!el(r.props.selected,w)||r.props.allowSameDay||j||T)if(w!==null&&(r.props.selected&&(!d||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(w=om(w,{hour:hi(r.props.selected),minute:pi(r.props.selected),second:lo(r.props.selected)})),!d&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&A&&(w=om(w,{hour:A.getHours(),minute:A.getMinutes(),second:A.getSeconds()})),r.props.inline||r.setState({preSelection:w}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:m})),j){var B=!k&&!R,G=k&&!R,P=k&&R;B?S==null||S([w,null],o):G&&(w===null?S==null||S([null,null],o):t3(w,k)?M?S==null||S([w,k],o):S==null||S([w,null],o):S==null||S([k,w],o)),P&&(S==null||S([w,null],o))}else if(T){if(w!==null)if(!(I!=null&&I.length))S==null||S([w],o);else{var O=I.some(function(W){return qt(W,w)});if(O){var V=I.filter(function(W){return!qt(W,w)});S==null||S(V,o)}else S==null||S(Ra(Ra([],I,!0),[w],!1),o)}}else S==null||S(w,o);d||((g=(v=r.props).onSelect)===null||g===void 0||g.call(v,w,o),r.setState({inputValue:null}))},r.setPreSelection=function(a){if(!r.props.readOnly){var o=fi(r.props.minDate),d=fi(r.props.maxDate),m=!0;if(a){var v=jf(a);if(o&&d)m=Mu(a,r.props.minDate,r.props.maxDate);else if(o){var g=jf(r.props.minDate);m=ho(a,g)||el(v,g)}else if(d){var w=Wb(r.props.maxDate);m=pl(a,w)||el(v,w)}}m&&r.setState({preSelection:a})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(a){var o,d;if(!(r.props.selectsRange||r.props.selectsMultiple)){var m=r.props.selected?r.props.selected:r.getPreSelection(),v=r.props.selected?a:om(m,{hour:hi(a),minute:pi(a)});r.setState({preSelection:v}),(d=(o=r.props).onChange)===null||d===void 0||d.call(o,v),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var a,o;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(o=(a=r.props).onInputClick)===null||o===void 0||o.call(a)},r.onInputKeyDown=function(a){var o,d,m,v,g,w;(d=(o=r.props).onKeyDown)===null||d===void 0||d.call(o,a);var N=a.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(N===ze.ArrowDown||N===ze.ArrowUp||N===ze.Enter)&&((m=r.onInputClick)===null||m===void 0||m.call(r));return}if(r.state.open){if(N===ze.ArrowDown||N===ze.ArrowUp){a.preventDefault();var S=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',j=((v=r.calendar)===null||v===void 0?void 0:v.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(S);j instanceof HTMLElement&&j.focus({preventScroll:!0});return}var k=Zt(r.state.preSelection);N===ze.Enter?(a.preventDefault(),a.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===um?(r.handleSelect(k,a),!r.props.shouldCloseOnSelect&&r.setPreSelection(k)):r.setOpen(!1)):N===ze.Escape?(a.preventDefault(),a.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):N===ze.Tab&&r.setOpen(!1),r.inputOk()||(w=(g=r.props).onInputError)===null||w===void 0||w.call(g,{code:1,msg:cm})}},r.onPortalKeyDown=function(a){var o=a.key;o===ze.Escape&&(a.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(a){var o,d,m,v,g,w,N=r.props,S=N.minDate,j=N.maxDate,k=N.disabledKeyboardNavigation,R=N.showWeekPicker,T=N.shouldCloseOnSelect,I=N.locale,A=N.calendarStartDay,M=N.adjustDateOnChange,B=N.inline;if((d=(o=r.props).onKeyDown)===null||d===void 0||d.call(o,a),!k){var G=a.key,P=a.shiftKey,O=Zt(r.state.preSelection),V=function(ae,Ae){var me=Ae;switch(ae){case ze.ArrowRight:me=R?uh(Ae,1):fa(Ae,1);break;case ze.ArrowLeft:me=R?Nb(Ae,1):q9(Ae,1);break;case ze.ArrowUp:me=Nb(Ae,1);break;case ze.ArrowDown:me=uh(Ae,1);break;case ze.PageUp:me=P?Nc(Ae,1):sl(Ae,1);break;case ze.PageDown:me=P?di(Ae,1):pa(Ae,1);break;case ze.Home:me=co(Ae,I,A);break;case ze.End:me=KP(Ae);break}return me},W=function(ae,Ae){for(var me=40,de=ae,fe=!1,Be=0,Ye=V(ae,Ae);!fe;){if(Be>=me){Ye=Ae;break}S&&Ye<S&&(de=ze.ArrowRight,Ye=Vs(S,r.props)?V(de,Ye):S),j&&Ye>j&&(de=ze.ArrowLeft,Ye=Vs(j,r.props)?V(de,Ye):j),Vs(Ye,r.props)?((de===ze.PageUp||de===ze.Home)&&(de=ze.ArrowRight),(de===ze.PageDown||de===ze.End)&&(de=ze.ArrowLeft),Ye=V(de,Ye)):fe=!0,Be++}return Ye};if(G===ze.Enter){a.preventDefault(),r.handleSelect(O,a),!T&&r.setPreSelection(O);return}else if(G===ze.Escape){a.preventDefault(),r.setOpen(!1),r.inputOk()||(v=(m=r.props).onInputError)===null||v===void 0||v.call(m,{code:1,msg:cm});return}var ee=null;switch(G){case ze.ArrowLeft:case ze.ArrowRight:case ze.ArrowUp:case ze.ArrowDown:case ze.PageUp:case ze.PageDown:case ze.Home:case ze.End:ee=W(G,O);break}if(!ee){(w=(g=r.props).onInputError)===null||w===void 0||w.call(g,{code:1,msg:cm});return}if(a.preventDefault(),r.setState({lastPreSelectChange:um}),M&&r.setSelected(ee),r.setPreSelection(ee),B){var ce=Mr(O),ne=Mr(ee),te=_t(O),Ne=_t(ee);ce!==ne||te!==Ne?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(a){var o=a.key;o===ze.Escape&&(a.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(a){a&&a.preventDefault&&a.preventDefault(),r.sendFocusBackToInput();var o=r.props,d=o.selectsRange,m=o.onChange;d?m==null||m([null,null],a):m==null||m(null,a),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(a){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(a.target===document||a.target===document.documentElement||a.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(a)&&r.setOpen(!1)},r.renderCalendar=function(){var a,o;return!r.props.inline&&!r.isCalendarOpen()?null:he.createElement(DF,zt({showMonthYearDropdown:void 0,ref:function(d){r.calendar=d}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(a=r.props.dateFormatCalendar)!==null&&a!==void 0?a:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:cF(r.modifyHolidays()),outsideClickIgnoreClass:s3,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(o=r.props.dropdownMode)!==null&&o!==void 0?o:t.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var a=r.props,o=a.dateFormat,d=o===void 0?t.defaultProps.dateFormat:o,m=a.locale,v=r.props.showTimeInput||r.props.showTimeSelect,g=v?"PPPPp":"PPPP",w;return r.props.selectsRange?w="Selected start date: ".concat(qs(r.props.startDate,{dateFormat:g,locale:m}),". ").concat(r.props.endDate?"End date: "+qs(r.props.endDate,{dateFormat:g,locale:m}):""):r.props.showTimeSelectOnly?w="Selected time: ".concat(qs(r.props.selected,{dateFormat:d,locale:m})):r.props.showYearPicker?w="Selected year: ".concat(qs(r.props.selected,{dateFormat:"yyyy",locale:m})):r.props.showMonthYearPicker?w="Selected month: ".concat(qs(r.props.selected,{dateFormat:"MMMM yyyy",locale:m})):r.props.showQuarterYearPicker?w="Selected quarter: ".concat(qs(r.props.selected,{dateFormat:"yyyy, QQQ",locale:m})):w="Selected date: ".concat(qs(r.props.selected,{dateFormat:g,locale:m})),he.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},w)},r.renderDateInput=function(){var a,o,d,m=jn(r.props.className,(a={},a[s3]=r.state.open,a)),v=r.props.customInput||he.createElement("input",{type:"text"}),g=r.props.customInputRef||"ref",w=r.props,N=w.dateFormat,S=N===void 0?t.defaultProps.dateFormat:N,j=w.locale,k=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?$P(r.props.startDate,r.props.endDate,{dateFormat:S,locale:j}):r.props.selectsMultiple?GP((d=r.props.selectedDates)!==null&&d!==void 0?d:[],{dateFormat:S,locale:j}):qs(r.props.selected,{dateFormat:S,locale:j});return L.cloneElement(v,(o={},o[g]=function(R){r.input=R},o.value=k,o.onBlur=r.handleBlur,o.onChange=r.handleChange,o.onClick=r.onInputClick,o.onFocus=r.handleFocus,o.onKeyDown=r.onInputKeyDown,o.id=r.props.id,o.name=r.props.name,o.form=r.props.form,o.autoFocus=r.props.autoFocus,o.placeholder=r.props.placeholderText,o.disabled=r.props.disabled,o.autoComplete=r.props.autoComplete,o.className=jn(v.props.className,m),o.title=r.props.title,o.readOnly=r.props.readOnly,o.required=r.props.required,o.tabIndex=r.props.tabIndex,o["aria-describedby"]=r.props.ariaDescribedBy,o["aria-invalid"]=r.props.ariaInvalid,o["aria-labelledby"]=r.props.ariaLabelledBy,o["aria-required"]=r.props.ariaRequired,o))},r.renderClearButton=function(){var a=r.props,o=a.isClearable,d=a.disabled,m=a.selected,v=a.startDate,g=a.endDate,w=a.clearButtonTitle,N=a.clearButtonClassName,S=N===void 0?"":N,j=a.ariaLabelClose,k=j===void 0?"Close":j,R=a.selectedDates,T=a.readOnly;return o&&!T&&(m!=null||v!=null||g!=null||R!=null&&R.length)?he.createElement("button",{type:"button",className:jn("react-datepicker__close-icon",S,{"react-datepicker__close-icon--disabled":d}),disabled:d,"aria-label":k,onClick:r.onClearClick,title:w,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Td,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var a,o,d,m;n.inline&&FF(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Kb(this.props.highlightDates)}),!r.focused&&!el(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((o=(a=this.props).onCalendarOpen)===null||o===void 0||o.call(a)),r.open===!0&&this.state.open===!1&&((m=(d=this.props).onCalendarClose)===null||m===void 0||m.call(d)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,a=n.icon,o=n.calendarIconClassname,d=n.calendarIconClassName,m=n.toggleCalendarOnIconClick,v=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),he.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&he.createElement(IF,zt({icon:a,className:jn(d,!d&&o,v&&"react-datepicker-ignore-onclickoutside")},m?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?he.createElement(VE,{enableTabLoop:this.props.enableTabLoop},he.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=he.createElement(HE,zt({portalId:this.props.portalId},this.props),r)),he.createElement("div",null,this.renderInputContainer(),r)}return he.createElement(PF,zt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(L.Component),BF="input",um="navigate";var Eh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Eh.exports;(function(e,t){(function(){var n,r="4.17.21",a=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",m="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",g=500,w="__lodash_placeholder__",N=1,S=2,j=4,k=1,R=2,T=1,I=2,A=4,M=8,B=16,G=32,P=64,O=128,V=256,W=512,ee=30,ce="...",ne=800,te=16,Ne=1,ae=2,Ae=3,me=1/0,de=9007199254740991,fe=17976931348623157e292,Be=0/0,Ye=4294967295,Je=Ye-1,Te=Ye>>>1,$e=[["ary",O],["bind",T],["bindKey",I],["curry",M],["curryRight",B],["flip",W],["partial",G],["partialRight",P],["rearg",V]],nt="[object Arguments]",De="[object Array]",Oe="[object AsyncFunction]",at="[object Boolean]",Ht="[object Date]",Vt="[object DOMException]",Bt="[object Error]",Lt="[object Function]",_e="[object GeneratorFunction]",Ke="[object Map]",Nt="[object Number]",ve="[object Null]",ke="[object Object]",qe="[object Promise]",oe="[object Proxy]",Ee="[object RegExp]",ye="[object Set]",gt="[object String]",pn="[object Symbol]",Fe="[object Undefined]",rt="[object WeakMap]",Pt="[object WeakSet]",un="[object ArrayBuffer]",en="[object DataView]",gn="[object Float32Array]",os="[object Float64Array]",As="[object Int8Array]",qa="[object Int16Array]",ln="[object Int32Array]",Pe="[object Uint8Array]",dn="[object Uint8ClampedArray]",Mt="[object Uint16Array]",Xt="[object Uint32Array]",Ks=/\b__p \+= '';/g,No=/\b(__p \+=) '' \+/g,Md=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ft=/&(?:amp|lt|gt|quot|#39);/g,ga=/[&<>"']/g,Od=RegExp(Ft.source),Ld=RegExp(ga.source),ls=/<%-([\s\S]+?)%>/g,Uc=/<%([\s\S]+?)%>/g,tr=/<%=([\s\S]+?)%>/g,_i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wl=/^\w*$/,ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qc=/[\\^$.*+?()[\]{}|]/g,za=RegExp(qc.source),Co=/^\s+/,Nr=/\s/,Wa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qr=/\{\n\/\* \[wrapped with (.+)\] \*/,We=/,? & /,ji=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zc=/[()=,{}\[\]\/\s]/,Cr=/\\(\\)?/g,Ai=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Eo=/\w*$/,bl=/^[-+]0x[0-9a-f]+$/i,Ts=/^0b[01]+$/i,wp=/^\[object .+?Constructor\]$/,bp=/^0o[0-7]+$/i,Ds=/^(?:0|[1-9]\d*)$/,xr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,Pd=/['\n\r\u2028\u2029\\]/g,cs="\\ud800-\\udfff",Wc="\\u0300-\\u036f",Ie="\\ufe20-\\ufe2f",Np="\\u20d0-\\u20ff",vn=Wc+Ie+Np,Ha="\\u2700-\\u27bf",Fd="a-z\\xdf-\\xf6\\xf8-\\xff",Yt="\\xac\\xb1\\xd7\\xf7",Ut="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",jt="\\u2000-\\u206f",Hc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nl="A-Z\\xc0-\\xd6\\xd8-\\xde",Cl="\\ufe0e\\ufe0f",On=Yt+Ut+jt+Hc,Is="['’]",Cp="["+cs+"]",Nn="["+On+"]",us="["+vn+"]",Bd="\\d+",ki="["+Ha+"]",nn="["+Fd+"]",nr="[^"+cs+On+Bd+Ha+Fd+Nl+"]",ue="\\ud83c[\\udffb-\\udfff]",K="(?:"+us+"|"+ue+")",tt="[^"+cs+"]",Ln="(?:\\ud83c[\\udde6-\\uddff]){2}",Er="[\\ud800-\\udbff][\\udc00-\\udfff]",Ti="["+Nl+"]",El="\\u200d",Lr="(?:"+nn+"|"+nr+")",it="(?:"+Ti+"|"+nr+")",mn="(?:"+Is+"(?:d|ll|m|re|s|t|ve))?",Vc="(?:"+Is+"(?:D|LL|M|RE|S|T|VE))?",Ud=K+"?",Sl="["+Cl+"]?",_l="(?:"+El+"(?:"+[tt,Ln,Er].join("|")+")"+Sl+Ud+")*",Yc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ep="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hn=Sl+Ud+_l,So="(?:"+[ki,Ln,Er].join("|")+")"+Hn,va="(?:"+[tt+us+"?",us,Ln,Er,Cp].join("|")+")",ut=RegExp(Is,"g"),Sp=RegExp(us,"g"),vt=RegExp(ue+"(?="+ue+")|"+va+Hn,"g"),rr=RegExp([Ti+"?"+nn+"+"+mn+"(?="+[Nn,Ti,"$"].join("|")+")",it+"+"+Vc+"(?="+[Nn,Ti+Lr,"$"].join("|")+")",Ti+"?"+Lr+"+"+mn,Ti+"+"+Vc,Ep,Yc,Bd,So].join("|"),"g"),_p=RegExp("["+El+cs+vn+Cl+"]"),$c=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Va=-1,fn={};fn[gn]=fn[os]=fn[As]=fn[qa]=fn[ln]=fn[Pe]=fn[dn]=fn[Mt]=fn[Xt]=!0,fn[nt]=fn[De]=fn[un]=fn[at]=fn[en]=fn[Ht]=fn[Bt]=fn[Lt]=fn[Ke]=fn[Nt]=fn[ke]=fn[Ee]=fn[ye]=fn[gt]=fn[rt]=!1;var $t={};$t[nt]=$t[De]=$t[un]=$t[en]=$t[at]=$t[Ht]=$t[gn]=$t[os]=$t[As]=$t[qa]=$t[ln]=$t[Ke]=$t[Nt]=$t[ke]=$t[Ee]=$t[ye]=$t[gt]=$t[pn]=$t[Pe]=$t[dn]=$t[Mt]=$t[Xt]=!0,$t[Bt]=$t[Lt]=$t[rt]=!1;var _o={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},jo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ao={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ko=parseFloat,Sr=parseInt,Gc=typeof Aa=="object"&&Aa&&Aa.Object===Object&&Aa,Wd=typeof self=="object"&&self&&self.Object===Object&&self,Kn=Gc||Wd||Function("return this")(),Qc=t&&!t.nodeType&&t,Ya=Qc&&!0&&e&&!e.nodeType&&e,Hd=Ya&&Ya.exports===Qc,Gt=Hd&&Gc.process,Pr=function(){try{var z=Ya&&Ya.require&&Ya.require("util").types;return z||Gt&&Gt.binding&&Gt.binding("util")}catch{}}(),To=Pr&&Pr.isArrayBuffer,Zs=Pr&&Pr.isDate,Vd=Pr&&Pr.isMap,pe=Pr&&Pr.isRegExp,wt=Pr&&Pr.isSet,Zn=Pr&&Pr.isTypedArray;function cr(z,$,X){switch(X.length){case 0:return z.call($);case 1:return z.call($,X[0]);case 2:return z.call($,X[0],X[1]);case 3:return z.call($,X[0],X[1],X[2])}return z.apply($,X)}function Yd(z,$,X,re){for(var xe=-1,we=z==null?0:z.length;++xe<we;){var Ce=z[xe];$(re,Ce,X(Ce),z)}return re}function Xr(z,$){for(var X=-1,re=z==null?0:z.length;++X<re&&$(z[X],X,z)!==!1;);return z}function jp(z,$){for(var X=z==null?0:z.length;X--&&$(z[X],X,z)!==!1;);return z}function $d(z,$){for(var X=-1,re=z==null?0:z.length;++X<re;)if(!$(z[X],X,z))return!1;return!0}function Rs(z,$){for(var X=-1,re=z==null?0:z.length,xe=0,we=[];++X<re;){var Ce=z[X];$(Ce,X,z)&&(we[xe++]=Ce)}return we}function Cn(z,$){var X=z==null?0:z.length;return!!X&&gr(z,$,0)>-1}function Do(z,$,X){for(var re=-1,xe=z==null?0:z.length;++re<xe;)if(X($,z[re]))return!0;return!1}function pt(z,$){for(var X=-1,re=z==null?0:z.length,xe=Array(re);++X<re;)xe[X]=$(z[X],X,z);return xe}function ds(z,$){for(var X=-1,re=$.length,xe=z.length;++X<re;)z[xe+X]=$[X];return z}function Js(z,$,X,re){var xe=-1,we=z==null?0:z.length;for(re&&we&&(X=z[++xe]);++xe<we;)X=$(X,z[xe],xe,z);return X}function rn(z,$,X,re){var xe=z==null?0:z.length;for(re&&xe&&(X=z[--xe]);xe--;)X=$(X,z[xe],xe,z);return X}function ot(z,$){for(var X=-1,re=z==null?0:z.length;++X<re;)if($(z[X],X,z))return!0;return!1}var Ap=kl("length");function hn(z){return z.split("")}function $a(z){return z.match(ji)||[]}function Ga(z,$,X){var re;return X(z,function(xe,we,Ce){if($(xe,we,Ce))return re=we,!1}),re}function jl(z,$,X,re){for(var xe=z.length,we=X+(re?1:-1);re?we--:++we<xe;)if($(z[we],we,z))return we;return-1}function gr(z,$,X){return $===$?c(z,$,X):jl(z,Kc,X)}function Xc(z,$,X,re){for(var xe=X-1,we=z.length;++xe<we;)if(re(z[xe],$))return xe;return-1}function Kc(z){return z!==z}function Al(z,$){var X=z==null?0:z.length;return X?Io(z,$)/X:Be}function kl(z){return function($){return $==null?n:$[z]}}function Tl(z){return function($){return z==null?n:z[$]}}function Gd(z,$,X,re,xe){return xe(z,function(we,Ce,Ze){X=re?(re=!1,we):$(X,we,Ce,Ze)}),X}function Di(z,$){var X=z.length;for(z.sort($);X--;)z[X]=z[X].value;return z}function Io(z,$){for(var X,re=-1,xe=z.length;++re<xe;){var we=$(z[re]);we!==n&&(X=X===n?we:X+we)}return X}function Zc(z,$){for(var X=-1,re=Array(z);++X<z;)re[X]=$(X);return re}function Ro(z,$){return pt($,function(X){return[X,z[X]]})}function Qd(z){return z&&z.slice(0,y(z)+1).replace(Co,"")}function Pn(z){return function($){return z($)}}function Ii(z,$){return pt($,function(X){return z[X]})}function ur(z,$){return z.has($)}function Jc(z,$){for(var X=-1,re=z.length;++X<re&&gr($,z[X],0)>-1;);return X}function fs(z,$){for(var X=z.length;X--&&gr($,z[X],0)>-1;);return X}function kp(z,$){for(var X=z.length,re=0;X--;)z[X]===$&&++re;return re}var eu=Tl(_o),Tp=Tl(jo);function Xd(z){return"\\"+Ao[z]}function Ms(z,$){return z==null?n:z[$]}function Ri(z){return _p.test(z)}function tu(z){return $c.test(z)}function Mo(z){for(var $,X=[];!($=z.next()).done;)X.push($.value);return X}function At(z){var $=-1,X=Array(z.size);return z.forEach(function(re,xe){X[++$]=[xe,re]}),X}function Oo(z,$){return function(X){return z($(X))}}function F(z,$){for(var X=-1,re=z.length,xe=0,we=[];++X<re;){var Ce=z[X];(Ce===$||Ce===w)&&(z[X]=w,we[xe++]=X)}return we}function i(z){var $=-1,X=Array(z.size);return z.forEach(function(re){X[++$]=re}),X}function l(z){var $=-1,X=Array(z.size);return z.forEach(function(re){X[++$]=[re,re]}),X}function c(z,$,X){for(var re=X-1,xe=z.length;++re<xe;)if(z[re]===$)return re;return-1}function f(z,$,X){for(var re=X+1;re--;)if(z[re]===$)return re;return re}function h(z){return Ri(z)?E(z):Ap(z)}function x(z){return Ri(z)?D(z):hn(z)}function y(z){for(var $=z.length;$--&&Nr.test(z.charAt($)););return $}var C=Tl(zd);function E(z){for(var $=vt.lastIndex=0;vt.test(z);)++$;return $}function D(z){return z.match(vt)||[]}function U(z){return z.match(rr)||[]}var H=function z($){$=$==null?Kn:Z.defaults(Kn.Object(),$,Z.pick(Kn,qd));var X=$.Array,re=$.Date,xe=$.Error,we=$.Function,Ce=$.Math,Ze=$.Object,xt=$.RegExp,_r=$.String,En=$.TypeError,sr=X.prototype,sn=we.prototype,Sn=Ze.prototype,dr=$["__core-js_shared__"],ea=sn.toString,It=Sn.hasOwnProperty,Dp=0,Kd=function(){var u=/[^.]+$/.exec(dr&&dr.keys&&dr.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Zd=Sn.toString,b5=ea.call(Ze),N5=Kn._,C5=xt("^"+ea.call(It).replace(qc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jd=Hd?$.Buffer:n,Mi=$.Symbol,e0=$.Uint8Array,O2=Jd?Jd.allocUnsafe:n,t0=Oo(Ze.getPrototypeOf,Ze),L2=Ze.create,P2=Sn.propertyIsEnumerable,n0=sr.splice,F2=Mi?Mi.isConcatSpreadable:n,nu=Mi?Mi.iterator:n,Lo=Mi?Mi.toStringTag:n,r0=function(){try{var u=qo(Ze,"defineProperty");return u({},"",{}),u}catch{}}(),E5=$.clearTimeout!==Kn.clearTimeout&&$.clearTimeout,S5=re&&re.now!==Kn.Date.now&&re.now,_5=$.setTimeout!==Kn.setTimeout&&$.setTimeout,s0=Ce.ceil,a0=Ce.floor,Ip=Ze.getOwnPropertySymbols,j5=Jd?Jd.isBuffer:n,B2=$.isFinite,A5=sr.join,k5=Oo(Ze.keys,Ze),ar=Ce.max,jr=Ce.min,T5=re.now,D5=$.parseInt,U2=Ce.random,I5=sr.reverse,Rp=qo($,"DataView"),ru=qo($,"Map"),Mp=qo($,"Promise"),Dl=qo($,"Set"),su=qo($,"WeakMap"),au=qo(Ze,"create"),i0=su&&new su,Il={},R5=zo(Rp),M5=zo(ru),O5=zo(Mp),L5=zo(Dl),P5=zo(su),o0=Mi?Mi.prototype:n,iu=o0?o0.valueOf:n,q2=o0?o0.toString:n;function Y(u){if(Fn(u)&&!yt(u)&&!(u instanceof Rt)){if(u instanceof Os)return u;if(It.call(u,"__wrapped__"))return zv(u)}return new Os(u)}var Rl=function(){function u(){}return function(p){if(!kn(p))return{};if(L2)return L2(p);u.prototype=p;var b=new u;return u.prototype=n,b}}();function l0(){}function Os(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=n}Y.templateSettings={escape:ls,evaluate:Uc,interpolate:tr,variable:"",imports:{_:Y}},Y.prototype=l0.prototype,Y.prototype.constructor=Y,Os.prototype=Rl(l0.prototype),Os.prototype.constructor=Os;function Rt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ye,this.__views__=[]}function F5(){var u=new Rt(this.__wrapped__);return u.__actions__=Kr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Kr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Kr(this.__views__),u}function B5(){if(this.__filtered__){var u=new Rt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function U5(){var u=this.__wrapped__.value(),p=this.__dir__,b=yt(u),_=p<0,q=b?u.length:0,Q=ZS(0,q,this.__views__),J=Q.start,se=Q.end,le=se-J,Se=_?se:J-1,je=this.__iteratees__,Me=je.length,Ue=0,et=jr(le,this.__takeCount__);if(!b||!_&&q==le&&et==le)return dv(u,this.__actions__);var ft=[];e:for(;le--&&Ue<et;){Se+=p;for(var Et=-1,ht=u[Se];++Et<Me;){var kt=je[Et],Ot=kt.iteratee,ms=kt.type,Ur=Ot(ht);if(ms==ae)ht=Ur;else if(!Ur){if(ms==Ne)continue e;break e}}ft[Ue++]=ht}return ft}Rt.prototype=Rl(l0.prototype),Rt.prototype.constructor=Rt;function Po(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var _=u[p];this.set(_[0],_[1])}}function q5(){this.__data__=au?au(null):{},this.size=0}function z5(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function W5(u){var p=this.__data__;if(au){var b=p[u];return b===v?n:b}return It.call(p,u)?p[u]:n}function H5(u){var p=this.__data__;return au?p[u]!==n:It.call(p,u)}function V5(u,p){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=au&&p===n?v:p,this}Po.prototype.clear=q5,Po.prototype.delete=z5,Po.prototype.get=W5,Po.prototype.has=H5,Po.prototype.set=V5;function Qa(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var _=u[p];this.set(_[0],_[1])}}function Y5(){this.__data__=[],this.size=0}function $5(u){var p=this.__data__,b=c0(p,u);if(b<0)return!1;var _=p.length-1;return b==_?p.pop():n0.call(p,b,1),--this.size,!0}function G5(u){var p=this.__data__,b=c0(p,u);return b<0?n:p[b][1]}function Q5(u){return c0(this.__data__,u)>-1}function X5(u,p){var b=this.__data__,_=c0(b,u);return _<0?(++this.size,b.push([u,p])):b[_][1]=p,this}Qa.prototype.clear=Y5,Qa.prototype.delete=$5,Qa.prototype.get=G5,Qa.prototype.has=Q5,Qa.prototype.set=X5;function Xa(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var _=u[p];this.set(_[0],_[1])}}function K5(){this.size=0,this.__data__={hash:new Po,map:new(ru||Qa),string:new Po}}function Z5(u){var p=b0(this,u).delete(u);return this.size-=p?1:0,p}function J5(u){return b0(this,u).get(u)}function eS(u){return b0(this,u).has(u)}function tS(u,p){var b=b0(this,u),_=b.size;return b.set(u,p),this.size+=b.size==_?0:1,this}Xa.prototype.clear=K5,Xa.prototype.delete=Z5,Xa.prototype.get=J5,Xa.prototype.has=eS,Xa.prototype.set=tS;function Fo(u){var p=-1,b=u==null?0:u.length;for(this.__data__=new Xa;++p<b;)this.add(u[p])}function nS(u){return this.__data__.set(u,v),this}function rS(u){return this.__data__.has(u)}Fo.prototype.add=Fo.prototype.push=nS,Fo.prototype.has=rS;function ta(u){var p=this.__data__=new Qa(u);this.size=p.size}function sS(){this.__data__=new Qa,this.size=0}function aS(u){var p=this.__data__,b=p.delete(u);return this.size=p.size,b}function iS(u){return this.__data__.get(u)}function oS(u){return this.__data__.has(u)}function lS(u,p){var b=this.__data__;if(b instanceof Qa){var _=b.__data__;if(!ru||_.length<a-1)return _.push([u,p]),this.size=++b.size,this;b=this.__data__=new Xa(_)}return b.set(u,p),this.size=b.size,this}ta.prototype.clear=sS,ta.prototype.delete=aS,ta.prototype.get=iS,ta.prototype.has=oS,ta.prototype.set=lS;function z2(u,p){var b=yt(u),_=!b&&Wo(u),q=!b&&!_&&Bi(u),Q=!b&&!_&&!q&&Pl(u),J=b||_||q||Q,se=J?Zc(u.length,_r):[],le=se.length;for(var Se in u)(p||It.call(u,Se))&&!(J&&(Se=="length"||q&&(Se=="offset"||Se=="parent")||Q&&(Se=="buffer"||Se=="byteLength"||Se=="byteOffset")||ei(Se,le)))&&se.push(Se);return se}function W2(u){var p=u.length;return p?u[Vp(0,p-1)]:n}function cS(u,p){return N0(Kr(u),Bo(p,0,u.length))}function uS(u){return N0(Kr(u))}function Op(u,p,b){(b!==n&&!na(u[p],b)||b===n&&!(p in u))&&Ka(u,p,b)}function ou(u,p,b){var _=u[p];(!(It.call(u,p)&&na(_,b))||b===n&&!(p in u))&&Ka(u,p,b)}function c0(u,p){for(var b=u.length;b--;)if(na(u[b][0],p))return b;return-1}function dS(u,p,b,_){return Oi(u,function(q,Q,J){p(_,q,b(q),J)}),_}function H2(u,p){return u&&wa(p,fr(p),u)}function fS(u,p){return u&&wa(p,Jr(p),u)}function Ka(u,p,b){p=="__proto__"&&r0?r0(u,p,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[p]=b}function Lp(u,p){for(var b=-1,_=p.length,q=X(_),Q=u==null;++b<_;)q[b]=Q?n:x1(u,p[b]);return q}function Bo(u,p,b){return u===u&&(b!==n&&(u=u<=b?u:b),p!==n&&(u=u>=p?u:p)),u}function Ls(u,p,b,_,q,Q){var J,se=p&N,le=p&S,Se=p&j;if(b&&(J=q?b(u,_,q,Q):b(u)),J!==n)return J;if(!kn(u))return u;var je=yt(u);if(je){if(J=e_(u),!se)return Kr(u,J)}else{var Me=Ar(u),Ue=Me==Lt||Me==_e;if(Bi(u))return pv(u,se);if(Me==ke||Me==nt||Ue&&!q){if(J=le||Ue?{}:Rv(u),!se)return le?WS(u,fS(J,u)):zS(u,H2(J,u))}else{if(!$t[Me])return q?u:{};J=t_(u,Me,se)}}Q||(Q=new ta);var et=Q.get(u);if(et)return et;Q.set(u,J),ly(u)?u.forEach(function(ht){J.add(Ls(ht,p,b,ht,u,Q))}):iy(u)&&u.forEach(function(ht,kt){J.set(kt,Ls(ht,p,b,kt,u,Q))});var ft=Se?le?n1:t1:le?Jr:fr,Et=je?n:ft(u);return Xr(Et||u,function(ht,kt){Et&&(kt=ht,ht=u[kt]),ou(J,kt,Ls(ht,p,b,kt,u,Q))}),J}function hS(u){var p=fr(u);return function(b){return V2(b,u,p)}}function V2(u,p,b){var _=b.length;if(u==null)return!_;for(u=Ze(u);_--;){var q=b[_],Q=p[q],J=u[q];if(J===n&&!(q in u)||!Q(J))return!1}return!0}function Y2(u,p,b){if(typeof u!="function")throw new En(d);return pu(function(){u.apply(n,b)},p)}function lu(u,p,b,_){var q=-1,Q=Cn,J=!0,se=u.length,le=[],Se=p.length;if(!se)return le;b&&(p=pt(p,Pn(b))),_?(Q=Do,J=!1):p.length>=a&&(Q=ur,J=!1,p=new Fo(p));e:for(;++q<se;){var je=u[q],Me=b==null?je:b(je);if(je=_||je!==0?je:0,J&&Me===Me){for(var Ue=Se;Ue--;)if(p[Ue]===Me)continue e;le.push(je)}else Q(p,Me,_)||le.push(je)}return le}var Oi=yv(ya),$2=yv(Fp,!0);function pS(u,p){var b=!0;return Oi(u,function(_,q,Q){return b=!!p(_,q,Q),b}),b}function u0(u,p,b){for(var _=-1,q=u.length;++_<q;){var Q=u[_],J=p(Q);if(J!=null&&(se===n?J===J&&!ps(J):b(J,se)))var se=J,le=Q}return le}function mS(u,p,b,_){var q=u.length;for(b=Ct(b),b<0&&(b=-b>q?0:q+b),_=_===n||_>q?q:Ct(_),_<0&&(_+=q),_=b>_?0:uy(_);b<_;)u[b++]=p;return u}function G2(u,p){var b=[];return Oi(u,function(_,q,Q){p(_,q,Q)&&b.push(_)}),b}function vr(u,p,b,_,q){var Q=-1,J=u.length;for(b||(b=r_),q||(q=[]);++Q<J;){var se=u[Q];p>0&&b(se)?p>1?vr(se,p-1,b,_,q):ds(q,se):_||(q[q.length]=se)}return q}var Pp=wv(),Q2=wv(!0);function ya(u,p){return u&&Pp(u,p,fr)}function Fp(u,p){return u&&Q2(u,p,fr)}function d0(u,p){return Rs(p,function(b){return ti(u[b])})}function Uo(u,p){p=Pi(p,u);for(var b=0,_=p.length;u!=null&&b<_;)u=u[ba(p[b++])];return b&&b==_?u:n}function X2(u,p,b){var _=p(u);return yt(u)?_:ds(_,b(u))}function Fr(u){return u==null?u===n?Fe:ve:Lo&&Lo in Ze(u)?KS(u):u_(u)}function Bp(u,p){return u>p}function xS(u,p){return u!=null&&It.call(u,p)}function gS(u,p){return u!=null&&p in Ze(u)}function vS(u,p,b){return u>=jr(p,b)&&u<ar(p,b)}function Up(u,p,b){for(var _=b?Do:Cn,q=u[0].length,Q=u.length,J=Q,se=X(Q),le=1/0,Se=[];J--;){var je=u[J];J&&p&&(je=pt(je,Pn(p))),le=jr(je.length,le),se[J]=!b&&(p||q>=120&&je.length>=120)?new Fo(J&&je):n}je=u[0];var Me=-1,Ue=se[0];e:for(;++Me<q&&Se.length<le;){var et=je[Me],ft=p?p(et):et;if(et=b||et!==0?et:0,!(Ue?ur(Ue,ft):_(Se,ft,b))){for(J=Q;--J;){var Et=se[J];if(!(Et?ur(Et,ft):_(u[J],ft,b)))continue e}Ue&&Ue.push(ft),Se.push(et)}}return Se}function yS(u,p,b,_){return ya(u,function(q,Q,J){p(_,b(q),Q,J)}),_}function cu(u,p,b){p=Pi(p,u),u=Pv(u,p);var _=u==null?u:u[ba(Fs(p))];return _==null?n:cr(_,u,b)}function K2(u){return Fn(u)&&Fr(u)==nt}function wS(u){return Fn(u)&&Fr(u)==un}function bS(u){return Fn(u)&&Fr(u)==Ht}function uu(u,p,b,_,q){return u===p?!0:u==null||p==null||!Fn(u)&&!Fn(p)?u!==u&&p!==p:NS(u,p,b,_,uu,q)}function NS(u,p,b,_,q,Q){var J=yt(u),se=yt(p),le=J?De:Ar(u),Se=se?De:Ar(p);le=le==nt?ke:le,Se=Se==nt?ke:Se;var je=le==ke,Me=Se==ke,Ue=le==Se;if(Ue&&Bi(u)){if(!Bi(p))return!1;J=!0,je=!1}if(Ue&&!je)return Q||(Q=new ta),J||Pl(u)?Tv(u,p,b,_,q,Q):QS(u,p,le,b,_,q,Q);if(!(b&k)){var et=je&&It.call(u,"__wrapped__"),ft=Me&&It.call(p,"__wrapped__");if(et||ft){var Et=et?u.value():u,ht=ft?p.value():p;return Q||(Q=new ta),q(Et,ht,b,_,Q)}}return Ue?(Q||(Q=new ta),XS(u,p,b,_,q,Q)):!1}function CS(u){return Fn(u)&&Ar(u)==Ke}function qp(u,p,b,_){var q=b.length,Q=q,J=!_;if(u==null)return!Q;for(u=Ze(u);q--;){var se=b[q];if(J&&se[2]?se[1]!==u[se[0]]:!(se[0]in u))return!1}for(;++q<Q;){se=b[q];var le=se[0],Se=u[le],je=se[1];if(J&&se[2]){if(Se===n&&!(le in u))return!1}else{var Me=new ta;if(_)var Ue=_(Se,je,le,u,p,Me);if(!(Ue===n?uu(je,Se,k|R,_,Me):Ue))return!1}}return!0}function Z2(u){if(!kn(u)||a_(u))return!1;var p=ti(u)?C5:wp;return p.test(zo(u))}function ES(u){return Fn(u)&&Fr(u)==Ee}function SS(u){return Fn(u)&&Ar(u)==ye}function _S(u){return Fn(u)&&A0(u.length)&&!!fn[Fr(u)]}function J2(u){return typeof u=="function"?u:u==null?es:typeof u=="object"?yt(u)?nv(u[0],u[1]):tv(u):by(u)}function zp(u){if(!hu(u))return k5(u);var p=[];for(var b in Ze(u))It.call(u,b)&&b!="constructor"&&p.push(b);return p}function jS(u){if(!kn(u))return c_(u);var p=hu(u),b=[];for(var _ in u)_=="constructor"&&(p||!It.call(u,_))||b.push(_);return b}function Wp(u,p){return u<p}function ev(u,p){var b=-1,_=Zr(u)?X(u.length):[];return Oi(u,function(q,Q,J){_[++b]=p(q,Q,J)}),_}function tv(u){var p=s1(u);return p.length==1&&p[0][2]?Ov(p[0][0],p[0][1]):function(b){return b===u||qp(b,u,p)}}function nv(u,p){return i1(u)&&Mv(p)?Ov(ba(u),p):function(b){var _=x1(b,u);return _===n&&_===p?g1(b,u):uu(p,_,k|R)}}function f0(u,p,b,_,q){u!==p&&Pp(p,function(Q,J){if(q||(q=new ta),kn(Q))AS(u,p,J,b,f0,_,q);else{var se=_?_(l1(u,J),Q,J+"",u,p,q):n;se===n&&(se=Q),Op(u,J,se)}},Jr)}function AS(u,p,b,_,q,Q,J){var se=l1(u,b),le=l1(p,b),Se=J.get(le);if(Se){Op(u,b,Se);return}var je=Q?Q(se,le,b+"",u,p,J):n,Me=je===n;if(Me){var Ue=yt(le),et=!Ue&&Bi(le),ft=!Ue&&!et&&Pl(le);je=le,Ue||et||ft?yt(se)?je=se:Vn(se)?je=Kr(se):et?(Me=!1,je=pv(le,!0)):ft?(Me=!1,je=mv(le,!0)):je=[]:mu(le)||Wo(le)?(je=se,Wo(se)?je=dy(se):(!kn(se)||ti(se))&&(je=Rv(le))):Me=!1}Me&&(J.set(le,je),q(je,le,_,Q,J),J.delete(le)),Op(u,b,je)}function rv(u,p){var b=u.length;if(b)return p+=p<0?b:0,ei(p,b)?u[p]:n}function sv(u,p,b){p.length?p=pt(p,function(Q){return yt(Q)?function(J){return Uo(J,Q.length===1?Q[0]:Q)}:Q}):p=[es];var _=-1;p=pt(p,Pn(dt()));var q=ev(u,function(Q,J,se){var le=pt(p,function(Se){return Se(Q)});return{criteria:le,index:++_,value:Q}});return Di(q,function(Q,J){return qS(Q,J,b)})}function kS(u,p){return av(u,p,function(b,_){return g1(u,_)})}function av(u,p,b){for(var _=-1,q=p.length,Q={};++_<q;){var J=p[_],se=Uo(u,J);b(se,J)&&du(Q,Pi(J,u),se)}return Q}function TS(u){return function(p){return Uo(p,u)}}function Hp(u,p,b,_){var q=_?Xc:gr,Q=-1,J=p.length,se=u;for(u===p&&(p=Kr(p)),b&&(se=pt(u,Pn(b)));++Q<J;)for(var le=0,Se=p[Q],je=b?b(Se):Se;(le=q(se,je,le,_))>-1;)se!==u&&n0.call(se,le,1),n0.call(u,le,1);return u}function iv(u,p){for(var b=u?p.length:0,_=b-1;b--;){var q=p[b];if(b==_||q!==Q){var Q=q;ei(q)?n0.call(u,q,1):Gp(u,q)}}return u}function Vp(u,p){return u+a0(U2()*(p-u+1))}function DS(u,p,b,_){for(var q=-1,Q=ar(s0((p-u)/(b||1)),0),J=X(Q);Q--;)J[_?Q:++q]=u,u+=b;return J}function Yp(u,p){var b="";if(!u||p<1||p>de)return b;do p%2&&(b+=u),p=a0(p/2),p&&(u+=u);while(p);return b}function St(u,p){return c1(Lv(u,p,es),u+"")}function IS(u){return W2(Fl(u))}function RS(u,p){var b=Fl(u);return N0(b,Bo(p,0,b.length))}function du(u,p,b,_){if(!kn(u))return u;p=Pi(p,u);for(var q=-1,Q=p.length,J=Q-1,se=u;se!=null&&++q<Q;){var le=ba(p[q]),Se=b;if(le==="__proto__"||le==="constructor"||le==="prototype")return u;if(q!=J){var je=se[le];Se=_?_(je,le,se):n,Se===n&&(Se=kn(je)?je:ei(p[q+1])?[]:{})}ou(se,le,Se),se=se[le]}return u}var ov=i0?function(u,p){return i0.set(u,p),u}:es,MS=r0?function(u,p){return r0(u,"toString",{configurable:!0,enumerable:!1,value:y1(p),writable:!0})}:es;function OS(u){return N0(Fl(u))}function Ps(u,p,b){var _=-1,q=u.length;p<0&&(p=-p>q?0:q+p),b=b>q?q:b,b<0&&(b+=q),q=p>b?0:b-p>>>0,p>>>=0;for(var Q=X(q);++_<q;)Q[_]=u[_+p];return Q}function LS(u,p){var b;return Oi(u,function(_,q,Q){return b=p(_,q,Q),!b}),!!b}function h0(u,p,b){var _=0,q=u==null?_:u.length;if(typeof p=="number"&&p===p&&q<=Te){for(;_<q;){var Q=_+q>>>1,J=u[Q];J!==null&&!ps(J)&&(b?J<=p:J<p)?_=Q+1:q=Q}return q}return $p(u,p,es,b)}function $p(u,p,b,_){var q=0,Q=u==null?0:u.length;if(Q===0)return 0;p=b(p);for(var J=p!==p,se=p===null,le=ps(p),Se=p===n;q<Q;){var je=a0((q+Q)/2),Me=b(u[je]),Ue=Me!==n,et=Me===null,ft=Me===Me,Et=ps(Me);if(J)var ht=_||ft;else Se?ht=ft&&(_||Ue):se?ht=ft&&Ue&&(_||!et):le?ht=ft&&Ue&&!et&&(_||!Et):et||Et?ht=!1:ht=_?Me<=p:Me<p;ht?q=je+1:Q=je}return jr(Q,Je)}function lv(u,p){for(var b=-1,_=u.length,q=0,Q=[];++b<_;){var J=u[b],se=p?p(J):J;if(!b||!na(se,le)){var le=se;Q[q++]=J===0?0:J}}return Q}function cv(u){return typeof u=="number"?u:ps(u)?Be:+u}function hs(u){if(typeof u=="string")return u;if(yt(u))return pt(u,hs)+"";if(ps(u))return q2?q2.call(u):"";var p=u+"";return p=="0"&&1/u==-me?"-0":p}function Li(u,p,b){var _=-1,q=Cn,Q=u.length,J=!0,se=[],le=se;if(b)J=!1,q=Do;else if(Q>=a){var Se=p?null:$S(u);if(Se)return i(Se);J=!1,q=ur,le=new Fo}else le=p?[]:se;e:for(;++_<Q;){var je=u[_],Me=p?p(je):je;if(je=b||je!==0?je:0,J&&Me===Me){for(var Ue=le.length;Ue--;)if(le[Ue]===Me)continue e;p&&le.push(Me),se.push(je)}else q(le,Me,b)||(le!==se&&le.push(Me),se.push(je))}return se}function Gp(u,p){return p=Pi(p,u),u=Pv(u,p),u==null||delete u[ba(Fs(p))]}function uv(u,p,b,_){return du(u,p,b(Uo(u,p)),_)}function p0(u,p,b,_){for(var q=u.length,Q=_?q:-1;(_?Q--:++Q<q)&&p(u[Q],Q,u););return b?Ps(u,_?0:Q,_?Q+1:q):Ps(u,_?Q+1:0,_?q:Q)}function dv(u,p){var b=u;return b instanceof Rt&&(b=b.value()),Js(p,function(_,q){return q.func.apply(q.thisArg,ds([_],q.args))},b)}function Qp(u,p,b){var _=u.length;if(_<2)return _?Li(u[0]):[];for(var q=-1,Q=X(_);++q<_;)for(var J=u[q],se=-1;++se<_;)se!=q&&(Q[q]=lu(Q[q]||J,u[se],p,b));return Li(vr(Q,1),p,b)}function fv(u,p,b){for(var _=-1,q=u.length,Q=p.length,J={};++_<q;){var se=_<Q?p[_]:n;b(J,u[_],se)}return J}function Xp(u){return Vn(u)?u:[]}function Kp(u){return typeof u=="function"?u:es}function Pi(u,p){return yt(u)?u:i1(u,p)?[u]:qv(Kt(u))}var PS=St;function Fi(u,p,b){var _=u.length;return b=b===n?_:b,!p&&b>=_?u:Ps(u,p,b)}var hv=E5||function(u){return Kn.clearTimeout(u)};function pv(u,p){if(p)return u.slice();var b=u.length,_=O2?O2(b):new u.constructor(b);return u.copy(_),_}function Zp(u){var p=new u.constructor(u.byteLength);return new e0(p).set(new e0(u)),p}function FS(u,p){var b=p?Zp(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function BS(u){var p=new u.constructor(u.source,Eo.exec(u));return p.lastIndex=u.lastIndex,p}function US(u){return iu?Ze(iu.call(u)):{}}function mv(u,p){var b=p?Zp(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function xv(u,p){if(u!==p){var b=u!==n,_=u===null,q=u===u,Q=ps(u),J=p!==n,se=p===null,le=p===p,Se=ps(p);if(!se&&!Se&&!Q&&u>p||Q&&J&&le&&!se&&!Se||_&&J&&le||!b&&le||!q)return 1;if(!_&&!Q&&!Se&&u<p||Se&&b&&q&&!_&&!Q||se&&b&&q||!J&&q||!le)return-1}return 0}function qS(u,p,b){for(var _=-1,q=u.criteria,Q=p.criteria,J=q.length,se=b.length;++_<J;){var le=xv(q[_],Q[_]);if(le){if(_>=se)return le;var Se=b[_];return le*(Se=="desc"?-1:1)}}return u.index-p.index}function gv(u,p,b,_){for(var q=-1,Q=u.length,J=b.length,se=-1,le=p.length,Se=ar(Q-J,0),je=X(le+Se),Me=!_;++se<le;)je[se]=p[se];for(;++q<J;)(Me||q<Q)&&(je[b[q]]=u[q]);for(;Se--;)je[se++]=u[q++];return je}function vv(u,p,b,_){for(var q=-1,Q=u.length,J=-1,se=b.length,le=-1,Se=p.length,je=ar(Q-se,0),Me=X(je+Se),Ue=!_;++q<je;)Me[q]=u[q];for(var et=q;++le<Se;)Me[et+le]=p[le];for(;++J<se;)(Ue||q<Q)&&(Me[et+b[J]]=u[q++]);return Me}function Kr(u,p){var b=-1,_=u.length;for(p||(p=X(_));++b<_;)p[b]=u[b];return p}function wa(u,p,b,_){var q=!b;b||(b={});for(var Q=-1,J=p.length;++Q<J;){var se=p[Q],le=_?_(b[se],u[se],se,b,u):n;le===n&&(le=u[se]),q?Ka(b,se,le):ou(b,se,le)}return b}function zS(u,p){return wa(u,a1(u),p)}function WS(u,p){return wa(u,Dv(u),p)}function m0(u,p){return function(b,_){var q=yt(b)?Yd:dS,Q=p?p():{};return q(b,u,dt(_,2),Q)}}function Ml(u){return St(function(p,b){var _=-1,q=b.length,Q=q>1?b[q-1]:n,J=q>2?b[2]:n;for(Q=u.length>3&&typeof Q=="function"?(q--,Q):n,J&&Br(b[0],b[1],J)&&(Q=q<3?n:Q,q=1),p=Ze(p);++_<q;){var se=b[_];se&&u(p,se,_,Q)}return p})}function yv(u,p){return function(b,_){if(b==null)return b;if(!Zr(b))return u(b,_);for(var q=b.length,Q=p?q:-1,J=Ze(b);(p?Q--:++Q<q)&&_(J[Q],Q,J)!==!1;);return b}}function wv(u){return function(p,b,_){for(var q=-1,Q=Ze(p),J=_(p),se=J.length;se--;){var le=J[u?se:++q];if(b(Q[le],le,Q)===!1)break}return p}}function HS(u,p,b){var _=p&T,q=fu(u);function Q(){var J=this&&this!==Kn&&this instanceof Q?q:u;return J.apply(_?b:this,arguments)}return Q}function bv(u){return function(p){p=Kt(p);var b=Ri(p)?x(p):n,_=b?b[0]:p.charAt(0),q=b?Fi(b,1).join(""):p.slice(1);return _[u]()+q}}function Ol(u){return function(p){return Js(yy(vy(p).replace(ut,"")),u,"")}}function fu(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var b=Rl(u.prototype),_=u.apply(b,p);return kn(_)?_:b}}function VS(u,p,b){var _=fu(u);function q(){for(var Q=arguments.length,J=X(Q),se=Q,le=Ll(q);se--;)J[se]=arguments[se];var Se=Q<3&&J[0]!==le&&J[Q-1]!==le?[]:F(J,le);if(Q-=Se.length,Q<b)return _v(u,p,x0,q.placeholder,n,J,Se,n,n,b-Q);var je=this&&this!==Kn&&this instanceof q?_:u;return cr(je,this,J)}return q}function Nv(u){return function(p,b,_){var q=Ze(p);if(!Zr(p)){var Q=dt(b,3);p=fr(p),b=function(se){return Q(q[se],se,q)}}var J=u(p,b,_);return J>-1?q[Q?p[J]:J]:n}}function Cv(u){return Ja(function(p){var b=p.length,_=b,q=Os.prototype.thru;for(u&&p.reverse();_--;){var Q=p[_];if(typeof Q!="function")throw new En(d);if(q&&!J&&w0(Q)=="wrapper")var J=new Os([],!0)}for(_=J?_:b;++_<b;){Q=p[_];var se=w0(Q),le=se=="wrapper"?r1(Q):n;le&&o1(le[0])&&le[1]==(O|M|G|V)&&!le[4].length&&le[9]==1?J=J[w0(le[0])].apply(J,le[3]):J=Q.length==1&&o1(Q)?J[se]():J.thru(Q)}return function(){var Se=arguments,je=Se[0];if(J&&Se.length==1&&yt(je))return J.plant(je).value();for(var Me=0,Ue=b?p[Me].apply(this,Se):je;++Me<b;)Ue=p[Me].call(this,Ue);return Ue}})}function x0(u,p,b,_,q,Q,J,se,le,Se){var je=p&O,Me=p&T,Ue=p&I,et=p&(M|B),ft=p&W,Et=Ue?n:fu(u);function ht(){for(var kt=arguments.length,Ot=X(kt),ms=kt;ms--;)Ot[ms]=arguments[ms];if(et)var Ur=Ll(ht),xs=kp(Ot,Ur);if(_&&(Ot=gv(Ot,_,q,et)),Q&&(Ot=vv(Ot,Q,J,et)),kt-=xs,et&&kt<Se){var Yn=F(Ot,Ur);return _v(u,p,x0,ht.placeholder,b,Ot,Yn,se,le,Se-kt)}var ra=Me?b:this,ri=Ue?ra[u]:u;return kt=Ot.length,se?Ot=d_(Ot,se):ft&&kt>1&&Ot.reverse(),je&&le<kt&&(Ot.length=le),this&&this!==Kn&&this instanceof ht&&(ri=Et||fu(ri)),ri.apply(ra,Ot)}return ht}function Ev(u,p){return function(b,_){return yS(b,u,p(_),{})}}function g0(u,p){return function(b,_){var q;if(b===n&&_===n)return p;if(b!==n&&(q=b),_!==n){if(q===n)return _;typeof b=="string"||typeof _=="string"?(b=hs(b),_=hs(_)):(b=cv(b),_=cv(_)),q=u(b,_)}return q}}function Jp(u){return Ja(function(p){return p=pt(p,Pn(dt())),St(function(b){var _=this;return u(p,function(q){return cr(q,_,b)})})})}function v0(u,p){p=p===n?" ":hs(p);var b=p.length;if(b<2)return b?Yp(p,u):p;var _=Yp(p,s0(u/h(p)));return Ri(p)?Fi(x(_),0,u).join(""):_.slice(0,u)}function YS(u,p,b,_){var q=p&T,Q=fu(u);function J(){for(var se=-1,le=arguments.length,Se=-1,je=_.length,Me=X(je+le),Ue=this&&this!==Kn&&this instanceof J?Q:u;++Se<je;)Me[Se]=_[Se];for(;le--;)Me[Se++]=arguments[++se];return cr(Ue,q?b:this,Me)}return J}function Sv(u){return function(p,b,_){return _&&typeof _!="number"&&Br(p,b,_)&&(b=_=n),p=ni(p),b===n?(b=p,p=0):b=ni(b),_=_===n?p<b?1:-1:ni(_),DS(p,b,_,u)}}function y0(u){return function(p,b){return typeof p=="string"&&typeof b=="string"||(p=Bs(p),b=Bs(b)),u(p,b)}}function _v(u,p,b,_,q,Q,J,se,le,Se){var je=p&M,Me=je?J:n,Ue=je?n:J,et=je?Q:n,ft=je?n:Q;p|=je?G:P,p&=~(je?P:G),p&A||(p&=~(T|I));var Et=[u,p,q,et,Me,ft,Ue,se,le,Se],ht=b.apply(n,Et);return o1(u)&&Fv(ht,Et),ht.placeholder=_,Bv(ht,u,p)}function e1(u){var p=Ce[u];return function(b,_){if(b=Bs(b),_=_==null?0:jr(Ct(_),292),_&&B2(b)){var q=(Kt(b)+"e").split("e"),Q=p(q[0]+"e"+(+q[1]+_));return q=(Kt(Q)+"e").split("e"),+(q[0]+"e"+(+q[1]-_))}return p(b)}}var $S=Dl&&1/i(new Dl([,-0]))[1]==me?function(u){return new Dl(u)}:N1;function jv(u){return function(p){var b=Ar(p);return b==Ke?At(p):b==ye?l(p):Ro(p,u(p))}}function Za(u,p,b,_,q,Q,J,se){var le=p&I;if(!le&&typeof u!="function")throw new En(d);var Se=_?_.length:0;if(Se||(p&=~(G|P),_=q=n),J=J===n?J:ar(Ct(J),0),se=se===n?se:Ct(se),Se-=q?q.length:0,p&P){var je=_,Me=q;_=q=n}var Ue=le?n:r1(u),et=[u,p,b,_,q,je,Me,Q,J,se];if(Ue&&l_(et,Ue),u=et[0],p=et[1],b=et[2],_=et[3],q=et[4],se=et[9]=et[9]===n?le?0:u.length:ar(et[9]-Se,0),!se&&p&(M|B)&&(p&=~(M|B)),!p||p==T)var ft=HS(u,p,b);else p==M||p==B?ft=VS(u,p,se):(p==G||p==(T|G))&&!q.length?ft=YS(u,p,b,_):ft=x0.apply(n,et);var Et=Ue?ov:Fv;return Bv(Et(ft,et),u,p)}function Av(u,p,b,_){return u===n||na(u,Sn[b])&&!It.call(_,b)?p:u}function kv(u,p,b,_,q,Q){return kn(u)&&kn(p)&&(Q.set(p,u),f0(u,p,n,kv,Q),Q.delete(p)),u}function GS(u){return mu(u)?n:u}function Tv(u,p,b,_,q,Q){var J=b&k,se=u.length,le=p.length;if(se!=le&&!(J&&le>se))return!1;var Se=Q.get(u),je=Q.get(p);if(Se&&je)return Se==p&&je==u;var Me=-1,Ue=!0,et=b&R?new Fo:n;for(Q.set(u,p),Q.set(p,u);++Me<se;){var ft=u[Me],Et=p[Me];if(_)var ht=J?_(Et,ft,Me,p,u,Q):_(ft,Et,Me,u,p,Q);if(ht!==n){if(ht)continue;Ue=!1;break}if(et){if(!ot(p,function(kt,Ot){if(!ur(et,Ot)&&(ft===kt||q(ft,kt,b,_,Q)))return et.push(Ot)})){Ue=!1;break}}else if(!(ft===Et||q(ft,Et,b,_,Q))){Ue=!1;break}}return Q.delete(u),Q.delete(p),Ue}function QS(u,p,b,_,q,Q,J){switch(b){case en:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case un:return!(u.byteLength!=p.byteLength||!Q(new e0(u),new e0(p)));case at:case Ht:case Nt:return na(+u,+p);case Bt:return u.name==p.name&&u.message==p.message;case Ee:case gt:return u==p+"";case Ke:var se=At;case ye:var le=_&k;if(se||(se=i),u.size!=p.size&&!le)return!1;var Se=J.get(u);if(Se)return Se==p;_|=R,J.set(u,p);var je=Tv(se(u),se(p),_,q,Q,J);return J.delete(u),je;case pn:if(iu)return iu.call(u)==iu.call(p)}return!1}function XS(u,p,b,_,q,Q){var J=b&k,se=t1(u),le=se.length,Se=t1(p),je=Se.length;if(le!=je&&!J)return!1;for(var Me=le;Me--;){var Ue=se[Me];if(!(J?Ue in p:It.call(p,Ue)))return!1}var et=Q.get(u),ft=Q.get(p);if(et&&ft)return et==p&&ft==u;var Et=!0;Q.set(u,p),Q.set(p,u);for(var ht=J;++Me<le;){Ue=se[Me];var kt=u[Ue],Ot=p[Ue];if(_)var ms=J?_(Ot,kt,Ue,p,u,Q):_(kt,Ot,Ue,u,p,Q);if(!(ms===n?kt===Ot||q(kt,Ot,b,_,Q):ms)){Et=!1;break}ht||(ht=Ue=="constructor")}if(Et&&!ht){var Ur=u.constructor,xs=p.constructor;Ur!=xs&&"constructor"in u&&"constructor"in p&&!(typeof Ur=="function"&&Ur instanceof Ur&&typeof xs=="function"&&xs instanceof xs)&&(Et=!1)}return Q.delete(u),Q.delete(p),Et}function Ja(u){return c1(Lv(u,n,Vv),u+"")}function t1(u){return X2(u,fr,a1)}function n1(u){return X2(u,Jr,Dv)}var r1=i0?function(u){return i0.get(u)}:N1;function w0(u){for(var p=u.name+"",b=Il[p],_=It.call(Il,p)?b.length:0;_--;){var q=b[_],Q=q.func;if(Q==null||Q==u)return q.name}return p}function Ll(u){var p=It.call(Y,"placeholder")?Y:u;return p.placeholder}function dt(){var u=Y.iteratee||w1;return u=u===w1?J2:u,arguments.length?u(arguments[0],arguments[1]):u}function b0(u,p){var b=u.__data__;return s_(p)?b[typeof p=="string"?"string":"hash"]:b.map}function s1(u){for(var p=fr(u),b=p.length;b--;){var _=p[b],q=u[_];p[b]=[_,q,Mv(q)]}return p}function qo(u,p){var b=Ms(u,p);return Z2(b)?b:n}function KS(u){var p=It.call(u,Lo),b=u[Lo];try{u[Lo]=n;var _=!0}catch{}var q=Zd.call(u);return _&&(p?u[Lo]=b:delete u[Lo]),q}var a1=Ip?function(u){return u==null?[]:(u=Ze(u),Rs(Ip(u),function(p){return P2.call(u,p)}))}:C1,Dv=Ip?function(u){for(var p=[];u;)ds(p,a1(u)),u=t0(u);return p}:C1,Ar=Fr;(Rp&&Ar(new Rp(new ArrayBuffer(1)))!=en||ru&&Ar(new ru)!=Ke||Mp&&Ar(Mp.resolve())!=qe||Dl&&Ar(new Dl)!=ye||su&&Ar(new su)!=rt)&&(Ar=function(u){var p=Fr(u),b=p==ke?u.constructor:n,_=b?zo(b):"";if(_)switch(_){case R5:return en;case M5:return Ke;case O5:return qe;case L5:return ye;case P5:return rt}return p});function ZS(u,p,b){for(var _=-1,q=b.length;++_<q;){var Q=b[_],J=Q.size;switch(Q.type){case"drop":u+=J;break;case"dropRight":p-=J;break;case"take":p=jr(p,u+J);break;case"takeRight":u=ar(u,p-J);break}}return{start:u,end:p}}function JS(u){var p=u.match(Qr);return p?p[1].split(We):[]}function Iv(u,p,b){p=Pi(p,u);for(var _=-1,q=p.length,Q=!1;++_<q;){var J=ba(p[_]);if(!(Q=u!=null&&b(u,J)))break;u=u[J]}return Q||++_!=q?Q:(q=u==null?0:u.length,!!q&&A0(q)&&ei(J,q)&&(yt(u)||Wo(u)))}function e_(u){var p=u.length,b=new u.constructor(p);return p&&typeof u[0]=="string"&&It.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function Rv(u){return typeof u.constructor=="function"&&!hu(u)?Rl(t0(u)):{}}function t_(u,p,b){var _=u.constructor;switch(p){case un:return Zp(u);case at:case Ht:return new _(+u);case en:return FS(u,b);case gn:case os:case As:case qa:case ln:case Pe:case dn:case Mt:case Xt:return mv(u,b);case Ke:return new _;case Nt:case gt:return new _(u);case Ee:return BS(u);case ye:return new _;case pn:return US(u)}}function n_(u,p){var b=p.length;if(!b)return u;var _=b-1;return p[_]=(b>1?"& ":"")+p[_],p=p.join(b>2?", ":" "),u.replace(Wa,`{
/* [wrapped with `+p+`] */
`)}function r_(u){return yt(u)||Wo(u)||!!(F2&&u&&u[F2])}function ei(u,p){var b=typeof u;return p=p??de,!!p&&(b=="number"||b!="symbol"&&Ds.test(u))&&u>-1&&u%1==0&&u<p}function Br(u,p,b){if(!kn(b))return!1;var _=typeof p;return(_=="number"?Zr(b)&&ei(p,b.length):_=="string"&&p in b)?na(b[p],u):!1}function i1(u,p){if(yt(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||ps(u)?!0:wl.test(u)||!_i.test(u)||p!=null&&u in Ze(p)}function s_(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function o1(u){var p=w0(u),b=Y[p];if(typeof b!="function"||!(p in Rt.prototype))return!1;if(u===b)return!0;var _=r1(b);return!!_&&u===_[0]}function a_(u){return!!Kd&&Kd in u}var i_=dr?ti:E1;function hu(u){var p=u&&u.constructor,b=typeof p=="function"&&p.prototype||Sn;return u===b}function Mv(u){return u===u&&!kn(u)}function Ov(u,p){return function(b){return b==null?!1:b[u]===p&&(p!==n||u in Ze(b))}}function o_(u){var p=_0(u,function(_){return b.size===g&&b.clear(),_}),b=p.cache;return p}function l_(u,p){var b=u[1],_=p[1],q=b|_,Q=q<(T|I|O),J=_==O&&b==M||_==O&&b==V&&u[7].length<=p[8]||_==(O|V)&&p[7].length<=p[8]&&b==M;if(!(Q||J))return u;_&T&&(u[2]=p[2],q|=b&T?0:A);var se=p[3];if(se){var le=u[3];u[3]=le?gv(le,se,p[4]):se,u[4]=le?F(u[3],w):p[4]}return se=p[5],se&&(le=u[5],u[5]=le?vv(le,se,p[6]):se,u[6]=le?F(u[5],w):p[6]),se=p[7],se&&(u[7]=se),_&O&&(u[8]=u[8]==null?p[8]:jr(u[8],p[8])),u[9]==null&&(u[9]=p[9]),u[0]=p[0],u[1]=q,u}function c_(u){var p=[];if(u!=null)for(var b in Ze(u))p.push(b);return p}function u_(u){return Zd.call(u)}function Lv(u,p,b){return p=ar(p===n?u.length-1:p,0),function(){for(var _=arguments,q=-1,Q=ar(_.length-p,0),J=X(Q);++q<Q;)J[q]=_[p+q];q=-1;for(var se=X(p+1);++q<p;)se[q]=_[q];return se[p]=b(J),cr(u,this,se)}}function Pv(u,p){return p.length<2?u:Uo(u,Ps(p,0,-1))}function d_(u,p){for(var b=u.length,_=jr(p.length,b),q=Kr(u);_--;){var Q=p[_];u[_]=ei(Q,b)?q[Q]:n}return u}function l1(u,p){if(!(p==="constructor"&&typeof u[p]=="function")&&p!="__proto__")return u[p]}var Fv=Uv(ov),pu=_5||function(u,p){return Kn.setTimeout(u,p)},c1=Uv(MS);function Bv(u,p,b){var _=p+"";return c1(u,n_(_,f_(JS(_),b)))}function Uv(u){var p=0,b=0;return function(){var _=T5(),q=te-(_-b);if(b=_,q>0){if(++p>=ne)return arguments[0]}else p=0;return u.apply(n,arguments)}}function N0(u,p){var b=-1,_=u.length,q=_-1;for(p=p===n?_:p;++b<p;){var Q=Vp(b,q),J=u[Q];u[Q]=u[b],u[b]=J}return u.length=p,u}var qv=o_(function(u){var p=[];return u.charCodeAt(0)===46&&p.push(""),u.replace(ks,function(b,_,q,Q){p.push(q?Q.replace(Cr,"$1"):_||b)}),p});function ba(u){if(typeof u=="string"||ps(u))return u;var p=u+"";return p=="0"&&1/u==-me?"-0":p}function zo(u){if(u!=null){try{return ea.call(u)}catch{}try{return u+""}catch{}}return""}function f_(u,p){return Xr($e,function(b){var _="_."+b[0];p&b[1]&&!Cn(u,_)&&u.push(_)}),u.sort()}function zv(u){if(u instanceof Rt)return u.clone();var p=new Os(u.__wrapped__,u.__chain__);return p.__actions__=Kr(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}function h_(u,p,b){(b?Br(u,p,b):p===n)?p=1:p=ar(Ct(p),0);var _=u==null?0:u.length;if(!_||p<1)return[];for(var q=0,Q=0,J=X(s0(_/p));q<_;)J[Q++]=Ps(u,q,q+=p);return J}function p_(u){for(var p=-1,b=u==null?0:u.length,_=0,q=[];++p<b;){var Q=u[p];Q&&(q[_++]=Q)}return q}function m_(){var u=arguments.length;if(!u)return[];for(var p=X(u-1),b=arguments[0],_=u;_--;)p[_-1]=arguments[_];return ds(yt(b)?Kr(b):[b],vr(p,1))}var x_=St(function(u,p){return Vn(u)?lu(u,vr(p,1,Vn,!0)):[]}),g_=St(function(u,p){var b=Fs(p);return Vn(b)&&(b=n),Vn(u)?lu(u,vr(p,1,Vn,!0),dt(b,2)):[]}),v_=St(function(u,p){var b=Fs(p);return Vn(b)&&(b=n),Vn(u)?lu(u,vr(p,1,Vn,!0),n,b):[]});function y_(u,p,b){var _=u==null?0:u.length;return _?(p=b||p===n?1:Ct(p),Ps(u,p<0?0:p,_)):[]}function w_(u,p,b){var _=u==null?0:u.length;return _?(p=b||p===n?1:Ct(p),p=_-p,Ps(u,0,p<0?0:p)):[]}function b_(u,p){return u&&u.length?p0(u,dt(p,3),!0,!0):[]}function N_(u,p){return u&&u.length?p0(u,dt(p,3),!0):[]}function C_(u,p,b,_){var q=u==null?0:u.length;return q?(b&&typeof b!="number"&&Br(u,p,b)&&(b=0,_=q),mS(u,p,b,_)):[]}function Wv(u,p,b){var _=u==null?0:u.length;if(!_)return-1;var q=b==null?0:Ct(b);return q<0&&(q=ar(_+q,0)),jl(u,dt(p,3),q)}function Hv(u,p,b){var _=u==null?0:u.length;if(!_)return-1;var q=_-1;return b!==n&&(q=Ct(b),q=b<0?ar(_+q,0):jr(q,_-1)),jl(u,dt(p,3),q,!0)}function Vv(u){var p=u==null?0:u.length;return p?vr(u,1):[]}function E_(u){var p=u==null?0:u.length;return p?vr(u,me):[]}function S_(u,p){var b=u==null?0:u.length;return b?(p=p===n?1:Ct(p),vr(u,p)):[]}function __(u){for(var p=-1,b=u==null?0:u.length,_={};++p<b;){var q=u[p];_[q[0]]=q[1]}return _}function Yv(u){return u&&u.length?u[0]:n}function j_(u,p,b){var _=u==null?0:u.length;if(!_)return-1;var q=b==null?0:Ct(b);return q<0&&(q=ar(_+q,0)),gr(u,p,q)}function A_(u){var p=u==null?0:u.length;return p?Ps(u,0,-1):[]}var k_=St(function(u){var p=pt(u,Xp);return p.length&&p[0]===u[0]?Up(p):[]}),T_=St(function(u){var p=Fs(u),b=pt(u,Xp);return p===Fs(b)?p=n:b.pop(),b.length&&b[0]===u[0]?Up(b,dt(p,2)):[]}),D_=St(function(u){var p=Fs(u),b=pt(u,Xp);return p=typeof p=="function"?p:n,p&&b.pop(),b.length&&b[0]===u[0]?Up(b,n,p):[]});function I_(u,p){return u==null?"":A5.call(u,p)}function Fs(u){var p=u==null?0:u.length;return p?u[p-1]:n}function R_(u,p,b){var _=u==null?0:u.length;if(!_)return-1;var q=_;return b!==n&&(q=Ct(b),q=q<0?ar(_+q,0):jr(q,_-1)),p===p?f(u,p,q):jl(u,Kc,q,!0)}function M_(u,p){return u&&u.length?rv(u,Ct(p)):n}var O_=St($v);function $v(u,p){return u&&u.length&&p&&p.length?Hp(u,p):u}function L_(u,p,b){return u&&u.length&&p&&p.length?Hp(u,p,dt(b,2)):u}function P_(u,p,b){return u&&u.length&&p&&p.length?Hp(u,p,n,b):u}var F_=Ja(function(u,p){var b=u==null?0:u.length,_=Lp(u,p);return iv(u,pt(p,function(q){return ei(q,b)?+q:q}).sort(xv)),_});function B_(u,p){var b=[];if(!(u&&u.length))return b;var _=-1,q=[],Q=u.length;for(p=dt(p,3);++_<Q;){var J=u[_];p(J,_,u)&&(b.push(J),q.push(_))}return iv(u,q),b}function u1(u){return u==null?u:I5.call(u)}function U_(u,p,b){var _=u==null?0:u.length;return _?(b&&typeof b!="number"&&Br(u,p,b)?(p=0,b=_):(p=p==null?0:Ct(p),b=b===n?_:Ct(b)),Ps(u,p,b)):[]}function q_(u,p){return h0(u,p)}function z_(u,p,b){return $p(u,p,dt(b,2))}function W_(u,p){var b=u==null?0:u.length;if(b){var _=h0(u,p);if(_<b&&na(u[_],p))return _}return-1}function H_(u,p){return h0(u,p,!0)}function V_(u,p,b){return $p(u,p,dt(b,2),!0)}function Y_(u,p){var b=u==null?0:u.length;if(b){var _=h0(u,p,!0)-1;if(na(u[_],p))return _}return-1}function $_(u){return u&&u.length?lv(u):[]}function G_(u,p){return u&&u.length?lv(u,dt(p,2)):[]}function Q_(u){var p=u==null?0:u.length;return p?Ps(u,1,p):[]}function X_(u,p,b){return u&&u.length?(p=b||p===n?1:Ct(p),Ps(u,0,p<0?0:p)):[]}function K_(u,p,b){var _=u==null?0:u.length;return _?(p=b||p===n?1:Ct(p),p=_-p,Ps(u,p<0?0:p,_)):[]}function Z_(u,p){return u&&u.length?p0(u,dt(p,3),!1,!0):[]}function J_(u,p){return u&&u.length?p0(u,dt(p,3)):[]}var e8=St(function(u){return Li(vr(u,1,Vn,!0))}),t8=St(function(u){var p=Fs(u);return Vn(p)&&(p=n),Li(vr(u,1,Vn,!0),dt(p,2))}),n8=St(function(u){var p=Fs(u);return p=typeof p=="function"?p:n,Li(vr(u,1,Vn,!0),n,p)});function r8(u){return u&&u.length?Li(u):[]}function s8(u,p){return u&&u.length?Li(u,dt(p,2)):[]}function a8(u,p){return p=typeof p=="function"?p:n,u&&u.length?Li(u,n,p):[]}function d1(u){if(!(u&&u.length))return[];var p=0;return u=Rs(u,function(b){if(Vn(b))return p=ar(b.length,p),!0}),Zc(p,function(b){return pt(u,kl(b))})}function Gv(u,p){if(!(u&&u.length))return[];var b=d1(u);return p==null?b:pt(b,function(_){return cr(p,n,_)})}var i8=St(function(u,p){return Vn(u)?lu(u,p):[]}),o8=St(function(u){return Qp(Rs(u,Vn))}),l8=St(function(u){var p=Fs(u);return Vn(p)&&(p=n),Qp(Rs(u,Vn),dt(p,2))}),c8=St(function(u){var p=Fs(u);return p=typeof p=="function"?p:n,Qp(Rs(u,Vn),n,p)}),u8=St(d1);function d8(u,p){return fv(u||[],p||[],ou)}function f8(u,p){return fv(u||[],p||[],du)}var h8=St(function(u){var p=u.length,b=p>1?u[p-1]:n;return b=typeof b=="function"?(u.pop(),b):n,Gv(u,b)});function Qv(u){var p=Y(u);return p.__chain__=!0,p}function p8(u,p){return p(u),u}function C0(u,p){return p(u)}var m8=Ja(function(u){var p=u.length,b=p?u[0]:0,_=this.__wrapped__,q=function(Q){return Lp(Q,u)};return p>1||this.__actions__.length||!(_ instanceof Rt)||!ei(b)?this.thru(q):(_=_.slice(b,+b+(p?1:0)),_.__actions__.push({func:C0,args:[q],thisArg:n}),new Os(_,this.__chain__).thru(function(Q){return p&&!Q.length&&Q.push(n),Q}))});function x8(){return Qv(this)}function g8(){return new Os(this.value(),this.__chain__)}function v8(){this.__values__===n&&(this.__values__=cy(this.value()));var u=this.__index__>=this.__values__.length,p=u?n:this.__values__[this.__index__++];return{done:u,value:p}}function y8(){return this}function w8(u){for(var p,b=this;b instanceof l0;){var _=zv(b);_.__index__=0,_.__values__=n,p?q.__wrapped__=_:p=_;var q=_;b=b.__wrapped__}return q.__wrapped__=u,p}function b8(){var u=this.__wrapped__;if(u instanceof Rt){var p=u;return this.__actions__.length&&(p=new Rt(this)),p=p.reverse(),p.__actions__.push({func:C0,args:[u1],thisArg:n}),new Os(p,this.__chain__)}return this.thru(u1)}function N8(){return dv(this.__wrapped__,this.__actions__)}var C8=m0(function(u,p,b){It.call(u,b)?++u[b]:Ka(u,b,1)});function E8(u,p,b){var _=yt(u)?$d:pS;return b&&Br(u,p,b)&&(p=n),_(u,dt(p,3))}function S8(u,p){var b=yt(u)?Rs:G2;return b(u,dt(p,3))}var _8=Nv(Wv),j8=Nv(Hv);function A8(u,p){return vr(E0(u,p),1)}function k8(u,p){return vr(E0(u,p),me)}function T8(u,p,b){return b=b===n?1:Ct(b),vr(E0(u,p),b)}function Xv(u,p){var b=yt(u)?Xr:Oi;return b(u,dt(p,3))}function Kv(u,p){var b=yt(u)?jp:$2;return b(u,dt(p,3))}var D8=m0(function(u,p,b){It.call(u,b)?u[b].push(p):Ka(u,b,[p])});function I8(u,p,b,_){u=Zr(u)?u:Fl(u),b=b&&!_?Ct(b):0;var q=u.length;return b<0&&(b=ar(q+b,0)),k0(u)?b<=q&&u.indexOf(p,b)>-1:!!q&&gr(u,p,b)>-1}var R8=St(function(u,p,b){var _=-1,q=typeof p=="function",Q=Zr(u)?X(u.length):[];return Oi(u,function(J){Q[++_]=q?cr(p,J,b):cu(J,p,b)}),Q}),M8=m0(function(u,p,b){Ka(u,b,p)});function E0(u,p){var b=yt(u)?pt:ev;return b(u,dt(p,3))}function O8(u,p,b,_){return u==null?[]:(yt(p)||(p=p==null?[]:[p]),b=_?n:b,yt(b)||(b=b==null?[]:[b]),sv(u,p,b))}var L8=m0(function(u,p,b){u[b?0:1].push(p)},function(){return[[],[]]});function P8(u,p,b){var _=yt(u)?Js:Gd,q=arguments.length<3;return _(u,dt(p,4),b,q,Oi)}function F8(u,p,b){var _=yt(u)?rn:Gd,q=arguments.length<3;return _(u,dt(p,4),b,q,$2)}function B8(u,p){var b=yt(u)?Rs:G2;return b(u,j0(dt(p,3)))}function U8(u){var p=yt(u)?W2:IS;return p(u)}function q8(u,p,b){(b?Br(u,p,b):p===n)?p=1:p=Ct(p);var _=yt(u)?cS:RS;return _(u,p)}function z8(u){var p=yt(u)?uS:OS;return p(u)}function W8(u){if(u==null)return 0;if(Zr(u))return k0(u)?h(u):u.length;var p=Ar(u);return p==Ke||p==ye?u.size:zp(u).length}function H8(u,p,b){var _=yt(u)?ot:LS;return b&&Br(u,p,b)&&(p=n),_(u,dt(p,3))}var V8=St(function(u,p){if(u==null)return[];var b=p.length;return b>1&&Br(u,p[0],p[1])?p=[]:b>2&&Br(p[0],p[1],p[2])&&(p=[p[0]]),sv(u,vr(p,1),[])}),S0=S5||function(){return Kn.Date.now()};function Y8(u,p){if(typeof p!="function")throw new En(d);return u=Ct(u),function(){if(--u<1)return p.apply(this,arguments)}}function Zv(u,p,b){return p=b?n:p,p=u&&p==null?u.length:p,Za(u,O,n,n,n,n,p)}function Jv(u,p){var b;if(typeof p!="function")throw new En(d);return u=Ct(u),function(){return--u>0&&(b=p.apply(this,arguments)),u<=1&&(p=n),b}}var f1=St(function(u,p,b){var _=T;if(b.length){var q=F(b,Ll(f1));_|=G}return Za(u,_,p,b,q)}),ey=St(function(u,p,b){var _=T|I;if(b.length){var q=F(b,Ll(ey));_|=G}return Za(p,_,u,b,q)});function ty(u,p,b){p=b?n:p;var _=Za(u,M,n,n,n,n,n,p);return _.placeholder=ty.placeholder,_}function ny(u,p,b){p=b?n:p;var _=Za(u,B,n,n,n,n,n,p);return _.placeholder=ny.placeholder,_}function ry(u,p,b){var _,q,Q,J,se,le,Se=0,je=!1,Me=!1,Ue=!0;if(typeof u!="function")throw new En(d);p=Bs(p)||0,kn(b)&&(je=!!b.leading,Me="maxWait"in b,Q=Me?ar(Bs(b.maxWait)||0,p):Q,Ue="trailing"in b?!!b.trailing:Ue);function et(Yn){var ra=_,ri=q;return _=q=n,Se=Yn,J=u.apply(ri,ra),J}function ft(Yn){return Se=Yn,se=pu(kt,p),je?et(Yn):J}function Et(Yn){var ra=Yn-le,ri=Yn-Se,Ny=p-ra;return Me?jr(Ny,Q-ri):Ny}function ht(Yn){var ra=Yn-le,ri=Yn-Se;return le===n||ra>=p||ra<0||Me&&ri>=Q}function kt(){var Yn=S0();if(ht(Yn))return Ot(Yn);se=pu(kt,Et(Yn))}function Ot(Yn){return se=n,Ue&&_?et(Yn):(_=q=n,J)}function ms(){se!==n&&hv(se),Se=0,_=le=q=se=n}function Ur(){return se===n?J:Ot(S0())}function xs(){var Yn=S0(),ra=ht(Yn);if(_=arguments,q=this,le=Yn,ra){if(se===n)return ft(le);if(Me)return hv(se),se=pu(kt,p),et(le)}return se===n&&(se=pu(kt,p)),J}return xs.cancel=ms,xs.flush=Ur,xs}var $8=St(function(u,p){return Y2(u,1,p)}),G8=St(function(u,p,b){return Y2(u,Bs(p)||0,b)});function Q8(u){return Za(u,W)}function _0(u,p){if(typeof u!="function"||p!=null&&typeof p!="function")throw new En(d);var b=function(){var _=arguments,q=p?p.apply(this,_):_[0],Q=b.cache;if(Q.has(q))return Q.get(q);var J=u.apply(this,_);return b.cache=Q.set(q,J)||Q,J};return b.cache=new(_0.Cache||Xa),b}_0.Cache=Xa;function j0(u){if(typeof u!="function")throw new En(d);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}function X8(u){return Jv(2,u)}var K8=PS(function(u,p){p=p.length==1&&yt(p[0])?pt(p[0],Pn(dt())):pt(vr(p,1),Pn(dt()));var b=p.length;return St(function(_){for(var q=-1,Q=jr(_.length,b);++q<Q;)_[q]=p[q].call(this,_[q]);return cr(u,this,_)})}),h1=St(function(u,p){var b=F(p,Ll(h1));return Za(u,G,n,p,b)}),sy=St(function(u,p){var b=F(p,Ll(sy));return Za(u,P,n,p,b)}),Z8=Ja(function(u,p){return Za(u,V,n,n,n,p)});function J8(u,p){if(typeof u!="function")throw new En(d);return p=p===n?p:Ct(p),St(u,p)}function ej(u,p){if(typeof u!="function")throw new En(d);return p=p==null?0:ar(Ct(p),0),St(function(b){var _=b[p],q=Fi(b,0,p);return _&&ds(q,_),cr(u,this,q)})}function tj(u,p,b){var _=!0,q=!0;if(typeof u!="function")throw new En(d);return kn(b)&&(_="leading"in b?!!b.leading:_,q="trailing"in b?!!b.trailing:q),ry(u,p,{leading:_,maxWait:p,trailing:q})}function nj(u){return Zv(u,1)}function rj(u,p){return h1(Kp(p),u)}function sj(){if(!arguments.length)return[];var u=arguments[0];return yt(u)?u:[u]}function aj(u){return Ls(u,j)}function ij(u,p){return p=typeof p=="function"?p:n,Ls(u,j,p)}function oj(u){return Ls(u,N|j)}function lj(u,p){return p=typeof p=="function"?p:n,Ls(u,N|j,p)}function cj(u,p){return p==null||V2(u,p,fr(p))}function na(u,p){return u===p||u!==u&&p!==p}var uj=y0(Bp),dj=y0(function(u,p){return u>=p}),Wo=K2(function(){return arguments}())?K2:function(u){return Fn(u)&&It.call(u,"callee")&&!P2.call(u,"callee")},yt=X.isArray,fj=To?Pn(To):wS;function Zr(u){return u!=null&&A0(u.length)&&!ti(u)}function Vn(u){return Fn(u)&&Zr(u)}function hj(u){return u===!0||u===!1||Fn(u)&&Fr(u)==at}var Bi=j5||E1,pj=Zs?Pn(Zs):bS;function mj(u){return Fn(u)&&u.nodeType===1&&!mu(u)}function xj(u){if(u==null)return!0;if(Zr(u)&&(yt(u)||typeof u=="string"||typeof u.splice=="function"||Bi(u)||Pl(u)||Wo(u)))return!u.length;var p=Ar(u);if(p==Ke||p==ye)return!u.size;if(hu(u))return!zp(u).length;for(var b in u)if(It.call(u,b))return!1;return!0}function gj(u,p){return uu(u,p)}function vj(u,p,b){b=typeof b=="function"?b:n;var _=b?b(u,p):n;return _===n?uu(u,p,n,b):!!_}function p1(u){if(!Fn(u))return!1;var p=Fr(u);return p==Bt||p==Vt||typeof u.message=="string"&&typeof u.name=="string"&&!mu(u)}function yj(u){return typeof u=="number"&&B2(u)}function ti(u){if(!kn(u))return!1;var p=Fr(u);return p==Lt||p==_e||p==Oe||p==oe}function ay(u){return typeof u=="number"&&u==Ct(u)}function A0(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=de}function kn(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function Fn(u){return u!=null&&typeof u=="object"}var iy=Vd?Pn(Vd):CS;function wj(u,p){return u===p||qp(u,p,s1(p))}function bj(u,p,b){return b=typeof b=="function"?b:n,qp(u,p,s1(p),b)}function Nj(u){return oy(u)&&u!=+u}function Cj(u){if(i_(u))throw new xe(o);return Z2(u)}function Ej(u){return u===null}function Sj(u){return u==null}function oy(u){return typeof u=="number"||Fn(u)&&Fr(u)==Nt}function mu(u){if(!Fn(u)||Fr(u)!=ke)return!1;var p=t0(u);if(p===null)return!0;var b=It.call(p,"constructor")&&p.constructor;return typeof b=="function"&&b instanceof b&&ea.call(b)==b5}var m1=pe?Pn(pe):ES;function _j(u){return ay(u)&&u>=-de&&u<=de}var ly=wt?Pn(wt):SS;function k0(u){return typeof u=="string"||!yt(u)&&Fn(u)&&Fr(u)==gt}function ps(u){return typeof u=="symbol"||Fn(u)&&Fr(u)==pn}var Pl=Zn?Pn(Zn):_S;function jj(u){return u===n}function Aj(u){return Fn(u)&&Ar(u)==rt}function kj(u){return Fn(u)&&Fr(u)==Pt}var Tj=y0(Wp),Dj=y0(function(u,p){return u<=p});function cy(u){if(!u)return[];if(Zr(u))return k0(u)?x(u):Kr(u);if(nu&&u[nu])return Mo(u[nu]());var p=Ar(u),b=p==Ke?At:p==ye?i:Fl;return b(u)}function ni(u){if(!u)return u===0?u:0;if(u=Bs(u),u===me||u===-me){var p=u<0?-1:1;return p*fe}return u===u?u:0}function Ct(u){var p=ni(u),b=p%1;return p===p?b?p-b:p:0}function uy(u){return u?Bo(Ct(u),0,Ye):0}function Bs(u){if(typeof u=="number")return u;if(ps(u))return Be;if(kn(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=kn(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=Qd(u);var b=Ts.test(u);return b||bp.test(u)?Sr(u.slice(2),b?2:8):bl.test(u)?Be:+u}function dy(u){return wa(u,Jr(u))}function Ij(u){return u?Bo(Ct(u),-de,de):u===0?u:0}function Kt(u){return u==null?"":hs(u)}var Rj=Ml(function(u,p){if(hu(p)||Zr(p)){wa(p,fr(p),u);return}for(var b in p)It.call(p,b)&&ou(u,b,p[b])}),fy=Ml(function(u,p){wa(p,Jr(p),u)}),T0=Ml(function(u,p,b,_){wa(p,Jr(p),u,_)}),Mj=Ml(function(u,p,b,_){wa(p,fr(p),u,_)}),Oj=Ja(Lp);function Lj(u,p){var b=Rl(u);return p==null?b:H2(b,p)}var Pj=St(function(u,p){u=Ze(u);var b=-1,_=p.length,q=_>2?p[2]:n;for(q&&Br(p[0],p[1],q)&&(_=1);++b<_;)for(var Q=p[b],J=Jr(Q),se=-1,le=J.length;++se<le;){var Se=J[se],je=u[Se];(je===n||na(je,Sn[Se])&&!It.call(u,Se))&&(u[Se]=Q[Se])}return u}),Fj=St(function(u){return u.push(n,kv),cr(hy,n,u)});function Bj(u,p){return Ga(u,dt(p,3),ya)}function Uj(u,p){return Ga(u,dt(p,3),Fp)}function qj(u,p){return u==null?u:Pp(u,dt(p,3),Jr)}function zj(u,p){return u==null?u:Q2(u,dt(p,3),Jr)}function Wj(u,p){return u&&ya(u,dt(p,3))}function Hj(u,p){return u&&Fp(u,dt(p,3))}function Vj(u){return u==null?[]:d0(u,fr(u))}function Yj(u){return u==null?[]:d0(u,Jr(u))}function x1(u,p,b){var _=u==null?n:Uo(u,p);return _===n?b:_}function $j(u,p){return u!=null&&Iv(u,p,xS)}function g1(u,p){return u!=null&&Iv(u,p,gS)}var Gj=Ev(function(u,p,b){p!=null&&typeof p.toString!="function"&&(p=Zd.call(p)),u[p]=b},y1(es)),Qj=Ev(function(u,p,b){p!=null&&typeof p.toString!="function"&&(p=Zd.call(p)),It.call(u,p)?u[p].push(b):u[p]=[b]},dt),Xj=St(cu);function fr(u){return Zr(u)?z2(u):zp(u)}function Jr(u){return Zr(u)?z2(u,!0):jS(u)}function Kj(u,p){var b={};return p=dt(p,3),ya(u,function(_,q,Q){Ka(b,p(_,q,Q),_)}),b}function Zj(u,p){var b={};return p=dt(p,3),ya(u,function(_,q,Q){Ka(b,q,p(_,q,Q))}),b}var Jj=Ml(function(u,p,b){f0(u,p,b)}),hy=Ml(function(u,p,b,_){f0(u,p,b,_)}),e6=Ja(function(u,p){var b={};if(u==null)return b;var _=!1;p=pt(p,function(Q){return Q=Pi(Q,u),_||(_=Q.length>1),Q}),wa(u,n1(u),b),_&&(b=Ls(b,N|S|j,GS));for(var q=p.length;q--;)Gp(b,p[q]);return b});function t6(u,p){return py(u,j0(dt(p)))}var n6=Ja(function(u,p){return u==null?{}:kS(u,p)});function py(u,p){if(u==null)return{};var b=pt(n1(u),function(_){return[_]});return p=dt(p),av(u,b,function(_,q){return p(_,q[0])})}function r6(u,p,b){p=Pi(p,u);var _=-1,q=p.length;for(q||(q=1,u=n);++_<q;){var Q=u==null?n:u[ba(p[_])];Q===n&&(_=q,Q=b),u=ti(Q)?Q.call(u):Q}return u}function s6(u,p,b){return u==null?u:du(u,p,b)}function a6(u,p,b,_){return _=typeof _=="function"?_:n,u==null?u:du(u,p,b,_)}var my=jv(fr),xy=jv(Jr);function i6(u,p,b){var _=yt(u),q=_||Bi(u)||Pl(u);if(p=dt(p,4),b==null){var Q=u&&u.constructor;q?b=_?new Q:[]:kn(u)?b=ti(Q)?Rl(t0(u)):{}:b={}}return(q?Xr:ya)(u,function(J,se,le){return p(b,J,se,le)}),b}function o6(u,p){return u==null?!0:Gp(u,p)}function l6(u,p,b){return u==null?u:uv(u,p,Kp(b))}function c6(u,p,b,_){return _=typeof _=="function"?_:n,u==null?u:uv(u,p,Kp(b),_)}function Fl(u){return u==null?[]:Ii(u,fr(u))}function u6(u){return u==null?[]:Ii(u,Jr(u))}function d6(u,p,b){return b===n&&(b=p,p=n),b!==n&&(b=Bs(b),b=b===b?b:0),p!==n&&(p=Bs(p),p=p===p?p:0),Bo(Bs(u),p,b)}function f6(u,p,b){return p=ni(p),b===n?(b=p,p=0):b=ni(b),u=Bs(u),vS(u,p,b)}function h6(u,p,b){if(b&&typeof b!="boolean"&&Br(u,p,b)&&(p=b=n),b===n&&(typeof p=="boolean"?(b=p,p=n):typeof u=="boolean"&&(b=u,u=n)),u===n&&p===n?(u=0,p=1):(u=ni(u),p===n?(p=u,u=0):p=ni(p)),u>p){var _=u;u=p,p=_}if(b||u%1||p%1){var q=U2();return jr(u+q*(p-u+ko("1e-"+((q+"").length-1))),p)}return Vp(u,p)}var p6=Ol(function(u,p,b){return p=p.toLowerCase(),u+(b?gy(p):p)});function gy(u){return v1(Kt(u).toLowerCase())}function vy(u){return u=Kt(u),u&&u.replace(xr,eu).replace(Sp,"")}function m6(u,p,b){u=Kt(u),p=hs(p);var _=u.length;b=b===n?_:Bo(Ct(b),0,_);var q=b;return b-=p.length,b>=0&&u.slice(b,q)==p}function x6(u){return u=Kt(u),u&&Ld.test(u)?u.replace(ga,Tp):u}function g6(u){return u=Kt(u),u&&za.test(u)?u.replace(qc,"\\$&"):u}var v6=Ol(function(u,p,b){return u+(b?"-":"")+p.toLowerCase()}),y6=Ol(function(u,p,b){return u+(b?" ":"")+p.toLowerCase()}),w6=bv("toLowerCase");function b6(u,p,b){u=Kt(u),p=Ct(p);var _=p?h(u):0;if(!p||_>=p)return u;var q=(p-_)/2;return v0(a0(q),b)+u+v0(s0(q),b)}function N6(u,p,b){u=Kt(u),p=Ct(p);var _=p?h(u):0;return p&&_<p?u+v0(p-_,b):u}function C6(u,p,b){u=Kt(u),p=Ct(p);var _=p?h(u):0;return p&&_<p?v0(p-_,b)+u:u}function E6(u,p,b){return b||p==null?p=0:p&&(p=+p),D5(Kt(u).replace(Co,""),p||0)}function S6(u,p,b){return(b?Br(u,p,b):p===n)?p=1:p=Ct(p),Yp(Kt(u),p)}function _6(){var u=arguments,p=Kt(u[0]);return u.length<3?p:p.replace(u[1],u[2])}var j6=Ol(function(u,p,b){return u+(b?"_":"")+p.toLowerCase()});function A6(u,p,b){return b&&typeof b!="number"&&Br(u,p,b)&&(p=b=n),b=b===n?Ye:b>>>0,b?(u=Kt(u),u&&(typeof p=="string"||p!=null&&!m1(p))&&(p=hs(p),!p&&Ri(u))?Fi(x(u),0,b):u.split(p,b)):[]}var k6=Ol(function(u,p,b){return u+(b?" ":"")+v1(p)});function T6(u,p,b){return u=Kt(u),b=b==null?0:Bo(Ct(b),0,u.length),p=hs(p),u.slice(b,b+p.length)==p}function D6(u,p,b){var _=Y.templateSettings;b&&Br(u,p,b)&&(p=n),u=Kt(u),p=T0({},p,_,Av);var q=T0({},p.imports,_.imports,Av),Q=fr(q),J=Ii(q,Q),se,le,Se=0,je=p.interpolate||tn,Me="__p += '",Ue=xt((p.escape||tn).source+"|"+je.source+"|"+(je===tr?Ai:tn).source+"|"+(p.evaluate||tn).source+"|$","g"),et="//# sourceURL="+(It.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Va+"]")+`
`;u.replace(Ue,function(ht,kt,Ot,ms,Ur,xs){return Ot||(Ot=ms),Me+=u.slice(Se,xs).replace(Pd,Xd),kt&&(se=!0,Me+=`' +
__e(`+kt+`) +
'`),Ur&&(le=!0,Me+=`';
`+Ur+`;
__p += '`),Ot&&(Me+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),Se=xs+ht.length,ht}),Me+=`';
`;var ft=It.call(p,"variable")&&p.variable;if(!ft)Me=`with (obj) {
`+Me+`
}
`;else if(zc.test(ft))throw new xe(m);Me=(le?Me.replace(Ks,""):Me).replace(No,"$1").replace(Md,"$1;"),Me="function("+(ft||"obj")+`) {
`+(ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(se?", __e = _.escape":"")+(le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Me+`return __p
}`;var Et=wy(function(){return we(Q,et+"return "+Me).apply(n,J)});if(Et.source=Me,p1(Et))throw Et;return Et}function I6(u){return Kt(u).toLowerCase()}function R6(u){return Kt(u).toUpperCase()}function M6(u,p,b){if(u=Kt(u),u&&(b||p===n))return Qd(u);if(!u||!(p=hs(p)))return u;var _=x(u),q=x(p),Q=Jc(_,q),J=fs(_,q)+1;return Fi(_,Q,J).join("")}function O6(u,p,b){if(u=Kt(u),u&&(b||p===n))return u.slice(0,y(u)+1);if(!u||!(p=hs(p)))return u;var _=x(u),q=fs(_,x(p))+1;return Fi(_,0,q).join("")}function L6(u,p,b){if(u=Kt(u),u&&(b||p===n))return u.replace(Co,"");if(!u||!(p=hs(p)))return u;var _=x(u),q=Jc(_,x(p));return Fi(_,q).join("")}function P6(u,p){var b=ee,_=ce;if(kn(p)){var q="separator"in p?p.separator:q;b="length"in p?Ct(p.length):b,_="omission"in p?hs(p.omission):_}u=Kt(u);var Q=u.length;if(Ri(u)){var J=x(u);Q=J.length}if(b>=Q)return u;var se=b-h(_);if(se<1)return _;var le=J?Fi(J,0,se).join(""):u.slice(0,se);if(q===n)return le+_;if(J&&(se+=le.length-se),m1(q)){if(u.slice(se).search(q)){var Se,je=le;for(q.global||(q=xt(q.source,Kt(Eo.exec(q))+"g")),q.lastIndex=0;Se=q.exec(je);)var Me=Se.index;le=le.slice(0,Me===n?se:Me)}}else if(u.indexOf(hs(q),se)!=se){var Ue=le.lastIndexOf(q);Ue>-1&&(le=le.slice(0,Ue))}return le+_}function F6(u){return u=Kt(u),u&&Od.test(u)?u.replace(Ft,C):u}var B6=Ol(function(u,p,b){return u+(b?" ":"")+p.toUpperCase()}),v1=bv("toUpperCase");function yy(u,p,b){return u=Kt(u),p=b?n:p,p===n?tu(u)?U(u):$a(u):u.match(p)||[]}var wy=St(function(u,p){try{return cr(u,n,p)}catch(b){return p1(b)?b:new xe(b)}}),U6=Ja(function(u,p){return Xr(p,function(b){b=ba(b),Ka(u,b,f1(u[b],u))}),u});function q6(u){var p=u==null?0:u.length,b=dt();return u=p?pt(u,function(_){if(typeof _[1]!="function")throw new En(d);return[b(_[0]),_[1]]}):[],St(function(_){for(var q=-1;++q<p;){var Q=u[q];if(cr(Q[0],this,_))return cr(Q[1],this,_)}})}function z6(u){return hS(Ls(u,N))}function y1(u){return function(){return u}}function W6(u,p){return u==null||u!==u?p:u}var H6=Cv(),V6=Cv(!0);function es(u){return u}function w1(u){return J2(typeof u=="function"?u:Ls(u,N))}function Y6(u){return tv(Ls(u,N))}function $6(u,p){return nv(u,Ls(p,N))}var G6=St(function(u,p){return function(b){return cu(b,u,p)}}),Q6=St(function(u,p){return function(b){return cu(u,b,p)}});function b1(u,p,b){var _=fr(p),q=d0(p,_);b==null&&!(kn(p)&&(q.length||!_.length))&&(b=p,p=u,u=this,q=d0(p,fr(p)));var Q=!(kn(b)&&"chain"in b)||!!b.chain,J=ti(u);return Xr(q,function(se){var le=p[se];u[se]=le,J&&(u.prototype[se]=function(){var Se=this.__chain__;if(Q||Se){var je=u(this.__wrapped__),Me=je.__actions__=Kr(this.__actions__);return Me.push({func:le,args:arguments,thisArg:u}),je.__chain__=Se,je}return le.apply(u,ds([this.value()],arguments))})}),u}function X6(){return Kn._===this&&(Kn._=N5),this}function N1(){}function K6(u){return u=Ct(u),St(function(p){return rv(p,u)})}var Z6=Jp(pt),J6=Jp($d),eA=Jp(ot);function by(u){return i1(u)?kl(ba(u)):TS(u)}function tA(u){return function(p){return u==null?n:Uo(u,p)}}var nA=Sv(),rA=Sv(!0);function C1(){return[]}function E1(){return!1}function sA(){return{}}function aA(){return""}function iA(){return!0}function oA(u,p){if(u=Ct(u),u<1||u>de)return[];var b=Ye,_=jr(u,Ye);p=dt(p),u-=Ye;for(var q=Zc(_,p);++b<u;)p(b);return q}function lA(u){return yt(u)?pt(u,ba):ps(u)?[u]:Kr(qv(Kt(u)))}function cA(u){var p=++Dp;return Kt(u)+p}var uA=g0(function(u,p){return u+p},0),dA=e1("ceil"),fA=g0(function(u,p){return u/p},1),hA=e1("floor");function pA(u){return u&&u.length?u0(u,es,Bp):n}function mA(u,p){return u&&u.length?u0(u,dt(p,2),Bp):n}function xA(u){return Al(u,es)}function gA(u,p){return Al(u,dt(p,2))}function vA(u){return u&&u.length?u0(u,es,Wp):n}function yA(u,p){return u&&u.length?u0(u,dt(p,2),Wp):n}var wA=g0(function(u,p){return u*p},1),bA=e1("round"),NA=g0(function(u,p){return u-p},0);function CA(u){return u&&u.length?Io(u,es):0}function EA(u,p){return u&&u.length?Io(u,dt(p,2)):0}return Y.after=Y8,Y.ary=Zv,Y.assign=Rj,Y.assignIn=fy,Y.assignInWith=T0,Y.assignWith=Mj,Y.at=Oj,Y.before=Jv,Y.bind=f1,Y.bindAll=U6,Y.bindKey=ey,Y.castArray=sj,Y.chain=Qv,Y.chunk=h_,Y.compact=p_,Y.concat=m_,Y.cond=q6,Y.conforms=z6,Y.constant=y1,Y.countBy=C8,Y.create=Lj,Y.curry=ty,Y.curryRight=ny,Y.debounce=ry,Y.defaults=Pj,Y.defaultsDeep=Fj,Y.defer=$8,Y.delay=G8,Y.difference=x_,Y.differenceBy=g_,Y.differenceWith=v_,Y.drop=y_,Y.dropRight=w_,Y.dropRightWhile=b_,Y.dropWhile=N_,Y.fill=C_,Y.filter=S8,Y.flatMap=A8,Y.flatMapDeep=k8,Y.flatMapDepth=T8,Y.flatten=Vv,Y.flattenDeep=E_,Y.flattenDepth=S_,Y.flip=Q8,Y.flow=H6,Y.flowRight=V6,Y.fromPairs=__,Y.functions=Vj,Y.functionsIn=Yj,Y.groupBy=D8,Y.initial=A_,Y.intersection=k_,Y.intersectionBy=T_,Y.intersectionWith=D_,Y.invert=Gj,Y.invertBy=Qj,Y.invokeMap=R8,Y.iteratee=w1,Y.keyBy=M8,Y.keys=fr,Y.keysIn=Jr,Y.map=E0,Y.mapKeys=Kj,Y.mapValues=Zj,Y.matches=Y6,Y.matchesProperty=$6,Y.memoize=_0,Y.merge=Jj,Y.mergeWith=hy,Y.method=G6,Y.methodOf=Q6,Y.mixin=b1,Y.negate=j0,Y.nthArg=K6,Y.omit=e6,Y.omitBy=t6,Y.once=X8,Y.orderBy=O8,Y.over=Z6,Y.overArgs=K8,Y.overEvery=J6,Y.overSome=eA,Y.partial=h1,Y.partialRight=sy,Y.partition=L8,Y.pick=n6,Y.pickBy=py,Y.property=by,Y.propertyOf=tA,Y.pull=O_,Y.pullAll=$v,Y.pullAllBy=L_,Y.pullAllWith=P_,Y.pullAt=F_,Y.range=nA,Y.rangeRight=rA,Y.rearg=Z8,Y.reject=B8,Y.remove=B_,Y.rest=J8,Y.reverse=u1,Y.sampleSize=q8,Y.set=s6,Y.setWith=a6,Y.shuffle=z8,Y.slice=U_,Y.sortBy=V8,Y.sortedUniq=$_,Y.sortedUniqBy=G_,Y.split=A6,Y.spread=ej,Y.tail=Q_,Y.take=X_,Y.takeRight=K_,Y.takeRightWhile=Z_,Y.takeWhile=J_,Y.tap=p8,Y.throttle=tj,Y.thru=C0,Y.toArray=cy,Y.toPairs=my,Y.toPairsIn=xy,Y.toPath=lA,Y.toPlainObject=dy,Y.transform=i6,Y.unary=nj,Y.union=e8,Y.unionBy=t8,Y.unionWith=n8,Y.uniq=r8,Y.uniqBy=s8,Y.uniqWith=a8,Y.unset=o6,Y.unzip=d1,Y.unzipWith=Gv,Y.update=l6,Y.updateWith=c6,Y.values=Fl,Y.valuesIn=u6,Y.without=i8,Y.words=yy,Y.wrap=rj,Y.xor=o8,Y.xorBy=l8,Y.xorWith=c8,Y.zip=u8,Y.zipObject=d8,Y.zipObjectDeep=f8,Y.zipWith=h8,Y.entries=my,Y.entriesIn=xy,Y.extend=fy,Y.extendWith=T0,b1(Y,Y),Y.add=uA,Y.attempt=wy,Y.camelCase=p6,Y.capitalize=gy,Y.ceil=dA,Y.clamp=d6,Y.clone=aj,Y.cloneDeep=oj,Y.cloneDeepWith=lj,Y.cloneWith=ij,Y.conformsTo=cj,Y.deburr=vy,Y.defaultTo=W6,Y.divide=fA,Y.endsWith=m6,Y.eq=na,Y.escape=x6,Y.escapeRegExp=g6,Y.every=E8,Y.find=_8,Y.findIndex=Wv,Y.findKey=Bj,Y.findLast=j8,Y.findLastIndex=Hv,Y.findLastKey=Uj,Y.floor=hA,Y.forEach=Xv,Y.forEachRight=Kv,Y.forIn=qj,Y.forInRight=zj,Y.forOwn=Wj,Y.forOwnRight=Hj,Y.get=x1,Y.gt=uj,Y.gte=dj,Y.has=$j,Y.hasIn=g1,Y.head=Yv,Y.identity=es,Y.includes=I8,Y.indexOf=j_,Y.inRange=f6,Y.invoke=Xj,Y.isArguments=Wo,Y.isArray=yt,Y.isArrayBuffer=fj,Y.isArrayLike=Zr,Y.isArrayLikeObject=Vn,Y.isBoolean=hj,Y.isBuffer=Bi,Y.isDate=pj,Y.isElement=mj,Y.isEmpty=xj,Y.isEqual=gj,Y.isEqualWith=vj,Y.isError=p1,Y.isFinite=yj,Y.isFunction=ti,Y.isInteger=ay,Y.isLength=A0,Y.isMap=iy,Y.isMatch=wj,Y.isMatchWith=bj,Y.isNaN=Nj,Y.isNative=Cj,Y.isNil=Sj,Y.isNull=Ej,Y.isNumber=oy,Y.isObject=kn,Y.isObjectLike=Fn,Y.isPlainObject=mu,Y.isRegExp=m1,Y.isSafeInteger=_j,Y.isSet=ly,Y.isString=k0,Y.isSymbol=ps,Y.isTypedArray=Pl,Y.isUndefined=jj,Y.isWeakMap=Aj,Y.isWeakSet=kj,Y.join=I_,Y.kebabCase=v6,Y.last=Fs,Y.lastIndexOf=R_,Y.lowerCase=y6,Y.lowerFirst=w6,Y.lt=Tj,Y.lte=Dj,Y.max=pA,Y.maxBy=mA,Y.mean=xA,Y.meanBy=gA,Y.min=vA,Y.minBy=yA,Y.stubArray=C1,Y.stubFalse=E1,Y.stubObject=sA,Y.stubString=aA,Y.stubTrue=iA,Y.multiply=wA,Y.nth=M_,Y.noConflict=X6,Y.noop=N1,Y.now=S0,Y.pad=b6,Y.padEnd=N6,Y.padStart=C6,Y.parseInt=E6,Y.random=h6,Y.reduce=P8,Y.reduceRight=F8,Y.repeat=S6,Y.replace=_6,Y.result=r6,Y.round=bA,Y.runInContext=z,Y.sample=U8,Y.size=W8,Y.snakeCase=j6,Y.some=H8,Y.sortedIndex=q_,Y.sortedIndexBy=z_,Y.sortedIndexOf=W_,Y.sortedLastIndex=H_,Y.sortedLastIndexBy=V_,Y.sortedLastIndexOf=Y_,Y.startCase=k6,Y.startsWith=T6,Y.subtract=NA,Y.sum=CA,Y.sumBy=EA,Y.template=D6,Y.times=oA,Y.toFinite=ni,Y.toInteger=Ct,Y.toLength=uy,Y.toLower=I6,Y.toNumber=Bs,Y.toSafeInteger=Ij,Y.toString=Kt,Y.toUpper=R6,Y.trim=M6,Y.trimEnd=O6,Y.trimStart=L6,Y.truncate=P6,Y.unescape=F6,Y.uniqueId=cA,Y.upperCase=B6,Y.upperFirst=v1,Y.each=Xv,Y.eachRight=Kv,Y.first=Yv,b1(Y,function(){var u={};return ya(Y,function(p,b){It.call(Y.prototype,b)||(u[b]=p)}),u}(),{chain:!1}),Y.VERSION=r,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Y[u].placeholder=Y}),Xr(["drop","take"],function(u,p){Rt.prototype[u]=function(b){b=b===n?1:ar(Ct(b),0);var _=this.__filtered__&&!p?new Rt(this):this.clone();return _.__filtered__?_.__takeCount__=jr(b,_.__takeCount__):_.__views__.push({size:jr(b,Ye),type:u+(_.__dir__<0?"Right":"")}),_},Rt.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),Xr(["filter","map","takeWhile"],function(u,p){var b=p+1,_=b==Ne||b==Ae;Rt.prototype[u]=function(q){var Q=this.clone();return Q.__iteratees__.push({iteratee:dt(q,3),type:b}),Q.__filtered__=Q.__filtered__||_,Q}}),Xr(["head","last"],function(u,p){var b="take"+(p?"Right":"");Rt.prototype[u]=function(){return this[b](1).value()[0]}}),Xr(["initial","tail"],function(u,p){var b="drop"+(p?"":"Right");Rt.prototype[u]=function(){return this.__filtered__?new Rt(this):this[b](1)}}),Rt.prototype.compact=function(){return this.filter(es)},Rt.prototype.find=function(u){return this.filter(u).head()},Rt.prototype.findLast=function(u){return this.reverse().find(u)},Rt.prototype.invokeMap=St(function(u,p){return typeof u=="function"?new Rt(this):this.map(function(b){return cu(b,u,p)})}),Rt.prototype.reject=function(u){return this.filter(j0(dt(u)))},Rt.prototype.slice=function(u,p){u=Ct(u);var b=this;return b.__filtered__&&(u>0||p<0)?new Rt(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),p!==n&&(p=Ct(p),b=p<0?b.dropRight(-p):b.take(p-u)),b)},Rt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Rt.prototype.toArray=function(){return this.take(Ye)},ya(Rt.prototype,function(u,p){var b=/^(?:filter|find|map|reject)|While$/.test(p),_=/^(?:head|last)$/.test(p),q=Y[_?"take"+(p=="last"?"Right":""):p],Q=_||/^find/.test(p);q&&(Y.prototype[p]=function(){var J=this.__wrapped__,se=_?[1]:arguments,le=J instanceof Rt,Se=se[0],je=le||yt(J),Me=function(kt){var Ot=q.apply(Y,ds([kt],se));return _&&Ue?Ot[0]:Ot};je&&b&&typeof Se=="function"&&Se.length!=1&&(le=je=!1);var Ue=this.__chain__,et=!!this.__actions__.length,ft=Q&&!Ue,Et=le&&!et;if(!Q&&je){J=Et?J:new Rt(this);var ht=u.apply(J,se);return ht.__actions__.push({func:C0,args:[Me],thisArg:n}),new Os(ht,Ue)}return ft&&Et?u.apply(this,se):(ht=this.thru(Me),ft?_?ht.value()[0]:ht.value():ht)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(u){var p=sr[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",_=/^(?:pop|shift)$/.test(u);Y.prototype[u]=function(){var q=arguments;if(_&&!this.__chain__){var Q=this.value();return p.apply(yt(Q)?Q:[],q)}return this[b](function(J){return p.apply(yt(J)?J:[],q)})}}),ya(Rt.prototype,function(u,p){var b=Y[p];if(b){var _=b.name+"";It.call(Il,_)||(Il[_]=[]),Il[_].push({name:p,func:b})}}),Il[x0(n,I).name]=[{name:"wrapper",func:n}],Rt.prototype.clone=F5,Rt.prototype.reverse=B5,Rt.prototype.value=U5,Y.prototype.at=m8,Y.prototype.chain=x8,Y.prototype.commit=g8,Y.prototype.next=v8,Y.prototype.plant=w8,Y.prototype.reverse=b8,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=N8,Y.prototype.first=Y.prototype.head,nu&&(Y.prototype[nu]=y8),Y},Z=H();Ya?((Ya.exports=Z)._=Z,Qc._=Z):Kn._=Z}).call(Aa)})(Eh,Eh.exports);var $E=Eh.exports;const UF=({search:e,onApply:t,onDelete:n})=>s.jsxs("div",{className:"inline-flex items-center bg-primary-50 text-primary-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:[s.jsx("button",{onClick:()=>t(e),className:"mr-1 hover:text-primary-900","aria-label":`Apply saved search: ${e.name}`,children:e.name}),s.jsx("button",{onClick:()=>n(e.id),className:"ml-1 text-primary-400 hover:text-primary-700","aria-label":`Delete saved search: ${e.name}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),dm=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),a3=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})}),qF=({equipmentData:e,onFilterChange:t,currentFilters:n,isLoading:r})=>{const o=(()=>{if(!e||e.length===0)return{total:0,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0};const v={total:e.length,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0},g=new Date;return g.setDate(g.getDate()-7),e.forEach(w=>{w.status==="available"?v.available++:w.status==="in-use"?v.inUse++:w.status==="maintenance"&&v.maintenance++;const N=w.category||"Uncategorized";v.categories[N]=(v.categories[N]||0)+1;const S=w.type||"Unknown";v.types[S]=(v.types[S]||0)+1;const j=w.location||"No Location";v.locations[j]=(v.locations[j]||0)+1;const k=w.brand||"Unknown";v.brands[k]=(v.brands[k]||0)+1,new Date(w.created_at)>g&&v.recentlyAdded++}),v})(),d=[{title:"Total Equipment",value:o.total,icon:s.jsx(a3,{}),color:"blue",filter:{status:""},description:"All equipment in system"},{title:"Available",value:o.available,icon:s.jsx(dm,{}),color:"green",filter:{status:"available"},description:"Ready for use"},{title:"In Use",value:o.inUse,icon:s.jsx(dm,{}),color:"yellow",filter:{status:"in-use"},description:"Currently deployed"},{title:"Maintenance",value:o.maintenance,icon:s.jsx(dm,{}),color:"red",filter:{status:"maintenance"},description:"Under repair"}],m=(v,g=!1)=>{const w={blue:{bg:g?"bg-blue-100 border-blue-500":"bg-blue-50 hover:bg-blue-100",text:"text-blue-700",border:"border-l-4 border-blue-500",icon:"text-blue-600"},green:{bg:g?"bg-green-100 border-green-500":"bg-green-50 hover:bg-green-100",text:"text-green-700",border:"border-l-4 border-green-500",icon:"text-green-600"},yellow:{bg:g?"bg-yellow-100 border-yellow-500":"bg-yellow-50 hover:bg-yellow-100",text:"text-yellow-700",border:"border-l-4 border-yellow-500",icon:"text-yellow-600"},red:{bg:g?"bg-red-100 border-red-500":"bg-red-50 hover:bg-red-100",text:"text-red-700",border:"border-l-4 border-red-500",icon:"text-red-600"}};return w[v]||w.blue};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[s.jsx(a3,{}),"Equipment Analytics"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((v,g)=>{const w=n.status===v.filter.status,N=m(v.color,w);return s.jsx("button",{onClick:()=>t(v.filter),className:`${N.bg} ${N.border} p-4 rounded-lg transition-all duration-200 hover:shadow-md cursor-pointer text-left group ${w?"ring-2 ring-offset-2 ring-blue-500":""}`,title:`Filter by ${v.title.toLowerCase()}: ${v.description}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:`text-sm font-medium ${N.text} mb-1`,children:v.title}),s.jsx("p",{className:`text-2xl font-bold ${N.text}`,children:r?"...":v.value.toLocaleString()}),s.jsx("p",{className:`text-xs ${N.text} opacity-75 mt-1`,children:v.description})]}),s.jsx("div",{className:`${N.icon} group-hover:scale-110 transition-transform`,children:v.icon})]})},g)})})]}),s.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.brands).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Brands"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.types).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Types"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.locations).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Locations"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-green-600",children:"Added This Week"})]})]})})]})},zF=()=>{var Bt,Lt;const{user:e,canEditEquipment:t}=lr(),n=cn(),r=L.useRef(null),[a,o]=L.useState({search:"",type:"",brand:"",status:"",location:"",dateRange:{startDate:null,endDate:null}}),[d,m]=L.useState("updated_at"),[v,g]=L.useState("desc"),[w,N]=L.useState(""),[S,j]=L.useState(!1),[k,R]=L.useState(!1),[T,I]=L.useState(!1),[A,M]=L.useState(""),[B,G]=L.useState(!1),{data:P,isLoading:O}=ct(["equipment-summary"],()=>Ia({limit:1e3}));(()=>{if(!(P!=null&&P.equipment))return{total:0,available:0,inUse:0,maintenance:0};const _e={total:P.equipment.length,available:0,inUse:0,maintenance:0,types:{}};return P.equipment.forEach(Ke=>{Ke.status==="available"?_e.available++:Ke.status==="in-use"?_e.inUse++:Ke.status==="maintenance"&&_e.maintenance++,_e.types[Ke.type]?_e.types[Ke.type]++:_e.types[Ke.type]=1}),_e})();const{data:W,fetchNextPage:ee,hasNextPage:ce,isFetchingNextPage:ne,isLoading:te,isError:Ne,error:ae}=Zg(["equipment",a,d,v],async({pageParam:_e=1})=>{const Ke={page:_e,limit:20,...a,sortBy:d,sortOrder:v};return a.dateRange.startDate&&a.dateRange.endDate&&(Ke.startDate=a.dateRange.startDate.toISOString(),Ke.endDate=a.dateRange.endDate.toISOString()),Ia(Ke)},{getNextPageParam:_e=>{if(_e.page<_e.totalPages)return _e.page+1},keepPreviousData:!0}),{data:Ae,isLoading:me}=ct(["equipment-suggestions",w],()=>Ia({search:w,limit:5}),{enabled:!!w&&w.length>2,keepPreviousData:!0}),{data:de}=ct(["saved-searches"],hE,{enabled:t()}),{data:fe}=ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5});ct({queryKey:["categories"],queryFn:vl});const{data:Be}=ct(["equipment-analytics"],()=>Ia({limit:1e4}),{keepPreviousData:!0}),Ye=L.useCallback($E.debounce(_e=>{N(_e)},300),[]),Je=_e=>{const Ke=_e.target.value,Nt={...a,search:Ke};o(Nt),Ye(Ke),Ke.length>2?j(!0):j(!1);const ve=Object.values(Nt).some(ke=>ke!==""&&ke!==null&&(typeof ke!="object"||Nt.dateRange.startDate||Nt.dateRange.endDate));R(ve)},Te=_e=>{const{name:Ke,value:Nt}=_e.target,ve={...a,[Ke]:Nt};o(ve);const ke=Object.values(ve).some(qe=>qe!==""&&qe!==null&&(typeof qe!="object"||qe.startDate||qe.endDate));R(ke)},$e=_e=>{const Ke={...a,..._e};o(Ke),R(!0),G(!0)},nt=()=>{o({search:"",status:"",type:"",brand:"",location:"",dateRange:{startDate:null,endDate:null}}),R(!1),G(!1)},De=_e=>{const[Ke,Nt]=_e,ve={...a,dateRange:{startDate:Ke,endDate:Nt}};o(ve);const ke=Object.values(ve).some(qe=>qe!==""&&qe!==null&&(typeof qe!="object"||ve.dateRange.startDate||ve.dateRange.endDate));R(ke)},Oe=async()=>{if(!A.trim()){st.error("Please enter a name for your saved search");return}try{await pE({name:A,filters:JSON.stringify(a),sortBy:d,sortOrder:v}),n.invalidateQueries(["saved-searches"]),M(""),I(!1),st.success("Search saved successfully")}catch(_e){st.error("Failed to save search"),console.error("Save search error:",_e)}},at=_e=>{try{const Ke=JSON.parse(_e.filters);o(Ke),m(_e.sortBy||"updated_at"),g(_e.sortOrder||"desc"),R(!0),st.info(`Applied saved search: ${_e.name}`)}catch(Ke){st.error("Failed to apply saved search"),console.error("Apply saved search error:",Ke)}},Ht=async _e=>{try{await mE(_e),n.invalidateQueries(["saved-searches"]),st.success("Search deleted successfully")}catch(Ke){st.error("Failed to delete search"),console.error("Delete saved search error:",Ke)}};L.useEffect(()=>{const _e=new IntersectionObserver(Ke=>{Ke[0].isIntersecting&&ce&&!ne&&ee()},{threshold:.5});return r.current&&_e.observe(r.current),()=>{r.current&&_e.unobserve(r.current)}},[r,ee,ce,ne]);const Vt=(W==null?void 0:W.pages.flatMap(_e=>_e.equipment))||[];return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ip,{position:"top-right",autoClose:3e3}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Dashboard"}),s.jsx(qn,{to:"/equipment/new",className:"btn btn-primary",children:"Add New Equipment"})]}),s.jsxs("div",{className:"sticky top-16 z-20 bg-slate-50 pt-4 pb-2 shadow-sm",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"search",name:"search",placeholder:"Search equipment by brand, model, serial number...",value:a.search,onChange:Je,className:"w-full px-4 py-3 pl-10 rounded-full shadow-md border border-slate-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":"Search equipment catalog"}),s.jsx(i2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),S&&((Bt=Ae==null?void 0:Ae.equipment)==null?void 0:Bt.length)>0&&s.jsx("div",{className:"absolute z-30 left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-slate-200 max-h-80 overflow-y-auto",children:Ae.equipment.map(_e=>s.jsxs(qn,{to:`/equipment/${_e.id}`,className:"block px-4 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0",children:[s.jsxs("div",{className:"font-medium",children:[_e.brand," ",_e.model]}),s.jsxs("div",{className:"text-sm text-slate-500",children:[_e.type," • SN: ",_e.serial_number]})]},_e.id))})]}),s.jsx("div",{className:"flex justify-between mt-2",children:s.jsxs("button",{onClick:()=>G(!B),className:"flex items-center text-sm text-slate-600 hover:text-primary-600",children:[s.jsx(o2,{className:"w-4 h-4 mr-1"}),B?"Hide Filters":"Show Advanced Filters"]})})]}),t()&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Saved Searches"}),T?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"savedSearchName",name:"savedSearchName",placeholder:"Enter search name",value:A,onChange:_e=>M(_e.target.value),className:"w-48 px-3 py-1 text-sm border border-slate-300 rounded-lg"}),s.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700",onClick:Oe,children:"Save"}),s.jsx("button",{className:"px-3 py-1 text-sm border border-slate-300 rounded-lg hover:bg-slate-50",onClick:()=>{I(!1),M("")},children:"Cancel"})]}):s.jsxs("button",{className:"flex items-center gap-1 px-3 py-1 text-sm border border-slate-300 rounded-lg hover:bg-slate-50",onClick:()=>I(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),s.jsx("span",{children:"Save Current Search"})]})]}),s.jsx("div",{className:"flex flex-wrap",children:((Lt=de==null?void 0:de.searches)==null?void 0:Lt.length)>0?de.searches.map(_e=>s.jsx(UF,{search:_e,onApply:at,onDelete:Ht},_e.id)):s.jsx("p",{className:"text-slate-500 text-sm",children:"No saved searches yet. Save your current search to access it quickly later."})})]}),s.jsx("div",{id:"filter-panel",className:`bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden transition-all duration-300 ${B?"max-h-96 opacity-100 mb-6":"max-h-0 opacity-0 mb-0"}`,children:s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-4",children:"Advanced Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Equipment Type"}),s.jsxs("select",{name:"type",value:a.type,onChange:Te,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"",children:"All Types"}),fe!=null&&fe.types&&fe.types.length>0?fe.types.map(_e=>s.jsx("option",{value:_e.name.toLowerCase(),children:_e.name},_e.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Brand"}),s.jsx("input",{type:"text",name:"brand",value:a.brand,onChange:Te,placeholder:"Filter by brand",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:a.status,onChange:Te,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"in-use",children:"In Use"}),s.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),s.jsx("input",{type:"text",name:"location",value:a.location,onChange:Te,placeholder:"Filter by location",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date Range"}),s.jsx(YE,{selectsRange:!0,startDate:a.dateRange.startDate,endDate:a.dateRange.endDate,onChange:De,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",placeholderText:"Select date range",isClearable:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sort By"}),s.jsxs("select",{value:d,onChange:_e=>m(_e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"updated_at",children:"Last Updated"}),s.jsx("option",{value:"brand",children:"Brand"}),s.jsx("option",{value:"model",children:"Model"}),s.jsx("option",{value:"type",children:"Type"}),s.jsx("option",{value:"status",children:"Status"}),s.jsx("option",{value:"location",children:"Location"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sort Order"}),s.jsxs("select",{value:v,onChange:_e=>g(_e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"asc",children:"Ascending"}),s.jsx("option",{value:"desc",children:"Descending"})]})]})]})]})}),k?s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Search Results"}),s.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[Vt.length," items found"]})]}),s.jsxs("button",{onClick:nt,className:"px-3 py-2 text-sm bg-white border border-slate-300 rounded-lg hover:bg-slate-50 flex items-center",title:"Clear all filters and return to dashboard",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 text-left",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Brand"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Model"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Serial Number"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:te?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-slate-500",children:s.jsxs("div",{className:"flex justify-center items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mr-2"}),"Loading..."]})})}):Ne?s.jsx("tr",{children:s.jsxs("td",{colSpan:"7",className:"px-6 py-4 text-center text-red-500",children:["Error loading equipment: ",ae.message]})}):Vt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-slate-500",children:"No equipment found matching your search criteria"})}):Vt.map(_e=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:_e.type}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:_e.brand}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:_e.model}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:_e.serial_number}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_e.status==="available"?"bg-green-100 text-green-800":_e.status==="in-use"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:_e.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:_e.location||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(qn,{to:`/equipment/${_e.id}`,className:"text-primary-600 hover:text-primary-900",title:"View details",children:s.jsx(tc,{className:"w-5 h-5"})}),t()&&s.jsx(s.Fragment,{children:s.jsx(qn,{to:`/equipment/${_e.id}/edit`,className:"text-slate-600 hover:text-slate-900",title:"Edit equipment",children:s.jsx(La,{className:"w-5 h-5"})})})]})})]},_e.id))})]})}),s.jsx("div",{ref:r,className:"py-4 text-center",children:ne?s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),s.jsx("span",{className:"text-slate-500",children:"Loading more..."})]}):ce?s.jsx("span",{className:"text-sm text-slate-500",children:"Scroll to load more"}):s.jsx("span",{className:"text-sm text-slate-500",children:"No more equipment to load"})})]}):s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx(qF,{equipmentData:(Be==null?void 0:Be.equipment)||[],onFilterChange:$e,currentFilters:a,isLoading:O})})]})},WF=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),HF=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),VF=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})}),YF=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),$F=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),GF=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),QF=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),fm=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),Hu=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})}),XF=({equipmentData:e,onFilterChange:t,currentFilters:n,isLoading:r})=>{const o=(()=>{if(!e||e.length===0)return{total:0,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0};const v={total:e.length,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0},g=new Date;return g.setDate(g.getDate()-7),e.forEach(w=>{w.status==="available"?v.available++:w.status==="in-use"?v.inUse++:w.status==="maintenance"&&v.maintenance++;const N=w.category||"Uncategorized";v.categories[N]=(v.categories[N]||0)+1;const S=w.type||"Unknown";v.types[S]=(v.types[S]||0)+1;const j=w.location||"No Location";v.locations[j]=(v.locations[j]||0)+1;const k=w.brand||"Unknown";v.brands[k]=(v.brands[k]||0)+1,new Date(w.created_at)>g&&v.recentlyAdded++}),v})(),d=[{title:"Total Equipment",value:o.total,icon:s.jsx(Hu,{}),color:"blue",filter:{status:""},description:"All equipment in system"},{title:"Available",value:o.available,icon:s.jsx(fm,{}),color:"green",filter:{status:"available"},description:"Ready for use"},{title:"In Use",value:o.inUse,icon:s.jsx(fm,{}),color:"yellow",filter:{status:"in-use"},description:"Currently deployed"},{title:"Maintenance",value:o.maintenance,icon:s.jsx(fm,{}),color:"red",filter:{status:"maintenance"},description:"Under repair"}],m=(v,g=!1)=>{const w={blue:{bg:g?"bg-blue-100 border-blue-500":"bg-blue-50 hover:bg-blue-100",text:"text-blue-700",border:"border-l-4 border-blue-500",icon:"text-blue-600"},green:{bg:g?"bg-green-100 border-green-500":"bg-green-50 hover:bg-green-100",text:"text-green-700",border:"border-l-4 border-green-500",icon:"text-green-600"},yellow:{bg:g?"bg-yellow-100 border-yellow-500":"bg-yellow-50 hover:bg-yellow-100",text:"text-yellow-700",border:"border-l-4 border-yellow-500",icon:"text-yellow-600"},red:{bg:g?"bg-red-100 border-red-500":"bg-red-50 hover:bg-red-100",text:"text-red-700",border:"border-l-4 border-red-500",icon:"text-red-600"}};return w[v]||w.blue};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[s.jsx(Hu,{}),"Equipment Analytics"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((v,g)=>{const w=n.status===v.filter.status,N=m(v.color,w);return s.jsx("button",{onClick:()=>t(v.filter),className:`${N.bg} ${N.border} p-4 rounded-lg transition-all duration-200 hover:shadow-md cursor-pointer text-left group ${w?"ring-2 ring-offset-2 ring-blue-500":""}`,title:`Filter by ${v.title.toLowerCase()}: ${v.description}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:`text-sm font-medium ${N.text} mb-1`,children:v.title}),s.jsx("p",{className:`text-2xl font-bold ${N.text}`,children:r?"...":v.value.toLocaleString()}),s.jsx("p",{className:`text-xs ${N.text} opacity-75 mt-1`,children:v.description})]}),s.jsx("div",{className:`${N.icon} group-hover:scale-110 transition-transform`,children:v.icon})]})},g)})})]}),s.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.brands).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Brands"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.types).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Types"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.locations).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Locations"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-green-600",children:"Added This Week"})]})]})})]})},KF=({equipment:e,canEdit:t,searchTerm:n})=>{const[r,a]=L.useState(!1);let o=null;if(e.reference_image_id)o=ch(e.reference_image_id,!0);else if(e.files&&e.files.length>0){const v=e.files.find(g=>g.file_type==="image");v&&(o=ch(v.id,!0))}const d=v=>{switch(v){case"available":return s.jsx(ws,{variant:"success",children:v});case"in-use":return s.jsx(ws,{variant:"info",children:v});case"maintenance":return s.jsx(ws,{variant:"warning",children:v});case"unavailable":return s.jsx(ws,{variant:"secondary",children:v});case"broken":return s.jsx(ws,{variant:"danger",children:v});default:return s.jsx(ws,{children:v})}},m=(v,g)=>{if(!g||!v)return v;const w=new RegExp(`(${g})`,"gi");return v.split(w).map((S,j)=>w.test(S)?s.jsx("span",{className:"bg-yellow-200 font-medium",children:S},j):S)};return s.jsxs(Re,{className:"h-full transition-all duration-300 hover:shadow-lg hover:scale-[1.02] relative",children:[s.jsxs("div",{className:"relative h-40 bg-slate-100 rounded-t-lg overflow-hidden",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[o?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:o,alt:`${e.brand} ${e.model}`,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}):s.jsx("div",{className:"flex items-center justify-center h-full bg-slate-200",children:s.jsx("span",{className:"text-slate-400 text-lg",children:"No image"})}),r&&s.jsxs("div",{className:"absolute inset-0 bg-slate-900 bg-opacity-80 p-4 text-white overflow-y-auto",children:[s.jsxs("h4",{className:"font-medium",children:[e.brand," ",e.model]}),s.jsx("p",{className:"text-sm mt-1",children:e.description||"No description available"}),s.jsxs("p",{className:"text-sm mt-2",children:["Serial: ",e.serial_number]}),s.jsxs("p",{className:"text-sm",children:["Location: ",e.location||"Not specified"]})]})]}),s.jsxs(Re.Body,{children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-slate-800 capitalize",children:e.type}),e.category&&s.jsxs("p",{className:"text-xs text-slate-500",children:["Category: ",e.category]})]}),d(e.status)]}),s.jsx("h2",{className:"text-lg font-semibold mb-1",children:n?s.jsxs(s.Fragment,{children:[m(e.brand,n)," ",m(e.model,n)]}):`${e.brand} ${e.model}`}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["SN: ",n?m(e.serial_number,n):e.serial_number]}),s.jsxs("div",{className:"flex justify-between mt-auto pt-2 border-t border-slate-100",children:[s.jsxs(qn,{to:`/equipment/${e.id}`,className:"text-primary-600 hover:text-primary-800 flex items-center gap-1",children:[s.jsx(GF,{})," View"]}),t&&s.jsxs(qn,{to:`/equipment/${e.id}/edit`,className:"text-slate-600 hover:text-slate-800 flex items-center gap-1",children:[s.jsx($F,{})," Edit"]})]})]})]})},ZF=({equipment:e,canEdit:t,navigate:n})=>{const r=(a,o)=>{o.target.closest("button")||o.target.closest("a")||n(`/equipment/${a}`)};return s.jsxs("tr",{className:"table-row hover:bg-slate-50 cursor-pointer",onClick:a=>r(e.id,a),children:[s.jsx("td",{className:"table-cell",children:s.jsxs("span",{className:"font-medium text-slate-800",children:[e.brand," ",e.model]})}),s.jsx("td",{className:"table-cell",children:e.type}),s.jsx("td",{className:"table-cell",children:e.category||"-"}),s.jsx("td",{className:"table-cell",children:e.serial_number}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:`badge ${e.status==="available"?"badge-success":e.status==="in-use"?"badge-info":e.status==="maintenance"?"badge-warning":e.status==="unavailable"?"badge-secondary":e.status==="broken"?"badge-danger":"badge-secondary"}`,children:e.status})}),s.jsx("td",{className:"table-cell",children:e.location||"-"}),s.jsx("td",{className:"table-cell",children:e.quantity||1}),s.jsx("td",{className:"table-cell",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qn,{to:`/equipment/${e.id}`,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",onClick:a=>a.stopPropagation(),children:"View"}),t?s.jsx(qn,{to:`/equipment/${e.id}/edit`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium underline",onClick:a=>{a.stopPropagation(),console.log("Edit link clicked for equipment:",e.id)},children:"Edit"}):s.jsx("span",{className:"text-gray-400 text-sm",children:"Edit"})]})})]})},JF=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow-soft overflow-hidden h-full animate-pulse",children:[s.jsx("div",{className:"h-40 bg-slate-200"}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4 mb-2"})]}),s.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2 mb-4"}),s.jsxs("div",{className:"border-t border-slate-100 pt-2 flex justify-between",children:[s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4"})]})]})]}),eB=({search:e,onApply:t,onDelete:n})=>s.jsxs("div",{className:"inline-flex items-center bg-primary-50 text-primary-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:[s.jsx("button",{onClick:()=>t(e),className:"mr-1 hover:text-primary-900","aria-label":`Apply saved search: ${e.name}`,children:e.name}),s.jsx("button",{onClick:()=>n(e.id),className:"ml-1 text-primary-400 hover:text-primary-700","aria-label":`Delete saved search: ${e.name}`,children:s.jsx(YF,{className:"w-4 h-4"})})]}),i3=()=>{var Ke,Nt;const{user:e,canEditEquipment:t}=lr(),n=cn(),r=Gr(),a=L.useRef(null),[o,d]=L.useState({search:"",type:"",category:"",status:"",location:"",dateRange:{startDate:null,endDate:null}}),[m,v]=L.useState(""),[g,w]=L.useState(!1),[N,S]=L.useState(!1),[j,k]=L.useState("updated_at"),[R,T]=L.useState("desc"),[I,A]=L.useState(""),[M,B]=L.useState(!1),[G,P]=L.useState("list"),{data:O,fetchNextPage:V,hasNextPage:W,isFetchingNextPage:ee,isLoading:ce,isError:ne,error:te}=Zg(["equipment",o,j,R],async({pageParam:ve=1})=>{const ke={page:ve,limit:20,...o,sortBy:j,sortOrder:R};return o.dateRange.startDate&&o.dateRange.endDate&&(ke.startDate=o.dateRange.startDate.toISOString(),ke.endDate=o.dateRange.endDate.toISOString()),Ia(ke)},{getNextPageParam:ve=>{if(ve.page<ve.totalPages)return ve.page+1},keepPreviousData:!0}),{data:Ne,isLoading:ae}=ct(["equipment-suggestions",m],()=>Ia({search:m,limit:5}),{enabled:!!m&&m.length>2,keepPreviousData:!0}),{data:Ae}=ct(["saved-searches"],hE,{enabled:t()}),{data:me=[]}=ct({queryKey:["equipmentTypes"],queryFn:Ba}),de=Array.isArray(me)?me:me.types||[],{data:fe={categories:[]}}=ct({queryKey:["categories"],queryFn:vl}),Be=fe.categories||[],Ye=L.useCallback($E.debounce(ve=>{v(ve)},300),[]),Je=ve=>{const ke=ve.target.value;d(qe=>({...qe,search:ke})),Ye(ke),ke.length>2?w(!0):w(!1)},Te=ve=>{const{name:ke,value:qe}=ve.target;d(oe=>({...oe,[ke]:qe}))},$e=ve=>{const[ke,qe]=ve;d(oe=>({...oe,dateRange:{startDate:ke,endDate:qe}}))},nt=()=>{d({search:"",type:"",category:"",status:"",location:"",dateRange:{startDate:null,endDate:null}}),v(""),w(!1)},De=async()=>{if(!I.trim()){st.error("Please enter a name for your saved search");return}try{await pE({name:I,filters:JSON.stringify(o),sortBy:j,sortOrder:R}),n.invalidateQueries(["saved-searches"]),A(""),B(!1),st.success("Search saved successfully")}catch(ve){st.error("Failed to save search"),console.error("Save search error:",ve)}},Oe=ve=>{try{const ke=JSON.parse(ve.filters);d(ke),k(ve.sortBy||"updated_at"),T(ve.sortOrder||"desc"),st.info(`Applied saved search: ${ve.name}`)}catch(ke){st.error("Failed to apply saved search"),console.error("Apply saved search error:",ke)}},at=async ve=>{try{await mE(ve),n.invalidateQueries(["saved-searches"]),st.success("Search deleted successfully")}catch(ke){st.error("Failed to delete search"),console.error("Delete saved search error:",ke)}};L.useEffect(()=>{const ve=new IntersectionObserver(qe=>{qe[0].isIntersecting&&W&&!ee&&V()},{threshold:.5}),ke=a.current;return ke&&ve.observe(ke),()=>{ke&&ve.unobserve(ke)}},[a,V,W,ee]);const Ht=(O==null?void 0:O.pages.flatMap(ve=>ve.equipment))||[],{data:Vt}=ct(["equipment-analytics"],()=>Ia({limit:1e4}),{keepPreviousData:!0}),Lt=(()=>{const ve=(Vt==null?void 0:Vt.equipment)||[];if(!ve||ve.length===0)return{total:0,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0};const ke={total:ve.length,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0},qe=new Date;return qe.setDate(qe.getDate()-7),ve.forEach(oe=>{oe.status==="available"?ke.available++:oe.status==="in-use"?ke.inUse++:oe.status==="maintenance"&&ke.maintenance++;const Ee=oe.category||"Uncategorized";ke.categories[Ee]=(ke.categories[Ee]||0)+1;const ye=oe.type||"Unknown";ke.types[ye]=(ke.types[ye]||0)+1;const gt=oe.location||"No Location";ke.locations[gt]=(ke.locations[gt]||0)+1;const pn=oe.brand||"Unknown";ke.brands[pn]=(ke.brands[pn]||0)+1,new Date(oe.created_at)>qe&&ke.recentlyAdded++}),ke})(),_e=ve=>{d(ke=>({...ke,...ve}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ip,{position:"top-right",autoClose:3e3}),s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Dashboard"})}),s.jsx(XF,{equipmentData:(Vt==null?void 0:Vt.equipment)||[],onFilterChange:_e,currentFilters:o,isLoading:ce}),s.jsx("div",{className:"sticky top-16 z-20 bg-slate-50 pt-4 pb-2 shadow-sm",children:s.jsxs("div",{className:"relative",children:[s.jsx(lt,{id:"search",name:"search",placeholder:"Search equipment by brand, model, serial number...",value:o.search,onChange:Je,icon:s.jsx(WF,{}),className:"rounded-full shadow-md","aria-label":"Search equipment catalog"}),g&&((Ke=Ne==null?void 0:Ne.equipment)==null?void 0:Ke.length)>0&&s.jsx("div",{className:"absolute z-30 left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-slate-200 max-h-80 overflow-y-auto",children:Ne.equipment.map(ve=>s.jsxs(qn,{to:`/equipment/${ve.id}`,className:"block px-4 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0",children:[s.jsxs("div",{className:"font-medium",children:[ve.brand," ",ve.model]}),s.jsxs("div",{className:"text-sm text-slate-500",children:[ve.type," • SN: ",ve.serial_number]})]},ve.id))}),s.jsxs("div",{className:"flex mt-2 gap-2",children:[s.jsxs(be,{variant:"outline",size:"sm",onClick:()=>S(!N),className:"flex items-center gap-1","aria-expanded":N,"aria-controls":"filter-panel",children:[s.jsx(HF,{}),s.jsx("span",{children:N?"Hide Filters":"Show Filters"})]}),Object.values(o).some(ve=>ve&&(typeof ve=="string"?ve.trim()!=="":!0))&&s.jsxs(be,{variant:"outline",size:"sm",onClick:nt,className:"flex items-center gap-1 text-slate-600",children:[s.jsx(QF,{}),s.jsx("span",{children:"Clear Filters"})]}),s.jsx("div",{className:"ml-auto",children:s.jsx(Ns,{id:"sort",name:"sort",value:`${j}-${R}`,onChange:ve=>{const[ke,qe]=ve.target.value.split("-");k(ke),T(qe)},options:[{value:"updated_at-desc",label:"Newest First"},{value:"updated_at-asc",label:"Oldest First"},{value:"brand-asc",label:"Brand (A-Z)"},{value:"brand-desc",label:"Brand (Z-A)"},{value:"model-asc",label:"Model (A-Z)"},{value:"model-desc",label:"Model (Z-A)"}],className:"w-40"})})]})]})}),t()&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Saved Searches"}),M?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lt,{id:"savedSearchName",name:"savedSearchName",placeholder:"Enter search name",value:I,onChange:ve=>A(ve.target.value),className:"w-48"}),s.jsx(be,{variant:"primary",size:"sm",onClick:De,children:"Save"}),s.jsx(be,{variant:"outline",size:"sm",onClick:()=>{B(!1),A("")},children:"Cancel"})]}):s.jsxs(be,{variant:"outline",size:"sm",onClick:()=>B(!0),className:"flex items-center gap-1",children:[s.jsx(VF,{}),s.jsx("span",{children:"Save Current Search"})]})]}),s.jsx("div",{className:"flex flex-wrap",children:((Nt=Ae==null?void 0:Ae.searches)==null?void 0:Nt.length)>0?Ae.searches.map(ve=>s.jsx(eB,{search:ve,onApply:Oe,onDelete:at},ve.id)):s.jsx("p",{className:"text-slate-500 text-sm",children:"No saved searches yet. Save your current search to access it quickly later."})})]}),s.jsx("div",{id:"filter-panel",className:`bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden transition-all duration-300 ${N?"max-h-[800px] opacity-100 mb-6":"max-h-0 opacity-0 mb-0"}`,children:s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-4",children:"Advanced Filters"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[s.jsxs(Re,{className:"h-fit",children:[s.jsx(Re.Header,{children:s.jsxs(Re.Title,{className:"flex items-center gap-2",children:[s.jsx(Hu,{}),"Equipment Types"]})}),s.jsx(Re.Body,{className:"p-4",children:ce?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((ve,ke)=>s.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse"},ke))}):Object.keys(Lt.types).length>0?s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(Lt.types).sort(([,ve],[,ke])=>ke-ve).slice(0,10).map(([ve,ke])=>{const qe=o.type===ve;return s.jsxs("button",{onClick:()=>d(oe=>({...oe,type:qe?"":ve})),className:`flex justify-between items-center w-full px-3 py-2 rounded-md transition-colors text-left ${qe?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"hover:bg-slate-50"}`,title:`Filter by ${ve} equipment`,children:[s.jsx("span",{className:"capitalize font-medium",children:ve}),s.jsx(ws,{variant:qe?"primary":"secondary",size:"sm",children:ke})]},ve)})}):s.jsx("p",{className:"text-slate-500 text-sm",children:"No equipment types available"})})]}),s.jsxs(Re,{className:"h-fit",children:[s.jsx(Re.Header,{children:s.jsxs(Re.Title,{className:"flex items-center gap-2",children:[s.jsx(Hu,{}),"Categories"]})}),s.jsx(Re.Body,{className:"p-4",children:ce?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((ve,ke)=>s.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse"},ke))}):Object.keys(Lt.categories).length>0?s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(Lt.categories).sort(([,ve],[,ke])=>ke-ve).slice(0,10).map(([ve,ke])=>{const qe=o.category===ve;return s.jsxs("button",{onClick:()=>d(oe=>({...oe,category:qe?"":ve})),className:`flex justify-between items-center w-full px-3 py-2 rounded-md transition-colors text-left ${qe?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"hover:bg-slate-50"}`,title:`Filter by ${ve} category`,children:[s.jsx("span",{className:"font-medium",children:ve}),s.jsx(ws,{variant:qe?"primary":"secondary",size:"sm",children:ke})]},ve)})}):s.jsx("p",{className:"text-slate-500 text-sm",children:"No categories available"})})]}),s.jsxs(Re,{className:"h-fit",children:[s.jsx(Re.Header,{children:s.jsxs(Re.Title,{className:"flex items-center gap-2",children:[s.jsx(Hu,{}),"Top Locations"]})}),s.jsx(Re.Body,{className:"p-4",children:ce?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((ve,ke)=>s.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse"},ke))}):Object.keys(Lt.locations).length>0?s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(Lt.locations).sort(([,ve],[,ke])=>ke-ve).slice(0,10).map(([ve,ke])=>{const qe=o.location===ve;return s.jsxs("button",{onClick:()=>d(oe=>({...oe,location:qe?"":ve})),className:`flex justify-between items-center w-full px-3 py-2 rounded-md transition-colors text-left ${qe?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"hover:bg-slate-50"}`,title:`Filter by ${ve} location`,children:[s.jsx("span",{className:"font-medium truncate",children:ve}),s.jsx(ws,{variant:qe?"primary":"secondary",size:"sm",children:ke})]},ve)})}):s.jsx("p",{className:"text-slate-500 text-sm",children:"No locations available"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Ns,{id:"category",name:"category",label:"Category",value:o.category,onChange:Te,options:[{value:"",label:"All Categories"},...(Be||[]).map(ve=>({value:ve.name,label:ve.name}))]}),s.jsx(Ns,{id:"type",name:"type",label:"Equipment Type",value:o.type,onChange:Te,options:[{value:"",label:"All Types"},...(de||[]).map(ve=>({value:ve.name,label:ve.name}))]}),s.jsx(Ns,{id:"status",name:"status",label:"Status",value:o.status,onChange:Te,options:[{value:"",label:"All Statuses"},{value:"available",label:"Available"},{value:"in-use",label:"In Use"},{value:"maintenance",label:"Maintenance"},{value:"unavailable",label:"Unavailable"},{value:"broken",label:"Broken"}]}),s.jsx(lt,{id:"location",name:"location",label:"Location",placeholder:"Filter by location",value:o.location,onChange:Te}),s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date Range"}),s.jsx(YE,{selectsRange:!0,startDate:o.dateRange.startDate,endDate:o.dateRange.endDate,onChange:$e,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",placeholderText:"Select date range",isClearable:!0})]})]})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800",children:["Equipment Results (",Ht.length," items)"]}),s.jsxs("div",{className:"flex border border-slate-200 rounded-lg overflow-hidden bg-white shadow-sm",children:[s.jsxs("button",{onClick:()=>P("list"),className:`px-4 py-2 text-sm font-medium transition-all flex items-center gap-2 ${G==="list"?"bg-primary-600 text-white":"bg-white text-slate-600 hover:bg-slate-50"}`,title:"List view",children:[s.jsx(Pc,{className:"h-4 w-4"}),s.jsx("span",{children:"List"})]}),s.jsxs("button",{onClick:()=>P("card"),className:`px-4 py-2 text-sm font-medium transition-all flex items-center gap-2 ${G==="card"?"bg-primary-600 text-white":"bg-white text-slate-600 hover:bg-slate-50"}`,title:"Card view",children:[s.jsx(Fc,{className:"h-4 w-4"}),s.jsx("span",{children:"Cards"})]})]})]}),s.jsx("div",{children:ce?s.jsxs(s.Fragment,{children:[G==="card"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((ve,ke)=>s.jsx(JF,{},ke))}),G==="list"&&s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Equipment"}),s.jsx("th",{className:"table-header-cell",children:"Type"}),s.jsx("th",{className:"table-header-cell",children:"Category"}),s.jsx("th",{className:"table-header-cell",children:"Serial Number"}),s.jsx("th",{className:"table-header-cell",children:"Status"}),s.jsx("th",{className:"table-header-cell",children:"Location"}),s.jsx("th",{className:"table-header-cell",children:"Quantity"}),s.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:Array.from({length:6}).map((ve,ke)=>s.jsxs("tr",{className:"table-row animate-pulse",children:[s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-2/3"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-6 bg-slate-200 rounded-full w-16"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-8"})}),s.jsx("td",{className:"table-cell",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-4 bg-slate-200 rounded w-12"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-8"})]})})]},ke))})]})})})]}):ne?s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading equipment"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:(te==null?void 0:te.message)||"Failed to load equipment data. Please try again."})})]})]})}):Ht.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-slate-800",children:"No equipment found"}),s.jsx("p",{className:"mt-2 text-slate-500",children:"Try adjusting your search or filter criteria to find what you're looking for."}),s.jsx(be,{variant:"outline",className:"mt-4",onClick:nt,children:"Clear All Filters"})]}):s.jsxs(s.Fragment,{children:[G==="card"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ht.map(ve=>s.jsx(KF,{equipment:ve,canEdit:t(),searchTerm:o.search},ve.id))}),G==="list"&&s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Equipment"}),s.jsx("th",{className:"table-header-cell",children:"Type"}),s.jsx("th",{className:"table-header-cell",children:"Category"}),s.jsx("th",{className:"table-header-cell",children:"Serial Number"}),s.jsx("th",{className:"table-header-cell",children:"Status"}),s.jsx("th",{className:"table-header-cell",children:"Location"}),s.jsx("th",{className:"table-header-cell",children:"Quantity"}),s.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:Ht.map(ve=>s.jsx(ZF,{equipment:ve,canEdit:t(),navigate:r},ve.id))})]})})}),s.jsx("div",{ref:a,className:"py-4 text-center",children:ee?s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),s.jsx("span",{className:"text-slate-500",children:"Loading more..."})]}):W?s.jsx("span",{className:"text-sm text-slate-500",children:"Scroll to load more"}):s.jsx("span",{className:"text-sm text-slate-500",children:"No more equipment to load"})})]})})]})},tB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),nB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),rB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),sB=()=>{const{isAdmin:e}=lr(),t=cn(),[n,r]=L.useState(""),[a,o]=L.useState(null),[d,m]=L.useState(""),[v,g]=L.useState(""),{data:w,isLoading:N,isError:S}=ct({queryKey:["equipmentTypes"],queryFn:Ba}),j=(w==null?void 0:w.types)||[],k=Tt({mutationFn:fM,onSuccess:()=>{t.invalidateQueries(["equipmentTypes"]),r(""),g("")},onError:P=>{var O,V;g(((V=(O=P.response)==null?void 0:O.data)==null?void 0:V.message)||"Failed to create equipment type")}}),R=Tt({mutationFn:({id:P,name:O})=>hM(P,O),onSuccess:()=>{t.invalidateQueries(["equipmentTypes"]),o(null),m(""),g("")},onError:P=>{var O,V;g(((V=(O=P.response)==null?void 0:O.data)==null?void 0:V.message)||"Failed to update equipment type")}}),T=Tt({mutationFn:pM,onSuccess:()=>{t.invalidateQueries(["equipmentTypes"]),g("")},onError:P=>{var O,V;g(((V=(O=P.response)==null?void 0:O.data)==null?void 0:V.message)||"Failed to delete equipment type")}}),I=P=>{if(P.preventDefault(),!n.trim()){g("Type name is required");return}k.mutate(n),document.getElementById("addTypeModal").style.display="none"},A=P=>{o(P),m(P.name)},M=()=>{if(!d.trim()){g("Type name is required");return}R.mutate({id:a.id,name:d})},B=()=>{o(null),m("")},G=P=>{window.confirm("Are you sure you want to delete this equipment type?")&&T.mutate(P)};return e()?s.jsxs("div",{className:"space-y-6",children:[v&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded",children:s.jsx("span",{children:v})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Equipment Types"}),s.jsxs(be,{variant:"primary",onClick:()=>{r(""),document.getElementById("addTypeModal").style.display="block"},className:"flex items-center gap-2",children:[s.jsx(rB,{}),"Add Type"]})]}),s.jsx(Re,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Name"}),s.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:N?s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"table-cell text-center py-4",children:s.jsx("div",{className:"flex justify-center items-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"})})})}):S?s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"table-cell text-center py-4 text-red-600",children:"Error loading equipment types. Please try again."})}):j&&j.length>0?j.map(P=>s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell",children:P.name}),s.jsx("td",{className:"table-cell text-right",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsxs(be,{onClick:()=>A(P),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[s.jsx(tB,{}),"Edit"]}),s.jsxs(be,{onClick:()=>G(P.id),variant:"danger",size:"sm",disabled:T.isLoading&&T.variables===P.id,className:"flex items-center gap-1",children:[s.jsx(nB,{}),T.isLoading&&T.variables===P.id?"Deleting...":"Delete"]})]})})]},P.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"table-cell text-center py-4 text-slate-500",children:"No equipment types found"})})})]})})}),s.jsx("div",{className:"modal-backdrop",id:"addTypeModal",style:{display:"none"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Add Equipment Type"}),s.jsx("button",{className:"modal-close",onClick:()=>document.getElementById("addTypeModal").style.display="none",children:"×"})]}),s.jsxs("form",{onSubmit:I,children:[s.jsx("div",{className:"modal-body",children:s.jsx("div",{className:"space-y-4",children:s.jsx(lt,{id:"newTypeName",name:"newTypeName",type:"text",label:"Type Name",value:n,onChange:P=>r(P.target.value),placeholder:"Enter equipment type name",required:!0})})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:()=>document.getElementById("addTypeModal").style.display="none",children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:k.isLoading,className:"flex items-center gap-2",children:k.isLoading?"Adding...":"Add Type"})]})]})]})}),a&&s.jsx("div",{className:"modal-backdrop",style:{display:"block"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Edit Equipment Type"}),s.jsx("button",{className:"modal-close",onClick:B,children:"×"})]}),s.jsxs("form",{onSubmit:P=>{P.preventDefault(),M()},children:[s.jsx("div",{className:"modal-body",children:s.jsx("div",{className:"space-y-4",children:s.jsx(lt,{id:"editTypeName",name:"editTypeName",type:"text",label:"Type Name",value:d,onChange:P=>m(P.target.value),required:!0})})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:B,children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:R.isLoading,className:"flex items-center gap-2",children:R.isLoading?"Saving...":"Save Changes"})]})]})]})})]}):s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4 rounded",children:s.jsx("p",{children:"Only administrators can manage equipment types."})})},aB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),iB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),oB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),lB=()=>{const{isAdmin:e}=lr(),t=cn(),[n,r]=L.useState(""),[a,o]=L.useState(""),[d,m]=L.useState(null),[v,g]=L.useState(""),[w,N]=L.useState(""),[S,j]=L.useState(""),{data:k,isLoading:R,isError:T}=ct({queryKey:["categories"],queryFn:vl}),I=(k==null?void 0:k.categories)||[],A=Tt({mutationFn:({name:ee,description:ce})=>uL(ee,ce),onSuccess:()=>{t.invalidateQueries(["categories"]),r(""),o(""),j("")},onError:ee=>{var ce,ne;j(((ne=(ce=ee.response)==null?void 0:ce.data)==null?void 0:ne.message)||"Failed to create category")}}),M=Tt({mutationFn:({id:ee,name:ce,description:ne})=>dL(ee,ce,ne),onSuccess:()=>{t.invalidateQueries(["categories"]),m(null),g(""),N(""),j("")},onError:ee=>{var ce,ne;j(((ne=(ce=ee.response)==null?void 0:ce.data)==null?void 0:ne.message)||"Failed to update category")}}),B=Tt({mutationFn:fL,onSuccess:()=>{t.invalidateQueries(["categories"]),j("")},onError:ee=>{var ce,ne;j(((ne=(ce=ee.response)==null?void 0:ce.data)==null?void 0:ne.message)||"Failed to delete category")}}),G=ee=>{if(ee.preventDefault(),!n.trim()){j("Category name is required");return}A.mutate({name:n,description:a}),document.getElementById("addCategoryModal").style.display="none"},P=ee=>{m(ee),g(ee.name),N(ee.description||"")},O=()=>{if(!v.trim()){j("Category name is required");return}M.mutate({id:d.id,name:v,description:w})},V=()=>{m(null),g(""),N("")},W=ee=>{window.confirm("Are you sure you want to delete this category?")&&B.mutate(ee)};return e()?s.jsxs("div",{className:"space-y-6",children:[S&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded",children:s.jsx("p",{children:S})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Equipment Categories"}),s.jsxs(be,{variant:"primary",onClick:()=>{r(""),o(""),document.getElementById("addCategoryModal").style.display="block"},className:"flex items-center gap-2",children:[s.jsx(oB,{}),"Add Category"]})]}),s.jsx(Re,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Name"}),s.jsx("th",{className:"table-header-cell",children:"Description"}),s.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:R?s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"table-cell text-center py-4",children:s.jsx("div",{className:"flex justify-center items-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"})})})}):T?s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"table-cell text-center py-4 text-red-600",children:"Error loading categories. Please try again."})}):I&&I.length>0?I.map(ee=>s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell",children:ee.name}),s.jsx("td",{className:"table-cell",children:ee.description||"-"}),s.jsx("td",{className:"table-cell text-right",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsxs(be,{onClick:()=>P(ee),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[s.jsx(aB,{}),"Edit"]}),s.jsxs(be,{onClick:()=>W(ee.id),variant:"danger",size:"sm",disabled:B.isLoading&&B.variables===ee.id,className:"flex items-center gap-1",children:[s.jsx(iB,{}),B.isLoading&&B.variables===ee.id?"Deleting...":"Delete"]})]})})]},ee.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"table-cell text-center py-4 text-slate-500",children:"No categories found"})})})]})})}),s.jsx("div",{className:"modal-backdrop",id:"addCategoryModal",style:{display:"none"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Add Category"}),s.jsx("button",{className:"modal-close",onClick:()=>document.getElementById("addCategoryModal").style.display="none",children:"×"})]}),s.jsxs("form",{onSubmit:G,children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(lt,{id:"newCategoryName",name:"newCategoryName",type:"text",label:"Category Name",value:n,onChange:ee=>r(ee.target.value),placeholder:"Enter category name",required:!0}),s.jsx(lt,{id:"newCategoryDescription",name:"newCategoryDescription",type:"text",label:"Description (optional)",value:a,onChange:ee=>o(ee.target.value),placeholder:"Enter category description"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:()=>document.getElementById("addCategoryModal").style.display="none",children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:A.isLoading,className:"flex items-center gap-2",children:A.isLoading?"Adding...":"Add Category"})]})]})]})}),d&&s.jsx("div",{className:"modal-backdrop",style:{display:"block"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Edit Category"}),s.jsx("button",{className:"modal-close",onClick:V,children:"×"})]}),s.jsxs("form",{onSubmit:ee=>{ee.preventDefault(),O()},children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(lt,{id:"editCategoryName",name:"editCategoryName",type:"text",label:"Category Name",value:v,onChange:ee=>g(ee.target.value),required:!0}),s.jsx(lt,{id:"editCategoryDescription",name:"editCategoryDescription",type:"text",label:"Description (optional)",value:w,onChange:ee=>N(ee.target.value),placeholder:"Enter category description"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:V,children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:M.isLoading,className:"flex items-center gap-2",children:M.isLoading?"Saving...":"Save Changes"})]})]})]})})]}):s.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4",children:s.jsx("p",{children:"Only administrators can manage equipment categories."})})},wo=async()=>(await Qe.get("/api/locations")).data,cB=async e=>(await Qe.post("/api/locations",e)).data,uB=async(e,t)=>(await Qe.put(`/api/locations/${e}`,t)).data,dB=async e=>(await Qe.delete(`/api/locations/${e}`)).data,fB=()=>{var V;const{isAdmin:e}=lr(),t=cn(),[n,r]=L.useState(!1),[a,o]=L.useState(!1),[d,m]=L.useState(!1),[v,g]=L.useState(null),[w,N]=L.useState({name:"",street:"",postal_code:"",city:"",region:"",country:""}),{data:S,isLoading:j,isError:k}=ct(["locations"],wo),R=Tt(cB,{onSuccess:()=>{t.invalidateQueries(["locations"]),r(!1),N({name:"",street:"",postal_code:"",city:"",region:"",country:""}),alert("Location created successfully")},onError:W=>{var ee,ce;alert(`Error creating location: ${((ce=(ee=W.response)==null?void 0:ee.data)==null?void 0:ce.message)||W.message}`)}}),T=Tt(W=>uB(W.id,W.locationData),{onSuccess:()=>{t.invalidateQueries(["locations"]),o(!1),g(null),alert("Location updated successfully")},onError:W=>{var ee,ce;alert(`Error updating location: ${((ce=(ee=W.response)==null?void 0:ee.data)==null?void 0:ce.message)||W.message}`)}}),I=Tt(dB,{onSuccess:()=>{t.invalidateQueries(["locations"]),m(!1),g(null),alert("Location deleted successfully")},onError:W=>{var ee,ce;alert(`Error deleting location: ${((ce=(ee=W.response)==null?void 0:ee.data)==null?void 0:ce.message)||W.message}`)}}),A=W=>{const{name:ee,value:ce}=W.target;N(ne=>({...ne,[ee]:ce}))},M=W=>{W.preventDefault(),R.mutate(w)},B=W=>{W.preventDefault(),T.mutate({id:v.id,locationData:w})},G=()=>{I.mutate(v.id)},P=W=>{g(W),N({name:W.name,street:W.street||"",postal_code:W.postal_code||"",city:W.city||"",region:W.region||"",country:W.country||""}),o(!0)},O=W=>{g(W),m(!0)};return j?s.jsx("div",{className:"text-center py-4",children:"Loading locations..."}):k?s.jsx("div",{className:"text-center py-4 text-red-600",children:"Error loading locations"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Locations"}),e()&&s.jsx(be,{variant:"primary",onClick:()=>{N({name:"",street:"",postal_code:"",city:"",region:"",country:""}),r(!0)},children:"Add Location"})]}),s.jsx(Re,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Name"}),s.jsx("th",{className:"table-header-cell",children:"Street"}),s.jsx("th",{className:"table-header-cell",children:"Postal Code"}),s.jsx("th",{className:"table-header-cell",children:"City"}),s.jsx("th",{className:"table-header-cell",children:"Region"}),s.jsx("th",{className:"table-header-cell",children:"Country"}),e()&&s.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:((V=S==null?void 0:S.locations)==null?void 0:V.length)>0?S.locations.map(W=>s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell",children:W.name}),s.jsx("td",{className:"table-cell",children:W.street||"-"}),s.jsx("td",{className:"table-cell",children:W.postal_code||"-"}),s.jsx("td",{className:"table-cell",children:W.city||"-"}),s.jsx("td",{className:"table-cell",children:W.region||"-"}),s.jsx("td",{className:"table-cell",children:W.country||"-"}),e()&&s.jsx("td",{className:"table-cell",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(be,{variant:"outline",size:"sm",onClick:()=>P(W),children:"Edit"}),s.jsx(be,{variant:"danger",size:"sm",onClick:()=>O(W),children:"Delete"})]})})]},W.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:e()?7:6,className:"table-cell text-center py-4 text-slate-500",children:"No locations found"})})})]})})}),n&&s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Add Location"}),s.jsx("button",{className:"modal-close",onClick:()=>r(!1),children:"×"})]}),s.jsxs("form",{onSubmit:M,children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(lt,{id:"name",name:"name",label:"Location Name",value:w.name,onChange:A,placeholder:"Enter location name",required:!0}),s.jsx(lt,{id:"street",name:"street",label:"Street",value:w.street,onChange:A,placeholder:"Enter street (optional)"}),s.jsx(lt,{id:"postal_code",name:"postal_code",label:"Postal Code",value:w.postal_code,onChange:A,placeholder:"Enter postal code (optional)"}),s.jsx(lt,{id:"city",name:"city",label:"City",value:w.city,onChange:A,placeholder:"Enter city (optional)"}),s.jsx(lt,{id:"region",name:"region",label:"Region/State",value:w.region,onChange:A,placeholder:"Enter region or state (optional)"}),s.jsx(lt,{id:"country",name:"country",label:"Country",value:w.country,onChange:A,placeholder:"Enter country (optional)"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:()=>r(!1),children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:R.isLoading,children:R.isLoading?"Adding...":"Add Location"})]})]})]})}),a&&v&&s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Edit Location"}),s.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:"×"})]}),s.jsxs("form",{onSubmit:B,children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(lt,{id:"edit-name",name:"name",label:"Location Name",value:w.name,onChange:A,placeholder:"Enter location name",required:!0}),s.jsx(lt,{id:"edit-street",name:"street",label:"Street",value:w.street,onChange:A,placeholder:"Enter street (optional)"}),s.jsx(lt,{id:"edit-postal_code",name:"postal_code",label:"Postal Code",value:w.postal_code,onChange:A,placeholder:"Enter postal code (optional)"}),s.jsx(lt,{id:"edit-city",name:"city",label:"City",value:w.city,onChange:A,placeholder:"Enter city (optional)"}),s.jsx(lt,{id:"edit-region",name:"region",label:"Region/State",value:w.region,onChange:A,placeholder:"Enter region or state (optional)"}),s.jsx(lt,{id:"edit-country",name:"country",label:"Country",value:w.country,onChange:A,placeholder:"Enter country (optional)"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:T.isLoading,children:T.isLoading?"Saving...":"Save Changes"})]})]})]})}),d&&v&&s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Delete Location"}),s.jsx("button",{className:"modal-close",onClick:()=>m(!1),children:"×"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("p",{children:['Are you sure you want to delete the location "',v.name,'"? This action cannot be undone.']}),s.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Note: You cannot delete a location that is currently assigned to equipment."})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),s.jsx(be,{type:"button",variant:"danger",onClick:G,disabled:I.isLoading,children:I.isLoading?"Deleting...":"Delete Location"})]})]})})]})},Ni="https://tonlager.kinsta.app",hB=async()=>{try{console.log("[DATABASE SERVICE] Testing connection to:",`${Ni}/api/database/test`);const e=await fetch(`${Ni}/api/database/test`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("[DATABASE SERVICE] Test response status:",e.status),!e.ok){const n=await e.text();throw console.error("[DATABASE SERVICE] Test error response:",n),new Error(`HTTP error! status: ${e.status} - ${n}`)}const t=await e.json();return console.log("[DATABASE SERVICE] Test data:",t),t}catch(e){throw console.error("Error testing database connection:",e),e}},pB=async()=>{try{console.log("[DATABASE SERVICE] Fetching tables from:",`${Ni}/api/database/tables`),console.log("[DATABASE SERVICE] Token:",localStorage.getItem("token")?"Present":"Missing");const e=await fetch(`${Ni}/api/database/tables`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("[DATABASE SERVICE] Response status:",e.status),!e.ok){const n=await e.text();throw console.error("[DATABASE SERVICE] Error response:",n),new Error(`HTTP error! status: ${e.status} - ${n}`)}const t=await e.json();return console.log("[DATABASE SERVICE] Tables data:",t),t}catch(e){throw console.error("Error fetching database tables:",e),e}},mB=async e=>{try{const t=await fetch(`${Ni}/api/database/tables/${e}/structure`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error("Error fetching table structure:",t),t}},xB=async(e,t=1,n=50)=>{try{const r=await fetch(`${Ni}/api/database/tables/${e}/data?page=${t}&limit=${n}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("Error fetching table data:",r),r}},gB=async e=>{try{const t=await fetch(`${Ni}/api/database/query`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({query:e})});if(!t.ok){const n=await t.json();throw new Error(n.message||`HTTP error! status: ${t.status}`)}return await t.json()}catch(t){throw console.error("Error executing query:",t),t}},vB=async(e,t,n)=>{try{const r=await fetch(`${Ni}/api/database/tables/${e}/rows/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("Error updating table row:",r),r}},yB=async()=>{try{const e=await fetch(`${Ni}/api/database/info`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching database info:",e),e}},wB=({onClose:e})=>{var Ae,me,de,fe,Be,Ye,Je,Te,$e,nt,De;const[t,n]=L.useState("tables"),[r,a]=L.useState(null),[o,d]=L.useState(1),[m,v]=L.useState(""),[g,w]=L.useState(null),[N,S]=L.useState(null),[j,k]=L.useState({}),R=cn(),{data:T}=ct({queryKey:["database-info"],queryFn:yB}),{data:I,isLoading:A,error:M}=ct({queryKey:["database-tables"],queryFn:pB,retry:1,onError:Oe=>{console.error("[DATABASE MANAGER] Tables query error:",Oe),st.error(`Failed to load tables: ${Oe.message}`)}}),{data:B}=ct({queryKey:["table-structure",r],queryFn:()=>mB(r),enabled:!!r}),{data:G,isLoading:P}=ct({queryKey:["table-data",r,o],queryFn:()=>xB(r,o,50),enabled:!!r}),O=Tt({mutationFn:gB,onSuccess:Oe=>{w(Oe),st.success("Query executed successfully")},onError:Oe=>{st.error(`Query failed: ${Oe.message}`)}}),V=Tt({mutationFn:({tableName:Oe,id:at,data:Ht})=>vB(Oe,at,Ht),onSuccess:()=>{st.success("Row updated successfully"),S(null),k({}),R.invalidateQueries(["table-data",r])},onError:Oe=>{st.error(`Update failed: ${Oe.message}`)}}),W=()=>{if(!m.trim()){st.error("Please enter a SQL query");return}O.mutate(m)},ee=Oe=>{S(Oe.id),k({...Oe})},ce=()=>{V.mutate({tableName:r,id:N,data:j})},ne=()=>{S(null),k({})},te=async()=>{try{const Oe=await hB();st.success(`Database connection successful! Database: ${Oe.database}`),console.log("[DATABASE MANAGER] Connection test result:",Oe)}catch(Oe){st.error(`Database connection failed: ${Oe.message}`),console.error("[DATABASE MANAGER] Connection test failed:",Oe)}},Ne=Oe=>Oe===null?"NULL":typeof Oe=="boolean"?Oe?"TRUE":"FALSE":typeof Oe=="object"?JSON.stringify(Oe):String(Oe),ae=[{id:"tables",label:"Tables",icon:"📊"},{id:"query",label:"Query",icon:"🔍"},{id:"info",label:"Database Info",icon:"ℹ️"}];return s.jsxs("div",{className:"fixed inset-0 bg-slate-50 z-50 flex flex-col",children:[s.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Database Manager"}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Connected to: ",s.jsx("span",{className:"font-mono text-primary-600",children:"ton-lager1-cv8k6-mysql"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Connected"})]}),s.jsx(be,{size:"sm",variant:"outline",onClick:te,children:"Test Connection"}),s.jsx(be,{size:"sm",variant:"outline",onClick:e||(()=>window.history.back()),children:"← Back to Settings"})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("div",{className:"px-6 py-6",children:[s.jsx("div",{className:"border-b border-slate-200 mb-6",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:ae.map(Oe=>s.jsxs("button",{onClick:()=>n(Oe.id),className:`py-3 px-4 border-b-2 font-medium text-base flex items-center space-x-3 transition-colors ${t===Oe.id?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 hover:bg-slate-50"}`,children:[s.jsx("span",{className:"text-lg",children:Oe.icon}),s.jsx("span",{children:Oe.label})]},Oe.id))})}),t==="tables"&&s.jsxs("div",{className:"flex gap-6 min-h-0",children:[s.jsx("div",{className:"w-80 flex-shrink-0",children:s.jsxs(Re,{className:"h-fit max-h-screen overflow-hidden flex flex-col",children:[s.jsx(Re.Header,{className:"flex-shrink-0",children:s.jsx("h3",{className:"text-lg font-semibold",children:"Database Tables"})}),s.jsx(Re.Body,{className:"p-0 flex-1 overflow-auto",children:A?s.jsx("div",{className:"p-4 text-center text-slate-500",children:"Loading tables..."}):M?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"text-red-600 mb-2",children:"❌ Error loading tables"}),s.jsx("div",{className:"text-sm text-slate-600",children:M.message}),s.jsx(be,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>R.invalidateQueries(["database-tables"]),children:"Retry"})]}):(Ae=I==null?void 0:I.tables)!=null&&Ae.length?s.jsx("div",{className:"divide-y divide-slate-100",children:I.tables.map(Oe=>s.jsxs("button",{onClick:()=>{a(Oe.TABLE_NAME),d(1)},className:`w-full text-left p-4 hover:bg-slate-50 transition-colors ${r===Oe.TABLE_NAME?"bg-primary-50 border-r-2 border-primary-500":""}`,children:[s.jsx("div",{className:"font-medium text-slate-800",children:Oe.TABLE_NAME}),s.jsxs("div",{className:"text-sm text-slate-500",children:[Oe.TABLE_ROWS||0," rows"]})]},Oe.TABLE_NAME))}):s.jsx("div",{className:"p-4 text-center text-slate-500",children:"No tables found in database"})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 min-w-0 overflow-auto",children:[r&&s.jsxs(Re,{className:"flex-shrink-0",children:[s.jsx(Re.Header,{children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Table Structure: ",r]})}),s.jsx(Re.Body,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Column"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Type"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Null"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Key"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:(me=B==null?void 0:B.columns)==null?void 0:me.map(Oe=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-2 text-sm font-medium text-slate-800",children:Oe.COLUMN_NAME}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:Oe.DATA_TYPE}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:Oe.IS_NULLABLE}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:Oe.COLUMN_KEY})]},Oe.COLUMN_NAME))})]})})})]}),r&&s.jsxs(Re,{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(Re.Header,{className:"flex-shrink-0",children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Table Data: ",r]})}),s.jsx(Re.Body,{className:"p-0 flex-1 flex flex-col min-h-0",children:P?s.jsx("div",{className:"p-4 text-center text-slate-500",children:"Loading data..."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0",children:s.jsxs("tr",{children:[((de=G==null?void 0:G.data)==null?void 0:de[0])&&Object.keys(G.data[0]).map(Oe=>s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:Oe},Oe)),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:(fe=G==null?void 0:G.data)==null?void 0:fe.map(Oe=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[Object.entries(Oe).map(([at,Ht])=>s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:N===Oe.id?s.jsx(lt,{value:j[at]||"",onChange:Vt=>k({...j,[at]:Vt.target.value}),className:"text-xs"}):s.jsx("span",{className:"font-mono text-xs",children:Ne(Ht)})},at)),s.jsx("td",{className:"px-4 py-2 text-sm",children:N===Oe.id?s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(be,{size:"sm",onClick:ce,children:"Save"}),s.jsx(be,{size:"sm",variant:"outline",onClick:ne,children:"Cancel"})]}):s.jsx(be,{size:"sm",variant:"outline",onClick:()=>ee(Oe),children:"Edit"})})]},Oe.id))})]})}),(G==null?void 0:G.pagination)&&s.jsxs("div",{className:"p-4 border-t border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",G.pagination.page," of ",G.pagination.totalPages,"(",G.pagination.total," total rows)"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(be,{size:"sm",variant:"outline",onClick:()=>d(Math.max(1,o-1)),disabled:o===1,children:"Previous"}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>d(o+1),disabled:o>=G.pagination.totalPages,children:"Next"})]})]})]})})]})]})]}),t==="query"&&s.jsxs("div",{className:"flex flex-col gap-6 min-h-0",children:[s.jsxs(Re,{className:"flex-shrink-0",children:[s.jsxs(Re.Header,{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"SQL Query Editor"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Execute SELECT queries to view data. Dangerous operations are restricted."})]}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SQL Query"}),s.jsx("textarea",{value:m,onChange:Oe=>v(Oe.target.value),placeholder:"SELECT * FROM equipment WHERE status = 'available';",className:"w-full h-48 p-4 border border-slate-300 rounded-md font-mono text-base focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-y"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-sm text-slate-500",children:"💡 Tip: Only SELECT queries are allowed for security"}),s.jsx(be,{onClick:W,disabled:O.isPending,children:O.isPending?"Executing...":"Execute Query"})]})]})})]}),g&&s.jsxs(Re,{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs(Re.Header,{className:"flex-shrink-0",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Query Results"}),s.jsxs("p",{className:"text-sm text-slate-600",children:[(Be=g.metadata)==null?void 0:Be.rowCount," rows returned"]})]}),s.jsx(Re.Body,{className:"p-0 flex-1 flex flex-col min-h-0",children:s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0",children:s.jsx("tr",{children:((Ye=g.results)==null?void 0:Ye[0])&&Object.keys(g.results[0]).map(Oe=>s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:Oe},Oe))})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:(Je=g.results)==null?void 0:Je.map((Oe,at)=>s.jsx("tr",{className:"hover:bg-slate-50",children:Object.entries(Oe).map(([Ht,Vt])=>s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:s.jsx("span",{className:"font-mono text-xs",children:Ne(Vt)})},Ht))},at))})]})})})]})]}),t==="info"&&s.jsxs(Re,{className:"max-w-4xl",children:[s.jsx(Re.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Database Information"})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Connection Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Host:"}),s.jsx("span",{className:"font-mono",children:"ton-lager1-cv8k6-mysql.ton-lager1-cv8k6.svc.cluster.local"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Port:"}),s.jsx("span",{className:"font-mono",children:"3306"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Database:"}),s.jsx("span",{className:"font-mono",children:((Te=T==null?void 0:T.database)==null?void 0:Te.database_name)||"substantial-gray-unicorn"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"User:"}),s.jsx("span",{className:"font-mono",children:"canid"})]})]})]}),T&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Server Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"MySQL Version:"}),s.jsx("span",{className:"font-mono",children:($e=T.server)==null?void 0:$e.version})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Character Set:"}),s.jsx("span",{className:"font-mono",children:(nt=T.database)==null?void 0:nt.charset})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Collation:"}),s.jsx("span",{className:"font-mono",children:(De=T.database)==null?void 0:De.collation})]})]})]})]})})]})]})})]})},bB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),NB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),o3=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),l3=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),s.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),s.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]}),CB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),EB=()=>{const{user:e}=lr(),[t,n]=L.useState("profile"),[r,a]=L.useState(""),[o,d]=L.useState(""),[m,v]=L.useState(""),[g,w]=L.useState(""),[N,S]=L.useState(""),[j,k]=L.useState(!1),R=[{id:"profile",label:"Profile",icon:s.jsx(bB,{})},{id:"security",label:"Security",icon:s.jsx(NB,{})}];(e==null?void 0:e.role)==="admin"&&(R.push({id:"equipmentTypes",label:"Equipment Types",icon:s.jsx(o3,{})}),R.push({id:"categories",label:"Categories",icon:s.jsx(o3,{})}),R.push({id:"locations",label:"Locations",icon:s.jsx(CB,{})}),R.push({id:"database",label:"Database",icon:s.jsx(l3,{})}));const T=I=>{if(I.preventDefault(),w(""),S(""),!r){w("Current password is required");return}if(!o){w("New password is required");return}if(o!==m){w("New passwords do not match");return}if(o.length<8){w("New password must be at least 8 characters");return}S("Password changed successfully"),a(""),d(""),v("")};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-8",children:"User Settings"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"w-full md:w-64",children:s.jsx(Re,{children:s.jsx(Re.Body,{className:"p-0",children:s.jsx("nav",{children:s.jsx("ul",{className:"divide-y divide-slate-100",children:R.map(I=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>n(I.id),className:`w-full text-left px-4 py-3 flex items-center transition-colors ${t===I.id?"bg-primary-50 text-primary-700 font-medium":"text-slate-700 hover:bg-slate-50"}`,"aria-current":t===I.id?"page":void 0,children:[s.jsx("span",{className:"mr-3 text-slate-500",children:I.icon}),I.label]})},I.id))})})})})}),s.jsx("div",{className:"flex-1",children:s.jsx(Re,{children:s.jsxs(Re.Body,{children:[t==="profile"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Profile Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),s.jsx("div",{className:"bg-slate-50 p-3 rounded-md text-slate-800 border border-slate-200",children:e==null?void 0:e.username})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),s.jsx("div",{className:"bg-slate-50 p-3 rounded-md text-slate-800 border border-slate-200 capitalize",children:e==null?void 0:e.role})]})]})]}),t==="security"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Security Settings"}),g&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:g}),N&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:N}),s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s.jsx(lt,{type:"password",id:"current-password",label:"Current Password",value:r,onChange:I=>a(I.target.value),placeholder:"Enter your current password"}),s.jsx(lt,{type:"password",id:"new-password",label:"New Password",value:o,onChange:I=>d(I.target.value),placeholder:"Enter your new password"}),s.jsx(lt,{type:"password",id:"confirm-password",label:"Confirm New Password",value:m,onChange:I=>v(I.target.value),placeholder:"Confirm your new password"}),s.jsx("div",{children:s.jsx(be,{type:"submit",variant:"primary",children:"Change Password"})})]})]}),t==="equipmentTypes"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Manage Equipment Types"}),s.jsx(sB,{})]}),t==="categories"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Manage Equipment Categories"}),s.jsx(lB,{})]}),t==="locations"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Manage Locations"}),s.jsx(fB,{})]}),t==="database"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Database Management"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Database Manager"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Access the full-featured database management interface to view tables, execute queries, and manage your MySQL database directly."}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Connected to ton-lager1-cv8k6-mysql"})]}),s.jsx("span",{children:"•"}),s.jsx("span",{children:"MySQL 9.0"}),s.jsx("span",{children:"•"}),s.jsx("span",{children:"Database: substantial-gray-unicorn"})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs(be,{onClick:()=>k(!0),variant:"primary",className:"flex items-center space-x-2",children:[s.jsx(l3,{}),s.jsx("span",{children:"Open Database Manager"})]}),s.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Opens in full-screen mode"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"📊 Browse Tables"}),s.jsx("p",{className:"text-sm text-slate-600",children:"View all database tables, their structure, and data with inline editing capabilities."})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"🔍 Execute Queries"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Run SELECT queries to analyze data and generate custom reports."})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"ℹ️ Database Info"}),s.jsx("p",{className:"text-sm text-slate-600",children:"View connection details, server information, and database statistics."})]})]})]})]})]})})})]}),j&&s.jsx(wB,{onClose:()=>k(!1)})]})},SB=({isOpen:e,onClose:t,equipmentId:n})=>{const r=cn(),[a,o]=L.useState(""),[d,m]=L.useState(null),[v,g]=L.useState(!1),[w,N]=L.useState(null);L.useEffect(()=>{e&&n&&(g(!0),op(n).then(k=>{m(k),o(`${k.serial_number}-COPY`),g(!1)}).catch(k=>{console.error("Error fetching equipment details:",k),N("Failed to load equipment details"),g(!1)}))},[e,n]);const S=Tt({mutationFn:async()=>{if(!d)return null;console.log("Original equipment data:",d);const k={type_id:d.type_id||1,brand:d.brand,model:d.model,serial_number:a,status:d.status||"available",location:d.location||"",description:d.description||""};return console.log("Duplicate data being sent:",k),a2(k)},onSuccess:k=>{console.log("Successfully duplicated equipment:",k),r.invalidateQueries(["equipment"]),t()},onError:k=>{var R,T;console.error("Error duplicating equipment:",k),(T=(R=k.response)==null?void 0:R.data)!=null&&T.message?N(k.response.data.message):N("Failed to duplicate equipment. Please check all required fields.")}}),j=k=>{if(k.preventDefault(),!a.trim()){N("Serial number is required");return}S.mutate()};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Duplicate Equipment"}),v?s.jsx("div",{className:"text-center py-4",children:"Loading..."}):w?s.jsx("div",{className:"text-red-600 mb-4",children:w}):s.jsxs("form",{onSubmit:j,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-gray-600 mb-2",children:["You are about to duplicate: ",s.jsxs("span",{className:"font-medium",children:[d==null?void 0:d.brand," ",d==null?void 0:d.model]})]}),s.jsx("label",{htmlFor:"serialNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),s.jsx("input",{type:"text",id:"serialNumber",value:a,onChange:k=>o(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,autoFocus:!0}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please provide a unique serial number for the duplicated equipment."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-slate-600
                  hover:bg-slate-50 border border-slate-300 hover:border-slate-400
                  hover:shadow-sm transition-all`,children:"Cancel"}),s.jsx("button",{type:"submit",className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-primary-600
                  hover:bg-primary-50 border border-primary-500 hover:border-primary-600
                  hover:shadow-sm transition-all focus:outline-none focus:ring-1 focus:ring-primary-500`,disabled:S.isLoading,children:S.isLoading?"Duplicating...":"Duplicate"})]})]})]})}):null},_B=({isOpen:e,onClose:t,equipmentId:n,selectedItems:r=[]})=>{var W,ee,ce;const a=r.length>0?r:n?[n]:[],o=cn(),[d,m]=L.useState(2),[v,g]=L.useState(""),[w,N]=L.useState([]),[S,j]=L.useState([]),[k,R]=L.useState(!1),[T,I]=L.useState(null),[A,M]=L.useState(0),[B,G]=L.useState(!1);L.useEffect(()=>{if(e&&a.length>0){R(!0),j([]);const ne=a.map(te=>op(te));Promise.all(ne).then(te=>{if(j(te),te.length===1){const Ne=`${te[0].serial_number}-{n}`;g(Ne)}else g("BATCH-{n}");R(!1)}).catch(te=>{console.error("Error fetching equipment details:",te),I("Failed to load equipment details"),R(!1)})}},[e,a]),L.useEffect(()=>{if(v&&d>0){const ne=[];for(let te=1;te<=Math.min(d,5);te++)ne.push(P(v,te));d>5&&(ne.push("..."),ne.push(P(v,d))),N(ne)}},[v,d]);const P=(ne,te)=>ne.replace("{n}",te),O=Tt({mutationFn:async({equipmentData:ne,serialNumber:te})=>{if(!ne)return null;const Ne={type:ne.type,type_id:ne.type_id||1,category:ne.category||"",...ne.category_id?{category_id:ne.category_id}:{},brand:ne.brand,model:ne.model,serial_number:te,status:ne.status||"available",location:ne.location||"",...ne.location_id?{location_id:ne.location_id}:{},description:ne.description||"",...ne.reference_image_id?{reference_image_id:ne.reference_image_id}:{}};return a2(Ne)}}),V=async()=>{var ne,te;if(S.length!==0){G(!0),M(0);try{const Ne=S.length*d;let ae=0;for(const Ae of S)for(let me=1;me<=d;me++){let de;S.length===1?de=P(v,me):de=P(v.replace("{n}",`${Ae.id}-{n}`),me),console.log(`Creating duplicate ${me} for equipment ID ${Ae.id} with serial number ${de}`),console.log("Original equipment data:",JSON.stringify(Ae,null,2));try{await O.mutateAsync({equipmentData:Ae,serialNumber:de}),console.log(`Successfully created duplicate ${me} for equipment ID ${Ae.id}`)}catch(fe){throw console.error(`Error creating duplicate ${me} for equipment ID ${Ae.id}:`,fe),fe}ae++,M(Math.floor(ae/Ne*100))}o.invalidateQueries(["equipment"]),t()}catch(Ne){console.error("Error in batch duplication:",Ne);let ae="Failed to duplicate equipment";(te=(ne=Ne.response)==null?void 0:ne.data)!=null&&te.message?ae=Ne.response.data.message:Ne.message&&(ae=Ne.message),I(ae)}finally{G(!1)}}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Batch Duplicate Equipment"}),k?s.jsx("div",{className:"text-center py-4",children:"Loading..."}):T?s.jsx("div",{className:"text-red-600 mb-4",children:T}):s.jsxs("div",{children:[s.jsxs("div",{className:"text-gray-600 mb-4",children:[s.jsxs("p",{children:["You are about to duplicate ",S.length," item",S.length!==1?"s":"",":"]}),S.length===1?s.jsxs("p",{className:"font-medium mt-1",children:[(W=S[0])==null?void 0:W.brand," ",(ee=S[0])==null?void 0:ee.model," (SN: ",(ce=S[0])==null?void 0:ce.serial_number,")"]}):s.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-md p-2",children:s.jsx("ul",{className:"text-sm",children:S.map((ne,te)=>s.jsxs("li",{className:"mb-1",children:[ne.brand," ",ne.model," (SN: ",ne.serial_number,")"]},te))})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"count",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Copies"}),s.jsx("input",{type:"number",id:"count",min:"1",max:"50",value:d,onChange:ne=>m(Math.min(50,Math.max(1,parseInt(ne.target.value)||1))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"serialNumberPattern",className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number Pattern"}),s.jsx("input",{type:"text",id:"serialNumberPattern",value:v,onChange:ne=>g(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Use {n} for the copy number"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Use ","{n}"," as a placeholder for the copy number."]})]}),w.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number Preview"}),s.jsx("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200",children:s.jsx("ul",{className:"text-sm text-gray-600",children:w.map((ne,te)=>s.jsx("li",{children:ne},te))})})]}),B&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${A}%`}})}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1 text-center",children:[A,"% Complete"]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(be,{variant:"outline",onClick:t,disabled:B,children:"Cancel"}),s.jsx(be,{variant:"primary",onClick:V,disabled:B||!v.includes("{n}"),children:B?"Processing...":"Create Copies"})]})]})]})}):null},GE=({isOpen:e,onClose:t,equipmentId:n,selectedItems:r=[]})=>{const a=r.length>0?r:n?[n]:[],[o,d]=L.useState("available");L.useState(1);const[m,v]=L.useState(!1),[g,w]=L.useState(""),[N,S]=L.useState(""),j=cn(),k=["available","in-use","maintenance","unavailable","broken"],R=Tt({mutationFn:async I=>{const A=I.equipmentIds.map(M=>oM(M,I.status));return Promise.all(A)},onSuccess:()=>{j.invalidateQueries(["equipment"]),S(`Status successfully updated to ${o} for ${a.length} item${a.length!==1?"s":""}`),v(!1),setTimeout(()=>{t(),S("")},2e3)},onError:I=>{var A,M;console.error("Error updating status:",I),w(((M=(A=I.response)==null?void 0:A.data)==null?void 0:M.message)||"Failed to update status"),v(!1)}}),T=I=>{if(I.preventDefault(),a.length===0){w("No equipment items selected");return}v(!0),w(""),S(""),R.mutate({equipmentIds:a,status:o})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Status"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the status of ",a.length," item",a.length!==1?"s":"","."]})}),g&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:g}),N&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:N}),s.jsxs("form",{onSubmit:T,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Status"}),s.jsx("select",{id:"status",value:o,onChange:I=>d(I.target.value),className:"w-full p-2 border border-slate-300 rounded-md",required:!0,children:k.map(I=>s.jsx("option",{value:I,children:I.charAt(0).toUpperCase()+I.slice(1)},I))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:t,className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-slate-600
                hover:bg-slate-50 border border-slate-300 hover:border-slate-400
                hover:shadow-sm transition-all`,disabled:m,children:"Cancel"}),s.jsx("button",{type:"submit",className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-primary-600
                hover:bg-primary-50 border border-primary-500 hover:border-primary-600
                hover:shadow-sm transition-all`,disabled:m,children:m?"Updating...":"Update Status"})]})]})]})}):null};GE.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,equipmentId:ie.oneOfType([ie.string,ie.number]),selectedItems:ie.array};const QE=({isOpen:e,onClose:t,equipmentId:n,selectedItems:r=[]})=>{var P;const a=r.length>0?r:n?[n]:[],[o,d]=L.useState(""),[m,v]=L.useState(""),[g,w]=L.useState(!1),[N,S]=L.useState(!1),[j,k]=L.useState(""),[R,T]=L.useState(""),I=cn(),{data:A}=ct({queryKey:["locations"],queryFn:wo,staleTime:3e5}),M=Tt({mutationFn:async O=>{const V=O.equipmentIds.map(W=>lM(W,O.locationData));return Promise.all(V)},onSuccess:()=>{var V;I.invalidateQueries(["equipment"]);const O=g?m:((V=A==null?void 0:A.locations.find(W=>W.id.toString()===o))==null?void 0:V.name)||"selected location";T(`Location successfully updated to ${O} for ${a.length} item${a.length!==1?"s":""}`),S(!1),setTimeout(()=>{t(),T("")},2e3)},onError:O=>{var V,W;console.error("Error updating location:",O),k(((W=(V=O.response)==null?void 0:V.data)==null?void 0:W.message)||"Failed to update location"),S(!1)}}),B=O=>{if(O.preventDefault(),a.length===0){k("No equipment items selected");return}S(!0),k(""),T("");const V=g?{location:m}:{location_id:o};M.mutate({equipmentIds:a,locationData:V})},G=()=>{w(!g),d(""),v("")};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Location"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the location of ",a.length," item",a.length!==1?"s":"","."]})}),j&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:j}),R&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:R}),s.jsxs("form",{onSubmit:B,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"flex items-center mb-3",children:s.jsx("button",{type:"button",onClick:G,className:"text-sm text-primary-600 hover:text-primary-800",children:g?"Select from existing locations":"Enter custom location"})}),g?s.jsxs("div",{children:[s.jsx("label",{htmlFor:"customLocation",className:"block text-sm font-medium text-slate-700 mb-1",children:"Custom Location"}),s.jsx("input",{type:"text",id:"customLocation",value:m,onChange:O=>v(O.target.value),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:"Enter location name",required:!0})]}):s.jsxs("div",{children:[s.jsx("label",{htmlFor:"locationId",className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),s.jsxs("select",{id:"locationId",value:o,onChange:O=>d(O.target.value),className:"w-full p-2 border border-slate-300 rounded-md",required:!0,children:[s.jsx("option",{value:"",children:"Select a location"}),(P=A==null?void 0:A.locations)==null?void 0:P.map(O=>s.jsx("option",{value:O.id.toString(),children:O.name},O.id))]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:t,className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-slate-600
                hover:bg-slate-50 border border-slate-300 hover:border-slate-400
                hover:shadow-sm transition-all`,disabled:N,children:"Cancel"}),s.jsx("button",{type:"submit",className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-primary-600
                hover:bg-primary-50 border border-primary-500 hover:border-primary-600
                hover:shadow-sm transition-all`,disabled:N||!o&&!m,children:N?"Updating...":"Update Location"})]})]})]})}):null};QE.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,equipmentId:ie.oneOfType([ie.string,ie.number]),selectedItems:ie.array};const XE=({isOpen:e,onClose:t,selectedItems:n=[]})=>{const[r,a]=L.useState(""),[o,d]=L.useState(!1),[m,v]=L.useState(""),[g,w]=L.useState(""),N=cn(),{data:S,isLoading:j}=ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5});L.useEffect(()=>{S!=null&&S.types&&S.types.length>0&&!r&&a(S.types[0].id.toString())},[S,r]);const k=Tt({mutationFn:async T=>{const I=T.equipmentIds.map(A=>cM(A,T.typeId));return Promise.all(I)},onSuccess:()=>{var I;N.invalidateQueries(["equipment"]);const T=((I=S==null?void 0:S.types.find(A=>A.id.toString()===r))==null?void 0:I.name)||"selected type";w(`Type successfully updated to ${T} for ${n.length} item${n.length!==1?"s":""}`),d(!1),setTimeout(()=>{t(),w("")},2e3)},onError:T=>{var I,A;console.error("Error updating type:",T),v(((A=(I=T.response)==null?void 0:I.data)==null?void 0:A.message)||"Failed to update type"),d(!1)}}),R=T=>{if(T.preventDefault(),n.length===0){v("No equipment items selected");return}if(!r){v("Please select a type");return}d(!0),v(""),w(""),k.mutate({equipmentIds:n,typeId:r})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Type"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the type of ",n.length," item",n.length!==1?"s":"","."]})}),m&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:m}),g&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:g}),s.jsxs("form",{onSubmit:R,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Type"}),s.jsxs("select",{id:"type",value:r,onChange:T=>a(T.target.value),className:"w-full p-2 border border-slate-300 rounded-md",required:!0,children:[s.jsx("option",{value:"",children:"Select a type"}),S!=null&&S.types&&S.types.length>0?S.types.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(be,{variant:"outline",onClick:t,disabled:o,children:"Cancel"}),s.jsx(be,{variant:"primary",type:"submit",disabled:o||!r,children:o?"Updating...":"Update Type"})]})]})]})}):null};XE.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,selectedItems:ie.array};const KE=({isOpen:e,onClose:t,selectedItems:n=[]})=>{const[r,a]=L.useState(""),[o,d]=L.useState(!1),[m,v]=L.useState(""),[g,w]=L.useState(""),N=cn(),{data:S,isLoading:j}=ct({queryKey:["categories"],queryFn:vl,staleTime:3e5});L.useEffect(()=>{S!=null&&S.categories&&S.categories.length>0&&!r&&a(S.categories[0].id.toString())},[S,r]);const k=Tt({mutationFn:async T=>{const I=T.equipmentIds.map(A=>uM(A,T.categoryId));return Promise.all(I)},onSuccess:()=>{var I;N.invalidateQueries(["equipment"]);const T=((I=S==null?void 0:S.categories.find(A=>A.id.toString()===r))==null?void 0:I.name)||"selected category";w(`Category successfully updated to ${T} for ${n.length} item${n.length!==1?"s":""}`),d(!1),setTimeout(()=>{t(),w("")},2e3)},onError:T=>{var I,A;console.error("Error updating category:",T),v(((A=(I=T.response)==null?void 0:I.data)==null?void 0:A.message)||"Failed to update category"),d(!1)}}),R=T=>{if(T.preventDefault(),n.length===0){v("No equipment items selected");return}d(!0),v(""),w(""),k.mutate({equipmentIds:n,categoryId:r||null})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Category"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the category of ",n.length," item",n.length!==1?"s":"","."]})}),m&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:m}),g&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:g}),s.jsxs("form",{onSubmit:R,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Category"}),s.jsxs("select",{id:"category",value:r,onChange:T=>a(T.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[s.jsx("option",{value:"",children:"None (Remove Category)"}),S!=null&&S.categories&&S.categories.length>0?S.categories.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading categories..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(be,{variant:"outline",onClick:t,disabled:o,children:"Cancel"}),s.jsx(be,{variant:"primary",type:"submit",disabled:o,children:o?"Updating...":"Update Category"})]})]})]})}):null};KE.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,selectedItems:ie.array};const ZE=({isOpen:e,onClose:t,selectedItems:n=[]})=>{const[r,a]=L.useState(""),[o,d]=L.useState(""),[m,v]=L.useState(!0),[g,w]=L.useState(!0),[N,S]=L.useState(!1),[j,k]=L.useState(""),[R,T]=L.useState(""),I=cn(),A=Tt({mutationFn:async B=>{const G=B.equipmentIds.map(P=>dM(P,B.updateData));return Promise.all(G)},onSuccess:()=>{I.invalidateQueries(["equipment"]);let B="Successfully updated ";m&&g?B+=`brand to "${r}" and model to "${o}"`:m?B+=`brand to "${r}"`:g&&(B+=`model to "${o}"`),T(`${B} for ${n.length} item${n.length!==1?"s":""}`),S(!1),setTimeout(()=>{t(),T("")},2e3)},onError:B=>{var G,P;console.error("Error updating brand/model:",B),k(((P=(G=B.response)==null?void 0:G.data)==null?void 0:P.message)||"Failed to update brand/model"),S(!1)}}),M=B=>{if(B.preventDefault(),n.length===0){k("No equipment items selected");return}if(!m&&!g){k("Please select at least one field to update");return}if(m&&!r||g&&!o){k("Please fill in all selected fields");return}S(!0),k(""),T("");const G={};m&&(G.brand=r),g&&(G.model=o),A.mutate({equipmentIds:n,updateData:G})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Brand & Model"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating ",n.length," item",n.length!==1?"s":"","."]})}),j&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:j}),R&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:R}),s.jsxs("form",{onSubmit:M,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"updateBrand",checked:m,onChange:B=>v(B.target.checked),className:"mr-2"}),s.jsx("label",{htmlFor:"updateBrand",className:"text-sm font-medium text-slate-700",children:"Update Brand"})]}),s.jsx("input",{type:"text",id:"brand",value:r,onChange:B=>a(B.target.value),disabled:!m,className:`w-full p-2 border border-slate-300 rounded-md ${m?"":"bg-slate-100"}`,placeholder:"Enter new brand"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"updateModel",checked:g,onChange:B=>w(B.target.checked),className:"mr-2"}),s.jsx("label",{htmlFor:"updateModel",className:"text-sm font-medium text-slate-700",children:"Update Model"})]}),s.jsx("input",{type:"text",id:"model",value:o,onChange:B=>d(B.target.value),disabled:!g,className:`w-full p-2 border border-slate-300 rounded-md ${g?"":"bg-slate-100"}`,placeholder:"Enter new model"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(be,{variant:"outline",onClick:t,disabled:N,children:"Cancel"}),s.jsx(be,{variant:"primary",type:"submit",disabled:N||!m&&!g||m&&!r||g&&!o,children:N?"Updating...":"Update"})]})]})]})}):null};ZE.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,selectedItems:ie.array};const A2=({onBatchDuplicate:e,onBatchStatusUpdate:t,onBatchLocationChange:n,equipmentId:r})=>{const[a,o]=L.useState(!1),d=L.useRef(null),m=Gr();L.useEffect(()=>{const k=R=>{d.current&&!d.current.contains(R.target)&&o(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const v=()=>{o(!a)},g=()=>{o(!1),m(`/equipment/${r}`)},w=()=>{o(!1),m(`/equipment/${r}/edit`)},N=()=>{o(!1),e(r)},S=()=>{o(!1),t&&t(r)},j=()=>{o(!1),n&&n(r)};return s.jsxs("div",{className:"relative",ref:d,children:[s.jsx("button",{onClick:v,className:"p-1 rounded-md hover:bg-slate-100 border border-slate-200",title:"Actions","aria-label":"Actions menu",children:s.jsx(XC,{className:"w-4 h-4 text-slate-600"})}),a&&s.jsx("div",{className:"dropdown-menu",children:s.jsxs("div",{className:"py-0.5",children:[s.jsxs("button",{onClick:g,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(tc,{className:"w-3.5 h-3.5 mr-1.5"}),"View Details"]}),s.jsxs("button",{onClick:w,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(La,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),s.jsxs("button",{onClick:N,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(l2,{className:"w-3.5 h-3.5 mr-1.5"}),"Duplicate"]}),s.jsxs("button",{onClick:S,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:"⟳"}),"Update Status"]}),s.jsxs("button",{onClick:j,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:"📍"}),"Change Location"]})]})})]})};A2.propTypes={onBatchDuplicate:ie.func.isRequired,onBatchStatusUpdate:ie.func,onBatchLocationChange:ie.func,equipmentId:ie.oneOfType([ie.string,ie.number]).isRequired};const JE=({selectedItems:e,onBatchDuplicate:t,onBatchStatusUpdate:n,onBatchLocationChange:r,onBatchTypeChange:a,onBatchCategoryChange:o,onBatchBrandModelChange:d,onClearSelection:m})=>{const[v,g]=L.useState(!1),w=L.useRef(null);ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5}),ct({queryKey:["locations"],queryFn:wo,staleTime:3e5}),ct({queryKey:["categories"],queryFn:vl,staleTime:3e5}),L.useEffect(()=>{const A=M=>{w.current&&!w.current.contains(M.target)&&g(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const N=()=>{g(!v)},S=()=>{g(!1),t()},j=()=>{g(!1),n()},k=()=>{g(!1),r()},R=()=>{g(!1),a()},T=()=>{g(!1),o()},I=()=>{g(!1),d()};return s.jsxs("div",{className:"relative",ref:w,children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-2 py-1 rounded-md border border-blue-100",children:[s.jsxs("span",{className:"text-xs font-medium text-blue-700",children:[e.length," item",e.length!==1?"s":""," selected"]}),s.jsx(be,{variant:"outline",size:"sm",onClick:m,className:"text-xs py-0.5 px-2 bg-white",children:"Clear"}),s.jsxs(be,{variant:"outline",size:"sm",onClick:N,className:"flex items-center text-xs py-0.5 px-2 bg-white",children:["Actions ",s.jsx(XC,{className:"w-3 h-3 ml-1"})]})]}),v&&s.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white rounded-md shadow-lg border border-slate-200 w-48",children:s.jsxs("div",{className:"py-0.5",children:[s.jsxs("button",{onClick:S,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(l2,{className:"w-3.5 h-3.5 mr-1.5"}),"Duplicate"]}),s.jsxs("button",{onClick:j,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:"⟳"}),"Update Status"]}),s.jsxs("button",{onClick:k,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:"📍"}),"Change Location"]}),s.jsxs("button",{onClick:R,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:"🏷️"}),"Change Type"]}),s.jsxs("button",{onClick:T,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:"📂"}),"Change Category"]}),s.jsxs("button",{onClick:I,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:"🔖"}),"Update Brand/Model"]})]})})]})};JE.propTypes={selectedItems:ie.array.isRequired,onBatchDuplicate:ie.func.isRequired,onBatchStatusUpdate:ie.func.isRequired,onBatchLocationChange:ie.func.isRequired,onBatchTypeChange:ie.func,onBatchCategoryChange:ie.func,onBatchBrandModelChange:ie.func,onClearSelection:ie.func.isRequired};const e5=({equipment:e,onDuplicate:t,onSelect:n,isSelected:r})=>{const a=Gr();lr();const[o,d]=L.useState(!1);let m=null;if(e.reference_image_id)m=ch(e.reference_image_id,!0);else if(e.files&&e.files.length>0){const w=e.files.find(N=>N.file_type==="image");w&&(m=ch(w.id,!0))}const v=w=>{switch(w){case"available":return"badge-success";case"in-use":return"badge-info";case"maintenance":return"badge-warning";case"unavailable":return"badge-secondary";case"broken":return"badge-danger";default:return"badge-secondary"}},g=w=>{w.target.type==="checkbox"||w.target.closest("button")||w.target.closest("a")||w.target.closest(".btn-icon")||a(`/equipment/${e.id}`)};return s.jsxs("div",{className:`bg-white rounded-lg shadow-soft overflow-hidden h-full ${r?"bg-blue-50 border-2 border-blue-300":""} cursor-pointer hover:shadow-md transition-shadow`,onClick:g,children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:r,onChange:()=>n&&n(e.id),className:"h-4 w-4 text-primary-600 border-gray-300 rounded"})}),s.jsx("div",{className:"relative h-40 bg-slate-100 rounded-t-lg overflow-hidden",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:m?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:m,alt:`${e.brand} ${e.model}`,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}):s.jsx("div",{className:"flex items-center justify-center h-full bg-slate-200",children:s.jsx("span",{className:"text-slate-400 text-lg",children:"No image"})})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-slate-800 capitalize",children:e.type}),e.category&&s.jsxs("p",{className:"text-xs text-slate-500",children:["Category: ",e.category]})]}),s.jsx("span",{className:`badge ${v(e.status)}`,children:e.status})]}),s.jsxs("h2",{className:"text-lg font-semibold mb-1",children:[e.brand," ",e.model]}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["SN: ",e.serial_number]}),e.location&&s.jsxs("p",{className:"text-sm text-slate-500 mb-2",children:["Location: ",e.location]}),s.jsxs("div",{className:"flex justify-between mt-auto pt-2 border-t border-slate-100",children:[s.jsx(qn,{to:`/equipment/${e.id}/edit`,className:"btn-icon text-slate-600 hover:text-slate-800 hover:bg-slate-50",title:"Edit equipment",children:s.jsx(La,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>t(e.id),className:"btn-icon text-green-600 hover:text-green-800 hover:bg-green-50",title:"Duplicate equipment",children:s.jsx(l2,{className:"w-5 h-5"})}),s.jsx(A2,{equipmentId:e.id,onBatchDuplicate:()=>{const w=new CustomEvent("batchDuplicate",{detail:{id:e.id}});document.dispatchEvent(w)},onBatchStatusUpdate:()=>{const w=new CustomEvent("batchStatusUpdate",{detail:{id:e.id}});document.dispatchEvent(w)},onBatchLocationChange:()=>{const w=new CustomEvent("batchLocationChange",{detail:{id:e.id}});document.dispatchEvent(w)}})]})]})]})};e5.propTypes={equipment:ie.object.isRequired,onDuplicate:ie.func.isRequired,onSelect:ie.func,isSelected:ie.bool};const zi=({field:e,label:t,currentSortField:n,currentSortOrder:r,onSort:a,className:o=""})=>{const d=n===e;return s.jsx("th",{className:`table-header-cell cursor-pointer select-none ${o}`,onClick:()=>a(e),children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:t}),s.jsx("div",{className:"flex flex-col h-4 justify-center",children:d?r==="asc"?s.jsx(db,{className:"w-3 h-3 text-primary-600"}):s.jsx(NM,{className:"w-3 h-3 text-primary-600"}):s.jsx("div",{className:"w-3 h-3 opacity-60",children:s.jsx(db,{className:"w-3 h-3 text-gray-500"})})})]})})};zi.propTypes={field:ie.string.isRequired,label:ie.string.isRequired,currentSortField:ie.string.isRequired,currentSortOrder:ie.string.isRequired,onSort:ie.func.isRequired,className:ie.string};function yl(e,t,n,r){function a(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(N){d(N)}}function v(w){try{g(r.throw(w))}catch(N){d(N)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,t||[])).next())})}const jB=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function jc(e,t,n){const r=AB(e),{webkitRelativePath:a}=e,o=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof r.path!="string"&&c3(r,"path",o),n!==void 0&&Object.defineProperty(r,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),c3(r,"relativePath",o),r}function AB(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const r=t.split(".").pop().toLowerCase(),a=jB.get(r);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function c3(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const kB=[".DS_Store","Thumbs.db"];function TB(e){return yl(this,void 0,void 0,function*(){return Sh(e)&&DB(e.dataTransfer)?OB(e.dataTransfer,e.type):IB(e)?RB(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?MB(e):[]})}function DB(e){return Sh(e)}function IB(e){return Sh(e)&&Sh(e.target)}function Sh(e){return typeof e=="object"&&e!==null}function RB(e){return Ux(e.target.files).map(t=>jc(t))}function MB(e){return yl(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>jc(n))})}function OB(e,t){return yl(this,void 0,void 0,function*(){if(e.items){const n=Ux(e.items).filter(a=>a.kind==="file");if(t!=="drop")return n;const r=yield Promise.all(n.map(LB));return u3(t5(r))}return u3(Ux(e.files).map(n=>jc(n)))})}function u3(e){return e.filter(t=>kB.indexOf(t.name)===-1)}function Ux(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function LB(e){if(typeof e.webkitGetAsEntry!="function")return d3(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?n5(t):d3(e,t)}function t5(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?t5(n):[n]],[])}function d3(e,t){return yl(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const o=yield e.getAsFileSystemHandle();if(o===null)throw new Error(`${e} is not a File`);if(o!==void 0){const d=yield o.getFile();return d.handle=o,jc(d)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return jc(r,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function PB(e){return yl(this,void 0,void 0,function*(){return e.isDirectory?n5(e):FB(e)})}function n5(e){const t=e.createReader();return new Promise((n,r)=>{const a=[];function o(){t.readEntries(d=>yl(this,void 0,void 0,function*(){if(d.length){const m=Promise.all(d.map(PB));a.push(m),o()}else try{const m=yield Promise.all(a);n(m)}catch(m){r(m)}}),d=>{r(d)})}o()})}function FB(e){return yl(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(r=>{const a=jc(r,e.fullPath);t(a)},r=>{n(r)})})})}var hm=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return n.some(function(d){var m=d.trim().toLowerCase();return m.charAt(0)==="."?r.toLowerCase().endsWith(m):m.endsWith("/*")?o===m.replace(/\/.*$/,""):a===m})}return!0};function f3(e){return qB(e)||UB(e)||s5(e)||BB()}function BB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qB(e){if(Array.isArray(e))return qx(e)}function h3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function p3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(n),!0).forEach(function(r){r5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vd(e,t){return HB(e)||WB(e,t)||s5(e,t)||zB()}function zB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s5(e,t){if(e){if(typeof e=="string")return qx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qx(e,t)}}function qx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WB(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,d,m;try{for(n=n.call(e);!(a=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));a=!0);}catch(v){o=!0,m=v}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw m}}return r}}function HB(e){if(Array.isArray(e))return e}var VB=typeof hm=="function"?hm:hm.default,YB="file-invalid-type",$B="file-too-large",GB="file-too-small",QB="too-many-files",XB=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:YB,message:"File type must be ".concat(r)}},m3=function(t){return{code:$B,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},x3=function(t){return{code:GB,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},KB={code:QB,message:"Too many files"};function a5(e,t){var n=e.type==="application/x-moz-file"||VB(e,t);return[n,n?null:XB(t)]}function i5(e,t,n){if($o(e.size))if($o(t)&&$o(n)){if(e.size>n)return[!1,m3(n)];if(e.size<t)return[!1,x3(t)]}else{if($o(t)&&e.size<t)return[!1,x3(t)];if($o(n)&&e.size>n)return[!1,m3(n)]}return[!0,null]}function $o(e){return e!=null}function ZB(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize,o=e.multiple,d=e.maxFiles,m=e.validator;return!o&&t.length>1||o&&d>=1&&t.length>d?!1:t.every(function(v){var g=a5(v,n),w=vd(g,1),N=w[0],S=i5(v,r,a),j=vd(S,1),k=j[0],R=m?m(v):null;return N&&k&&!R})}function _h(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function nf(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function g3(e){e.preventDefault()}function JB(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function eU(e){return e.indexOf("Edge/")!==-1}function tU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return JB(e)||eU(e)}function Ea(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return t.some(function(m){return!_h(r)&&m&&m.apply(void 0,[r].concat(o)),_h(r)})}}function nU(){return"showOpenFilePicker"in window}function rU(e){if($o(e)){var t=Object.entries(e).filter(function(n){var r=vd(n,2),a=r[0],o=r[1],d=!0;return o5(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),d=!1),(!Array.isArray(o)||!o.every(l5))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),d=!1),d}).reduce(function(n,r){var a=vd(r,2),o=a[0],d=a[1];return p3(p3({},n),{},r5({},o,d))},{});return[{description:"Files",accept:t}]}return e}function sU(e){if($o(e))return Object.entries(e).reduce(function(t,n){var r=vd(n,2),a=r[0],o=r[1];return[].concat(f3(t),[a],f3(o))},[]).filter(function(t){return o5(t)||l5(t)}).join(",")}function aU(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function iU(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function o5(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function l5(e){return/^.*\.[\w]+$/.test(e)}var oU=["children"],lU=["open"],cU=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],uU=["refKey","onChange","onClick"];function dU(e){return pU(e)||hU(e)||c5(e)||fU()}function fU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pU(e){if(Array.isArray(e))return zx(e)}function pm(e,t){return gU(e)||xU(e,t)||c5(e,t)||mU()}function mU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c5(e,t){if(e){if(typeof e=="string")return zx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zx(e,t)}}function zx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xU(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,d,m;try{for(n=n.call(e);!(a=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));a=!0);}catch(v){o=!0,m=v}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw m}}return r}}function gU(e){if(Array.isArray(e))return e}function v3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(n),!0).forEach(function(r){Wx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jh(e,t){if(e==null)return{};var n=vU(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vU(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var k2=L.forwardRef(function(e,t){var n=e.children,r=jh(e,oU),a=Id(r),o=a.open,d=jh(a,lU);return L.useImperativeHandle(t,function(){return{open:o}},[o]),he.createElement(L.Fragment,null,n(Tn(Tn({},d),{},{open:o})))});k2.displayName="Dropzone";var u5={disabled:!1,getFilesFromEvent:TB,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};k2.defaultProps=u5;k2.propTypes={children:ie.func,accept:ie.objectOf(ie.arrayOf(ie.string)),multiple:ie.bool,preventDropOnDocument:ie.bool,noClick:ie.bool,noKeyboard:ie.bool,noDrag:ie.bool,noDragEventsBubbling:ie.bool,minSize:ie.number,maxSize:ie.number,maxFiles:ie.number,disabled:ie.bool,getFilesFromEvent:ie.func,onFileDialogCancel:ie.func,onFileDialogOpen:ie.func,useFsAccessApi:ie.bool,autoFocus:ie.bool,onDragEnter:ie.func,onDragLeave:ie.func,onDragOver:ie.func,onDrop:ie.func,onDropAccepted:ie.func,onDropRejected:ie.func,onError:ie.func,validator:ie.func};var Hx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Id(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Tn(Tn({},u5),e),n=t.accept,r=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,d=t.minSize,m=t.multiple,v=t.maxFiles,g=t.onDragEnter,w=t.onDragLeave,N=t.onDragOver,S=t.onDrop,j=t.onDropAccepted,k=t.onDropRejected,R=t.onFileDialogCancel,T=t.onFileDialogOpen,I=t.useFsAccessApi,A=t.autoFocus,M=t.preventDropOnDocument,B=t.noClick,G=t.noKeyboard,P=t.noDrag,O=t.noDragEventsBubbling,V=t.onError,W=t.validator,ee=L.useMemo(function(){return sU(n)},[n]),ce=L.useMemo(function(){return rU(n)},[n]),ne=L.useMemo(function(){return typeof T=="function"?T:y3},[T]),te=L.useMemo(function(){return typeof R=="function"?R:y3},[R]),Ne=L.useRef(null),ae=L.useRef(null),Ae=L.useReducer(yU,Hx),me=pm(Ae,2),de=me[0],fe=me[1],Be=de.isFocused,Ye=de.isFileDialogActive,Je=L.useRef(typeof window<"u"&&window.isSecureContext&&I&&nU()),Te=function(){!Je.current&&Ye&&setTimeout(function(){if(ae.current){var rt=ae.current.files;rt.length||(fe({type:"closeDialog"}),te())}},300)};L.useEffect(function(){return window.addEventListener("focus",Te,!1),function(){window.removeEventListener("focus",Te,!1)}},[ae,Ye,te,Je]);var $e=L.useRef([]),nt=function(rt){Ne.current&&Ne.current.contains(rt.target)||(rt.preventDefault(),$e.current=[])};L.useEffect(function(){return M&&(document.addEventListener("dragover",g3,!1),document.addEventListener("drop",nt,!1)),function(){M&&(document.removeEventListener("dragover",g3),document.removeEventListener("drop",nt))}},[Ne,M]),L.useEffect(function(){return!r&&A&&Ne.current&&Ne.current.focus(),function(){}},[Ne,A,r]);var De=L.useCallback(function(Fe){V?V(Fe):console.error(Fe)},[V]),Oe=L.useCallback(function(Fe){Fe.preventDefault(),Fe.persist(),Ee(Fe),$e.current=[].concat(dU($e.current),[Fe.target]),nf(Fe)&&Promise.resolve(a(Fe)).then(function(rt){if(!(_h(Fe)&&!O)){var Pt=rt.length,un=Pt>0&&ZB({files:rt,accept:ee,minSize:d,maxSize:o,multiple:m,maxFiles:v,validator:W}),en=Pt>0&&!un;fe({isDragAccept:un,isDragReject:en,isDragActive:!0,type:"setDraggedFiles"}),g&&g(Fe)}}).catch(function(rt){return De(rt)})},[a,g,De,O,ee,d,o,m,v,W]),at=L.useCallback(function(Fe){Fe.preventDefault(),Fe.persist(),Ee(Fe);var rt=nf(Fe);if(rt&&Fe.dataTransfer)try{Fe.dataTransfer.dropEffect="copy"}catch{}return rt&&N&&N(Fe),!1},[N,O]),Ht=L.useCallback(function(Fe){Fe.preventDefault(),Fe.persist(),Ee(Fe);var rt=$e.current.filter(function(un){return Ne.current&&Ne.current.contains(un)}),Pt=rt.indexOf(Fe.target);Pt!==-1&&rt.splice(Pt,1),$e.current=rt,!(rt.length>0)&&(fe({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),nf(Fe)&&w&&w(Fe))},[Ne,w,O]),Vt=L.useCallback(function(Fe,rt){var Pt=[],un=[];Fe.forEach(function(en){var gn=a5(en,ee),os=pm(gn,2),As=os[0],qa=os[1],ln=i5(en,d,o),Pe=pm(ln,2),dn=Pe[0],Mt=Pe[1],Xt=W?W(en):null;if(As&&dn&&!Xt)Pt.push(en);else{var Ks=[qa,Mt];Xt&&(Ks=Ks.concat(Xt)),un.push({file:en,errors:Ks.filter(function(No){return No})})}}),(!m&&Pt.length>1||m&&v>=1&&Pt.length>v)&&(Pt.forEach(function(en){un.push({file:en,errors:[KB]})}),Pt.splice(0)),fe({acceptedFiles:Pt,fileRejections:un,isDragReject:un.length>0,type:"setFiles"}),S&&S(Pt,un,rt),un.length>0&&k&&k(un,rt),Pt.length>0&&j&&j(Pt,rt)},[fe,m,ee,d,o,v,S,j,k,W]),Bt=L.useCallback(function(Fe){Fe.preventDefault(),Fe.persist(),Ee(Fe),$e.current=[],nf(Fe)&&Promise.resolve(a(Fe)).then(function(rt){_h(Fe)&&!O||Vt(rt,Fe)}).catch(function(rt){return De(rt)}),fe({type:"reset"})},[a,Vt,De,O]),Lt=L.useCallback(function(){if(Je.current){fe({type:"openDialog"}),ne();var Fe={multiple:m,types:ce};window.showOpenFilePicker(Fe).then(function(rt){return a(rt)}).then(function(rt){Vt(rt,null),fe({type:"closeDialog"})}).catch(function(rt){aU(rt)?(te(rt),fe({type:"closeDialog"})):iU(rt)?(Je.current=!1,ae.current?(ae.current.value=null,ae.current.click()):De(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):De(rt)});return}ae.current&&(fe({type:"openDialog"}),ne(),ae.current.value=null,ae.current.click())},[fe,ne,te,I,Vt,De,ce,m]),_e=L.useCallback(function(Fe){!Ne.current||!Ne.current.isEqualNode(Fe.target)||(Fe.key===" "||Fe.key==="Enter"||Fe.keyCode===32||Fe.keyCode===13)&&(Fe.preventDefault(),Lt())},[Ne,Lt]),Ke=L.useCallback(function(){fe({type:"focus"})},[]),Nt=L.useCallback(function(){fe({type:"blur"})},[]),ve=L.useCallback(function(){B||(tU()?setTimeout(Lt,0):Lt())},[B,Lt]),ke=function(rt){return r?null:rt},qe=function(rt){return G?null:ke(rt)},oe=function(rt){return P?null:ke(rt)},Ee=function(rt){O&&rt.stopPropagation()},ye=L.useMemo(function(){return function(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=Fe.refKey,Pt=rt===void 0?"ref":rt,un=Fe.role,en=Fe.onKeyDown,gn=Fe.onFocus,os=Fe.onBlur,As=Fe.onClick,qa=Fe.onDragEnter,ln=Fe.onDragOver,Pe=Fe.onDragLeave,dn=Fe.onDrop,Mt=jh(Fe,cU);return Tn(Tn(Wx({onKeyDown:qe(Ea(en,_e)),onFocus:qe(Ea(gn,Ke)),onBlur:qe(Ea(os,Nt)),onClick:ke(Ea(As,ve)),onDragEnter:oe(Ea(qa,Oe)),onDragOver:oe(Ea(ln,at)),onDragLeave:oe(Ea(Pe,Ht)),onDrop:oe(Ea(dn,Bt)),role:typeof un=="string"&&un!==""?un:"presentation"},Pt,Ne),!r&&!G?{tabIndex:0}:{}),Mt)}},[Ne,_e,Ke,Nt,ve,Oe,at,Ht,Bt,G,P,r]),gt=L.useCallback(function(Fe){Fe.stopPropagation()},[]),pn=L.useMemo(function(){return function(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=Fe.refKey,Pt=rt===void 0?"ref":rt,un=Fe.onChange,en=Fe.onClick,gn=jh(Fe,uU),os=Wx({accept:ee,multiple:m,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ke(Ea(un,Bt)),onClick:ke(Ea(en,gt)),tabIndex:-1},Pt,ae);return Tn(Tn({},os),gn)}},[ae,n,m,Bt,r]);return Tn(Tn({},de),{},{isFocused:Be&&!r,getRootProps:ye,getInputProps:pn,rootRef:Ne,inputRef:ae,open:ke(Lt)})}function yU(e,t){switch(t.type){case"focus":return Tn(Tn({},e),{},{isFocused:!0});case"blur":return Tn(Tn({},e),{},{isFocused:!1});case"openDialog":return Tn(Tn({},Hx),{},{isFileDialogActive:!0});case"closeDialog":return Tn(Tn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Tn(Tn({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Tn(Tn({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Tn({},Hx);default:return e}}function y3(){}const wU=async(e="csv",t={})=>{try{const n={format:e};return Object.entries(t).forEach(([a,o])=>{a==="selectedIds"&&Array.isArray(o)&&o.length>0?n.selectedIds=JSON.stringify(o):n[a]=o}),console.log("Export params:",n),(await Qe.get("/api/import-export/export",{params:n,responseType:"blob"})).data}catch(n){throw console.error("Error exporting equipment:",n),n}},bU=async(e,t={})=>{try{const n=new FormData;return n.append("file",e),Object.entries(t).forEach(([a,o])=>{n.append(a,o)}),(await Qe.post("/api/import-export/import",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error importing equipment:",n),n}},NU=(e,t)=>{const n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r)},CU=({isOpen:e,onClose:t,filters:n={},selectedItems:r=[]})=>{const[a,o]=L.useState("export"),[d,m]=L.useState("csv"),[v,g]=L.useState(!1),[w,N]=L.useState(!1),[S,j]=L.useState(null),[k,R]=L.useState(!0),[T,I]=L.useState(null),[A,M]=L.useState(""),{user:B}=lr(),G=cn(),P=B&&(B.role==="admin"||B.role==="advanced"),{getRootProps:O,getInputProps:V,isDragActive:W}=Id({onDrop:ne=>{ne.length>0&&(j(ne[0]),M(""))},accept:{"text/csv":[".csv"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/json":[".json"]},maxFiles:1}),ee=async()=>{try{N(!0),M("");const ne=new Date().toISOString().split("T")[0],te={...n};v&&r.length>0&&(te.selectedIds=r);const Ne=await wU(d,te);let ae;const Ae=v&&r.length>0?`equipment_selected_${r.length}_items_${ne}`:`equipment_export_${ne}`;switch(d){case"csv":ae=`${Ae}.csv`;break;case"xlsx":ae=`${Ae}.xlsx`;break;case"json":ae=`${Ae}.json`;break;default:ae=Ae}NU(Ne,ae),N(!1)}catch(ne){console.error("Export error:",ne),M("Failed to export data. Please try again."),N(!1)}},ce=async()=>{if(!S){M("Please select a file to import");return}try{N(!0),M(""),I(null);const ne=await bU(S,{updateExisting:k});I(ne.results),G.invalidateQueries(["equipment"]),N(!1),j(null),ne.results.errors.length===0&&setTimeout(()=>{t()},3e3)}catch(ne){console.error("Import error:",ne),M("Failed to import data. Please check your file and try again."),N(!1)}};return!e||!P?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Import/Export Equipment"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex border-b",children:[s.jsx("button",{className:`px-4 py-2 ${a==="export"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>o("export"),children:"Export"}),s.jsx("button",{className:`px-4 py-2 ${a==="import"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>o("import"),children:"Import"})]}),s.jsx("div",{className:"p-4",children:a==="export"?s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Export Format"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportFormat",value:"csv",checked:d==="csv",onChange:()=>m("csv")}),s.jsx("span",{className:"ml-2",children:"CSV"})]}),s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportFormat",value:"xlsx",checked:d==="xlsx",onChange:()=>m("xlsx")}),s.jsx("span",{className:"ml-2",children:"Excel (XLSX)"})]}),s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportFormat",value:"json",checked:d==="json",onChange:()=>m("json")}),s.jsx("span",{className:"ml-2",children:"JSON"})]})]})]}),r.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Export Scope"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportScope",checked:!v,onChange:()=>g(!1)}),s.jsx("span",{className:"ml-2",children:"All equipment (with filters)"})]}),s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportScope",checked:v,onChange:()=>g(!0)}),s.jsxs("span",{className:"ml-2",children:["Selected items only (",r.length,")"]})]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:v&&r.length>0?`This will export ${r.length} selected equipment items.`:"This will export all equipment data based on your current filters."})}),A&&s.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:A}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:t,disabled:w,className:"btn btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:ee,disabled:w,className:`btn ${w?"bg-blue-400":"btn-primary"}`,children:w?s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):"Export"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload File"}),s.jsxs("div",{...O(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer ${W?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[s.jsx("input",{...V()}),S?s.jsxs("div",{children:[s.jsxs("p",{className:"text-green-600",children:["File selected: ",S.name]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[(S.size/1024).toFixed(2)," KB"]})]}):W?s.jsx("p",{className:"text-blue-500",children:"Drop the file here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop a file here, or click to select a file"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Accepted file types: CSV, XLSX, JSON"})]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"checkbox",className:"form-checkbox",checked:k,onChange:ne=>R(ne.target.checked)}),s.jsx("span",{className:"ml-2",children:"Update existing equipment if found"})]})}),A&&s.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:A}),T&&s.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded",children:[s.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Import Results"}),s.jsxs("ul",{className:"text-sm text-green-700",children:[s.jsxs("li",{children:["Total records processed: ",T.total]}),s.jsxs("li",{children:["New records created: ",T.created]}),s.jsxs("li",{children:["Existing records updated: ",T.updated]}),s.jsxs("li",{children:["Errors: ",T.errors.length]})]}),T.errors.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("h4",{className:"font-medium text-red-800",children:"Errors:"}),s.jsx("ul",{className:"text-sm text-red-700 mt-1 max-h-32 overflow-y-auto",children:T.errors.map((ne,te)=>s.jsxs("li",{children:[ne.record.serial_number||ne.record.id||`Row ${te+1}`,": ",ne.error]},te))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:t,disabled:w,className:"btn btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:ce,disabled:w||!S,className:`btn ${w?"bg-blue-400":"btn-primary"}`,children:w?s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Importing..."]}):"Import"})]})]})})]})})},EU=()=>{var oe;const e=Gr(),t=L.useRef(null),[n]=L.useState(20),[r,a]=L.useState({type:"",brand:"",status:"",location_id:"",search:""}),[o,d]=L.useState([]),[m,v]=L.useState(!1),[g,w]=L.useState("updated_at"),[N,S]=L.useState("desc"),[j,k]=L.useState("list"),[R,T]=L.useState(!1);L.useEffect(()=>{const Ee=localStorage.getItem("equipmentViewMode");Ee&&k(Ee);const ye=localStorage.getItem("equipmentShowThumbnails");ye!==null&&T(ye==="true")},[]),L.useEffect(()=>{localStorage.setItem("equipmentViewMode",j)},[j]),L.useEffect(()=>{localStorage.setItem("equipmentShowThumbnails",R.toString())},[R]);const[I,A]=L.useState(!1),[M,B]=L.useState(!1),[G,P]=L.useState(!1),[O,V]=L.useState(!1),[W,ee]=L.useState(!1),[ce,ne]=L.useState(!1),[te,Ne]=L.useState(!1),[ae,Ae]=L.useState(!1),[me,de]=L.useState(null);L.useEffect(()=>{const Ee=pn=>{const{id:Fe}=pn.detail;de(Fe),B(!0)},ye=pn=>{const{id:Fe}=pn.detail;de(Fe),P(!0)},gt=pn=>{const{id:Fe}=pn.detail;de(Fe),V(!0)};return document.addEventListener("batchDuplicate",Ee),document.addEventListener("batchStatusUpdate",ye),document.addEventListener("batchLocationChange",gt),()=>{document.removeEventListener("batchDuplicate",Ee),document.removeEventListener("batchStatusUpdate",ye),document.removeEventListener("batchLocationChange",gt)}},[]);const{data:fe,fetchNextPage:Be,hasNextPage:Ye,isFetchingNextPage:Je,isLoading:Te,isError:$e,error:nt}=Zg(["equipment",r,g,N],async({pageParam:Ee=1})=>{const ye={page:Ee,limit:n,...r,sortBy:g,sortOrder:N};return Ia(ye)},{getNextPageParam:Ee=>{if(Ee.page<Ee.totalPages)return Ee.page+1},keepPreviousData:!0}),{data:De}=ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5}),{data:Oe}=ct(["locations"],wo),at=(fe==null?void 0:fe.pages.flatMap(Ee=>Ee.equipment))||[];L.useEffect(()=>{const Ee=new IntersectionObserver(ye=>{ye[0].isIntersecting&&Ye&&!Je&&Be()},{threshold:.5});return t.current&&Ee.observe(t.current),()=>{t.current&&Ee.unobserve(t.current)}},[t,Be,Ye,Je]);const Ht=Ee=>{de(Ee),A(!0)},Vt=()=>{A(!1),de(null)},Bt=()=>{B(!1),de(null)},Lt=Ee=>{const{name:ye,value:gt}=Ee.target;a(pn=>({...pn,[ye]:gt}))},_e=Ee=>{Ee.preventDefault()},Ke=Ee=>{g===Ee?S(ye=>ye==="asc"?"desc":"asc"):(w(Ee),S("desc"))},Nt=Ee=>{d(ye=>ye.includes(Ee)?ye.filter(gt=>gt!==Ee):[...ye,Ee])},ve=()=>{if(m)d([]);else{const Ee=at.map(ye=>ye.id);d(Ee)}v(!m)},ke=()=>{d([]),v(!1)},qe=(Ee,ye)=>{ye.target.type==="checkbox"||ye.target.closest("button")||ye.target.closest("a")||ye.target.closest(".btn-icon")||e(`/equipment/${Ee}`)};return Te?s.jsx("div",{className:"text-center py-10",children:"Loading..."}):$e?s.jsxs("div",{className:"text-center py-10 text-red-600",children:["Error: ",nt.message||"Failed to load equipment"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(SB,{isOpen:I,onClose:Vt,equipmentId:me}),s.jsx(_B,{isOpen:M,onClose:Bt,equipmentId:me,selectedItems:o}),s.jsx(GE,{isOpen:G,onClose:()=>P(!1),equipmentId:me,selectedItems:o}),s.jsx(QE,{isOpen:O,onClose:()=>V(!1),equipmentId:me,selectedItems:o}),s.jsx(XE,{isOpen:W,onClose:()=>ee(!1),selectedItems:o}),s.jsx(KE,{isOpen:ce,onClose:()=>ne(!1),selectedItems:o}),s.jsx(ZE,{isOpen:te,onClose:()=>Ne(!1),selectedItems:o}),s.jsx(CU,{isOpen:ae,onClose:()=>Ae(!1),filters:r,selectedItems:o}),s.jsx("div",{className:"card",children:s.jsxs("form",{onSubmit:_e,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search",className:"label",children:"Search"}),s.jsxs("div",{className:"input-group",children:[s.jsx(i2,{className:"input-icon w-4 h-4"}),s.jsx("input",{type:"text",id:"search",name:"search",value:r.search,onChange:Lt,placeholder:"Search equipment...",className:"input input-with-icon"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"type",className:"label",children:"Type"}),s.jsxs("select",{id:"type",name:"type",value:r.type,onChange:Lt,className:"input",children:[s.jsx("option",{value:"",children:"All Types"}),De!=null&&De.types&&De.types.length>0?De.types.map(Ee=>s.jsx("option",{value:Ee.name.toLowerCase(),children:Ee.name},Ee.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"label",children:"Status"}),s.jsxs("select",{id:"status",name:"status",value:r.status,onChange:Lt,className:"input",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"in-use",children:"In Use"}),s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"unavailable",children:"Unavailable"}),s.jsx("option",{value:"broken",children:"Broken"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"location_id",className:"label",children:"Location"}),s.jsxs("select",{id:"location_id",name:"location_id",value:r.location_id,onChange:Lt,className:"input",children:[s.jsx("option",{value:"",children:"All Locations"}),(oe=Oe==null?void 0:Oe.locations)==null?void 0:oe.map(Ee=>s.jsx("option",{value:Ee.id.toString(),children:Ee.name},Ee.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"button",onClick:()=>{a({type:"",brand:"",status:"",location_id:"",search:""})},className:"btn btn-outline w-full",children:"Clear All Filters"})}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{type:"submit",className:"btn btn-primary w-full",children:[s.jsx(o2,{className:"w-4 h-4"}),s.jsx("span",{children:"Apply Filters"})]})})]})}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"flex flex-col space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mr-4",children:"Equipment List"}),s.jsxs("div",{className:"flex border border-slate-200 rounded-lg overflow-hidden mr-2",children:[s.jsx("button",{onClick:()=>k("list"),className:`px-2 py-1 text-xs font-medium transition-all ${j==="list"?"bg-white text-primary-600 border-r border-slate-200 hover:bg-primary-50":"bg-white text-slate-600 border-r border-slate-200 hover:bg-slate-50"}`,title:"List view",children:s.jsx(Pc,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>k("card"),className:`px-2 py-1 text-xs font-medium transition-all ${j==="card"?"bg-white text-primary-600 hover:bg-primary-50":"bg-white text-slate-600 hover:bg-slate-50"}`,title:"Card view",children:s.jsx(Fc,{className:"h-4 w-4"})})]}),o.length>0&&s.jsx("div",{className:"ml-2",children:s.jsx(JE,{selectedItems:o,onBatchDuplicate:()=>B(!0),onBatchStatusUpdate:()=>P(!0),onBatchLocationChange:()=>V(!0),onBatchTypeChange:()=>ee(!0),onBatchCategoryChange:()=>ne(!0),onBatchBrandModelChange:()=>Ne(!0),onClearSelection:ke})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>Ae(!0),className:"btn btn-secondary btn-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(EM,{className:"w-4 h-4 mr-1"}),s.jsx(SM,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Import/Export"})]})}),s.jsxs(qn,{to:"/equipment/new",className:"btn btn-primary btn-sm",children:[s.jsx(lp,{className:"w-4 h-4"}),s.jsx("span",{children:"Add New Equipment"})]})]})]})}),j==="card"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:at.length>0?at.map(Ee=>s.jsx(e5,{equipment:Ee,onDuplicate:Ht,onSelect:Nt,isSelected:o.includes(Ee.id)},Ee.id)):s.jsx("div",{className:"col-span-3 py-8 text-center text-gray-500",children:"No equipment found"})}),j==="list"&&s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell w-10",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("input",{type:"checkbox",checked:m,onChange:ve,className:"h-4 w-4 text-primary-600 border-gray-300 rounded"})})}),s.jsx(zi,{field:"type",label:"Type",currentSortField:g,currentSortOrder:N,onSort:Ke}),s.jsx(zi,{field:"category",label:"Category",currentSortField:g,currentSortOrder:N,onSort:Ke}),s.jsx(zi,{field:"brand",label:"Brand",currentSortField:g,currentSortOrder:N,onSort:Ke}),s.jsx(zi,{field:"model",label:"Model",currentSortField:g,currentSortOrder:N,onSort:Ke}),s.jsx(zi,{field:"serial_number",label:"Serial Number",currentSortField:g,currentSortOrder:N,onSort:Ke}),s.jsx(zi,{field:"status",label:"Status",currentSortField:g,currentSortOrder:N,onSort:Ke}),s.jsx(zi,{field:"location",label:"Location",currentSortField:g,currentSortOrder:N,onSort:Ke}),s.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:at.length>0?at.map(Ee=>{var ye;return s.jsxs("tr",{className:`table-row ${o.includes(Ee.id)?"bg-blue-50":""} cursor-pointer hover:bg-slate-50`,onClick:gt=>qe(Ee.id,gt),children:[s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("input",{type:"checkbox",checked:o.includes(Ee.id),onChange:()=>Nt(Ee.id),className:"h-4 w-4 text-primary-600 border-gray-300 rounded"})})}),s.jsx("td",{className:"table-cell",children:Ee.type}),s.jsx("td",{className:"table-cell",children:Ee.category||"-"}),s.jsx("td",{className:"table-cell",children:Ee.brand}),s.jsx("td",{className:"table-cell",children:Ee.model}),s.jsx("td",{className:"table-cell",children:Ee.serial_number}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:`badge ${Ee.status==="available"?"badge-success":Ee.status==="in-use"?"badge-info":Ee.status==="maintenance"?"badge-warning":Ee.status==="unavailable"?"badge-secondary":Ee.status==="broken"?"badge-danger":"badge-secondary"}`,children:Ee.status})}),s.jsx("td",{className:"table-cell",children:((ye=Ee.locationDetails)==null?void 0:ye.name)||Ee.location||"-"}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"flex items-center justify-end",children:s.jsx(A2,{equipmentId:Ee.id,onBatchDuplicate:()=>{de(Ee.id),B(!0)},onBatchStatusUpdate:()=>{de(Ee.id),P(!0)},onBatchLocationChange:()=>{de(Ee.id),V(!0)}})})})]},Ee.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No equipment found"})})})]})}),s.jsx("div",{ref:t,className:"py-4 text-center",children:Je?s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),s.jsx("span",{className:"text-slate-500",children:"Loading more..."})]}):Ye?s.jsx("span",{className:"text-sm text-slate-500",children:"Scroll to load more"}):s.jsx("span",{className:"text-sm text-slate-500",children:"No more equipment to load"})})]})]})},SU=async({page:e=1,limit:t=20,equipmentId:n,userId:r,actionType:a,search:o,type:d,status:m,location_id:v,sortBy:g="created_at",sortOrder:w="desc"})=>{const N={page:e,limit:t};return n&&(N.equipmentId=n),r&&(N.userId=r),a&&(N.actionType=a),o&&(N.search=o),d&&(N.type=d),m&&(N.status=m),v&&(N.location_id=v),g&&(N.sortBy=g),w&&(N.sortOrder=w),(await Qe.get("/api/equipment-logs",{params:N})).data},_U=async(e,{page:t=1,limit:n=20}={})=>{const r={page:t,limit:n};return(await Qe.get(`/api/equipment-logs/equipment/${e}`,{params:r})).data},d5=({equipmentId:e})=>{var w;const[t,n]=L.useState(1),[r]=L.useState(10),{data:a,isLoading:o,isError:d,error:m}=ct(["equipmentLogs",e,t,r],()=>_U(e,{page:t,limit:r}),{keepPreviousData:!0,enabled:!!e}),v=N=>N.split("_").map(S=>S.charAt(0).toUpperCase()+S.slice(1)).join(" "),g=N=>{n(N)};return o?s.jsxs("div",{className:"text-center py-8 flex flex-col items-center",children:[s.jsxs("svg",{className:"animate-spin h-8 w-8 text-primary-500 mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-slate-600",children:"Loading movement history..."})]}):d?s.jsxs("div",{className:"text-center py-8 flex flex-col items-center",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-full mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-red-600 font-medium mb-1",children:"Error Loading Movement History"}),s.jsx("p",{className:"text-slate-500 text-sm",children:m.message||"Failed to load equipment logs"})]}):(w=a==null?void 0:a.logs)!=null&&w.length?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date"]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"User"]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Action"]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Details"]})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:a.logs.map((N,S)=>{var j,k,R;return s.jsxs("tr",{className:`hover:bg-slate-50 ${S%2===0?"bg-white":"bg-slate-50/50"}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-medium",children:md(new Date(N.created_at),"MMM d, yyyy")}),s.jsx("span",{className:"ml-2 text-slate-500",children:md(new Date(N.created_at),"h:mm a")})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-8 bg-slate-200 rounded-full flex items-center justify-center text-slate-600 font-medium",children:(j=N.user)!=null&&j.username?N.user.username.charAt(0).toUpperCase():"?"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-slate-800",children:((k=N.user)==null?void 0:k.username)||"Unknown"}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:((R=N.user)==null?void 0:R.role)||""})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2.5 py-1.5 inline-flex text-xs leading-5 font-semibold rounded-full
                    ${N.action_type==="created"?"bg-green-100 text-green-800":N.action_type==="updated"?"bg-blue-100 text-blue-800":N.action_type==="deleted"?"bg-red-100 text-red-800":N.action_type==="status_change"?"bg-yellow-100 text-yellow-800":N.action_type==="location_change"?"bg-indigo-100 text-indigo-800":"bg-slate-100 text-slate-800"}`,children:[N.action_type==="created"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),N.action_type==="updated"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),N.action_type==="deleted"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),N.action_type==="status_change"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),N.action_type==="location_change"&&s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),v(N.action_type)]})}),s.jsxs("td",{className:"px-6 py-4 text-sm text-slate-600",children:[N.action_type==="status_change"&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-700",children:"Status:"}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-slate-100 text-slate-700",children:N.previous_status}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-indigo-100 text-indigo-800 font-medium",children:N.new_status})]}),N.action_type==="location_change"&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-700",children:"Location:"}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-slate-100 text-slate-700",children:N.previous_location||"None"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-indigo-100 text-indigo-800 font-medium",children:N.new_location||"None"})]}),N.details&&s.jsx("div",{className:"mt-2 text-slate-600",children:N.details})]})]},N.id)})})]})}),a.totalPages>1&&s.jsxs("div",{className:"flex justify-between items-center mt-4 px-2",children:[s.jsxs("div",{className:"text-sm text-slate-600 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Showing ",s.jsx("span",{className:"font-medium text-slate-800 mx-1",children:(t-1)*r+1})," to"," ",s.jsx("span",{className:"font-medium text-slate-800 mx-1",children:Math.min(t*r,a.total)})," of"," ",s.jsx("span",{className:"font-medium text-slate-800 mx-1",children:a.total})," logs"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>g(t-1),disabled:t===1,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md transition-colors ${t===1?"bg-slate-100 text-slate-400 cursor-not-allowed border-slate-200":"bg-white text-slate-700 hover:bg-slate-50 border-slate-300 hover:border-slate-400"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-1 ${t===1?"text-slate-300":"text-slate-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),s.jsxs("button",{onClick:()=>g(t+1),disabled:t===a.totalPages,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md transition-colors ${t===a.totalPages?"bg-slate-100 text-slate-400 cursor-not-allowed border-slate-200":"bg-white text-slate-700 hover:bg-slate-50 border-slate-300 hover:border-slate-400"}`,children:["Next",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ml-1 ${t===a.totalPages?"text-slate-300":"text-slate-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]}):s.jsxs("div",{className:"text-center py-8 flex flex-col items-center",children:[s.jsx("div",{className:"bg-slate-100 p-3 rounded-full mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-slate-600 font-medium",children:"No movement history found"}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"This equipment has no recorded movements or status changes"})]})},f5=({isOpen:e,title:t="Confirm Action",message:n="Are you sure you want to proceed?",confirmText:r="Confirm",cancelText:a="Cancel",onConfirm:o,onCancel:d,isDestructive:m=!1})=>e?s.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-soft max-w-md w-full p-6 animate-fade-in",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:t}),s.jsx("p",{className:"text-slate-600 mb-6",children:n}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(be,{variant:"secondary",onClick:d,children:a}),s.jsx(be,{variant:m?"danger":"primary",onClick:o,children:r})]})]})}):null;f5.propTypes={isOpen:ie.bool.isRequired,title:ie.string,message:ie.string,confirmText:ie.string,cancelText:ie.string,onConfirm:ie.func.isRequired,onCancel:ie.func.isRequired,isDestructive:ie.bool};const T2=({onImageSelect:e,existingImage:t=null,onImageDelete:n})=>{const[r,a]=L.useState(null),[o,d]=L.useState(null);L.useEffect(()=>{d(t?`/api/files/${t.id}?thumbnail=true`:null)},[t]),L.useEffect(()=>()=>{o&&!o.startsWith("/api/files/")&&URL.revokeObjectURL(o)},[o]);const m=L.useCallback(j=>{if(j.length>0){const k=j[0];if(k.size>10*1024*1024){alert("Image is too large. Maximum size is 10MB.");return}a(k),d(URL.createObjectURL(k)),e(k)}},[e]),v=()=>{a(null),o&&!o.startsWith("/api/files/")&&URL.revokeObjectURL(o),d(null),e(null)},g=()=>{n&&t&&(n(t.id),d(null))},{getRootProps:w,getInputProps:N,isDragActive:S}=Id({onDrop:m,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},maxFiles:1,multiple:!1});return s.jsx("div",{children:o?s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"bg-slate-50 p-4 rounded-md border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm font-medium",children:t?t.file_name:(r==null?void 0:r.name)||"Reference Image"})]}),s.jsx("button",{type:"button",onClick:t?g:v,className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsx("div",{className:"mt-2 flex justify-center",style:{height:"200px"},children:s.jsx("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden bg-slate-100 rounded-md",children:s.jsx("img",{src:o,alt:"Reference Image Preview",className:"rounded-md max-h-full max-w-full",style:{objectFit:"contain",objectPosition:"center"},onError:j=>{console.error("Error loading image:",j),j.target.src="/placeholder-image.png",j.target.onerror=null}})})})]})}):s.jsxs("div",{...w(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer ${S?"border-primary-500 bg-primary-50":"border-slate-300"}`,children:[s.jsx("input",{...N()}),S?s.jsx("p",{className:"text-primary-500",children:"Drop the image here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop a reference image here, or click to select"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Accepted file types: JPEG, PNG (Max: 10MB)"})]})]})})};T2.propTypes={onImageSelect:ie.func.isRequired,existingImage:ie.object,onImageDelete:ie.func};const D2=({isOpen:e,onClose:t,equipmentId:n,existingImage:r=null})=>{const[a,o]=L.useState(null),[d,m]=L.useState(!1),[v,g]=L.useState(""),w=cn(),N=R=>{o(R)},S=Tt({mutationFn:async R=>YC(n,{},[],[],R.referenceImageFile,R.removeReferenceImage),onSuccess:()=>{w.invalidateQueries(["equipment",n]),t()},onError:R=>{var T,I;console.error("Error updating reference image:",R),g(((I=(T=R.response)==null?void 0:T.data)==null?void 0:I.message)||"Failed to update reference image"),m(!1)}}),j=R=>{if(R.preventDefault(),!a){g("Please select an image file");return}m(!0),g(""),S.mutate({referenceImageFile:a})},k=()=>{m(!0),g(""),S.mutate({referenceImageFile:null,removeReferenceImage:!0})};return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-slate-500 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),s.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:s.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[s.jsxs("h3",{className:"text-lg leading-6 font-medium text-slate-900 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Change Reference Image"]}),s.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"This image will be displayed prominently on the equipment details page and in search results."}),s.jsxs("div",{className:"mt-4",children:[v&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:s.jsx("p",{className:"text-red-700",children:v})}),s.jsxs("form",{onSubmit:j,children:[s.jsx("div",{className:"mb-4",children:s.jsx(T2,{onImageSelect:N,existingImage:r})}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx(be,{type:"submit",variant:"primary",disabled:d||!a,className:"w-full sm:ml-3 sm:w-auto",children:d?"Saving...":"Save Changes"}),s.jsx(be,{type:"button",variant:"secondary",onClick:t,className:"mt-3 w-full sm:mt-0 sm:w-auto",children:"Cancel"}),r&&s.jsx(be,{type:"button",variant:"danger",onClick:k,className:"mt-3 w-full sm:mt-0 sm:mr-auto sm:w-auto",children:"Remove Image"})]})]})]})]})})})})]})}):null};D2.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,equipmentId:ie.string.isRequired,existingImage:ie.object};const Vx=({fileType:e,fileUrl:t,fileName:n,className:r="",style:a={},showFileName:o=!0,size:d="medium",interactive:m=!0,useThumbnail:v=!0})=>{const[g,w]=L.useState(!0),[N,S]=L.useState(null),[j,k]=L.useState(!1),R=()=>{switch(d){case"small":return"h-24";case"large":return"h-48";case"medium":default:return"h-32"}},T=()=>{console.log("Image loaded successfully"),w(!1)},I=()=>{console.error("Image failed to load completely"),w(!1),S("Failed to load image")};L.useEffect(()=>{if(g&&e==="image"){const G=setTimeout(()=>{console.log("Loading timeout reached, resetting loading state"),w(!1)},5e3);return()=>clearTimeout(G)}},[g,e]),L.useEffect(()=>{!t&&e==="image"&&(console.log("No file URL provided, showing error state"),w(!1),S("No image available"))},[t,e]);const A=()=>{m&&e==="image"&&k(!j)},M=()=>{switch(e){case"image":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"audio":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})});case"pdf":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})})}},B=()=>{if(g&&e==="image")return s.jsx("div",{className:"animate-pulse bg-slate-200 w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("svg",{className:"w-8 h-8 text-slate-400 mb-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{className:"text-slate-400 text-xs",children:"Loading..."})]})});if(N)return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:s.jsxs("div",{className:"flex flex-col items-center p-2",children:[s.jsx("svg",{className:"w-8 h-8 text-red-500 mb-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-red-500 text-xs text-center",children:N})]})});switch(e){case"image":if(!t)return console.error("No file URL provided for image"),s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-100",children:s.jsxs("div",{className:"flex flex-col items-center p-2",children:[s.jsx("svg",{className:"w-8 h-8 text-slate-400 mb-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-slate-400 text-xs text-center",children:"No image"})]})});const G=new Date().getTime();let P=t;return P.includes("t=")||(P+=(P.includes("?")?"&":"?")+`t=${G}`),s.jsx("div",{className:`w-full h-full flex items-center justify-center overflow-hidden ${m?"cursor-pointer":""}`,onClick:A,children:s.jsx("img",{src:P,alt:n||"Image preview",className:`max-h-full max-w-full object-contain transition-transform duration-300 ${j?"scale-150":""}`,onLoad:O=>{console.log("Image loaded successfully:",P),T()},onError:O=>{console.error("Image failed to load:",P);const V=O.target;if(t.includes("thumbnail=true")){console.log("Thumbnail failed to load, trying original image");const ee=`${t.split("?")[0]}?t=${new Date().getTime()}`;console.log("Trying with URL:",ee),V.src=ee}else{console.log("Original image failed to load, trying with new cache busting");const W=t.includes("?")?`${t.split("?")[0]}?t=${new Date().getTime()}`:`${t}?t=${new Date().getTime()}`;console.log("Trying with URL:",W),V.src=W,V.dataset.retried?(console.error("Multiple load attempts failed, showing error"),I()):V.dataset.retried="true"}}},`img-${P}`)});case"audio":return s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-2",children:[s.jsx("div",{className:"mb-2",children:M()}),m?s.jsxs("audio",{controls:!0,className:"w-full max-w-[200px]",children:[s.jsx("source",{src:t,type:"audio/mpeg"}),"Your browser does not support the audio element."]}):s.jsx("div",{className:"text-sm text-slate-500",children:"Audio file"})]});case"pdf":return s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[s.jsx("div",{className:"mb-2",children:M()}),m?s.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 text-sm underline",children:"View PDF"}):s.jsx("div",{className:"text-sm text-slate-500",children:"PDF document"})]});default:return s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:M()})}};return s.jsxs("div",{className:`bg-slate-100 rounded-md overflow-hidden ${R()} ${r}`,style:a,children:[B(),o&&n&&s.jsx("div",{className:"bg-slate-800 bg-opacity-70 text-white text-xs py-1 px-2 absolute bottom-0 left-0 right-0 truncate",children:n})]})};Vx.propTypes={fileType:ie.oneOf(["image","audio","pdf"]).isRequired,fileUrl:ie.string.isRequired,fileName:ie.string,className:ie.string,style:ie.object,showFileName:ie.bool,size:ie.oneOf(["small","medium","large"]),interactive:ie.bool,useThumbnail:ie.bool};const I2=({files:e=[],onFileDelete:t,canDelete:n=!1,showDownload:r=!0,layout:a="grid",size:o="medium"})=>{const[d,m]=L.useState(null),v=k=>{m(k)},g=()=>{m(null)},w=(k,R=!1,T=!1)=>{let I=`/api/files/${k}`;const A=[];return R&&A.push("download=true"),T&&A.push("thumbnail=true"),A.length>0&&(I+=`?${A.join("&")}`),I},N=()=>d?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:g,children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden max-w-3xl w-full max-h-[90vh] flex flex-col",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900",children:d.file_name}),s.jsx("button",{type:"button",onClick:g,className:"text-slate-400 hover:text-slate-500",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center",children:d.file_type==="image"?s.jsx("img",{src:w(d.id),alt:d.file_name,className:"max-w-full max-h-[70vh] object-contain",onError:k=>{console.error("Error loading image in modal:",k),k.target.src=`${w(d.id)}?t=${new Date().getTime()}`}}):d.file_type==="audio"?s.jsxs("div",{className:"w-full max-w-md p-4",children:[s.jsx("div",{className:"mb-4 text-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}),s.jsxs("audio",{controls:!0,className:"w-full",children:[s.jsx("source",{src:w(d.id),type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):d.file_type==="pdf"?s.jsx("div",{className:"w-full h-[70vh]",children:s.jsx("iframe",{src:`${w(d.id)}#view=FitH`,title:d.file_name,className:"w-full h-full"})}):s.jsx("div",{className:"text-center p-4",children:s.jsx("p",{children:"This file type cannot be previewed."})})}),s.jsxs("div",{className:"p-4 border-t border-slate-200 flex justify-end space-x-2",children:[s.jsx("a",{href:w(d.id,!0),download:!0,className:"btn btn-secondary",children:"Download"}),n&&s.jsx("button",{type:"button",onClick:()=>{t(d.id),g()},className:"btn btn-danger",children:"Delete"})]})]})}):null,S=()=>s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(k=>s.jsxs("div",{className:"relative group",children:[s.jsxs("div",{className:"cursor-pointer rounded-lg overflow-hidden border border-slate-200 bg-white shadow-sm hover:shadow-md transition-shadow",onClick:()=>v(k),children:[s.jsx(Vx,{fileType:k.file_type,fileUrl:w(k.id,!1,k.file_type==="image"),fileName:k.file_name,size:o,interactive:!1,useThumbnail:k.file_type==="image"}),s.jsxs("div",{className:"p-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:k.file_name,children:k.file_name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:k.file_type})]})]}),s.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:[r&&s.jsx("a",{href:w(k.id,!0),download:!0,onClick:R=>R.stopPropagation(),className:"bg-white p-1.5 rounded-full shadow-md text-primary-600 hover:text-primary-800",title:"Download file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),n&&s.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),t(k.id)},className:"bg-white p-1.5 rounded-full shadow-md text-red-600 hover:text-red-800",title:"Delete file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},k.id))}),j=()=>s.jsx("div",{className:"divide-y divide-slate-200 border border-slate-200 rounded-lg overflow-hidden",children:e.map(k=>s.jsxs("div",{className:"flex items-center p-3 hover:bg-slate-50 cursor-pointer",onClick:()=>v(k),children:[s.jsx("div",{className:"flex-shrink-0 mr-3 w-12 h-12 relative",children:s.jsx(Vx,{fileType:k.file_type,fileUrl:w(k.id,!1,k.file_type==="image"),fileName:k.file_name,size:"small",showFileName:!1,interactive:!1,useThumbnail:k.file_type==="image"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:k.file_name,children:k.file_name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:k.file_type})]}),s.jsxs("div",{className:"flex space-x-2 ml-2",children:[r&&s.jsx("a",{href:w(k.id,!0),download:!0,onClick:R=>R.stopPropagation(),className:"text-primary-600 hover:text-primary-800 p-1.5",title:"Download file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),n&&s.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),t(k.id)},className:"text-red-600 hover:text-red-800 p-1.5",title:"Delete file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},k.id))});return e.length===0?s.jsx("p",{className:"text-slate-500 italic",children:"No files available"}):s.jsxs("div",{children:[a==="grid"?S():j(),N()]})};I2.propTypes={files:ie.arrayOf(ie.shape({id:ie.number.isRequired,file_type:ie.string.isRequired,file_name:ie.string.isRequired})).isRequired,onFileDelete:ie.func,canDelete:ie.bool,showDownload:ie.bool,layout:ie.oneOf(["grid","list"]),size:ie.oneOf(["small","medium","large"])};const jU=async(e,t,n)=>{try{const r=new FormData;for(const o of t)r.append("files",o);return(await Qe.post(`/api/files/upload/${e}`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n?o=>{const d=Math.round(o.loaded*100/o.total);n(d)}:void 0})).data}catch(r){throw console.error("Error uploading files:",r),r}};let AU={data:""},kU=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||AU,TU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,DU=/\/\*[^]*?\*\/|  +/g,w3=/\n+/g,Gi=(e,t)=>{let n="",r="",a="";for(let o in e){let d=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+d+";":r+=o[1]=="f"?Gi(d,o):o+"{"+Gi(d,o[1]=="k"?"":t)+"}":typeof d=="object"?r+=Gi(d,t?t.replace(/([^,])+/g,m=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,m):m?m+" "+v:v)):o):d!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Gi.p?Gi.p(o,d):o+":"+d+";")}return n+(t&&a?t+"{"+a+"}":a)+r},si={},h5=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+h5(e[n]);return t}return e},IU=(e,t,n,r,a)=>{let o=h5(e),d=si[o]||(si[o]=(v=>{let g=0,w=11;for(;g<v.length;)w=101*w+v.charCodeAt(g++)>>>0;return"go"+w})(o));if(!si[d]){let v=o!==e?e:(g=>{let w,N,S=[{}];for(;w=TU.exec(g.replace(DU,""));)w[4]?S.shift():w[3]?(N=w[3].replace(w3," ").trim(),S.unshift(S[0][N]=S[0][N]||{})):S[0][w[1]]=w[2].replace(w3," ").trim();return S[0]})(e);si[d]=Gi(a?{["@keyframes "+d]:v}:v,n?"":"."+d)}let m=n&&si.g?si.g:null;return n&&(si.g=si[d]),((v,g,w,N)=>{N?g.data=g.data.replace(N,v):g.data.indexOf(v)===-1&&(g.data=w?v+g.data:g.data+v)})(si[d],t,r,m),d},RU=(e,t,n)=>e.reduce((r,a,o)=>{let d=t[o];if(d&&d.call){let m=d(n),v=m&&m.props&&m.props.className||/^go/.test(m)&&m;d=v?"."+v:m&&typeof m=="object"?m.props?"":Gi(m,""):m===!1?"":m}return r+a+(d??"")},"");function vp(e){let t=this||{},n=e.call?e(t.p):e;return IU(n.unshift?n.raw?RU(n,[].slice.call(arguments,1),t.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(t.p):a),{}):n,kU(t.target),t.g,t.o,t.k)}let p5,Yx,$x;vp.bind({g:1});let Ci=vp.bind({k:1});function MU(e,t,n,r){Gi.p=t,p5=e,Yx=n,$x=r}function bo(e,t){let n=this||{};return function(){let r=arguments;function a(o,d){let m=Object.assign({},o),v=m.className||a.className;n.p=Object.assign({theme:Yx&&Yx()},m),n.o=/ *go\d+/.test(v),m.className=vp.apply(n,r)+(v?" "+v:""),t&&(m.ref=d);let g=e;return e[0]&&(g=m.as||e,delete m.as),$x&&g[0]&&$x(m),p5(g,m)}return t?t(a):a}}var OU=e=>typeof e=="function",Gx=(e,t)=>OU(e)?e(t):e,LU=(()=>{let e=0;return()=>(++e).toString()})(),PU=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),FU=20,m5=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,FU)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return m5(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},BU=[],mm={toasts:[],pausedAt:void 0},R2=e=>{mm=m5(mm,e),BU.forEach(t=>{t(mm)})},UU=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||LU()}),Rd=e=>(t,n)=>{let r=UU(t,e,n);return R2({type:2,toast:r}),r.id},mt=(e,t)=>Rd("blank")(e,t);mt.error=Rd("error");mt.success=Rd("success");mt.loading=Rd("loading");mt.custom=Rd("custom");mt.dismiss=e=>{R2({type:3,toastId:e})};mt.remove=e=>R2({type:4,toastId:e});mt.promise=(e,t,n)=>{let r=mt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let o=t.success?Gx(t.success,a):void 0;return o?mt.success(o,{id:r,...n,...n==null?void 0:n.success}):mt.dismiss(r),a}).catch(a=>{let o=t.error?Gx(t.error,a):void 0;o?mt.error(o,{id:r,...n,...n==null?void 0:n.error}):mt.dismiss(r)}),e};var qU=Ci`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,zU=Ci`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WU=Ci`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,HU=bo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${zU} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${WU} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,VU=Ci`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,YU=bo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${VU} 1s linear infinite;
`,$U=Ci`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,GU=Ci`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,QU=bo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$U} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${GU} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,XU=bo("div")`
  position: absolute;
`,KU=bo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ZU=Ci`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,JU=bo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ZU} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,eq=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?L.createElement(JU,null,t):t:n==="blank"?null:L.createElement(KU,null,L.createElement(YU,{...r}),n!=="loading"&&L.createElement(XU,null,n==="error"?L.createElement(HU,{...r}):L.createElement(QU,{...r})))},tq=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,nq=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,rq="0%{opacity:0;} 100%{opacity:1;}",sq="0%{opacity:1;} 100%{opacity:0;}",aq=bo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,iq=bo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,oq=(e,t)=>{let n=e.includes("top")?1:-1,[r,a]=PU()?[rq,sq]:[tq(n),nq(n)];return{animation:t?`${Ci(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ci(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};L.memo(({toast:e,position:t,style:n,children:r})=>{let a=e.height?oq(e.position||t||"top-center",e.visible):{opacity:0},o=L.createElement(eq,{toast:e}),d=L.createElement(iq,{...e.ariaProps},Gx(e.message,e));return L.createElement(aq,{className:e.className,style:{...a,...n,...e.style}},typeof r=="function"?r({icon:o,message:d}):L.createElement(L.Fragment,null,o,d))});MU(L.createElement);vp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const M2=({equipmentId:e,isOpen:t,onClose:n,onSuccess:r})=>{const[a,o]=L.useState([]),[d,m]=L.useState(!1),[v,g]=L.useState(0),[w,N]=L.useState([]),S=50*1024*1024,j=5,k=L.useCallback((P,O)=>{o(W=>[...W,...P]);const V=O.map(W=>W.file.size>S?`${W.file.name} is too large. Maximum file size is 50MB.`:`${W.file.name} is not a supported file type.`);V.length>0&&N(W=>[...W,...V])},[]),{getRootProps:R,getInputProps:T,isDragActive:I}=Id({onDrop:k,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"audio/mpeg":[".mp3"],"application/pdf":[".pdf"]},maxFiles:j,maxSize:S}),A=P=>{o(O=>O.filter((V,W)=>W!==P))},M=()=>{o([]),N([])},B=P=>{switch(P){case"image/jpeg":case"image/png":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"audio/mpeg":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})});case"application/pdf":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})})}},G=async()=>{if(a.length===0){mt.error("Please select at least one file to upload");return}m(!0),g(0);try{const P=await jU(e,a,O=>g(O));mt.success(`Successfully uploaded ${P.files.length} files`),o([]),N([]),r&&r(P.files),n()}catch(P){console.error("Error uploading files:",P),mt.error("Failed to upload files. Please try again.")}finally{m(!1)}};return t?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[s.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Upload Documents"}),s.jsxs("div",{...R(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer mb-4 ${I?"border-primary-500 bg-primary-50":"border-slate-300"}`,children:[s.jsx("input",{...T()}),I?s.jsx("p",{className:"text-primary-500",children:"Drop the files here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop files here, or click to select files"}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Accepted file types: JPEG, PNG, MP3, PDF (Max: ",j," files, ",Math.round(S/(1024*1024)),"MB each)"]})]})]}),w.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-red-500 mb-1",children:"Errors:"}),s.jsx("ul",{className:"text-sm text-red-500 list-disc pl-5",children:w.map((P,O)=>s.jsx("li",{children:P},O))})]}),a.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Selected Files:"}),s.jsx("button",{type:"button",onClick:M,className:"text-sm text-red-500 hover:text-red-700",children:"Clear All"})]}),s.jsx("ul",{className:"divide-y divide-slate-200 border border-slate-200 rounded-md overflow-hidden",children:a.map((P,O)=>s.jsxs("li",{className:"flex items-center justify-between p-3 hover:bg-slate-50",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:B(P.type)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium truncate max-w-xs",title:P.name,children:P.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:[(P.size/1024).toFixed(1)," KB"]})]})]}),s.jsx("button",{type:"button",onClick:()=>A(O),className:"text-red-500 hover:text-red-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},O))})]}),d&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${v}%`}})}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Uploading: ",v,"%"]})]})]})})}),s.jsxs("div",{className:"bg-slate-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[s.jsx(be,{variant:"primary",size:"sm",onClick:G,disabled:d||a.length===0,className:"w-full sm:w-auto sm:ml-3",children:d?"Uploading...":"Upload"}),s.jsx(be,{variant:"outline",size:"sm",onClick:n,disabled:d,className:"mt-3 w-full sm:mt-0 sm:w-auto",children:"Cancel"})]})]})]})}):null};M2.propTypes={equipmentId:ie.number.isRequired,isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,onSuccess:ie.func};const lq=({isOpen:e,onClose:t,equipment:n,availabilityData:r})=>{var V;const a=cn(),[o,d]=L.useState(""),[m,v]=L.useState(1),[g,w]=L.useState(""),[N,S]=L.useState({}),[j,k]=L.useState(null),[R,T]=L.useState(!1),{data:I,isLoading:A}=ct({queryKey:["shows"],queryFn:async()=>(await Qe.get("/api/shows")).data,enabled:e}),{data:M,isLoading:B}=ct({queryKey:["equipmentShowAllocations",n==null?void 0:n.id],queryFn:async()=>(await Qe.get(`/api/show-equipment/equipment/${n.id}/shows`)).data,enabled:!!(n!=null&&n.id)&&e}),G=W=>M==null?void 0:M.some(ee=>ee.show_id===parseInt(W));L.useEffect(()=>{e&&(d(""),v(1),w(""),S({}),k(null),T(!1),a.invalidateQueries(["equipmentAvailability",n==null?void 0:n.id]),a.invalidateQueries(["shows"]))},[e,a,n==null?void 0:n.id]),L.useEffect(()=>{o&&(async()=>{var ee;if(o&&(n!=null&&n.id))try{console.log("Checking for existing allocation:",{showId:o,equipmentId:n.id});const ce=await Qe.get(`/api/show-equipment/show/${o}/equipment/${n.id}`);ce.data?(console.log("Found existing allocation:",ce.data),k(ce.data),v(ce.data.quantity_needed||ce.data.quantity_allocated||1),w(ce.data.notes||""),T(!0)):(console.log("No existing allocation found"),k(null),v(1),w(""),T(!1))}catch(ce){console.log("No existing allocation found (error):",(ee=ce.response)==null?void 0:ee.status),k(null),v(1),w(""),T(!1)}})()},[o,n==null?void 0:n.id]);const P=Tt({mutationFn:async W=>R&&j?(console.log("Updating allocation:",{allocationId:j.id,quantity:W.quantity,notes:W.notes}),(await Qe.put(`/api/show-equipment/allocation/${j.id}`,{quantityNeeded:W.quantity,notes:W.notes})).data):(console.log("Creating new allocation:",{showId:W.showId,equipmentId:n.id,quantity:W.quantity,notes:W.notes}),(await Qe.post(`/api/show-equipment/show/${W.showId}/equipment`,{equipmentId:n.id,quantityNeeded:W.quantity,notes:W.notes})).data),onSuccess:()=>{const W=R?"Equipment allocation updated successfully!":"Equipment allocated to show successfully!";mt.success(W),a.invalidateQueries(["equipmentAvailability",n.id]),a.invalidateQueries(["equipmentShowAllocations",n.id]),a.invalidateQueries(["showEquipment"]),a.invalidateQueries(["shows"]),t()},onError:W=>{var ce,ne;const ee=R?"Failed to update equipment allocation":"Failed to allocate equipment";mt.error(((ne=(ce=W.response)==null?void 0:ce.data)==null?void 0:ne.message)||ee)}}),O=W=>{W.preventDefault();const ee={};o||(ee.show="Please select a show"),(!m||m<1)&&(ee.quantity="Quantity must be at least 1");const ce=R&&j?r.available_quantity+(j.quantity_allocated||j.quantity_needed||0):r.available_quantity;if(r&&m>ce&&(ee.quantity=R?`Maximum ${ce} units allowed (${r.available_quantity} available + ${j.quantity_allocated||j.quantity_needed||0} currently allocated)`:`Only ${r.available_quantity} units available`),Object.keys(ee).length>0){S(ee);return}P.mutate({showId:o,quantity:parseInt(m),notes:g})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:R?"Update Show Allocation":"Allocate to Show"}),R&&j&&s.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Updating existing allocation for this equipment"})]}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx(Re,{className:"mb-6",children:s.jsxs(Re.Body,{children:[s.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"Equipment"}),s.jsxs("p",{className:"text-sm text-slate-600",children:[n.brand," ",n.model," • ",n.serial_number]}),R&&j&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Current Allocation"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:"Status:"}),s.jsx("span",{className:"ml-2 font-medium text-blue-800",children:j.status})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:"Allocated:"}),s.jsx("span",{className:"ml-2 font-medium text-blue-800",children:j.quantity_allocated})]})]})]}),r&&s.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3 text-center bg-slate-50 p-3 rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.total_quantity}),s.jsx("div",{className:"text-xs text-slate-600",children:"Total"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-orange-600",children:parseInt(r.total_allocated)+parseInt(r.show_allocated)}),s.jsx("div",{className:"text-xs text-slate-600",children:"Allocated"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-lg font-bold ${r.available_quantity>0?"text-green-600":"text-red-600"}`,children:r.available_quantity}),s.jsx("div",{className:"text-xs text-slate-600",children:"Available"})]})]})]})}),s.jsxs("form",{onSubmit:O,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"show-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Select Show *"}),A?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading shows..."}):s.jsxs("select",{id:"show-select",name:"show",value:o,onChange:W=>d(W.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${N.show?"border-red-300":"border-slate-300"}`,children:[s.jsx("option",{value:"",children:"Choose a show..."}),(V=I==null?void 0:I.shows)==null?void 0:V.map(W=>s.jsxs("option",{value:W.id,children:[W.name," ",W.date?`- ${new Date(W.date).toLocaleDateString()}`:"",G(W.id)?" (Already allocated)":""]},W.id))]}),N.show&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.show})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-slate-700 mb-2",children:"Quantity *"}),s.jsx(lt,{id:"quantity",name:"quantity",type:"number",min:"1",max:(r==null?void 0:r.available_quantity)||999,value:m,onChange:W=>v(W.target.value),className:N.quantity?"border-red-300":""}),N.quantity&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.quantity})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),s.jsx("textarea",{id:"notes",name:"notes",value:g,onChange:W=>w(W.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Optional notes about this allocation..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(be,{type:"button",variant:"outline",onClick:t,disabled:P.isLoading,children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:P.isLoading||!R&&r&&r.available_quantity===0,className:"flex items-center",children:P.isLoading?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),R?"Updating...":"Allocating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),R?"Update Allocation":"Allocate to Show"]})})]})]})]})})}):null},b3=(e,t=!1)=>`/api/files/${e}${t?"?thumbnail=true":""}`,cq=()=>{var de;const{id:e}=$h(),t=Gr(),n=cn(),{user:r}=lr(),[a,o]=L.useState(!1),[d,m]=L.useState(!1),[v,g]=L.useState(!1),[w,N]=L.useState(!1),[S,j]=L.useState("details"),[k,R]=L.useState("grid"),{data:T,isLoading:I,isError:A,error:M}=ct({queryKey:["equipment",e],queryFn:()=>op(e)}),{data:B,isLoading:G}=ct({queryKey:["equipmentAvailability",e],queryFn:async()=>(await Qe.get(`/api/inventory/equipment/${e}/availability`)).data,enabled:!!e}),{data:P,isLoading:O}=ct({queryKey:["equipmentShowAllocations",e],queryFn:async()=>(await Qe.get(`/api/show-equipment/equipment/${e}/shows`)).data,enabled:!!e}),V=Tt({mutationFn:()=>iM(e),onSuccess:()=>{n.invalidateQueries(["equipment"]),t("/equipment")}}),W=()=>{t(`/equipment/${e}/edit`)},ee=fe=>{n.invalidateQueries(["equipment",e]),st.success(`Successfully uploaded ${fe.length} file(s)`)},ce=()=>{o(!0)},ne=()=>{V.mutate(),o(!1)},te=()=>{o(!1)},Ne=()=>{t("/equipment")};if(I)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Details"})}),s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})]});if(A)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Details"})}),s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading equipment"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:(M==null?void 0:M.message)||"Failed to load equipment details"})}),s.jsx("div",{className:"mt-4",children:s.jsx(be,{variant:"outline",size:"sm",onClick:Ne,children:"Back to Equipment List"})})]})]})})]});const ae=fe=>{switch(fe){case"available":return"success";case"in-use":return"primary";case"maintenance":return"warning";case"unavailable":return"secondary";case"broken":return"danger";default:return"secondary"}},Ae=T.reference_image_id?parseInt(T.reference_image_id):null,me=(de=T.files)==null?void 0:de.find(fe=>fe.id===Ae);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 bg-white p-4 rounded-lg shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-primary-100 p-2 rounded-lg mr-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Details"}),s.jsxs("p",{className:"text-slate-500 text-sm",children:[T.brand," ",T.model," • ",T.serial_number]})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs(be,{variant:"outline",onClick:Ne,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to List"]}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsxs(s.Fragment,{children:[s.jsxs(be,{variant:"outline",onClick:()=>N(!0),className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Allocate to Show"]}),s.jsxs(be,{variant:"primary",onClick:W,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]}),(r==null?void 0:r.role)==="admin"&&s.jsxs(be,{variant:"danger",onClick:ce,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{type:"button",onClick:()=>j("details"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${S==="details"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${S==="details"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Details"]}),s.jsxs("button",{type:"button",onClick:()=>j("documents"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${S==="documents"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${S==="documents"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Documents & Attachments"]}),s.jsxs("button",{type:"button",onClick:()=>j("allocations"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${S==="allocations"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${S==="allocations"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Show Allocations"]}),s.jsxs("button",{type:"button",onClick:()=>j("history"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${S==="history"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${S==="history"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Movement History"]})]})}),s.jsxs("div",{className:"p-6",children:[S==="details"&&s.jsx("div",{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:s.jsx("div",{className:"md:col-span-1",children:s.jsxs(Re,{className:"h-full",children:[s.jsx(Re.Header,{className:"bg-slate-50",children:s.jsxs(Re.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Equipment Information"]})}),s.jsxs(Re.Body,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Category"}),s.jsx("p",{className:"mt-1 text-base font-medium text-slate-900",children:T.category||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Type"}),s.jsx("p",{className:"mt-1 text-base font-medium text-slate-900",children:T.type})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Brand"}),s.jsx("p",{className:"mt-1 text-base font-medium text-slate-900",children:T.brand})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Model"}),s.jsx("p",{className:"mt-1 text-base font-medium text-slate-900",children:T.model})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Serial Number"}),s.jsx("p",{className:"mt-1 text-base font-medium text-slate-900",children:T.serial_number})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Status"}),s.jsx("div",{className:"mt-1",children:T.status&&s.jsx(ws,{variant:ae(T.status),size:"md",children:T.status.charAt(0).toUpperCase()+T.status.slice(1).replace("-"," ")})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Quantity & Availability"}),B?s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center bg-slate-50 p-3 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:B.total_quantity}),s.jsx("div",{className:"text-xs text-slate-600",children:"Total"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-blue-600",children:B.show_allocated}),s.jsx("div",{className:"text-xs text-slate-600",children:"In Shows"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-orange-600",children:B.total_allocated}),s.jsx("div",{className:"text-xs text-slate-600",children:"Inventory"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-lg font-bold ${B.available_quantity>0?"text-green-600":"text-red-600"}`,children:B.available_quantity}),s.jsx("div",{className:"text-xs text-slate-600",children:"Available"})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${B.available_quantity>0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.max(B.available_quantity/B.total_quantity*100,0)}%`}})}),s.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[Math.round(B.available_quantity/B.total_quantity*100),"% available"]})]})]}):s.jsxs("p",{className:"mt-1 text-base font-medium text-slate-900",children:[T.quantity||1," item",(T.quantity||1)!==1?"s":"",G&&s.jsx("span",{className:"text-slate-500 ml-2",children:"(Loading availability...)"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500",children:"Location"}),s.jsx("p",{className:"mt-1 text-base font-medium text-slate-900",children:T.location||"Not specified"})]})]}),T.description&&s.jsxs("div",{className:"mt-8 border-t border-slate-200 pt-6",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),s.jsx("h3",{className:"text-sm font-medium text-slate-700",children:"Description"})]}),s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-base text-slate-800 whitespace-pre-line",children:T.description})})]})]})]})})})}),S==="documents"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Documents & Attachments"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsxs(be,{variant:"outline",size:"sm",className:"ml-auto flex items-center",onClick:()=>g(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})]}),T.files&&T.files.filter(fe=>!me||fe.id!==me.id).length>0?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[T.files.filter(fe=>!me||fe.id!==me.id).length,T.files.filter(fe=>!me||fe.id!==me.id).length===1?" file":" files"," attached"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${k==="grid"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>R("grid"),children:s.jsx(Fc,{className:"h-4 w-4"})}),s.jsx("button",{className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${k==="list"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>R("list"),children:s.jsx(Pc,{className:"h-4 w-4"})})]})]}),s.jsx(I2,{files:T.files.filter(fe=>!me||fe.id!==me.id),layout:k,size:"medium",showDownload:!0,canDelete:!1})]}):s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-8 text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No documents attached to this equipment"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsx("div",{className:"mt-4",children:s.jsxs(be,{variant:"outline",size:"sm",className:"flex items-center mx-auto",onClick:()=>g(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})})]})]}),S==="allocations"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Show Allocations"})]}),O?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-slate-600",children:"Loading show allocations..."})]}):P&&P.length>0?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[P.length," show",P.length!==1?"s":""," using this equipment"]})]})}),s.jsx("div",{className:"divide-y divide-slate-200",children:P.map(fe=>s.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-slate-800",children:fe.show_name}),s.jsx("p",{className:"text-sm text-slate-600",children:fe.show_date?new Date(fe.show_date).toLocaleDateString():"No date set"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fe.status==="requested"?"bg-blue-100 text-blue-800":fe.status==="allocated"?"bg-yellow-100 text-yellow-800":fe.status==="checked-out"?"bg-orange-100 text-orange-800":fe.status==="in-use"?"bg-red-100 text-red-800":fe.status==="returned"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:fe.status})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Quantity Needed:"}),s.jsx("span",{className:"ml-2 font-medium text-slate-800",children:fe.quantity_needed})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Quantity Allocated:"}),s.jsx("span",{className:"ml-2 font-medium text-slate-800",children:fe.quantity_allocated})]})]}),fe.notes&&s.jsxs("div",{className:"mt-3 text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Notes:"}),s.jsx("p",{className:"text-slate-800 mt-1 bg-slate-50 p-2 rounded",children:fe.notes})]}),fe.venue&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Venue:"}),s.jsx("span",{className:"ml-2 text-slate-800",children:fe.venue})]})]},fe.id))})]}):s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-8 text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No show allocations"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"This equipment is not currently allocated to any shows"})]})]}),S==="history"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Movement History"})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Equipment movement log"})]}),s.jsx(d5,{equipmentId:e})]})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Reference Image"]})}),s.jsx("div",{className:"p-4 flex flex-col items-center justify-center",children:me?s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"relative pb-4",children:[s.jsx("img",{src:b3(me.id,!0),alt:`${T.brand} ${T.model}`,className:"w-full h-auto object-contain rounded-md",onError:fe=>{console.error("Error loading thumbnail, falling back to original image"),fe.target.src=b3(me.id),fe.target.onerror=null}}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsx("button",{onClick:()=>m(!0),className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 transition-colors",title:"Change reference image",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),s.jsx("div",{className:"text-sm text-gray-500 text-center",children:me.file_name})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No reference image"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsxs("button",{onClick:()=>m(!0),className:"mt-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Reference Image"]})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 h-full",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quick Info"]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Category"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:T.category||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Type"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:T.type})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Status"})]}),s.jsx("div",{children:T.status&&s.jsx(ws,{variant:ae(T.status),size:"md",children:T.status.charAt(0).toUpperCase()+T.status.slice(1).replace("-"," ")})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Quantity"})]}),s.jsxs("p",{className:"text-sm font-medium text-slate-800",children:[T.quantity||1," item",(T.quantity||1)!==1?"s":""]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Location"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:T.location||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Serial Number"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:T.serial_number})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs(Re,{className:"h-full",children:[s.jsx(Re.Header,{className:"bg-slate-50",children:s.jsxs(Re.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Metadata"]})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created By"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:T.created_by||"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created At"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:T.created_at?new Date(T.created_at).toLocaleString():"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Last Updated"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:T.updated_at?new Date(T.updated_at).toLocaleString():"Never"})]})]}),T.locationDetails&&s.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-700 mb-3 flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Location Details"]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-slate-800",children:T.locationDetails.name}),T.locationDetails.street&&s.jsx("p",{className:"text-slate-600 mt-1",children:T.locationDetails.street}),(T.locationDetails.postal_code||T.locationDetails.city)&&s.jsxs("p",{className:"text-slate-600",children:[T.locationDetails.postal_code&&`${T.locationDetails.postal_code} `,T.locationDetails.city]}),(T.locationDetails.region||T.locationDetails.country)&&s.jsxs("p",{className:"text-slate-600",children:[T.locationDetails.region&&`${T.locationDetails.region}, `,T.locationDetails.country]})]})]})]})})]})})]}),a&&s.jsx(f5,{isOpen:a,title:"Delete Equipment",message:"Are you sure you want to delete this equipment? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",onConfirm:ne,onCancel:te,isDestructive:!0}),s.jsx(D2,{isOpen:d,onClose:()=>m(!1),equipmentId:e,existingImage:me}),s.jsx(M2,{equipmentId:parseInt(e),isOpen:v,onClose:()=>g(!1),onSuccess:ee}),s.jsx(lq,{isOpen:w,onClose:()=>N(!1),equipment:T,availabilityData:B})]})},N3=(e,t=!1)=>`/api/files/${e}${t?"?thumbnail=true":""}`,uq=()=>{var Be,Ye,Je;const{id:e}=$h(),t=Gr(),n=cn();lr();const[r,a]=L.useState({type_id:"",category_id:"",category:"",brand:"",model:"",serial_number:"",status:"available",location:"",location_id:"",description:"",reference_image_id:"",quantity:1}),[o,d]=L.useState([]),[m,v]=L.useState([]);L.useState(0);const[g,w]=L.useState(""),[N,S]=L.useState(!1),[j,k]=L.useState(!1),[R,T]=L.useState("details"),[I,A]=L.useState("grid"),{data:M}=ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5}),{data:B}=ct({queryKey:["categories"],queryFn:vl,staleTime:3e5}),{data:G}=ct({queryKey:["locations"],queryFn:wo,staleTime:3e5}),P=["available","in-use","maintenance","unavailable","broken"],{data:O,isLoading:V,isError:W,error:ee}=ct({queryKey:["equipment",e],queryFn:()=>op(e),onSuccess:Te=>{console.log("Equipment data loaded:",Te),console.log("Location ID:",Te.location_id,typeof Te.location_id),a({type_id:Te.type_id?Te.type_id.toString():"",category_id:Te.category_id?Te.category_id.toString():"",category:Te.category||"",brand:Te.brand||"",model:Te.model||"",serial_number:Te.serial_number||"",status:Te.status||"available",location:Te.location||"",location_id:Te.location_id?Te.location_id.toString():"",description:Te.description||"",reference_image_id:Te.reference_image_id?Te.reference_image_id.toString():"",quantity:Te.quantity||1}),Te.locationDetails&&console.log("Location details:",Te.locationDetails)}}),ce=Tt({mutationFn:async Te=>{const $e=Object.fromEntries(Object.entries(Te.equipment).filter(([nt,De])=>De!=null));return YC(e,$e,Te.filesToUpload,Te.filesToDelete)},onSuccess:()=>{n.invalidateQueries(["equipment"]),t(`/equipment/${e}`)},onError:Te=>{var $e,nt;console.error("Error updating equipment:",Te),w(((nt=($e=Te.response)==null?void 0:$e.data)==null?void 0:nt.message)||"Failed to update equipment")}}),ne=Te=>{const{name:$e,value:nt}=Te.target;let De={...r,[$e]:nt};if($e==="category_id"&&nt&&(B!=null&&B.categories)){const Oe=B.categories.find(at=>at.id.toString()===nt);Oe&&(console.log("Selected category:",Oe),De={...De,category_id:nt,category:Oe.name})}if($e==="location_id"&&nt){const Oe=G==null?void 0:G.locations.find(at=>at.id.toString()===nt);Oe&&(console.log("Selected location:",Oe),De={...De,location_id:nt,location:Oe.name},Oe.name.toLowerCase()==="lager"?(De.status="available",console.log('Setting status to "available" because location is Lager')):De.status==="available"&&(De.status="in-use",console.log(`Setting status to "in-use" because location is not Lager (${Oe.name})`)))}else $e==="location"&&nt&&(De={...De,location:nt,location_id:""},nt.toLowerCase()==="lager"?(De.status="available",console.log('Setting status to "available" because custom location is Lager')):De.status==="available"&&(De.status="in-use",console.log(`Setting status to "in-use" because custom location is not Lager (${nt})`)));if($e==="quantity"){const Oe=parseInt(nt)||1;De.quantity=Math.max(1,Oe),console.log(`Setting quantity to: ${De.quantity}`)}else $e==="status"&&(console.log(`User manually changed status to: ${nt}`),(r.location||"").toLowerCase()==="lager"&&nt!=="available"&&(console.log('Forcing status back to "available" because location is Lager'),De.status="available"));a(De)},te=Te=>{r.reference_image_id===Te.toString()&&a({...r,reference_image_id:""}),v($e=>[...$e,Te])},Ne=Te=>{if(Te.preventDefault(),!r.type_id||!r.brand||!r.model||!r.serial_number){w("Type, brand, model, and serial number are required");return}const $e=o.find((at,Ht)=>r.reference_image_id==="new"),nt=$e?o.filter(at=>at!==$e):o,De=r.reference_image_id==="",Oe={...r,quantity:parseInt(r.quantity)||1,type_id:r.type_id?parseInt(r.type_id):null,category_id:r.category_id?parseInt(r.category_id):null,location_id:r.location_id?parseInt(r.location_id):null,reference_image_id:r.reference_image_id==="new"?"new":r.reference_image_id};console.log("Submitting equipment data:",Oe),ce.mutate({equipment:Oe,filesToUpload:nt,filesToDelete:m,referenceImageFile:$e||null,removeReferenceImage:De})},ae=()=>{t(`/equipment/${e}`)},Ae=Te=>{switch(Te){case"available":return"success";case"in-use":return"primary";case"maintenance":return"warning";case"unavailable":return"secondary";case"broken":return"danger";default:return"secondary"}},me=Te=>{n.invalidateQueries(["equipment",e]),st.success(`Successfully uploaded ${Te.length} file(s)`)};if(V)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Edit Equipment"})}),s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})]});if(W)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Edit Equipment"})}),s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading equipment"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:(ee==null?void 0:ee.message)||"Failed to load equipment details"})}),s.jsx("div",{className:"mt-4",children:s.jsx(be,{variant:"outline",size:"sm",onClick:ae,children:"Back to Details"})})]})]})})]});const de=O!=null&&O.reference_image_id?parseInt(O.reference_image_id):null,fe=(Be=O==null?void 0:O.files)==null?void 0:Be.find(Te=>Te.id===de);return s.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 bg-white p-4 rounded-lg shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-primary-100 p-2 rounded-lg mr-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Edit Equipment"}),s.jsxs("p",{className:"text-slate-500 text-sm",children:[r.brand," ",r.model," • ",r.serial_number]})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs(be,{type:"button",variant:"outline",onClick:ae,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Details"]}),s.jsxs(be,{type:"submit",variant:"primary",disabled:ce.isLoading,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),ce.isLoading?"Saving...":"Save Changes"]})]})]}),g&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:g})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{type:"button",onClick:()=>T("details"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${R==="details"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${R==="details"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Details"]}),s.jsxs("button",{type:"button",onClick:()=>T("documents"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${R==="documents"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${R==="documents"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Documents & Attachments"]}),s.jsxs("button",{type:"button",onClick:()=>T("history"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${R==="history"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${R==="history"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Movement History"]})]})}),s.jsxs("div",{className:"p-6",children:[R==="details"&&s.jsx("div",{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:s.jsx("div",{className:"md:col-span-1",children:s.jsxs(Re,{className:"h-full",children:[s.jsx(Re.Header,{className:"bg-slate-50",children:s.jsxs(Re.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Equipment Information"]})}),s.jsxs(Re.Body,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsx(Ns,{id:"category_id",name:"category_id",label:"Category",value:r.category_id||"",onChange:ne,options:[{value:"",label:"Select Category"},...((B==null?void 0:B.categories)||[]).map(Te=>({value:Te.id.toString(),label:Te.name}))]})}),s.jsx("div",{children:s.jsx(Ns,{id:"type_id",name:"type_id",label:"Type",value:r.type_id||"",onChange:ne,options:[{value:"",label:"Select Type"},...((M==null?void 0:M.types)||[]).map(Te=>({value:Te.id.toString(),label:Te.name}))],required:!0})}),s.jsx("div",{children:s.jsx(lt,{id:"brand",name:"brand",label:"Brand",value:r.brand,onChange:ne,placeholder:"Enter brand",required:!0})}),s.jsx("div",{children:s.jsx(lt,{id:"model",name:"model",label:"Model",value:r.model,onChange:ne,placeholder:"Enter model",required:!0})}),s.jsx("div",{children:s.jsx(lt,{id:"serial_number",name:"serial_number",label:"Serial Number",value:r.serial_number,onChange:ne,placeholder:"Enter serial number",required:!0})}),s.jsx("div",{children:s.jsx(Ns,{id:"status",name:"status",label:"Status",value:r.status,onChange:ne,options:P.map(Te=>({value:Te,label:Te.charAt(0).toUpperCase()+Te.slice(1).replace("-"," ")})),required:!0})}),s.jsx("div",{children:s.jsx(lt,{id:"quantity",name:"quantity",label:"Quantity",type:"number",min:"1",value:r.quantity||1,onChange:ne,placeholder:"Enter quantity",required:!0,helpText:"Number of items (minimum: 1)"})}),s.jsxs("div",{children:[s.jsx(Ns,{id:"location_id",name:"location_id",label:"Location",value:r.location_id?r.location_id.toString():"",onChange:ne,options:[{value:"",label:"Select Location"},...((G==null?void 0:G.locations)||[]).map(Te=>{let $e=Te.name;const nt=[];return Te.city&&nt.push(Te.city),Te.region&&nt.push(Te.region),Te.country&&nt.push(Te.country),nt.length>0&&($e+=` (${nt.join(", ")})`),{value:Te.id.toString(),label:$e}})]}),s.jsx("div",{className:"mt-2",children:s.jsx(lt,{id:"location",name:"location",label:"Custom Location (if not in list)",value:r.location||"",onChange:ne,placeholder:"Enter custom location"})})]})]}),s.jsxs("div",{className:"mt-8 border-t border-slate-200 pt-6",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),s.jsx("label",{htmlFor:"description",className:"text-sm font-medium text-slate-700",children:"Description"})]}),s.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:ne,rows:"4",className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Enter description"})]})]})]})})})}),R==="documents"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Documents & Attachments"}),s.jsxs(be,{type:"button",variant:"outline",size:"sm",className:"ml-auto flex items-center",onClick:()=>k(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})]}),O!=null&&O.files&&O.files.filter(Te=>!fe||Te.id!==fe.id).length>0?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[O.files.filter(Te=>!fe||Te.id!==fe.id).length,O.files.filter(Te=>!fe||Te.id!==fe.id).length===1?" file":" files"," attached"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${I==="grid"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>A("grid"),children:s.jsx(Fc,{className:"h-4 w-4"})}),s.jsx("button",{type:"button",className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${I==="list"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>A("list"),children:s.jsx(Pc,{className:"h-4 w-4"})})]})]}),s.jsx(I2,{files:O.files.filter(Te=>!fe||Te.id!==fe.id),layout:I,size:"medium",showDownload:!0,canDelete:!0,onDelete:te})]}):s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-8 text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No documents attached to this equipment"}),s.jsx("div",{className:"mt-4",children:s.jsxs(be,{type:"button",variant:"outline",size:"sm",className:"flex items-center mx-auto",onClick:()=>k(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})})]})]}),R==="history"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Movement History"})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Equipment movement log"})]}),s.jsx(d5,{equipmentId:e})]})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Reference Image"]})}),s.jsx("div",{className:"p-4 flex flex-col items-center justify-center",children:fe?s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"relative pb-4",children:[s.jsx("img",{src:N3(fe.id,!0),alt:`${r.brand} ${r.model}`,className:"w-full h-auto object-contain rounded-md",onError:Te=>{console.error("Error loading thumbnail, falling back to original image"),Te.target.src=N3(fe.id),Te.target.onerror=null}}),s.jsx("button",{type:"button",onClick:()=>S(!0),className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 transition-colors",title:"Change reference image",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),s.jsx("div",{className:"text-sm text-gray-500 text-center",children:fe.file_name})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No reference image"}),s.jsxs("button",{type:"button",onClick:()=>S(!0),className:"mt-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Reference Image"]})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 h-full",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quick Info Preview"]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Category"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:r.category||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Type"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:((Je=(Ye=M==null?void 0:M.types)==null?void 0:Ye.find(Te=>Te.id.toString()===r.type_id))==null?void 0:Je.name)||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Status"})]}),s.jsx("div",{children:r.status&&s.jsx(ws,{variant:Ae(r.status),size:"md",children:r.status.charAt(0).toUpperCase()+r.status.slice(1).replace("-"," ")})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Quantity"})]}),s.jsxs("p",{className:"text-sm font-medium text-slate-800",children:[r.quantity||1," item",(r.quantity||1)!==1?"s":""]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Location"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:r.location||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Serial Number"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:r.serial_number})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs(Re,{className:"h-full",children:[s.jsx(Re.Header,{className:"bg-slate-50",children:s.jsxs(Re.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Metadata"]})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created By"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:(O==null?void 0:O.created_by)||"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created At"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:O!=null&&O.created_at?new Date(O.created_at).toLocaleString():"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Last Updated"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:O!=null&&O.updated_at?new Date(O.updated_at).toLocaleString():"Never"})]})]})]})})]})})]}),s.jsx(D2,{isOpen:N,onClose:()=>S(!1),equipmentId:e,existingImage:fe}),s.jsx(M2,{equipmentId:parseInt(e),isOpen:j,onClose:()=>k(!1),onSuccess:me})]})},dq=({onFileSelect:e,uploadProgress:t=0,existingFiles:n=[],onFileDelete:r,multiple:a=!1,maxFiles:o=5,maxFileSize:d=50*1024*1024})=>{const[m,v]=L.useState([]),[g,w]=L.useState({}),[N,S]=L.useState([]);L.useEffect(()=>{Object.values(g).forEach(O=>{O&&O.startsWith("blob:")&&URL.revokeObjectURL(O)});const P={};return m.forEach((O,V)=>{O.type.startsWith("image/")&&(P[`new-${V}`]=URL.createObjectURL(O))}),n.forEach(O=>{O.file_type==="image"&&(P[`existing-${O.id}`]=`/api/files/${O.id}`)}),w(P),()=>{Object.values(P).forEach(O=>{O&&O.startsWith("blob:")&&URL.revokeObjectURL(O)})}},[m,n]);const j=P=>{const O=[],V=[];return P.forEach(W=>{if(W.size>d){O.push(`${W.name} exceeds the maximum file size of ${Math.round(d/(1024*1024))}MB`);return}if(!["image/jpeg","image/png","audio/mpeg","application/pdf"].includes(W.type)){O.push(`${W.name} has an unsupported file type. Only JPEG, PNG, MP3, and PDF files are allowed.`);return}V.push(W)}),{validFiles:V,errors:O}},k=L.useCallback((P,O)=>{if(O&&O.length>0){const ee=O.map(ce=>`${ce.file.name}: ${ce.errors.map(ne=>ne.message).join(", ")}`);S(ee)}else S([]);const{validFiles:V,errors:W}=j(P);if(W.length>0&&S(ee=>[...ee,...W]),a&&m.length+V.length>o){S(ce=>[...ce,`You can only upload a maximum of ${o} files.`]);const ee=o-m.length;if(ee>0){const ce=V.slice(0,ee);v(ne=>[...ne,...ce]),e(ce)}}else v(a?ee=>[...ee,...V]:V),e(V)},[e,m,a,o,d]),R=P=>{const O=[...m];O.splice(P,1),v(O),e(a?O:O.length>0?[O[0]]:[]),S([])},T=P=>{if(r){console.log(`FileUpload: Deleting file with ID ${P}`);try{r(P)}catch(O){console.error(`Error deleting file with ID ${P}:`,O)}}else console.warn(`FileUpload: No onFileDelete handler provided for file ID ${P}`)},{getRootProps:I,getInputProps:A,isDragActive:M,fileRejections:B}=Id({onDrop:k,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"audio/mpeg":[".mp3"],"application/pdf":[".pdf"]},maxFiles:a?o:1,multiple:a,maxSize:d}),G=P=>{switch(P){case"image/jpeg":case"image/png":case"image":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"audio/mpeg":case"audio":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})});case"application/pdf":case"pdf":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})})}};return s.jsxs("div",{children:[s.jsxs("div",{...I(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer ${M?"border-primary-500 bg-primary-50":"border-slate-300"}`,children:[s.jsx("input",{...A()}),M?s.jsx("p",{className:"text-primary-500",children:"Drop the files here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop files here, or click to select files"}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Accepted file types: JPEG, PNG, MP3, PDF (Max: ",o," files, ",Math.round(d/(1024*1024)),"MB each)"]})]})]}),N.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"File validation errors:"}),s.jsx("ul",{className:"list-disc pl-5 text-xs text-red-700",children:N.map((P,O)=>s.jsx("li",{children:P},O))})]}),m.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Files to upload:"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:m.map((P,O)=>s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 flex flex-col",children:[P.type.startsWith("image/")?s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 overflow-hidden flex items-center justify-center",children:g[`new-${O}`]?s.jsx("img",{src:g[`new-${O}`],alt:P.name,className:"max-h-full max-w-full object-contain"}):s.jsx("div",{className:"animate-pulse bg-slate-200 w-full h-full"})}):s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 flex items-center justify-center",children:s.jsx("div",{className:"text-4xl",children:G(P.type)})}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:P.name,children:P.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:[(P.size/(1024*1024)).toFixed(2)," MB"]})]}),s.jsx("button",{type:"button",onClick:()=>R(O),className:"ml-2 text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50","aria-label":`Remove ${P.name}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})]},O))})]}),n.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Existing files:"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:n.map(P=>s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 flex flex-col",children:[P.file_type==="image"?s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 overflow-hidden flex items-center justify-center",children:g[`existing-${P.id}`]?s.jsx("img",{src:g[`existing-${P.id}`],alt:P.file_name,className:"max-h-full max-w-full object-contain"}):s.jsx("div",{className:"animate-pulse bg-slate-200 w-full h-full"})}):P.file_type==="audio"?s.jsxs("div",{className:"h-32 bg-slate-100 rounded-md mb-2 flex flex-col items-center justify-center p-2",children:[s.jsx("div",{className:"text-4xl mb-2",children:G(P.file_type)}),s.jsxs("audio",{controls:!0,className:"w-full max-w-[200px]",children:[s.jsx("source",{src:`/api/files/${P.id}`,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 flex items-center justify-center",children:s.jsx("div",{className:"text-4xl",children:G(P.file_type)})}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:P.file_name,children:P.file_name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:P.file_type})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("a",{href:`/api/files/${P.id}?download=true`,download:!0,className:"text-primary-600 hover:text-primary-800 p-1 rounded-full hover:bg-primary-50","aria-label":`Download ${P.file_name}`,onClick:O=>{O.stopPropagation(),console.log(`Downloading file: ${P.id}`)},children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),r&&s.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),console.log(`Deleting file: ${P.id}`),T(P.id)},className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50","aria-label":`Delete ${P.file_name}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})]},P.id))})]}),t>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${t}%`}})}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Uploading: ",t,"%"]})]})]})},x5=({formData:e,equipmentTypes:t,categoriesData:n,statusOptions:r,handleInputChange:a,handleFileChange:o,handleSubmit:d,handleCancel:m,isLoading:v,error:g,isEditing:w=!1,files:N=[],uploadProgress:S=0,existingFiles:j=[],handleFileDelete:k,handleSetReferenceImage:R})=>{const[T,I]=L.useState(null),[A,M]=L.useState(null),{data:B}=ct(["locations"],wo,{staleTime:3e5});L.useEffect(()=>{if(j&&j.length>0&&e.reference_image_id){const O=j.find(V=>V.id.toString()===e.reference_image_id);if(O){I(O);return}}I(null)},[j,e.reference_image_id]);const G=O=>{M(O),a(O?{target:{name:"reference_image_id",value:"new"}}:{target:{name:"reference_image_id",value:""}})},P=O=>{I(null),a({target:{name:"reference_image_id",value:""}}),k&&k(O)};return s.jsxs(Re,{children:[g&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 m-6 mt-0",children:s.jsx("p",{className:"text-red-700",children:g})}),s.jsxs("form",{onSubmit:d,children:[s.jsxs(Re.Body,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(Ns,{id:"category_id",name:"category_id",label:"Category",value:e.category_id||"",onChange:a,options:[{value:"",label:"Select Category"},...(n||[]).map(O=>({value:O.id.toString(),label:O.name}))]}),s.jsx(Ns,{id:"type_id",name:"type_id",label:"Type",value:e.type_id||"",onChange:a,options:[{value:"",label:"Select Type"},...t.map(O=>({value:O.id.toString(),label:O.name}))],required:!0}),s.jsx(lt,{id:"brand",name:"brand",label:"Brand",value:e.brand,onChange:a,placeholder:"Enter brand",required:!0}),s.jsx(lt,{id:"model",name:"model",label:"Model",value:e.model,onChange:a,placeholder:"Enter model",required:!0}),s.jsx(bE,{id:"serial_number",name:"serial_number",label:"Serial Number",value:e.serial_number,onChange:a,placeholder:"Enter serial number",required:!0,onScan:O=>{a({target:{name:"serial_number",value:O}})}}),s.jsx(Ns,{id:"status",name:"status",label:"Status",value:e.status,onChange:a,options:r.map(O=>({value:O,label:O.charAt(0).toUpperCase()+O.slice(1).replace("-"," ")})),required:!0}),s.jsx(lt,{id:"quantity",name:"quantity",label:"Quantity",type:"number",min:"1",value:e.quantity||1,onChange:a,placeholder:"Enter quantity",required:!0,helpText:"Number of items (minimum: 1)"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ns,{id:"location_id",name:"location_id",label:"Location",value:e.location_id?e.location_id.toString():"",onChange:a,options:[{value:"",label:"Select Location"},...((B==null?void 0:B.locations)||[]).map(O=>{let V=O.name;const W=[];return O.city&&W.push(O.city),O.region&&W.push(O.region),O.country&&W.push(O.country),W.length>0&&(V+=` (${W.join(", ")})`),{value:O.id.toString(),label:V}})]}),s.jsx(lt,{id:"location",name:"location",label:"Custom Location (if not in list)",value:e.location||"",onChange:a,placeholder:"Enter custom location"})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:e.description,onChange:a,rows:"4",className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Enter description"})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-100 rounded-lg",children:[s.jsxs("h3",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Reference Image"]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Upload a ",s.jsx("strong",{children:"single reference image"})," that best represents this equipment. This image will be displayed prominently on the equipment details page and in search results."]}),s.jsx(T2,{onImageSelect:G,existingImage:T,onImageDelete:P})]}),s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[s.jsxs("h3",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Documents & Attachments"]}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Upload additional documents and images related to this equipment (manuals, invoices, additional photos, etc.). These will be shown in the Documents tab."}),s.jsx(dq,{onFileSelect:o,uploadProgress:S,existingFiles:j,onFileDelete:k,multiple:!0,maxFiles:5})]})]}),s.jsxs(Re.Footer,{className:"flex justify-end space-x-3",children:[s.jsx(be,{type:"button",variant:"secondary",onClick:m,children:"Cancel"}),s.jsx(be,{type:"submit",variant:"primary",disabled:v,children:v?"Saving...":w?"Save Changes":"Create Equipment"})]})]})]})};x5.propTypes={formData:ie.object.isRequired,equipmentTypes:ie.array.isRequired,categoriesData:ie.array,statusOptions:ie.array.isRequired,locationsData:ie.object,handleInputChange:ie.func.isRequired,handleFileChange:ie.func.isRequired,handleSubmit:ie.func.isRequired,handleCancel:ie.func.isRequired,isLoading:ie.bool,error:ie.string,isEditing:ie.bool,files:ie.array,uploadProgress:ie.number,existingFiles:ie.array,handleFileDelete:ie.func,handleSetReferenceImage:ie.func};const fq=()=>{const e=Gr(),t=cn(),{user:n}=lr(),[r,a]=L.useState({type_id:"",category_id:"",category:"",brand:"",model:"",serial_number:"",status:"available",location:"",location_id:"",description:"",reference_image_id:"",quantity:1}),[o,d]=L.useState([]),[m,v]=L.useState(""),[g,w]=L.useState(0),{data:N}=ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5}),{data:S}=ct({queryKey:["categories"],queryFn:vl,staleTime:3e5}),{data:j}=ct({queryKey:["locations"],queryFn:wo,staleTime:3e5}),k=["available","in-use","maintenance","unavailable","broken"],R=Tt({mutationFn:async P=>a2(P.equipment,P.files),onSuccess:()=>{t.invalidateQueries(["equipment"]),e("/equipment")},onError:P=>{var O,V;console.error("Error creating equipment:",P),v(((V=(O=P.response)==null?void 0:O.data)==null?void 0:V.message)||"Failed to create equipment")}}),T=P=>{const{name:O,value:V}=P.target;let W={...r,[O]:V};if(O==="category_id"&&V&&(S!=null&&S.categories)){const ee=S.categories.find(ce=>ce.id.toString()===V);ee&&(console.log("Selected category:",ee),W={...W,category_id:V,category:ee.name})}else if(O==="location_id"&&V){const ee=j==null?void 0:j.locations.find(ce=>ce.id.toString()===V);ee&&(console.log("Selected location:",ee),W={...W,location_id:V,location:ee.name},ee.name.toLowerCase()==="lager"?(W.status="available",console.log('Setting status to "available" because location is Lager')):W.status==="available"&&(W.status="in-use",console.log(`Setting status to "in-use" because location is not Lager (${ee.name})`)))}else if(O==="location"&&V)W={...W,location:V,location_id:""},V.toLowerCase()==="lager"?(W.status="available",console.log('Setting status to "available" because custom location is Lager')):W.status==="available"&&(W.status="in-use",console.log(`Setting status to "in-use" because custom location is not Lager (${V})`));else if(O==="quantity"){const ee=parseInt(V)||1;W.quantity=Math.max(1,ee),console.log(`Setting quantity to: ${W.quantity}`)}else O==="status"&&(console.log(`User manually changed status to: ${V}`),(r.location||"").toLowerCase()==="lager"&&V!=="available"&&(console.log('Forcing status back to "available" because location is Lager'),W.status="available"));a(W)},I=P=>{d(P)},A=P=>{a({...r,reference_image_id:P.toString()})},M=P=>{const O=[...o];r.reference_image_id===P.toString()&&a({...r,reference_image_id:""}),O.splice(P,1),d(O)},B=P=>{if(P.preventDefault(),!r.type_id||!r.brand||!r.model||!r.serial_number){v("Type, brand, model, and serial number are required");return}const O=r.reference_image_id==="new"&&o.length>0?o.find((W,ee)=>ee===0):null,V=O?o.filter(W=>W!==O):o;R.mutate({equipment:{...r,reference_image_id:r.reference_image_id==="new"?"new":r.reference_image_id},files:V,referenceImageFile:O})},G=()=>{e("/equipment")};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Add New Equipment"})}),s.jsx(x5,{formData:r,equipmentTypes:(N==null?void 0:N.types)||[],categoriesData:(S==null?void 0:S.categories)||[],statusOptions:k,locationsData:j,handleInputChange:T,handleFileChange:I,handleSubmit:B,handleCancel:G,isLoading:R.isLoading,error:m,files:o,uploadProgress:g,handleSetReferenceImage:A,handleFileDelete:M}),(n==null?void 0:n.role)==="admin"&&s.jsx(Re,{className:"mt-6",children:s.jsxs(Re.Body,{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 text-primary-500",children:s.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-800",children:"Equipment Type Management"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"You can manage equipment types in the Settings page."}),s.jsx("div",{className:"mt-3",children:s.jsx(be,{variant:"outline",size:"sm",onClick:()=>e("/settings"),children:"Go to Settings"})})]})]})})]})},hq=()=>{const{isAdmin:e,getUsers:t,impersonateUser:n,register:r,user:a}=lr(),o=Gr(),d=cn(),[m,v]=L.useState(null),[g,w]=L.useState(!1),[N,S]=L.useState(!1),[j,k]=L.useState({username:"",password:"",role:"basic"}),[R,T]=L.useState({});L.useEffect(()=>{e()||o("/")},[e,o]);const{data:I,isLoading:A,isError:M,error:B,refetch:G}=ct({queryKey:["users"],queryFn:t,enabled:e()}),P=Tt({mutationFn:r,onSuccess:()=>{d.invalidateQueries(["users"]),S(!1),k({username:"",password:"",role:"basic"}),st.success("User created successfully")},onError:te=>{var Ne,ae;st.error(((ae=(Ne=te.response)==null?void 0:Ne.data)==null?void 0:ae.message)||"Failed to create user")}}),O=te=>{const{name:Ne,value:ae}=te.target;k(Ae=>({...Ae,[Ne]:ae})),R[Ne]&&T(Ae=>({...Ae,[Ne]:""}))},V=()=>{const te={};return j.username.trim()||(te.username="Username is required"),j.password.trim()?j.password.length<6&&(te.password="Password must be at least 6 characters"):te.password="Password is required",T(te),Object.keys(te).length===0},W=te=>{te.preventDefault(),V()&&P.mutate(j)},ee=async()=>{if(m)try{await n(m.id),w(!1),st.info(`You are now impersonating ${m.username}`),o("/")}catch(te){st.error("Failed to impersonate user"),console.error("Failed to impersonate user:",te)}},ce=te=>new Date(te).toLocaleString(),ne=te=>{switch(te){case"admin":return"bg-red-100 text-red-800";case"advanced":return"bg-blue-100 text-blue-800";case"basic":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e()?A?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):M?s.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative my-6",role:"alert",children:[s.jsx("strong",{className:"font-bold",children:"Error!"}),s.jsxs("span",{className:"block sm:inline",children:[" ",(B==null?void 0:B.message)||"Failed to load users."]}),s.jsx("button",{onClick:G,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Retry"})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(ip,{position:"top-right",autoClose:3e3}),s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden mb-8",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"User Management"}),s.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Create User"]})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Username"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created At"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:I==null?void 0:I.map(te=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:[te.username,te.id===a.id&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:"You"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ne(te.role)}`,children:te.role})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ce(te.created_at)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:te.id!==a.id&&s.jsx("button",{onClick:()=>{v(te),w(!0)},className:"text-indigo-600 hover:text-indigo-900","aria-label":`Impersonate ${te.username}`,children:"Impersonate"})})]},te.id))})]})})})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-slate-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Create New User"}),s.jsxs("form",{onSubmit:W,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),s.jsx("input",{type:"text",id:"username",name:"username",value:j.username,onChange:O,className:`w-full px-3 py-2 border ${R.username?"border-red-500":"border-slate-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500`}),R.username&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:R.username})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",id:"password",name:"password",value:j.password,onChange:O,className:`w-full px-3 py-2 border ${R.password?"border-red-500":"border-slate-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500`}),R.password&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:R.password})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),s.jsxs("select",{id:"role",name:"role",value:j.role,onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"basic",children:"Basic"}),s.jsx("option",{value:"advanced",children:"Advanced"}),s.jsx("option",{value:"admin",children:"Admin"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",disabled:P.isLoading,children:P.isLoading?"Creating...":"Create User"})]})]})]})}),g&&m&&s.jsx("div",{className:"fixed inset-0 bg-slate-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Confirm Impersonation"}),s.jsxs("p",{className:"text-slate-500 mb-4",children:["You are about to impersonate ",s.jsx("strong",{children:m.username})," with role ",s.jsx("strong",{children:m.role}),". You will have the same permissions as this user until you end the impersonation."]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"Cancel"}),s.jsx("button",{onClick:ee,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Impersonate"})]})]})})]}):s.jsx("div",{className:"text-center py-10",children:"Access denied. Admin privileges required."})},pq=()=>{var B,G;const[e,t]=L.useState(1),[n]=L.useState(20),[r,a]=L.useState("created_at"),[o,d]=L.useState("desc"),[m,v]=L.useState({equipmentId:"",actionType:"",search:"",type:"",status:"",location_id:""}),{data:g}=ct({queryKey:["equipment-types"],queryFn:Ba,staleTime:3e5}),{data:w}=ct(["locations"],wo),{data:N,isLoading:S,isError:j,error:k}=ct(["allEquipmentLogs",e,n,m,r,o],()=>SU({page:e,limit:n,equipmentId:m.equipmentId||void 0,actionType:m.actionType||void 0,search:m.search||void 0,type:m.type||void 0,status:m.status||void 0,location_id:m.location_id||void 0,sortBy:r,sortOrder:o}),{keepPreviousData:!0}),R=P=>{switch(P){case"created":return"badge-success";case"updated":return"badge-info";case"deleted":return"badge-danger";case"status_change":return"badge-warning";case"location_change":return"badge-primary";default:return"badge-secondary"}},T=P=>P.split("_").map(O=>O.charAt(0).toUpperCase()+O.slice(1)).join(" "),I=P=>{const{name:O,value:V}=P.target;v(W=>({...W,[O]:V})),t(1)},A=P=>{P.preventDefault()},M=P=>{t(P)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Movement Logs"})}),s.jsx("div",{className:"card",children:s.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search",className:"label",children:"Search"}),s.jsxs("div",{className:"input-group",children:[s.jsx(i2,{className:"input-icon w-4 h-4"}),s.jsx("input",{type:"text",id:"search",name:"search",value:m.search,onChange:I,placeholder:"Search logs...",className:"input input-with-icon"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"type",className:"label",children:"Equipment Type"}),s.jsxs("select",{id:"type",name:"type",value:m.type,onChange:I,className:"input",children:[s.jsx("option",{value:"",children:"All Types"}),g!=null&&g.types&&g.types.length>0?g.types.map(P=>s.jsx("option",{value:P.name.toLowerCase(),children:P.name},P.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"label",children:"Equipment Status"}),s.jsxs("select",{id:"status",name:"status",value:m.status,onChange:I,className:"input",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"in-use",children:"In Use"}),s.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"location_id",className:"label",children:"Location"}),s.jsxs("select",{id:"location_id",name:"location_id",value:m.location_id,onChange:I,className:"input",children:[s.jsx("option",{value:"",children:"All Locations"}),(B=w==null?void 0:w.locations)==null?void 0:B.map(P=>s.jsx("option",{value:P.id.toString(),children:P.name},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"actionType",className:"label",children:"Action Type"}),s.jsxs("select",{id:"actionType",name:"actionType",value:m.actionType,onChange:I,className:"input",children:[s.jsx("option",{value:"",children:"All Actions"}),s.jsx("option",{value:"created",children:"Created"}),s.jsx("option",{value:"updated",children:"Updated"}),s.jsx("option",{value:"deleted",children:"Deleted"}),s.jsx("option",{value:"status_change",children:"Status Change"}),s.jsx("option",{value:"location_change",children:"Location Change"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{type:"submit",className:"btn btn-primary w-full",children:[s.jsx(o2,{className:"w-4 h-4"}),s.jsx("span",{children:"Apply Filters"})]})})]})}),s.jsxs("div",{className:"card",children:[S?s.jsx("div",{className:"text-center py-10",children:"Loading..."}):j?s.jsxs("div",{className:"text-center py-10 text-red-600",children:["Error: ",k.message||"Failed to load equipment logs"]}):(G=N==null?void 0:N.logs)!=null&&G.length?s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Date"}),s.jsx("th",{className:"table-header-cell",children:"Equipment"}),s.jsx("th",{className:"table-header-cell",children:"User"}),s.jsx("th",{className:"table-header-cell",children:"Action"}),s.jsx("th",{className:"table-header-cell",children:"Details"})]})}),s.jsx("tbody",{className:"table-body",children:N.logs.map(P=>{var O,V;return s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell whitespace-nowrap",children:md(new Date(P.created_at),"MMM d, yyyy h:mm a")}),s.jsx("td",{className:"table-cell",children:P.equipment?s.jsxs(qn,{to:`/equipment/${P.equipment.id}`,className:"text-primary-600 hover:text-primary-800",children:[P.equipment.brand," ",P.equipment.model,s.jsxs("span",{className:"text-xs text-slate-500 block",children:["SN: ",P.equipment.serial_number]})]}):s.jsx("span",{className:"text-slate-400",children:"Deleted equipment"})}),s.jsxs("td",{className:"table-cell",children:[((O=P.user)==null?void 0:O.username)||"Unknown",s.jsx("span",{className:"text-xs text-slate-500 block",children:((V=P.user)==null?void 0:V.role)||""})]}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:`badge ${R(P.action_type)}`,children:T(P.action_type)})}),s.jsxs("td",{className:"table-cell",children:[P.action_type==="status_change"&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Status:"})," ",s.jsx("span",{className:"badge badge-outline-secondary",children:P.previous_status})," ",s.jsx("span",{className:"text-slate-400",children:"→"})," ",s.jsx("span",{className:"badge badge-outline-primary",children:P.new_status})]}),P.action_type==="location_change"&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Location:"})," ",s.jsx("span",{className:"badge badge-outline-secondary",children:P.previous_location||"None"})," ",s.jsx("span",{className:"text-slate-400",children:"→"})," ",s.jsx("span",{className:"badge badge-outline-primary",children:P.new_location||"None"})]}),P.details&&s.jsx("div",{className:"text-sm mt-1",children:P.details})]})]},P.id)})})]})}):s.jsx("div",{className:"text-center py-10 text-slate-500",children:m.search||m.equipmentId||m.actionType?"No logs found matching your search criteria.":"No logs found."}),(N==null?void 0:N.totalPages)>1&&s.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-slate-200",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",s.jsx("span",{className:"font-medium text-slate-800",children:(e-1)*n+1})," to"," ",s.jsx("span",{className:"font-medium text-slate-800",children:Math.min(e*n,N.total)})," of"," ",s.jsx("span",{className:"font-medium text-slate-800",children:N.total})," logs"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>M(e-1),disabled:e===1,className:`btn ${e===1?"bg-slate-50 text-slate-300 cursor-not-allowed":"btn-outline"}`,children:"Previous"}),s.jsx("button",{onClick:()=>M(e+1),disabled:e===N.totalPages,className:`btn ${e===N.totalPages?"bg-slate-50 text-slate-300 cursor-not-allowed":"btn-outline"}`,children:"Next"})]})]})]})]})},mq=async(e={})=>{try{const t=new URLSearchParams;return e.status&&t.append("status",e.status),e.search&&t.append("search",e.search),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset),(await Qe.get(`/api/shows?${t}`)).data}catch(t){throw console.error("Error fetching shows:",t),t}},g5=async e=>{try{return(await Qe.get(`/api/shows/${e}`)).data}catch(t){throw console.error("Error fetching show:",t),t}},xq=async e=>{try{return(await Qe.post("/api/shows",e)).data}catch(t){throw console.error("Error creating show:",t),t}},v5=async(e,t)=>{try{return(await Qe.put(`/api/shows/${e}`,t)).data}catch(n){throw console.error("Error updating show:",n),n}},y5=async e=>{try{return(await Qe.delete(`/api/shows/${e}`)).data}catch(t){throw console.error("Error deleting show:",t),t}},gq=async e=>{try{return(await Qe.get(`/api/show-equipment/show/${e}`)).data}catch(t){throw console.error("Error fetching show equipment:",t),t}},vq=async(e,t)=>{try{return(await Qe.post(`/api/show-equipment/show/${e}/equipment`,t)).data}catch(n){throw console.error("Error adding equipment to show:",n),n}},yp=async(e,t)=>{try{return(await Qe.put(`/api/show-equipment/${e}`,t)).data}catch(n){throw console.error("Error updating show equipment:",n),n}},yq=async e=>{try{return(await Qe.post(`/api/show-equipment/${e}/checkout`)).data}catch(t){throw console.error("Error checking out equipment:",t),t}},wq=async e=>{try{return(await Qe.post(`/api/show-equipment/${e}/return`)).data}catch(t){throw console.error("Error returning equipment:",t),t}},bq=async e=>{try{return(await Qe.delete(`/api/show-equipment/${e}`)).data}catch(t){throw console.error("Error removing equipment from show:",t),t}},Nq=()=>{const e=Gr(),t=cn(),{data:n,isLoading:r,error:a}=ct({queryKey:["shows"],queryFn:()=>mq(),onError:te=>{mt.error(`Failed to load shows: ${te.message}`)}}),o=(n==null?void 0:n.shows)||[],d=Tt({mutationFn:xq,onSuccess:()=>{t.invalidateQueries(["shows"]),mt.success("Show created successfully"),S(!1),P({name:"",date:"",venue:"",director:"",description:""})},onError:te=>{mt.error(`Failed to create show: ${te.message}`)}}),m=Tt({mutationFn:({id:te,...Ne})=>v5(te,Ne),onSuccess:()=>{t.invalidateQueries(["shows"]),mt.success("Show updated successfully"),A(!1),B(null)},onError:te=>{mt.error(`Failed to update show: ${te.message}`)}}),v=Tt({mutationFn:y5,onSuccess:()=>{t.invalidateQueries(["shows"]),mt.success("Show deleted successfully")},onError:te=>{mt.error(`Failed to delete show: ${te.message}`)}}),[g,w]=L.useState("list"),[N,S]=L.useState(!1),[j,k]=L.useState(null),[R,T]=L.useState(!1),[I,A]=L.useState(!1),[M,B]=L.useState(null),[G,P]=L.useState({name:"",date:"",venue:"",director:"",description:""}),O=te=>{switch(te){case"planning":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},V=()=>{G.name&&G.date&&d.mutate(G)},W=te=>{e(`/show/${te.id}`)},ee=te=>{B({...te}),A(!0)},ce=()=>{M.name&&M.date&&m.mutate(M)},ne=te=>{window.confirm("Are you sure you want to delete this show?")&&v.mutate(te)};return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading shows..."})]})}):a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:"❌ Error loading shows"}),s.jsx("p",{className:"text-slate-600 mb-4",children:a.message}),s.jsx(be,{onClick:()=>t.invalidateQueries(["shows"]),children:"Retry"})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center space-x-3",children:[s.jsx(Ax,{className:"w-8 h-8 text-primary-600"}),s.jsx("span",{children:"Show List"})]}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage theater shows and their equipment allocations"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>w("list"),className:`p-2 rounded-md transition-colors ${g==="list"?"bg-white text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,title:"List View",children:s.jsx(Pc,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>w("card"),className:`p-2 rounded-md transition-colors ${g==="card"?"bg-white text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,title:"Card View",children:s.jsx(Fc,{className:"w-4 h-4"})})]}),s.jsxs(be,{onClick:()=>S(!0),className:"flex items-center space-x-2",children:[s.jsx(lp,{className:"w-4 h-4"}),s.jsx("span",{children:"Create New Show"})]})]})]}),o.length===0?s.jsx(Re,{className:"text-center py-12",children:s.jsxs(Re.Body,{children:[s.jsx(Ax,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"No shows yet"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Create your first show to start managing equipment allocations"}),s.jsx(be,{onClick:()=>S(!0),children:"Create New Show"})]})}):g==="list"?s.jsx(Re,{children:s.jsx(Re.Body,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Show"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Date"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Venue"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Director"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Equipment"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:o.map(te=>s.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>W(te),children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-800",children:te.name}),te.description&&s.jsx("div",{className:"text-sm text-slate-500 truncate max-w-xs",children:te.description})]})}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:new Date(te.date).toLocaleDateString()}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:te.venue}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:te.director}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(te.status)}`,children:te.status})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:"font-medium text-primary-600",children:te.equipmentCount})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex space-x-1",onClick:Ne=>Ne.stopPropagation(),children:[s.jsx(be,{size:"sm",variant:"outline",onClick:()=>W(te),className:"p-1",title:"View",children:s.jsx(tc,{className:"w-4 h-4"})}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>ee(te),className:"p-1",title:"Edit",children:s.jsx(La,{className:"w-4 h-4"})}),s.jsx(be,{size:"sm",onClick:()=>e(`/show/${te.id}`),className:"p-1",title:"View Details",children:s.jsx(tc,{className:"w-4 h-4"})}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>ne(te.id),className:"p-1 text-red-600 hover:text-red-700",title:"Delete",children:s.jsx(hd,{className:"w-4 h-4"})})]})})]},te.id))})]})})})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(te=>s.jsxs(Re,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(Re.Header,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:te.name}),s.jsx("p",{className:"text-sm text-slate-600",children:te.venue})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(te.status)}`,children:te.status})]})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(te.date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Director:"}),s.jsx("span",{className:"font-medium",children:te.director})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Equipment Items:"}),s.jsx("span",{className:"font-medium text-primary-600",children:te.equipmentCount})]})]})}),s.jsx(Re.Footer,{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(be,{size:"sm",variant:"outline",onClick:()=>W(te),className:"flex-1 flex items-center justify-center space-x-1",children:[s.jsx(tc,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]}),s.jsxs(be,{size:"sm",variant:"outline",onClick:()=>ee(te),className:"flex-1 flex items-center justify-center space-x-1",children:[s.jsx(La,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs(be,{size:"sm",onClick:()=>e(`/show/${te.id}`),className:"flex-1 flex items-center justify-center space-x-1",children:[s.jsx(tc,{className:"w-4 h-4"}),s.jsx("span",{children:"Details"})]}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>ne(te.id),className:"flex items-center justify-center px-3 text-red-600 hover:text-red-700",children:s.jsx(hd,{className:"w-4 h-4"})})]})})]},te.id))}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Create New Show"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Show Name *"}),s.jsx(lt,{value:G.name,onChange:te=>P({...G,name:te.target.value}),placeholder:"Enter show name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),s.jsx(lt,{type:"date",value:G.date,onChange:te=>P({...G,date:te.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Venue"}),s.jsx(lt,{value:G.venue,onChange:te=>P({...G,venue:te.target.value}),placeholder:"Enter venue"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx(lt,{value:G.director,onChange:te=>P({...G,director:te.target.value}),placeholder:"Enter director name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:G.description,onChange:te=>P({...G,description:te.target.value}),placeholder:"Enter show description",className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:"3"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx(be,{variant:"outline",onClick:()=>S(!1),className:"flex-1",children:"Cancel"}),s.jsx(be,{onClick:V,className:"flex-1",disabled:!G.name||!G.date||d.isLoading,children:d.isLoading?"Creating...":"Create Show"})]})]})}),R&&j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:j.name}),s.jsx("p",{className:"text-slate-600 mt-1",children:j.venue})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O(j.status)}`,children:j.status}),s.jsx(be,{variant:"outline",onClick:()=>T(!1),className:"text-slate-500",children:"✕"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Re,{children:[s.jsx(Re.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Show Information"})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),s.jsx("p",{className:"text-slate-900",children:new Date(j.date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx("p",{className:"text-slate-900",children:j.director||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("p",{className:"text-slate-900",children:j.description||"No description provided"})]})]})})]}),s.jsxs(Re,{children:[s.jsx(Re.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Equipment Summary"})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:j.equipmentCount}),s.jsx("p",{className:"text-slate-600",children:"Equipment Items Allocated"})]}),s.jsx(be,{className:"w-full",onClick:()=>e(`/show/${j.id}`),children:"View Full Details"})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx(be,{variant:"outline",onClick:()=>T(!1),children:"Close"}),s.jsxs(be,{onClick:()=>{T(!1),ee(j)},className:"flex items-center space-x-2",children:[s.jsx(La,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit Show"})]})]})]})})}),I&&M&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Edit Show"}),s.jsx(be,{variant:"outline",onClick:()=>A(!1),className:"text-slate-500",children:"✕"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Re,{children:[s.jsx(Re.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Show Name *"}),s.jsx(lt,{value:M.name,onChange:te=>B({...M,name:te.target.value}),placeholder:"Enter show name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),s.jsx(lt,{type:"date",value:M.date,onChange:te=>B({...M,date:te.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Venue"}),s.jsx(lt,{value:M.venue,onChange:te=>B({...M,venue:te.target.value}),placeholder:"Enter venue"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx(lt,{value:M.director,onChange:te=>B({...M,director:te.target.value}),placeholder:"Enter director name"})]})]})})]}),s.jsxs(Re,{children:[s.jsx(Re.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Additional Details"})}),s.jsx(Re.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),s.jsxs("select",{value:M.status,onChange:te=>B({...M,status:te.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"archived",children:"Archived"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:M.description,onChange:te=>B({...M,description:te.target.value}),placeholder:"Enter show description",className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:"6"})]})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx(be,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),s.jsx(be,{onClick:ce,disabled:!M.name||!M.date||m.isLoading,className:"flex items-center space-x-2",children:s.jsx("span",{children:m.isLoading?"Saving...":"Save Changes"})})]})]})})})]})},Cq=({equipmentId:e,onClose:t})=>{const[n,r]=L.useState(!1),{data:a,isLoading:o,isError:d}=ct({queryKey:["equipmentAvailability",e],queryFn:async()=>(await Qe.get(`/api/inventory/equipment/${e}/availability`)).data,enabled:!!e});if(o)return s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-slate-600",children:"Loading availability..."})]});if(d||!a)return s.jsx("div",{className:"p-4 text-center",children:s.jsx("p",{className:"text-red-600",children:"Failed to load availability information"})});const m={type:a.type,brand:a.brand,model:a.model,status:a.equipment_status},v=a.total_quantity;parseInt(a.total_allocated)+parseInt(a.show_allocated);const g=a.available_quantity,w=[],N=()=>g<=0?"text-red-600":g<=v*.2?"text-orange-600":"text-green-600",S=j=>{const k={requested:"bg-blue-100 text-blue-800",allocated:"bg-yellow-100 text-yellow-800","checked-out":"bg-orange-100 text-orange-800","in-use":"bg-red-100 text-red-800",returned:"bg-green-100 text-green-800"};return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k[j]||"bg-gray-100 text-gray-800"}`,children:j})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-800 flex items-center",children:[s.jsx(kx,{className:"w-5 h-5 mr-2"}),"Equipment Availability"]}),s.jsx(be,{variant:"outline",onClick:t,children:"Close"})]}),s.jsx(Re,{className:"mb-4",children:s.jsxs(Re.Body,{children:[s.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:m.type}),s.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:[m.brand," ",m.model]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-slate-800",children:v}),s.jsx("div",{className:"text-xs text-slate-600",children:"Total"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-blue-600",children:a.show_allocated}),s.jsx("div",{className:"text-xs text-slate-600",children:"In Shows"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-orange-600",children:a.total_allocated}),s.jsx("div",{className:"text-xs text-slate-600",children:"Inventory"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xl font-bold ${N()}`,children:g}),s.jsx("div",{className:"text-xs text-slate-600",children:"Available"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-slate-600 mb-1",children:[s.jsx("span",{children:"Availability"}),s.jsxs("span",{children:[Math.round(g/v*100),"% available"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${g>0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.max(g/v*100,0)}%`}})})]})]})}),w.length>0&&s.jsx(Re,{children:s.jsxs(Re.Body,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium text-slate-800",children:["Current Allocations (",w.length,")"]}),s.jsxs(be,{variant:"outline",size:"sm",onClick:()=>r(!n),className:"flex items-center space-x-1",children:[s.jsxs("span",{children:[n?"Hide":"Show"," Details"]}),n?s.jsx(AM,{className:"w-4 h-4"}):s.jsx(jM,{className:"w-4 h-4"})]})]}),n&&s.jsx("div",{className:"space-y-3",children:w.map(j=>s.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-slate-800",children:j.showName}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(j.showDate).toLocaleDateString()})]}),S(j.status)]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Needed:"}),s.jsx("span",{className:"ml-2 font-medium",children:j.quantityNeeded})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Allocated:"}),s.jsx("span",{className:"ml-2 font-medium",children:j.quantityAllocated})]})]}),j.notes&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Notes:"}),s.jsx("p",{className:"text-slate-800 mt-1",children:j.notes})]})]},j.id))})]})}),w.length===0&&s.jsx(Re,{children:s.jsxs(Re.Body,{className:"text-center py-8",children:[s.jsx("div",{className:"text-slate-300 mb-2",children:"📦"}),s.jsx("p",{className:"text-slate-600",children:"No current allocations for this equipment"})]})})]})})},Eq=({showEquipment:e,onClose:t,showId:n})=>{var k,R,T,I,A,M;const r=cn(),[a,o]=L.useState({quantityNeeded:(e==null?void 0:e.quantity_needed)||1,quantityAllocated:(e==null?void 0:e.quantity_allocated)||0,status:(e==null?void 0:e.status)||"requested",notes:(e==null?void 0:e.notes)||""}),[d,m]=L.useState({}),v=[{value:"requested",label:"Requested",color:"bg-blue-100 text-blue-800"},{value:"allocated",label:"Allocated",color:"bg-yellow-100 text-yellow-800"},{value:"checked-out",label:"Checked Out",color:"bg-orange-100 text-orange-800"},{value:"in-use",label:"In Use",color:"bg-red-100 text-red-800"},{value:"returned",label:"Returned",color:"bg-green-100 text-green-800"}],g=Tt({mutationFn:B=>yp(e.id,B),onSuccess:()=>{r.invalidateQueries(["showEquipment",n]),r.invalidateQueries(["show",n]),mt.success("Equipment allocation updated successfully"),t()},onError:B=>{mt.error(`Failed to update equipment: ${B.message}`)}}),w=()=>{const B={};return(!a.quantityNeeded||a.quantityNeeded<1)&&(B.quantityNeeded="Quantity needed must be at least 1"),a.quantityAllocated<0&&(B.quantityAllocated="Quantity allocated cannot be negative"),a.quantityAllocated>a.quantityNeeded&&(B.quantityAllocated="Allocated quantity cannot exceed needed quantity"),m(B),Object.keys(B).length===0},N=B=>{B.preventDefault(),w()&&g.mutate({quantityNeeded:parseInt(a.quantityNeeded),quantityAllocated:parseInt(a.quantityAllocated),status:a.status,notes:a.notes.trim()})},S=(B,G)=>{o(P=>({...P,[B]:G})),d[B]&&m(P=>({...P,[B]:""}))},j=B=>{const G=v.find(P=>P.value===B);return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(G==null?void 0:G.color)||"bg-gray-100 text-gray-800"}`,children:(G==null?void 0:G.label)||B})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-800 flex items-center",children:[s.jsx(La,{className:"w-5 h-5 mr-2"}),"Edit Equipment Allocation"]}),s.jsx(be,{variant:"outline",onClick:t,children:s.jsx(c2,{className:"w-4 h-4"})})]}),s.jsx(Re,{className:"mb-6",children:s.jsxs(Re.Body,{children:[s.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:((k=e.equipment)==null?void 0:k.type)||((R=e.equipment)==null?void 0:R.name)}),s.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:[(T=e.equipment)==null?void 0:T.brand," ",(I=e.equipment)==null?void 0:I.model]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Serial:"}),s.jsx("span",{className:"ml-1 font-medium",children:((A=e.equipment)==null?void 0:A.serial_number)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Available Qty:"}),s.jsx("span",{className:"ml-1 font-medium",children:((M=e.equipment)==null?void 0:M.quantity)||0})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Current Status:"}),s.jsx("span",{className:"ml-2",children:j(e.status)})]})]})]})}),s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Quantity Needed *"}),s.jsx(lt,{type:"number",min:"1",value:a.quantityNeeded,onChange:B=>S("quantityNeeded",B.target.value),className:d.quantityNeeded?"border-red-300":""}),d.quantityNeeded&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.quantityNeeded})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Quantity Allocated"}),s.jsx(lt,{type:"number",min:"0",max:a.quantityNeeded,value:a.quantityAllocated,onChange:B=>S("quantityAllocated",B.target.value),className:d.quantityAllocated?"border-red-300":""}),d.quantityAllocated&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.quantityAllocated})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Allocation Status"}),s.jsx("select",{value:a.status,onChange:B=>S("status",B.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:v.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:a.notes,onChange:B=>S("notes",B.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"4",placeholder:"Add any notes about this equipment allocation..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-200",children:[s.jsx(be,{type:"button",variant:"outline",onClick:t,disabled:g.isLoading,children:"Cancel"}),s.jsxs(be,{type:"submit",disabled:g.isLoading,className:"flex items-center space-x-2",children:[s.jsx(_M,{className:"w-4 h-4"}),s.jsx("span",{children:g.isLoading?"Saving...":"Save Changes"})]})]})]})]})}):null},rf=({showEquipment:e,field:t,showId:n,onCancel:r})=>{const a=cn(),o=L.useRef(null),[d,m]=L.useState(t==="quantityNeeded"?e.quantity_needed:e.quantity_allocated),[v,g]=L.useState("");L.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const w=Tt({mutationFn:R=>yp(e.id,R),onSuccess:()=>{a.invalidateQueries(["showEquipment",n]),mt.success(`${t==="quantityNeeded"?"Needed":"Allocated"} quantity updated`),r()},onError:R=>{mt.error(`Failed to update quantity: ${R.message}`),g(R.message)}}),N=R=>{const T=parseInt(R);if(isNaN(T)||T<0)return"Quantity must be a positive number";if(t==="quantityNeeded"&&T<1)return"Quantity needed must be at least 1";if(t==="quantityAllocated"){const I=t==="quantityNeeded"?T:e.quantity_needed;if(T>I)return`Cannot exceed ${I} (quantity needed)`}return""},S=()=>{const R=N(d);if(R){g(R);return}const T={quantityNeeded:e.quantity_needed,quantityAllocated:e.quantity_allocated,status:e.status,notes:e.notes||""};t==="quantityNeeded"?(T.quantityNeeded=parseInt(d),T.quantityAllocated>parseInt(d)&&(T.quantityAllocated=parseInt(d))):T.quantityAllocated=parseInt(d),w.mutate(T)},j=R=>{R.key==="Enter"?S():R.key==="Escape"&&r()},k=R=>{const T=R.target.value;m(T),v&&g("")};return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:o,type:"number",min:"0",value:d,onChange:k,onKeyDown:j,className:`w-20 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-primary-500 ${v?"border-red-300 bg-red-50":"border-slate-300"}`,disabled:w.isLoading}),v&&s.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-700 whitespace-nowrap z-10",children:v})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:S,disabled:w.isLoading,className:"p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors",title:"Save",children:s.jsx(KC,{className:"w-4 h-4"})}),s.jsx("button",{onClick:r,disabled:w.isLoading,className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Cancel",children:s.jsx(c2,{className:"w-4 h-4"})})]})]})},C3=({showEquipment:e,showId:t,onCancel:n})=>{const r=cn(),a=L.useRef(null),[o,d]=L.useState(e.status),m=[{value:"requested",label:"Requested",color:"bg-blue-100 text-blue-800"},{value:"allocated",label:"Allocated",color:"bg-yellow-100 text-yellow-800"},{value:"checked-out",label:"Checked Out",color:"bg-orange-100 text-orange-800"},{value:"in-use",label:"In Use",color:"bg-red-100 text-red-800"},{value:"returned",label:"Returned",color:"bg-green-100 text-green-800"}];L.useEffect(()=>{a.current&&a.current.focus()},[]);const v=Tt({mutationFn:N=>yp(e.id,N),onSuccess:()=>{r.invalidateQueries(["showEquipment",t]),mt.success("Status updated successfully"),n()},onError:N=>{mt.error(`Failed to update status: ${N.message}`)}}),g=()=>{if(o===e.status){n();return}const N={quantityNeeded:e.quantity_needed,quantityAllocated:e.quantity_allocated,status:o,notes:e.notes||""};v.mutate(N)},w=N=>{N.key==="Enter"?g():N.key==="Escape"&&n()};return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("select",{ref:a,value:o,onChange:N=>d(N.target.value),onKeyDown:w,className:"px-2 py-1 text-sm border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:v.isLoading,children:m.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:g,disabled:v.isLoading,className:"p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors",title:"Save",children:s.jsx(KC,{className:"w-4 h-4"})}),s.jsx("button",{onClick:n,disabled:v.isLoading,className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Cancel",children:s.jsx(c2,{className:"w-4 h-4"})})]})]})},w5=()=>{const{showId:e}=$h(),t=Gr(),n=cn(),[r,a]=L.useState("list"),[o,d]=L.useState(!1),[m,v]=L.useState(null),[g,w]=L.useState([]),[N,S]=L.useState(!1),[j,k]=L.useState(1),[R,T]=L.useState(""),[I,A]=L.useState(""),[M,B]=L.useState(!1),[G,P]=L.useState(null),[O,V]=L.useState(!1),[W,ee]=L.useState(null),[ce,ne]=L.useState(null),[te,Ne]=L.useState(null),{data:ae,isLoading:Ae}=ct({queryKey:["show",e],queryFn:()=>g5(e),onError:oe=>{mt.error(`Failed to load show: ${oe.message}`)}}),{data:me,isLoading:de}=ct({queryKey:["showEquipment",e],queryFn:()=>gq(e),onError:oe=>{mt.error(`Failed to load show equipment: ${oe.message}`)}}),{data:fe}=ct({queryKey:["equipment"],queryFn:()=>Ia({status:"available"}),enabled:o}),Be=(me==null?void 0:me.equipment)||[],Ye=(fe==null?void 0:fe.equipment)||[],Je=Tt({mutationFn:oe=>vq(e,oe),onSuccess:()=>{n.invalidateQueries(["showEquipment",e]),n.invalidateQueries(["show",e]),mt.success("Equipment added to show"),d(!1),v(null),k(1),T("")},onError:oe=>{mt.error(`Failed to add equipment: ${oe.message}`)}});Tt({mutationFn:({id:oe,...Ee})=>yp(oe,Ee),onSuccess:()=>{n.invalidateQueries(["showEquipment",e]),mt.success("Equipment updated")},onError:oe=>{mt.error(`Failed to update equipment: ${oe.message}`)}});const Te=Tt({mutationFn:bq,onSuccess:()=>{n.invalidateQueries(["showEquipment",e]),n.invalidateQueries(["show",e]),mt.success("Equipment removed from show")},onError:oe=>{mt.error(`Failed to remove equipment: ${oe.message}`)}}),$e=Tt({mutationFn:yq,onSuccess:()=>{n.invalidateQueries(["showEquipment",e]),mt.success("Equipment checked out")},onError:oe=>{mt.error(`Failed to checkout equipment: ${oe.message}`)}}),nt=Tt({mutationFn:wq,onSuccess:()=>{n.invalidateQueries(["showEquipment",e]),mt.success("Equipment returned")},onError:oe=>{mt.error(`Failed to return equipment: ${oe.message}`)}}),De=()=>{N&&g.length>0?g.forEach(oe=>{Je.mutate({equipmentId:oe.id,quantityNeeded:oe.quantity||1,notes:oe.notes||""})}):m&&j>0&&Je.mutate({equipmentId:m.id,quantityNeeded:j,notes:R})},Oe=oe=>{w(Ee=>Ee.find(gt=>gt.id===oe.id)?Ee.filter(gt=>gt.id!==oe.id):[...Ee,{...oe,quantity:1,notes:""}])},at=(oe,Ee)=>{w(ye=>ye.map(gt=>gt.id===oe?{...gt,quantity:parseInt(Ee)||1}:gt))},Ht=(oe,Ee)=>{w(ye=>ye.map(gt=>gt.id===oe?{...gt,notes:Ee}:gt))},Vt=oe=>{window.confirm("Are you sure you want to remove this equipment from the show?")&&Te.mutate(oe)},Bt=oe=>{$e.mutate(oe)},Lt=oe=>{nt.mutate(oe)},_e=oe=>{P(oe),B(!0)},Ke=oe=>{ee(oe),V(!0)},Nt=(oe,Ee)=>{ne(oe),Ne(Ee)},ve=()=>{ne(null),Ne(null)},ke=oe=>{const Ee={requested:"bg-yellow-100 text-yellow-800",allocated:"bg-blue-100 text-blue-800","checked-out":"bg-orange-100 text-orange-800","in-use":"bg-green-100 text-green-800",returned:"bg-gray-100 text-gray-800"};return s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ee[oe]||"bg-gray-100 text-gray-800"}`,children:oe.charAt(0).toUpperCase()+oe.slice(1).replace("-"," ")})},qe=Ye.filter(oe=>{var Ee,ye,gt;return((Ee=oe.type)==null?void 0:Ee.toLowerCase().includes(I.toLowerCase()))||((ye=oe.brand)==null?void 0:ye.toLowerCase().includes(I.toLowerCase()))||((gt=oe.model)==null?void 0:gt.toLowerCase().includes(I.toLowerCase()))});return Ae||de?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading equipment management..."})]})}):ae?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Equipment Management"}),s.jsx("p",{className:"text-slate-600",children:"Manage equipment allocation for this show"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>a("list"),className:`p-2 rounded-md transition-colors ${r==="list"?"bg-white text-primary-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:s.jsx(Pc,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a("card"),className:`p-2 rounded-md transition-colors ${r==="card"?"bg-white text-primary-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:s.jsx(Fc,{className:"w-4 h-4"})})]}),s.jsxs(be,{onClick:()=>d(!0),className:"flex items-center space-x-2",children:[s.jsx(lp,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Equipment"})]})]})]}),Be.length===0?s.jsx(Re,{className:"text-center py-12",children:s.jsxs(Re.Body,{children:[s.jsx("div",{className:"text-slate-300 mb-4",children:"📦"}),s.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"No equipment allocated"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Start by adding equipment to this show"}),s.jsx(be,{onClick:()=>d(!0),children:"Add Equipment"})]})}):r==="list"?s.jsx(Re,{children:s.jsx(Re.Body,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Equipment"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Quantity"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Notes"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:Be.map(oe=>{var Ee,ye,gt,pn;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-800",children:((Ee=oe.equipment)==null?void 0:Ee.name)||((ye=oe.equipment)==null?void 0:ye.type)}),s.jsxs("div",{className:"text-sm text-slate-600",children:[(gt=oe.equipment)==null?void 0:gt.brand," ",(pn=oe.equipment)==null?void 0:pn.model]})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-slate-600",children:"Needed:"}),ce===oe.id&&te==="quantityNeeded"?s.jsx(rf,{showEquipment:oe,field:"quantityNeeded",showId:e,onCancel:ve}):s.jsx("button",{onClick:()=>Nt(oe.id,"quantityNeeded"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:oe.quantity_needed})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-slate-600",children:"Allocated:"}),ce===oe.id&&te==="quantityAllocated"?s.jsx(rf,{showEquipment:oe,field:"quantityAllocated",showId:e,onCancel:ve}):s.jsx("button",{onClick:()=>Nt(oe.id,"quantityAllocated"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:oe.quantity_allocated})]})]})}),s.jsx("td",{className:"py-3 px-4",children:ce===oe.id&&te==="status"?s.jsx(C3,{showEquipment:oe,showId:e,onCancel:ve}):s.jsx("button",{onClick:()=>Nt(oe.id,"status"),className:"hover:bg-slate-50 p-1 rounded transition-colors",title:"Click to edit status",children:ke(oe.status)})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("div",{className:"text-sm text-slate-600 max-w-xs truncate",children:oe.notes||"No notes"})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(be,{size:"sm",variant:"outline",onClick:()=>Ke(oe),className:"text-slate-600 hover:text-slate-700",title:"Edit allocation",children:s.jsx(La,{className:"w-3 h-3"})}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>_e(oe.equipment_id),className:"text-blue-600 hover:text-blue-700",title:"View availability",children:s.jsx(kx,{className:"w-3 h-3"})}),oe.status==="requested"&&s.jsx(be,{size:"sm",onClick:()=>Bt(oe.id),disabled:$e.isLoading,children:"✓"}),(oe.status==="checked-out"||oe.status==="in-use")&&s.jsx(be,{size:"sm",variant:"outline",onClick:()=>Lt(oe.id),disabled:nt.isLoading,children:"Return"}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>Vt(oe.id),disabled:Te.isLoading,className:"text-red-600 hover:text-red-700",children:s.jsx(hd,{className:"w-3 h-3"})})]})})]},oe.id)})})]})})})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Be.map(oe=>{var Ee,ye,gt,pn;return s.jsx(Re,{children:s.jsxs(Re.Body,{children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-slate-800",children:((Ee=oe.equipment)==null?void 0:Ee.name)||((ye=oe.equipment)==null?void 0:ye.type)}),s.jsxs("p",{className:"text-sm text-slate-600",children:[(gt=oe.equipment)==null?void 0:gt.brand," ",(pn=oe.equipment)==null?void 0:pn.model]})]}),ke(oe.status)]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Needed:"}),ce===oe.id&&te==="quantityNeeded"?s.jsx(rf,{showEquipment:oe,field:"quantityNeeded",showId:e,onCancel:ve}):s.jsx("button",{onClick:()=>Nt(oe.id,"quantityNeeded"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:oe.quantity_needed})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Allocated:"}),ce===oe.id&&te==="quantityAllocated"?s.jsx(rf,{showEquipment:oe,field:"quantityAllocated",showId:e,onCancel:ve}):s.jsx("button",{onClick:()=>Nt(oe.id,"quantityAllocated"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:oe.quantity_allocated})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Status:"}),ce===oe.id&&te==="status"?s.jsx(C3,{showEquipment:oe,showId:e,onCancel:ve}):s.jsx("button",{onClick:()=>Nt(oe.id,"status"),className:"hover:bg-slate-50 p-1 rounded transition-colors",title:"Click to edit status",children:ke(oe.status)})]}),oe.notes&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Notes:"}),s.jsx("p",{className:"text-slate-800 mt-1",children:oe.notes})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(be,{size:"sm",variant:"outline",onClick:()=>Ke(oe),className:"text-slate-600 hover:text-slate-700",title:"Edit allocation",children:s.jsx(La,{className:"w-4 h-4"})}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>_e(oe.equipment_id),className:"text-blue-600 hover:text-blue-700",title:"View availability",children:s.jsx(kx,{className:"w-4 h-4"})}),oe.status==="requested"&&s.jsx(be,{size:"sm",onClick:()=>Bt(oe.id),disabled:$e.isLoading,className:"flex-1",children:"Check Out"}),(oe.status==="checked-out"||oe.status==="in-use")&&s.jsx(be,{size:"sm",variant:"outline",onClick:()=>Lt(oe.id),disabled:nt.isLoading,className:"flex-1",children:"Return"}),s.jsx(be,{size:"sm",variant:"outline",onClick:()=>Vt(oe.id),disabled:Te.isLoading,className:"text-red-600 hover:text-red-700",children:s.jsx(hd,{className:"w-4 h-4"})})]})]})},oe.id)})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Add Equipment to Show"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Bulk Mode"}),s.jsx("button",{onClick:()=>{S(!N),v(null),w([])},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${N?"bg-primary-600":"bg-slate-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${N?"translate-x-6":"translate-x-1"}`})})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx(lt,{placeholder:"Search equipment...",value:I,onChange:oe=>A(oe.target.value)})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[N?"Select Multiple Equipment":"Select Equipment",N&&g.length>0&&s.jsxs("span",{className:"ml-2 text-primary-600",children:["(",g.length," selected)"]})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto border border-slate-200 rounded-lg",children:qe.map(oe=>{const Ee=N?g.some(ye=>ye.id===oe.id):(m==null?void 0:m.id)===oe.id;return s.jsx("div",{onClick:()=>N?Oe(oe):v(oe),className:`p-3 cursor-pointer border-b border-slate-100 hover:bg-slate-50 ${Ee?"bg-primary-50 border-primary-200":""}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-800",children:oe.type}),s.jsxs("div",{className:"text-sm text-slate-600",children:[oe.brand," ",oe.model," - Qty: ",oe.quantity]})]}),N&&s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${Ee?"bg-primary-600 border-primary-600":"border-slate-300"}`,children:Ee&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},oe.id)})})]}),!N&&m&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Quantity Needed"}),s.jsx(lt,{type:"number",min:"1",max:m.quantity,value:j,onChange:oe=>k(parseInt(oe.target.value)||1)})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes (Optional)"}),s.jsx("textarea",{className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"3",value:R,onChange:oe=>T(oe.target.value),placeholder:"Add any notes about this equipment allocation..."})]})]}),N&&g.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Selected Equipment Details"}),s.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:g.map(oe=>s.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[s.jsxs("div",{className:"font-medium text-slate-800 mb-2",children:[oe.type," - ",oe.brand," ",oe.model]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Quantity"}),s.jsx(lt,{type:"number",min:"1",max:oe.quantity,value:oe.quantity||1,onChange:Ee=>at(oe.id,Ee.target.value),size:"sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Notes"}),s.jsx(lt,{value:oe.notes||"",onChange:Ee=>Ht(oe.id,Ee.target.value),placeholder:"Notes...",size:"sm"})]})]})]},oe.id))})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(be,{variant:"outline",onClick:()=>{d(!1),v(null),w([]),S(!1),k(1),T(""),A("")},children:"Cancel"}),s.jsx(be,{onClick:De,disabled:N?g.length===0||Je.isLoading:!m||j<=0||Je.isLoading,children:Je.isLoading?"Adding...":N?`Add ${g.length} Equipment${g.length!==1?"s":""}`:"Add Equipment"})]})]})}),M&&G&&s.jsx(Cq,{equipmentId:G,onClose:()=>{B(!1),P(null)}}),O&&W&&s.jsx(Eq,{showEquipment:W,showId:e,onClose:()=>{V(!1),ee(null)}})]}):s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:"❌ Show not found"}),s.jsx(be,{onClick:()=>t("/show-list"),children:"Back to Show List"})]})})},Sq=()=>{const{showId:e}=$h(),t=Gr(),n=cn(),[r,a]=L.useState("details"),[o,d]=L.useState(!1),[m,v]=L.useState({name:"",date:"",venue:"",director:"",description:"",status:"planning"}),{data:g,isLoading:w,error:N}=ct({queryKey:["show",e],queryFn:()=>g5(e),onSuccess:A=>{v({name:A.name||"",date:A.date?A.date.split("T")[0]:"",venue:A.venue||"",director:A.director||"",description:A.description||"",status:A.status||"planning"})},onError:A=>{mt.error(`Failed to load show: ${A.message}`)}}),S=Tt({mutationFn:A=>v5(e,A),onSuccess:()=>{n.invalidateQueries(["show",e]),n.invalidateQueries(["shows"]),mt.success("Show updated successfully"),d(!1)},onError:A=>{mt.error(`Failed to update show: ${A.message}`)}}),j=Tt({mutationFn:()=>y5(e),onSuccess:()=>{n.invalidateQueries(["shows"]),mt.success("Show deleted successfully"),t("/show-list")},onError:A=>{mt.error(`Failed to delete show: ${A.message}`)}}),k=()=>{g&&(v({name:g.name||"",date:g.date?g.date.split("T")[0]:"",venue:g.venue||"",director:g.director||"",description:g.description||"",status:g.status||"planning"}),d(!0))},R=()=>{m.name&&m.date&&S.mutate(m)},T=()=>{window.confirm("Are you sure you want to delete this show?")&&j.mutate()},I=A=>{const M={planning:"bg-blue-100 text-blue-800","in-progress":"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",archived:"bg-gray-100 text-gray-800"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M[A]||"bg-gray-100 text-gray-800"}`,children:A.charAt(0).toUpperCase()+A.slice(1).replace("-"," ")})};return w?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading show details..."})]})}):N||!g?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:"❌ Show not found"}),s.jsx("p",{className:"text-slate-600 mb-4",children:(N==null?void 0:N.message)||"Show not found"}),s.jsx(be,{onClick:()=>t("/show-list"),children:"Back to Show List"})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(be,{variant:"outline",onClick:()=>t("/show-list"),className:"flex items-center space-x-2",children:[s.jsx(QC,{className:"w-4 h-4"}),s.jsx("span",{children:"Back to Shows"})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:g.name}),s.jsx("p",{className:"text-slate-600",children:new Date(g.date).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[I(g.status),!o&&s.jsxs(s.Fragment,{children:[s.jsxs(be,{variant:"outline",onClick:k,className:"flex items-center space-x-2",children:[s.jsx(La,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs(be,{variant:"outline",onClick:T,disabled:j.isLoading,className:"flex items-center space-x-2 text-red-600 hover:text-red-700",children:[s.jsx(hd,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete"})]})]})]})]}),s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>a("details"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="details"?"border-primary-500 text-primary-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Show Details"}),s.jsxs("button",{onClick:()=>a("equipment"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="equipment"?"border-primary-500 text-primary-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Equipment Management",g.equipmentCount>0&&s.jsx("span",{className:"ml-2 bg-primary-100 text-primary-600 py-0.5 px-2 rounded-full text-xs",children:g.equipmentCount})]})]})}),r==="details"&&s.jsxs(Re,{children:[s.jsx(Re.Header,{children:s.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Show Information"})}),s.jsx(Re.Body,{children:o?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Show Name *"}),s.jsx(lt,{value:m.name,onChange:A=>v({...m,name:A.target.value}),placeholder:"Enter show name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),s.jsx(lt,{type:"date",value:m.date,onChange:A=>v({...m,date:A.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Venue"}),s.jsx(lt,{value:m.venue,onChange:A=>v({...m,venue:A.target.value}),placeholder:"Enter venue"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx(lt,{value:m.director,onChange:A=>v({...m,director:A.target.value}),placeholder:"Enter director name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),s.jsxs("select",{value:m.status,onChange:A=>v({...m,status:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"archived",children:"Archived"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:m.description,onChange:A=>v({...m,description:A.target.value}),rows:"4",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter show description"})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(be,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),s.jsx(be,{onClick:R,disabled:!m.name||!m.date||S.isLoading,children:S.isLoading?"Saving...":"Save Changes"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Show Name"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:g.name})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Date"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:new Date(g.date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Venue"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:g.venue||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Director"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:g.director||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Status"}),s.jsx("div",{className:"mt-1",children:I(g.status)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Equipment Count"}),s.jsxs("p",{className:"mt-1 text-lg text-slate-900",children:[g.equipmentCount||0," items"]})]})]}),g.description&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Description"}),s.jsx("p",{className:"mt-1 text-slate-900",children:g.description})]}),g.creator&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Created By"}),s.jsx("p",{className:"mt-1 text-slate-900",children:g.creator.username})]})]})})]}),r==="equipment"&&s.jsx(w5,{})]})},_q=new hD({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),aa=({children:e})=>{const{user:t,loading:n}=lr();return n?s.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):t?e:s.jsx(th,{to:"/login"})},E3=({children:e})=>{const{user:t,loading:n,isAdmin:r}=lr();return n?s.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):t?r()?e:s.jsx(th,{to:"/dashboard"}):s.jsx(th,{to:"/login"})},gs=({children:e})=>{const[t,n]=L.useState(!0),[r,a]=L.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx(lL,{}),s.jsx(aL,{}),s.jsx(oL,{isOpen:t,isCollapsed:r,toggleSidebar:n,toggleCollapse:a}),s.jsx("main",{className:`main-content pt-16 ${t?r?"main-content-with-sidebar-collapsed":"main-content-with-sidebar":""}`,children:s.jsx("div",{className:"container-app",children:s.jsx("div",{className:"space-y-6",children:e})})})]})},jq=()=>s.jsx(Q7,{children:s.jsxs(z7,{children:[s.jsx(Dr,{path:"/login",element:s.jsx(cL,{})}),s.jsx(Dr,{path:"/",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(i3,{})})})}),s.jsx(Dr,{path:"/dashboard",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(i3,{})})})}),s.jsx(Dr,{path:"/simple-dashboard",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(zF,{})})})}),s.jsx(Dr,{path:"/equipment/new",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(fq,{})})})}),s.jsx(Dr,{path:"/equipment/:id/edit",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(uq,{})})})}),s.jsx(Dr,{path:"/equipment/:id",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(cq,{})})})}),s.jsx(Dr,{path:"/equipment",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(EU,{})})})}),s.jsx(Dr,{path:"/show-list",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(Nq,{})})})}),s.jsx(Dr,{path:"/show/:showId",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(Sq,{})})})}),s.jsx(Dr,{path:"/show/:showId/manage-equipment",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(w5,{})})})}),s.jsx(Dr,{path:"/admin",element:s.jsx(E3,{children:s.jsx(gs,{children:s.jsx(hq,{})})})}),s.jsx(Dr,{path:"/equipment-logs",element:s.jsx(E3,{children:s.jsx(gs,{children:s.jsx(pq,{})})})}),s.jsx(Dr,{path:"/settings",element:s.jsx(aa,{children:s.jsx(gs,{children:s.jsx(EB,{})})})}),s.jsx(Dr,{path:"*",element:s.jsx(th,{to:"/"})})]})}),Aq=()=>s.jsx(AD,{client:_q,children:s.jsx(wR,{children:s.jsxs(GC,{children:[s.jsx(ip,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),s.jsx(jq,{})]})})});const kq=async()=>{try{return(await Qe.get("/api/csrf-token",{withCredentials:!0})).data.csrfToken}catch(e){return console.error("Failed to fetch CSRF token:",e),null}},Tq=async()=>{Qe.defaults.withCredentials=!0;const e=localStorage.getItem("token");e&&(Qe.defaults.headers.common.Authorization=`Bearer ${e}`),Qe.interceptors.response.use(t=>t,async t=>{var r;const n=t.config;if(n&&(n.url.includes("/files/")||n.url.includes("/public-files/")))return console.log("File access error:",t),Promise.reject(t);if(((r=t.response)==null?void 0:r.status)===401&&!n._retry){n._retry=!0;try{return window.location.pathname!=="/login"&&(localStorage.removeItem("token"),delete Qe.defaults.headers.common.Authorization,alert("Your session has expired. Please log in again."),window.location.href="/login"),Promise.reject(t)}catch(a){return Promise.reject(a)}}return Promise.reject(t)});{const t=await kq();t&&Qe.interceptors.request.use(async n=>(n.method!=="get"&&(n.headers["CSRF-Token"]=t),n),n=>Promise.reject(n))}return Qe};console.log("API URL:","https://tonlager.kinsta.app");console.log("Environment PROD:",!0);console.log("Environment MODE:","production");console.log("🚀 Theater Equipment Catalog - Kinsta Deployment v3");let Ah;window.location.hostname==="tonlager.kinsta.app"?(Ah="",console.log("🎯 Kinsta detected - using relative URL")):(Ah="",console.log("🏭 Production mode - using relative URL"));Qe.defaults.baseURL=Ah;console.log("Setting axios baseURL to:",Ah);const Dq=async()=>{await Tq(),xm.createRoot(document.getElementById("root")).render(s.jsx(he.StrictMode,{children:s.jsx(Aq,{})}))};Dq();
//# sourceMappingURL=index-a8dbc198.js.map
